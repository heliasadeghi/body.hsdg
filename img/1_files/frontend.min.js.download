!function(exports){var requirejs,require,define,a,b,c,d,f,g,h,i,j,k,l,m,H0,w1,V1,lc,nc,oc,sc,mc;function n(e,t){return k.call(e,t)}function p(e,t){var n,r,o,a,s,c,l,u,d,p,f=t&&t.split("/"),b=i.map,h=b&&b["*"]||{};if(e){for(t=(e=e.split("/")).length-1,i.nodeIdCompat&&m.test(e[t])&&(e[t]=e[t].replace(m,"")),"."===e[0].charAt(0)&&f&&(e=f.slice(0,f.length-1).concat(e)),u=0;u<e.length;u++)"."===(p=e[u])?(e.splice(u,1),--u):".."===p&&(0===u||1===u&&".."===e[2]||".."===e[u-1]||0<u&&(e.splice(u-1,2),u-=2));e=e.join("/")}if((f||h)&&b){for(u=(n=e.split("/")).length;0<u;--u){if(r=n.slice(0,u).join("/"),f)for(d=f.length;0<d;--d)if(o=(o=b[f.slice(0,d).join("/")])&&o[r]){a=o,s=u;break}if(a)break;!c&&h&&h[r]&&(c=h[r],l=u)}!a&&c&&(a=c,s=l),a&&(n.splice(0,s,a),e=n.join("/"))}return e}function q(t,n){return function(){var e=l.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),c.apply(a,e.concat([t,n]))}}function u(e){var t;if(n(h,e)&&(t=h[e],delete h[e],j[e]=!0,b.apply(a,t)),!n(g,e)&&!n(j,e))throw new Error("No "+e);return g[e]}function v(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function w(e){return e?v(e):[]}function I0(e){this.element=e,this.enabled=!0,this.shown=!1,this.uid=0,this.pid=Math.ceil(Math.random()*(new Date).getTime())}function qc(){for(var e=document.querySelectorAll("picture > img, img[srcset][sizes]"),t=0;t<e.length;t++)!function(e){var t,n,i=e.parentNode;"PICTURE"===i.nodeName.toUpperCase()?(t=oc.cloneNode(),i.insertBefore(t,i.firstElementChild),setTimeout(function(){i.removeChild(t)})):(!e._pfLastSize||e.offsetWidth>e._pfLastSize)&&(e._pfLastSize=e.offsetWidth,n=e.sizes,e.sizes+=",100vw",setTimeout(function(){e.sizes=n}))}(e[t])}function rc(){clearTimeout(nc),nc=setTimeout(qc,99)}function tc(){rc(),sc&&sc.addListener&&sc.addListener(rc)}g={},h={},i={},j={},k=Object.prototype.hasOwnProperty,l=[].slice,m=/\.js$/,d=function(e,t){var n,i,r=v(e),o=r[0],t=t[1];return e=r[1],o&&(n=u(o=p(o,t))),o?e=n&&n.normalize?n.normalize(e,(i=t,function(e){return p(e,i)})):p(e,t):(o=(r=v(e=p(e,t)))[0],e=r[1],o&&(n=u(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:n}},f={require:function(e){return q(e)},exports:function(e){var t=g[e];return void 0!==t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:(t=e,function(){return i&&i.config&&i.config[t]||{}})};var t}},b=function(e,t,i,r){var o,s,c,l,p,m=[],b=typeof i,v=w(r=r||e);if("undefined"==b||"function"==b){for(t=!t.length&&i.length?["require","exports","module"]:t,l=0;l<t.length;l+=1)if("require"===(s=(c=d(t[l],v)).f))m[l]=f.require(e);else if("exports"===s)m[l]=f.exports(e),p=!0;else if("module"===s)o=m[l]=f.module(e);else if(n(g,s)||n(h,s)||n(j,s))m[l]=u(s);else{if(!c.p)throw new Error(e+" missing "+s);c.p.load(c.n,q(r,!0),function(t){return function(e){g[t]=e}}(s),{}),m[l]=g[s]}b=i?i.apply(g[e],m):void 0,e&&(o&&o.exports!==a&&o.exports!==g[e]?g[e]=o.exports:b===a&&p||(g[e]=b))}else e&&(g[e]=i)},requirejs=require=c=function(e,t,n,r,o){if("string"==typeof e)return f[e]?f[e](t):u(d(e,w(t)).f);if(!e.splice){if((i=e).deps&&c(i.deps,i.callback),!t)return;t.splice?(e=t,t=n,n=null):e=a}return t=t||function(){},"function"==typeof n&&(n=r,r=o),r?b(a,e,t,n):setTimeout(function(){b(a,e,t,n)},4),c},c.config=function(e){return c(e)},requirejs._defined=g,(define=function(e,t,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(i=t,t=[]),n(g,e)||n(h,e)||(h[e]=[e,t,i])}).amd={jQuery:!0},TINY={},TINY.box=function(){this.ver=2;var r,o,c,l,u,d,e,p=0;return{show:function(e){for(s in u={opacity:70,close:1,animate:1,fixed:1,mask:1,maskid:"",boxid:"",topsplit:2,url:0,post:0,height:0,width:0,html:0,iframe:0,uiclose:1,openjs:function(){},closejs:function(){},addClass:"",addInnerClass:""},e)u[s]=e[s];p?(r.style.display="none",clearTimeout(d),clearTimeout(p.ah),l.v&&(p.removeChild(l),l.v=0)):((r=document.createElement("div")).className="tbox "+e.addClass,(p=document.createElement("div")).className="tinner "+e.addInnerClass,(c=document.createElement("div")).className="tcontent",(o=document.createElement("div")).className="tmask",(l=document.createElement("div")).className="tclose",l.v=0,l.innerHTML="Close",l.id="tbox-close",document.body.appendChild(o),document.body.appendChild(r),r.appendChild(p),p.appendChild(c),u.uiclose&&(o.onclick=TINY.box.hide),window.onresize=TINY.box.resize),l.onclick=TINY.box.closeclick,p.id=u.boxid,o.id=u.maskid,r.style.position=u.fixed?"fixed":"absolute",u.html&&!u.animate?(p.style.backgroundImage="none",c.innerHTML=u.html,c.style.display="",p.style.width=u.width?u.width+"px":"auto",p.style.height=u.height?u.height+"px":"auto"):(c.style.display="none",!u.animate&&u.width&&u.height?(p.style.width=u.width+"px",p.style.height=u.height+"px"):p.style.width=p.style.height="100px"),u.mask?(this.mask(),this.alpha(o,1,u.opacity)):this.alpha(r,1,100),u.autohide?p.ah=setTimeout(TINY.box.hide,1e3*u.autohide):u.uiclose&&(document.onkeyup=TINY.box.esc)},fill:function(e,t,n,i,r,o){var a,s;t?u.image?((a=new Image).onload=function(){r=r||a.width,o=o||a.height,TINY.box.psh(a,i,r,o)},a.src=u.image):u.iframe?this.psh('<iframe src="'+u.iframe+'" width="'+u.width+'" frameborder="0" height="'+u.height+'"></iframe>',i,r,o):((s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){4==s.readyState&&200==s.status&&(p.style.backgroundImage="",TINY.box.psh(s.responseText,i,r,o))},n?(s.open("POST",e,!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send(n)):(s.open("GET",e,!0),s.send(null))):this.psh(e,i,r,o)},psh:function(e,t,n,i){"object"==typeof e?c.appendChild(e):c.innerHTML=e;var r=p.style.width,e=p.style.height;n&&i||(p.style.width=n?n+"px":"",p.style.height=i?i+"px":"",c.style.display="",i=i||parseInt(c.offsetHeight),n=n||parseInt(c.offsetWidth),c.style.display="none"),p.style.width=r,p.style.height=e,this.size(n,i,t)},esc:function(e){27==(e=e||window.event).keyCode&&TINY.box.hide()},hide:function(){clearInterval(d),TINY.box.alpha(r,-1,0,3),document.onkeypress=null,u.closejs&&u.closejs(),TINY.box.closed()},closeclick:function(){u.buttonjs&&u.buttonjs(),TINY.box.hide()},resize:function(){TINY.box.pos(),TINY.box.mask()},resizeToContent:function(){clearTimeout(e),e=setTimeout(function(){TINY.box.size(c.offsetWidth,c.offsetHeight,u.animate,!1)},200)},mask:function(){o.style.height=this.total(1)+"px",o.style.width=this.total(0)+"px"},pos:function(){var e=void 0!==u.top?u.top:(e=this.height()/u.topsplit-r.offsetHeight/2)<20?20:e;u.fixed||u.top||(e+=this.top()),r.style.top=e+"px",r.style.left=void 0!==u.left?u.left+"px":this.width()/2-r.offsetWidth/2+"px"},alpha:function(e,t,n){clearInterval(e.ai),t&&(e.style.opacity=0,e.style.filter="alpha(opacity=0)",e.style.display="block",TINY.box.pos()),e.ai=setInterval(function(){TINY.box.ta(e,n,t)},20)},ta:function(e,t,n){var i=Math.round(100*e.style.opacity);i==t?(clearInterval(e.ai),-1==n?(e.style.display="none",e==r?TINY.box.alpha(o,-1,0,2):c.innerHTML=p.style.backgroundImage=""):e==o?this.alpha(r,1,100):(r.style.filter="",TINY.box.fill(u.html||u.url,u.url||u.iframe||u.image,u.post,u.animate,u.width,u.height))):(n=t-Math.floor(.5*Math.abs(t-i))*n,e.style.opacity=n/100,e.style.filter="alpha(opacity="+n+")")},tr:function(){c.offsetWidth+""+c.offsetHeight!==TINY.box.csize&&(clearInterval(d),TINY.box.resizeToContent())},size:function(e,t,n,i){var r,o,a=!1!==i;n?(clearInterval(p.si),r=parseInt(p.style.width)>e?-1:1,o=parseInt(p.style.height)>t?-1:1,p.si=setInterval(function(){TINY.box.ts(e,r,t,o,a)},20)):(p.style.backgroundImage="none",u.close&&(p.appendChild(l),l.v=1),p.style.width=e+"px",p.style.height=t+"px",c.style.display="",this.pos(),u.openjs&&a&&u.openjs(c))},ts:function(e,t,n,i,r){var o=parseInt(p.style.width),a=parseInt(p.style.height);o==e&&a==n?(clearInterval(p.si),p.style.backgroundImage="none",c.style.display="block",u.close&&(p.appendChild(l),l.v=1),TINY.box.csize=c.offsetWidth+""+c.offsetHeight,d=setInterval(function(){TINY.box.tr()},200),u.openjs&&r&&u.openjs(c)):(o!=e&&(p.style.width=e-Math.floor(.6*Math.abs(e-o))*t+"px"),a!=n&&(p.style.height=n-Math.floor(.6*Math.abs(n-a))*i+"px"),this.pos())},top:function(){return document.documentElement.scrollTop||document.body.scrollTop},width:function(){return self.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},height:function(){return self.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},total:function(e){var t=document.body,n=document.documentElement;return e?Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.clientHeight,n.clientHeight)):Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.clientWidth,n.clientWidth))},closed:function(){}}}(),H0=jQuery,H0.extend(I0.prototype,{show:function(e,t,n){var i;this.uid++,!this.shown&&this.enabled&&(i=this.getOverlay(),(n||H0.noop).call(i),i.find(".tipswift-inner").remove().end().append(e.addClass("tipswift-inner")).css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body).get(0).className=["tipswift"].concat(t.extraClass).join(" "),this.setPosition(t),H0(window).bind("resize.tipSwiftElem-"+this.pid,H0.proxy(function(){this.setPosition(t)},this)),i.addClass("tipswift-"+this.gravity),t.showEffect.call(i,t,this.gravity),this.shown=!0),H0(this.element).data("tipswift.instance",this.uid)},hide:function(e){this.shown&&this.enabled&&(H0(window).unbind("resize.tipSwiftElem-"+this.pid),e.hideEffect.call(this.getOverlay(),e,this.gravity),this.shown=!1)},remove:function(){this.getOverlay().remove(),this.shown=!1},setPosition:function(e){var t,n=this.getOverlay(),i=this.element,r=H0.extend({},H0(i).offset(),{width:i.offsetWidth,height:i.offsetHeight}),o=n[0].offsetWidth,a=n[0].offsetHeight;switch(this.gravity=H0.isFunction(e.gravity)?e.gravity.call(i):e.gravity,this.gravity.charAt(0).toLowerCase()){case"s":t={top:r.top-a-e.offset,left:r.left+r.width/2-o/2};break;case"e":t={top:r.top+r.height/2-a/2,left:r.left-o-e.offset};break;case"w":t={top:r.top+r.height/2-a/2,left:r.left+r.width+e.offset};break;case"n":default:t={top:r.top+r.height+e.offset,left:r.left+r.width/2-o/2}}2===this.gravity.length&&("w"===this.gravity.charAt(1).toLowerCase()?t.left=r.left+r.width/2-15:t.left=r.left+r.width/2-o-15),n.css(t)},getPositionner:function(t){var n=this.uid,i=this;return function(){var e;n===H0(i.element).data("tipswift.instance")&&(e=i.getOverlay().stop(!0,!0),i.setPosition(t),t.showEffect.call(e,t,i.gravity),e.stop(!0,!0))}},getOverlay:function(){return this.overlay||(this.overlay=H0('<div class="tipswift"></div>').html('<div class="tipswift-arrow"></div>')),this.overlay},validate:function(){this.element.parentNode||(this.remove(),this.element=null)},focus:function(e){H0(e||":input:eq(0)",this.getOverlay()).focus()},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}}),H0.fn.tipSwift=function(e){if("boolean"==typeof e&&e)return this.data("tipswift");if("string"==typeof e){var t=this.data("tipswift");return t&&t[e](),this}var n=this;return e=H0.extend({},H0.tipSwift.defaultCfg,e),H0.each(e.plugins,function(){this.init(n,e)}),e.live||this.each(function(){H0.tipSwift.get(this,e)}),this},H0.tipSwift={get:function(e,t){var n=H0.data(e,"tipswift");return n||(n=new I0(e,H0.tipSwift.elementOptions(e)),H0.data(e,"tipswift",n),H0.each(t.plugins,function(){H0.isFunction(this.initInstance)&&this.initInstance(n)})),n},elementOptions:function(e,t){return H0.metadata?H0.extend({},t,H0(e).metadata()):t},gravity:{autoNS:function(){return H0(this).offset().top>H0(document).scrollTop()+H0(window).height()/2?"s":"n"},autoWE:function(){return H0(this).offset().left>H0(document).scrollLeft()+H0(window).width()/2?"e":"w"}},effects:{show:function(e){this.css({visibility:"visible",opacity:e.opacity})},hide:function(){this.remove()},fadeIn:function(e){this.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:e.opacity},"fast")},fadeOut:function(){this.stop().fadeOut(function(){H0(this).remove()})},slideOutWE:function(e,t){this.stop().css({visibility:"visible",opacity:1}).animate({left:"+="+15*(-1<t.indexOf("e")?-1:1),opacity:e.opacity})},slideInWE:function(e,t){this.stop().animate({left:"-="+15*(-1<t.indexOf("e")?-1:1),opacity:0},function(){H0(this).remove()})}},plugins:{}},H0.tipSwift.defaultCfg={live:!1,gravity:"n",offset:0,opacity:.9,showEffect:H0.tipSwift.effects.show,hideEffect:H0.tipSwift.effects.hide,extraClass:[],html:!1,plugins:[]},H0.tipSwift.plugins.tip=function e(t){if(!(this instanceof e))return new e(t);this.options=t||{}},H0.extend(H0.tipSwift.plugins.tip.prototype,{pluginCfg:{showOn:["mouseenter","focusin"],hideOn:["mouseleave","focusout"],title:"title",fallback:"",delayIn:0,delayOut:0,filterContent:H0.noop},init:function(e,t){var n=this.options=H0.extend({},t,this.pluginCfg,this.options),t=n.live?"live":"bind";n.extraClass=["tip"].concat(n.extraClass.slice(0)),e=H0(e),this.fixTitle(e),e[t](n.showOn.join(" "),H0.proxy(this.show,this)),e[t](n.hideOn.join(" "),H0.proxy(this.hide,this))},initInstance:function(e){e._tip={showTimer:null,hideTimer:null}},fixTitle:function(e){var t;e.each(function(){!(t=H0(this)).attr("title")&&t.data("tipswift.title")||t.data("tipswift.title",t.attr("title")||"").removeAttr("title")})},show:function(e){var t,n=H0.tipSwift.get(e.currentTarget,this.options);clearTimeout(n._tip.hideTimer),this.options.delayIn?(this.fixTitle(H0(n.element)),t=this,n._tip.showTimer=setTimeout(function(){t.doShow(n)},this.options.delayIn)):this.doShow(n)},doShow:function(e){var t,n=this.options,i=H0(e.element);this.fixTitle(i),"string"==typeof n.title?t="title"===n.title?i.data("tipswift.title"):i.attr(n.title):H0.isFunction(n.title)&&(t=n.title.call(e)),t=(""+t).replace(/(^\s*|\s*$)/,"")||n.fallback,t=H0("<div>")[n.html?"html":"text"](t),e.show(t,n,function(){n.filterContent(t,e.getPositionner(n),e)})},hide:function(e){var t,n=H0.tipSwift.get(e.currentTarget,this.options);clearTimeout(n._tip.showTimer),this.options.delayOut?(t=this,n._tip.hideTimer=setTimeout(function(){t.doHide(n)},this.options.delayOut)):this.doHide(n)},doHide:function(e){e.hide(this.options)}}),H0.tipSwift.openedDialog,H0.tipSwift.hidingDialog=!1,H0.tipSwift.btnUid=0,H0.tipSwift.btnActions={},H0.tipSwift.templates={},H0.tipSwift.templates.dialog=function(e,n,t,i){var r,o=H0('<span class="tipswift-title"></span>'),a=H0('<span class="tipswift-body"></span>'),s=H0('<span class="tipswift-buttons"></span>');return H0.each(t.buttons,function(e,t){r="btn-tipswift-"+H0.tipSwift.btnUid++,s.append(H0(n(e,t.label,r))),H0.tipSwift.btnActions[r]=t.action||H0.noop}),t&&"string"==typeof t.body?e.append(a.html(t.body)):t&&"function"==typeof t.body&&e.append(a.html(t.body())),e.append(s).prepend(o.html(t.title)),function(){t.filterContent(o,a,s,i.getPositionner(t),i)}},H0.tipSwift.templates.dialogButton=function(e,t,n){return'<input type="button" id="'+n+'" name="'+e+'" value="'+t+'" />'},H0.tipSwift.plugins.dialog=function e(t){if(!(this instanceof e))return new e(t);this.options=t||{}},H0.extend(H0.tipSwift.plugins.dialog.prototype,{pluginCfg:{showOn:["click"],dialogTemplate:H0.tipSwift.templates.dialog,buttonTemplate:H0.tipSwift.templates.dialogButton,submitOnEnter:0,filterContent:H0.noop},init:function(e,t){var n=this.options=H0.extend({},t,this.pluginCfg,this.options),t=n.live?"live":"bind";n.html=!0,n.extraClass=["dialog"].concat(n.extraClass.slice(0)),(e=H0(e))[t](n.showOn.join(" "),H0.proxy(this.trigger,this))},initInstance:function(e){e._dialog={shown:!1}},trigger:function(e){e.preventDefault(),this.show(H0.tipSwift.get(e.currentTarget,this.options))},show:function(t){var n,i,r,e,o,a;t._dialog.shown||(H0.tipSwift.openedDialog&&this.hide(H0.tipSwift.openedDialog),t.shown&&t.remove(),n=this.options,i=t.getOverlay(),r=this,e=H0("<div>"),a=n.dialogTemplate(e,n.buttonTemplate,n,t),t.show(e,n,a),t.disable(),t._dialog.shown=!0,H0.tipSwift.openedDialog=t,i.delegate("[id^=btn-tipswift-]","click",function(e){e.stopPropagation(),e.target=t.element,"boolean"==typeof(o=H0.tipSwift.btnActions[H0(this).attr("id")].call(i,e))&&!o||r.hide(t)}),"boolean"==typeof n.submitOnEnter&&!n.submitOnEnter||i.delegate("input, select, button","keydown",function(e){13!==e.which||/btn-tipswift/.test(H0(e.currentTarget).attr("id"))||i.find("[id^=btn-tipswift-]").eq(n.submitOnEnter).click()}),t.focus())},hide:function(e){e._dialog.shown&&(H0.tipSwift.hidingDialog=!0,e.enable(),e.hide(this.options),e._dialog.shown=!1,H0.tipSwift.hidingDialog=!1,H0.tipSwift.openedDialog=null)}}),function($){var BB,openedDialog,BB=window.BB||{};BB.Configs=BB.Configs||{},BB.Data=BB.Data||{},BB.Data.bbcomToolTipMarkup={remove:'<a class="remove" href="#">remove</a> <a class="close"></>'},$.tipSwift.templates={},$.tipSwift.templates.removeDialog=function(e,t,n){var i=$('<span class="tipswift-body"></span>');return e.append(i.html(BB.Data.bbcomToolTipMarkup.remove)),function(){t.filterContent(i,n.getPositionner(t),n)}},$.tipSwift.plugins.removeDialog=function(e){if(!(this instanceof arguments.callee))return new arguments.callee(e);this.options=e||{}},$.extend($.tipSwift.plugins.removeDialog.prototype,{pluginCfg:{offset:4,gravity:"ne",showOn:["click"],buttons:{close:{label:"close"}},dialogTemplate:$.tipSwift.templates.removeDialog,filterContent:$.noop},init:function(e,t){var n=this.options=$.extend({},t,this.pluginCfg,this.options),t=n.live?"live":"bind";n.html=!0,n.extraClass=["dialog"].concat(n.extraClass.slice(0)),(e=$(e))[t](n.showOn.join(" "),$.proxy(this.trigger,this))},initInstance:function(e){e._dialog={shown:!1}},trigger:function(e){e.preventDefault(),this.show($.tipSwift.get(e.currentTarget,this.options))},show:function(ts){var o,ov,self,dialog,filterContent;ts._dialog.shown?this.hide(openedDialog):(openedDialog&&this.hide(openedDialog),ts.shown&&ts.remove(),o=this.options,ov=ts.getOverlay(),self=this,dialog=$("<div>"),filterContent=o.dialogTemplate(dialog,o,ts),ts.show(dialog,o,filterContent),ts.disable(),ts._dialog.shown=!0,openedDialog=ts,ov.find("a.close").click(function(){return self.hide(ts),!1}),ov.find("a.remove").click(function(e){e.target=ts.element,self.hide(ts);var callback=eval(o.action);return"function"==typeof callback&&callback(e.target),!1}),ts.focus())},hide:function(e){e._dialog.shown&&(hidingDialog=!0,e.enable(),e.hide(this.options),e._dialog.shown=!1,hidingDialog=!1,openedDialog=null)}})}(jQuery),w1=jQuery,w1.fn.bbTabControl=function(e){var a={tabMarginOffsetH:20,tabMarginOffsetV:15,defaultSelection:0};return w1.extend(a,e),this.each(function(){var n,i=this,r=0,o="number"==typeof a.defaultSelection?a.defaultSelection:0;!0!==w1.data(i,"initialized")&&(this.initialize=function(){w1.data(i,"initialized",!0),w1(this).prepend('<div class="tab-top"></div>'),n=w1(this).append('<div id="guide-control-panel" class="tab-control-panel"><ul class="tab-control-panel-controls"></ul></div>').find(".tab-control-panel-controls"),w1(this).children(".tab").each(function(e){w1(this).css({width:w1(i).width()-a.tabMarginOffsetH+"px",height:w1(i).height()-w1(n).height()-a.tabMarginOffsetV+"px",display:e===o?"block":"none"});var t=w1(w1(this).find("label")[0]).remove().html(),t=w1(e===o?'<li class="selected"><div>'+t+"</div></li>":"<li><div>"+t+"</div></li>");w1(t).appendTo(n).bind("click",i.handleControlClick.curry(this)),w1(this).find(".next-tab-link").bind("click",i.handleNextTabClick.bind(this))}),i.indexTabIDs(),i.featuredTabLinks(),i.setTab(w1(this).children(".tab").eq(o).get(0))},this.handleNextTabClick=function(e){e.preventDefault();e=w1(i).children(".tab");if(e.length<=r+1)return!1;i.setTab(e[r+1])},this.indexTabIDs=function(){w1(".tab-control-panel ul li").each(function(e){e+=1;w1(this).attr({id:"guide-tab-"+e})}),w1(".bb-rotator-panel").each(function(e){e+=1;w1(this).attr({id:"guide-tab-slide-"+e})})},this.featuredTabLinks=function(){var e=w1(i).find(".featured-tab-link"),t=w1(i).children(".tab");e.click(function(e){e.preventDefault();e=parseFloat(w1(this).attr("rel"));i.setTab(t[e])})},this.setTab=function(t){w1(i).find(".tab").each(function(e){this===t?(w1(this).css({display:"block"}),r=e):w1(this).css({display:"none"})}),w1(n).find("li").each(function(e){e===r?w1(this).addClass("selected").find("div").append('<span class="selected-tab"></span>'):w1(this).removeClass("selected").find("span.selected-tab").remove()})},this.handleControlClick=function(e,t){t.preventDefault(),i.setTab(e)},this.initialize())})},V1=jQuery,V1.fn.textareaAutoheight=function(e){var s=V1.extend({minHeight:0,extraHeight:0},e);return this.each(function(){var n,i=this,r=V1(this),o=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","fontFamily","lineHeight","fontWeight","width"],a={position:"absolute",display:"none","word-wrap":"break-word"},t=0;s.minHeight=0===s.minHeight?r.outerHeight():s.minHeight,this.init=function(){i.buildClone(),i.buildStyles(),i.getDefault(),r.bind("keyup.autoheight paste.autoheight",i.handleKeypress).bind("focus.autoheight",i.buildStyles)},this.buildStyles=function(){r.css({overflow:"hidden"}),setTimeout(i.getStyles,500)},this.getDefault=function(){t=r.height()},this.buildClone=function(){var e=i.getStyles(),e=V1("<div />",{class:"dummy",css:e}).appendTo(r.parent());n=e},this.getStyles=function(){for(var e={},t=0,n=o.length;t<n;t++)e[o[t].toString()]=r.css(o[t].toString());return V1.extend(e,a)},this.handleKeypress=function(e){var t=r.val().replace(/&/g,"&amp;").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />");n.html(t+"&nbsp;"),13===e.keyCode&&n.html(n.html()+"<br />"),i.expandTextarea()},this.expandTextarea=function(){var e=""!==r.val()&&n.height()>t?n.height()+5+s.extraHeight+"px":t+"px";parseFloat(e)<=parseFloat(s.minHeight)&&0!==s.minHeight&&(e=s.minHeight+"px"),r.height(e)},i.init()})},lc=window,mc=navigator.userAgent,lc.HTMLPictureElement&&/ecko/.test(mc)&&mc.match(/rv\:(\d+)/)&&RegExp.$1<45&&addEventListener("resize",(oc=document.createElement("source"),sc=lc.matchMedia&&matchMedia("(orientation: landscape)"),oc.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?tc():document.addEventListener("DOMContentLoaded",tc),rc)),function(e,o,l){"use strict";var r,u,a;o.createElement("picture");function t(){}function n(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i||!1):e.attachEvent&&e.attachEvent("on"+t,n)}var w={},s=!1,i=o.createElement("img"),d=i.getAttribute,p=i.setAttribute,m=i.removeAttribute,c=o.documentElement,f={},_={algorithm:""},b="data-pfsrc",h=b+"set",g=navigator.userAgent,S=/rident/.test(g)||/ecko/.test(g)&&g.match(/rv\:(\d+)/)&&35<RegExp.$1,k="currentSrc",v=/\s+\+?\d+(e\d+)?w/,y=/(\([^)]+\))?\s*(.+)/,C=e.picturefillCFG,A="font-size:100%!important;",T=!0,E={},x={},M=e.devicePixelRatio,D={px:1,in:96},I=o.createElement("a"),O=!1,$=/^[ \t\n\r\u000c]+/,P=/^[, \t\n\r\u000c]+/,R=/^[^ \t\n\r\u000c]+/,L=/[,]+$/,U=/^\d+$/,j=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,g=function(t){var n={};return function(e){return e in n||(n[e]=t(e)),n[e]}};function F(e){return" "===e||"\t"===e||"\n"===e||"\f"===e||"\r"===e}function z(e,t){return e.w?(e.cWidth=w.calcListLength(t||"100vw"),e.res=e.w/e.cWidth):e.res=e.d,e}var N,B,H,Y,q,G,W,V,K,Z,X,J,Q,ee,te,ne,ie,re=(N=/^([\d\.]+)(em|vw|px)$/,B=g(function(e){return"return "+function(){for(var e=arguments,t=0,n=e[0];++t in e;)n=n.replace(e[t],e[++t]);return n}((e||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"}),function(e,t){var n;if(!(e in E))if(E[e]=!1,t&&(n=e.match(N)))E[e]=n[1]*D[n[2]];else try{E[e]=new Function("e",B(e))(D)}catch(e){}return E[e]}),oe=function(e){if(s){var t,n,i,r=e||{};if(r.elements&&1===r.elements.nodeType&&("IMG"===r.elements.nodeName.toUpperCase()?r.elements=[r.elements]:(r.context=r.elements,r.elements=null)),i=(t=r.elements||w.qsa(r.context||o,r.reevaluate||r.reselect?w.sel:w.selShort)).length){for(w.setupRun(r),O=!0,n=0;n<i;n++)w.fillImg(t[n],r);w.teardownRun(r)}}};function ae(e,t){return e.res-t.res}function se(e,t){var n,i,r;if(e&&t)for(r=w.parseSet(t),e=w.makeUrl(e),n=0;n<r.length;n++)if(e===w.makeUrl(r[n].url)){i=r[n];break}return i}function ce(t,u){function e(e){var e=e.exec(t.substring(a));if(e)return e=e[0],a+=e.length,e}var d,p,n,i,r,o=t.length,a=0,m=[];function s(){for(var e,t,n,i,r,o,a,s=!1,c={},l=0;l<p.length;l++)i=(a=p[l])[a.length-1],r=a.substring(0,a.length-1),o=parseInt(r,10),a=parseFloat(r),U.test(r)&&"w"===i?((e||t)&&(s=!0),0===o?s=!0:e=o):j.test(r)&&"x"===i?((e||t||n)&&(s=!0),a<0?s=!0:t=a):U.test(r)&&"h"===i?((n||t)&&(s=!0),0===o?s=!0:n=o):s=!0;s||(c.url=d,e&&(c.w=e),t&&(c.d=t),n&&(c.h=n),n||t||e||(c.d=1),1===c.d&&(u.has1x=!0),c.set=u,m.push(c))}for(;;){if(e(P),o<=a)return m;d=e(R),p=[],","===d.slice(-1)?(d=d.replace(L,""),s()):function(){for(e($),n="",i="in descriptor";;){if(r=t.charAt(a),"in descriptor"===i)if(F(r))n&&(p.push(n),n="",i="after descriptor");else{if(","===r)return a+=1,n&&p.push(n),s();if("("===r)n+=r,i="in parens";else{if(""===r)return n&&p.push(n),s();n+=r}}else if("in parens"===i)if(")"===r)n+=r,i="in descriptor";else{if(""===r)return p.push(n),s();n+=r}else if("after descriptor"===i&&!F(r)){if(""===r)return s();i="in descriptor",--a}a+=1}}()}}function le(e){var t,n,i,r,o,a,s=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,c=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(i=(n=function(e){var t,n="",i=[],r=[],o=0,a=0,s=!1;function c(){n&&(i.push(n),n="")}function l(){i[0]&&(r.push(i),i=[])}for(;;){if(""===(t=e.charAt(a)))return c(),l(),r;if(s)"*"!==t||"/"!==e[a+1]?a+=1:(s=!1,a+=2,c());else{if(F(t)){if(e.charAt(a-1)&&F(e.charAt(a-1))||!n){a+=1;continue}if(0===o){c(),a+=1;continue}t=" "}else if("("===t)o+=1;else if(")"===t)--o;else{if(","===t){c(),l(),a+=1;continue}if("/"===t&&"*"===e.charAt(a+1)){s=!0,a+=2;continue}}n+=t,a+=1}}}(e)).length,t=0;t<i;t++)if(o=(r=n[t])[r.length-1],a=o,s.test(a)&&0<=parseFloat(a)||(c.test(a)||("0"===a||"-0"===a||"+0"===a))){if(o=o,r.pop(),0===r.length)return o;if(r=r.join(" "),w.matchesMedia(r))return o}return"100vw"}function ue(){2===Y.width&&(w.supSizes=!0),u=w.supSrcset&&!w.supSizes,s=!0,setTimeout(oe)}e.console&&console.warn,k in i||(k="src"),f["image/jpeg"]=!0,f["image/gif"]=!0,f["image/png"]=!0,f["image/svg+xml"]=o.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),w.ns=("pf"+(new Date).getTime()).substr(0,9),w.supSrcset="srcset"in i,w.supSizes="sizes"in i,w.supPicture=!!e.HTMLPictureElement,w.supSrcset&&w.supPicture&&!w.supSizes&&(H=o.createElement("img"),i.srcset="data:,a",H.src="data:,a",w.supSrcset=i.complete===H.complete,w.supPicture=w.supSrcset&&w.supPicture),w.supSrcset&&!w.supSizes?(H="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",(Y=o.createElement("img")).onload=ue,Y.onerror=ue,Y.setAttribute("sizes","9px"),Y.srcset=H+" 1w,data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw== 9w",Y.src=H):s=!0,w.selShort="picture>img,img[srcset]",w.sel=w.selShort,w.cfg=_,w.DPR=M||1,w.u=D,w.types=f,w.setSize=t,w.makeUrl=g(function(e){return I.href=e,I.href}),w.qsa=function(e,t){return"querySelector"in e?e.querySelectorAll(t):[]},w.matchesMedia=function(){return e.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?w.matchesMedia=function(e){return!e||matchMedia(e).matches}:w.matchesMedia=w.mMQ,w.matchesMedia.apply(this,arguments)},w.mMQ=function(e){return!e||re(e)},w.calcLength=function(e){e=re(e,!0)||!1;return e=e<0?!1:e},w.supportsType=function(e){return!e||f[e]},w.parseSize=g(function(e){e=(e||"").match(y);return{media:e&&e[1],length:e&&e[2]}}),w.parseSet=function(e){return e.cands||(e.cands=ce(e.srcset,e)),e.cands},w.getEmValue=function(){var e,t,n,i;return!r&&(e=o.body)&&(t=o.createElement("div"),n=c.style.cssText,i=e.style.cssText,t.style.cssText="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",c.style.cssText=A,e.style.cssText=A,e.appendChild(t),r=t.offsetWidth,e.removeChild(t),r=parseFloat(r,10),c.style.cssText=n,e.style.cssText=i),r||16},w.calcListLength=function(e){var t;return e in x&&!_.uT||(t=w.calcLength(le(e)),x[e]=t||D.width),x[e]},w.setRes=function(e){if(e)for(var t,n=0,i=(t=w.parseSet(e)).length;n<i;n++)z(t[n],e.sizes);return t},w.setRes.res=z,w.applySetCandidate=function(e,t){if(e.length){var n,i,r,o,a,s,c,l,u,d,p,m,f,b,h=t[w.ns],g=w.DPR,v=h.curSrc||t[k],y=h.curCan||(c=t,l=v,y=e[0].set,(y=se(l,y=!y&&l?(y=c[w.ns].sets)&&y[y.length-1]:y))&&(l=w.makeUrl(l),c[w.ns].curSrc=l,(c[w.ns].curCan=y).res||z(y,y.set.sizes)),y);if(y&&y.set===e[0].set&&((s=S&&!t.complete&&y.res-.1>g)||(y.cached=!0,y.res>=g&&(a=y))),!a)for(e.sort(ae),a=e[(o=e.length)-1],i=0;i<o;i++)if((n=e[i]).res>=g){a=e[r=i-1]&&(s||v!==w.makeUrl(n.url))&&(u=e[r].res,d=n.res,p=g,m=e[r].cached,b=f=void 0,u="saveData"===_.algorithm?2.7<u?p+1:(b=(d-p)*(f=Math.pow(u-.6,1.5)),m&&(b+=.1*f),u+b):1<p?Math.sqrt(u*d):u,p<u)?e[r]:n;break}a&&(y=w.makeUrl(a.url),h.curSrc=y,h.curCan=a,y!==v&&w.setSrc(t,a),w.setSize(t))}},w.setSrc=function(e,t){e.src=t.url,"image/svg+xml"===t.set.type&&(t=e.style.width,e.style.width=e.offsetWidth+1+"px",e.offsetWidth+1&&(e.style.width=t))},w.getSet=function(e){for(var t,n,i=!1,r=e[w.ns].sets,o=0;o<r.length&&!i;o++)if((t=r[o]).srcset&&w.matchesMedia(t.media)&&(n=w.supportsType(t.type))){i=t="pending"===n?n:t;break}return i},w.parseSets=function(e,t,n){var i,r,o,a,s=t&&"PICTURE"===t.nodeName.toUpperCase(),c=e[w.ns];c.src!==l&&!n.src||(c.src=d.call(e,"src"),c.src?p.call(e,b,c.src):m.call(e,b)),c.srcset!==l&&!n.srcset&&w.supSrcset&&!e.srcset||(i=d.call(e,"srcset"),c.srcset=i,a=!0),c.sets=[],s&&(c.pic=!0,function(e,t){for(var n,i,r=e.getElementsByTagName("source"),o=0,a=r.length;o<a;o++)(n=r[o])[w.ns]=!0,(i=n.getAttribute("srcset"))&&t.push({srcset:i,media:n.getAttribute("media"),type:n.getAttribute("type"),sizes:n.getAttribute("sizes")})}(t,c.sets)),c.srcset?(r={srcset:c.srcset,sizes:d.call(e,"sizes")},c.sets.push(r),(o=(u||c.src)&&v.test(c.srcset||""))||!c.src||se(c.src,r)||r.has1x||(r.srcset+=", "+c.src,r.cands.push({url:c.src,d:1,set:r}))):c.src&&c.sets.push({srcset:c.src,sizes:null}),c.curCan=null,c.curSrc=l,c.supported=!(s||r&&!w.supSrcset||o&&!w.supSizes),a&&w.supSrcset&&!c.supported&&(i?(p.call(e,h,i),e.srcset=""):m.call(e,h)),c.supported&&!c.srcset&&(!c.src&&e.src||e.src!==w.makeUrl(c.src))&&(null===c.src?e.removeAttribute("src"):e.src=c.src),c.parsed=!0},w.fillImg=function(e,t){var n,i=t.reselect||t.reevaluate;e[w.ns]||(e[w.ns]={}),n=e[w.ns],!i&&n.evaled===a||(n.parsed&&!t.reevaluate||w.parseSets(e,e.parentNode,t),n.supported?n.evaled=a:(t=e,n=w.getSet(t),e=!1,"pending"!==n&&(e=a,n&&(n=w.setRes(n),w.applySetCandidate(n,t))),t[w.ns].evaled=e))},w.setupRun=function(){O&&!T&&M===e.devicePixelRatio||(T=!1,M=e.devicePixelRatio,E={},x={},w.DPR=M||1,D.width=Math.max(e.innerWidth||0,c.clientWidth),D.height=Math.max(e.innerHeight||0,c.clientHeight),D.vw=D.width/100,D.vh=D.height/100,a=[D.height,D.width,M].join("-"),D.em=w.getEmValue(),D.rem=D.em)},w.supPicture?w.fillImg=oe=t:(X=e.attachEvent?/d$|^c/:/d$|^c|^i/,J=function(){var e=o.readyState||"";Q=setTimeout(J,"loading"===e?200:999),o.body&&(w.fillImgs(),(q=q||X.test(e))&&clearTimeout(Q))},Q=setTimeout(J,o.body?9:99),ee=c.clientHeight,n(e,"resize",(G=function(){T=Math.max(e.innerWidth||0,c.clientWidth)!==D.width||c.clientHeight!==ee,ee=c.clientHeight,T&&w.fillImgs()},W=99,Z=function(){var e=new Date-K;e<W?V=setTimeout(Z,W-e):(V=null,G())},function(){K=new Date,V=V||setTimeout(Z,W)})),n(o,"readystatechange",J)),w.picturefill=oe,w.fillImgs=oe,w.teardownRun=t,oe._=w,e.picturefillCFG={pf:w,push:function(e){var t=e.shift();"function"==typeof w[t]?w[t].apply(w,e):(_[t]=e[0],O&&w.fillImgs({reselect:!0}))}};for(;C&&C.length;)e.picturefillCFG.push(C.shift());e.picturefill=oe,"object"==typeof module&&"object"==typeof module.exports?module.exports=oe:"function"==typeof define&&define.amd&&define("picturefill",function(){return oe}),w.supPicture||(f["image/webp"]=(te="image/webp",ne="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",(ie=new e.Image).onerror=function(){f[te]=!1,oe()},ie.onload=function(){f[te]=1===ie.width,oe()},ie.src=ne,"pending"))}(window,document),function(e,t){t=t(e,e.document);e.lazySizes=t,"object"==typeof module&&module.exports&&(module.exports=t)}(window,function(i,m){"use strict";if(m.getElementsByClassName){var f,n,r,t,o,a,b=m.documentElement,s=i.Date,c=i.HTMLPictureElement,l="addEventListener",h="getAttribute",u=i[l],d=i.setTimeout,p=i.requestAnimationFrame||d,g=i.requestIdleCallback,v=/^picture$/i,y=["load","error","lazyincluded","_lazyloaded"],w={},_=Array.prototype.forEach,S=function(e,t){return w[t]||(w[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),w[t].test(e[h]("class")||"")&&w[t]},k=function(e,t){S(e,t)||e.setAttribute("class",(e[h]("class")||"").trim()+" "+t)},C=function(e,t){(t=S(e,t))&&e.setAttribute("class",(e[h]("class")||"").replace(t," "))},A=function(t,n,e){var i=e?l:"removeEventListener";e&&A(t,n),y.forEach(function(e){t[i](e,n)})},T=function(e,t,n,i,r){var o=m.createEvent("Event");return(n=n||{}).instance=de,o.initEvent(t,!i,!r),o.detail=n,e.dispatchEvent(o),o},E=function(e,t){var n;!c&&(n=i.picturefill||f.pf)?(t&&t.src&&!e[h]("srcset")&&e.setAttribute("srcset",t.src),n({reevaluate:!0,elements:[e]})):t&&t.src&&(e.src=t.src)},x=function(e,t){return(getComputedStyle(e,null)||{})[t]},M=function(e,t,n){for(n=n||e.offsetWidth;n<f.minSize&&t&&!e._lazysizesWidth;)n=t.offsetWidth,t=t.parentNode;return n},D=(o=[],a=t=[],he._lsFlush=be,he),e=function(n,e){return e?function(){D(n)}:function(){var e=this,t=arguments;D(function(){n.apply(e,t)})}},I=function(e){var t,n,i=function(){t=null,e()},r=function(){var e=s.now()-n;e<99?d(r,99-e):(g||i)(i)};return function(){n=s.now(),t=t||d(r,99)}};!function(){var e,t={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(e in f=i.lazySizesConfig||i.lazysizesConfig||{},t)e in f||(f[e]=t[e]);i.lazySizesConfig=f,d(function(){f.init&&fe()})}();var O,$,P,R,L,U,j,F,z,N,B,H,Y,q,G,W,V,K,Z,X,J,Q,ee,te,ne,ie,re,oe,ae,se,ce,le,ue,de,pe=(Z=/^img$/i,X=/^iframe$/i,J="onscroll"in i&&!/(gle|ing)bot/.test(navigator.userAgent),te=-1,Y=ye,G=ee=Q=0,W=f.throttleDelay,V=f.ricTimeout,K=g&&49<V?function(){g(we,{timeout:V}),V!==f.ricTimeout&&(V=f.ricTimeout)}:e(function(){d(we)},!0),ie=e(_e),re=function(e){ie({target:e.target})},oe=e(function(t,e,n,i,r){var o,a,s,c;(s=T(t,"lazybeforeunveil",e)).defaultPrevented||(i&&(n?k(t,f.autosizesClass):t.setAttribute("sizes",i)),n=t[h](f.srcsetAttr),i=t[h](f.srcAttr),r&&(a=(o=t.parentNode)&&v.test(o.nodeName||"")),c=e.firesLoad||"src"in t&&(n||i||a),s={target:t},k(t,f.loadingClass),c&&(clearTimeout(P),P=d(ge,2500),A(t,re,!0)),a&&_.call(o.getElementsByTagName("source"),Se),n?t.setAttribute("srcset",n):i&&!a&&(X.test(t.nodeName)?function(t,n){try{t.contentWindow.location.replace(n)}catch(e){t.src=n}}(t,i):t.src=i),r&&(n||a)&&E(t,{src:i})),t._lazyRace&&delete t._lazyRace,C(t,f.lazyClass),D(function(){var e=t.complete&&1<t.naturalWidth;c&&!e||(e&&k(t,"ls-is-cached"),_e(s),t._lazyCache=!0,d(function(){"_lazyCache"in t&&delete t._lazyCache},9))},!0)}),se=function(){var e;$||(s.now()-L<999?d(se,999):(e=I(function(){f.loadMode=3,ne()}),$=!0,f.loadMode=3,ne(),u("scroll",function(){3==f.loadMode&&(f.loadMode=2),e()},!0)))},{_:function(){L=s.now(),de.elements=m.getElementsByClassName(f.lazyClass),O=m.getElementsByClassName(f.lazyClass+" "+f.preloadClass),u("scroll",ne,!0),u("resize",ne,!0),i.MutationObserver?new MutationObserver(ne).observe(b,{childList:!0,subtree:!0,attributes:!0}):(b[l]("DOMNodeInserted",ne,!0),b[l]("DOMAttrModified",ne,!0),setInterval(ne,999)),u("hashchange",ne,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(e){m[l](e,ne,!0)}),/d$|^c/.test(m.readyState)?se():(u("load",se),m[l]("DOMContentLoaded",ne),d(se,2e4)),de.elements.length?(ye(),D._lsFlush()):ne()},checkElems:ne=function(e){var t;(e=!0===e)&&(V=33),q||(q=!0,(t=W-(s.now()-G))<0&&(t=0),e||t<9?K():d(K,t))},unveil:ae=function(e){var t,n=Z.test(e.nodeName),i=n&&(e[h](f.sizesAttr)||e[h]("sizes")),r="auto"==i;(!r&&$||!n||!e[h]("src")&&!e.srcset||e.complete||S(e,f.errorClass)||!S(e,f.lazyClass))&&(t=T(e,"lazyunveilread").detail,r&&me.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,ee++,oe(e,t,r,i,n))}}),me=(le=e(function(e,t,n,i){var r,o,a;if(e._lazysizesWidth=i,e.setAttribute("sizes",i+="px"),v.test(t.nodeName||""))for(o=0,a=(r=t.getElementsByTagName("source")).length;o<a;o++)r[o].setAttribute("sizes",i);n.detail.dataAttr||E(e,n.detail)}),{_:function(){ce=m.getElementsByClassName(f.autosizesClass),u("resize",ue)},checkElems:ue=I(function(){var e,t=ce.length;if(t)for(e=0;e<t;e++)ke(ce[e])}),updateElem:ke}),fe=function(){fe.i||(fe.i=!0,me._(),pe._())};return de={cfg:f,autoSizer:me,loader:pe,init:fe,uP:E,aC:k,rC:C,hC:S,fire:T,gW:M,rAF:D}}function be(){var e=a;for(a=t.length?o:t,r=!(n=!0);e.length;)e.shift()();n=!1}function he(e,t){n&&!t?e.apply(this,arguments):(a.push(e),r||(r=!0,(m.hidden?d:p)(be)))}function ge(e){ee--,e&&!(ee<0)&&e.target||(ee=0)}function ve(e){return(H=null==H?"hidden"==x(m.body,"visibility"):H)||"hidden"!=x(e.parentNode,"visibility")&&"hidden"!=x(e,"visibility")}function ye(){var e,t,n,i,r,o,a,s,c,l,u,d,p=de.elements;if((R=f.loadMode)&&ee<8&&(e=p.length)){for(t=0,te++,l=!f.expand||f.expand<1?500<b.clientHeight&&500<b.clientWidth?500:370:f.expand,u=(de._defEx=l)*f.expFactor,d=f.hFac,H=null,Q<u&&ee<1&&2<te&&2<R&&!m.hidden?(Q=u,te=0):Q=1<R&&1<te&&ee<6?l:0;t<e;t++)if(p[t]&&!p[t]._lazyRace)if(J)if(c!==(o=!(s=p[t][h]("data-expand"))||!(o=+s)?Q:o)&&(U=innerWidth+o*d,j=innerHeight+o,a=-1*o,c=o),n=p[t].getBoundingClientRect(),(B=n.bottom)>=a&&(F=n.top)<=j&&(N=n.right)>=a*d&&(z=n.left)<=U&&(B||N||z||F)&&(f.loadHidden||ve(p[t]))&&($&&ee<3&&!s&&(R<3||te<4)||function(e,t){var n,i=e,r=ve(e);for(F-=t,B+=t,z-=t,N+=t;r&&(i=i.offsetParent)&&i!=m.body&&i!=b;)(r=0<(x(i,"opacity")||1))&&"visible"!=x(i,"overflow")&&(n=i.getBoundingClientRect(),r=N>n.left&&z<n.right&&B>n.top-1&&F<n.bottom+1);return r}(p[t],o))){if(ae(p[t]),r=!0,9<ee)break}else!r&&$&&!i&&ee<4&&te<4&&2<R&&(O[0]||f.preloadAfterLoad)&&(O[0]||!s&&(B||N||z||F||"auto"!=p[t][h](f.sizesAttr)))&&(i=O[0]||p[t]);else ae(p[t]);i&&!r&&ae(i)}}function we(){q=!1,G=s.now(),Y()}function _e(e){var t=e.target;t._lazyCache?delete t._lazyCache:(ge(e),k(t,f.loadedClass),C(t,f.loadingClass),A(t,re),T(t,"lazyloaded"))}function Se(e){var t,n=e[h](f.srcsetAttr);(t=f.customMedia[e[h]("data-media")||e[h]("media")])&&e.setAttribute("media",t),n&&e.setAttribute("srcset",n)}function ke(e,t,n){var i=e.parentNode;i&&(n=M(e,i,n),(t=T(e,"lazybeforesizes",{width:n,dataAttr:!!t})).defaultPrevented||(n=t.detail.width)&&n!==e._lazysizesWidth&&le(e,i,t,n))}}),function(u){"use strict";function e(e,t,n){var i,r,o=u.document,a=o.createElement("link");r=t||(i=(o.body||o.getElementsByTagName("head")[0]).childNodes)[i.length-1];var s=o.styleSheets;a.rel="stylesheet",a.href=e,a.media="only x",function e(t){if(o.body)return t();setTimeout(function(){e(t)})}(function(){r.parentNode.insertBefore(a,t?r:r.nextSibling)});var c=function(e){for(var t=a.href,n=s.length;n--;)if(s[n].href===t)return e();setTimeout(function(){c(e)})};function l(){a.addEventListener&&a.removeEventListener("load",l),a.media=n||"all"}return a.addEventListener&&a.addEventListener("load",l),(a.onloadcssdefined=c)(l),a}void 0!==exports?exports.loadCSS=e:u.loadCSS=e}("undefined"!=typeof global?global:this),function(){var e,t,n,i,r,o,a,s,c,l,u,d;define("angular",[],function(){return window.angular}),define("bb/ui/base-config",["angular"],function(e){"use strict";e.module("bb.ui.base-config",[]).config(["$compileProvider","$anchorScrollProvider","$sceDelegateProvider","$httpProvider",function(e,t,n,i){e.debugInfoEnabled(!1),n.resourceUrlWhitelist(["self","http://*.bodybuilding.com/**","https://*.bodybuilding.com/**"]),t.disableAutoScrolling(),i.defaults.withCredentials=!0}])}),define("bb/ui/services/cookies/cookie-service",[],function(){"use strict";return["$cookies","$log",function(t,s){var n={set:function(e,t,n,i,r,o){var a="";if(e&&!/^(?:expires|max-age|path|domain|secure)$/i.test(e)){if("string"!=typeof e&&(t=e.value||t,r=e.end||r,n=e.path||n,i=e.domain||i,o=e.secure||o,e=e.name||e),r)switch(r.constructor){case Number:a=r===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+r;break;case String:r.match(/(\w|\s|:|-|\(|\))+/g)?a=";expires="+r:s.warn('Unable to set expires for cookie to "%s". Found unknown characters.',r);break;case Date:a=";expires="+r.toUTCString()}o=encodeURIComponent(e)+"="+encodeURIComponent(t)+a+(i?";domain="+i:"")+(n?";path="+n:"")+(o?";secure":""),document.cookie=o}},get:function(e){return t[e]},remove:function(e){n.set({name:e,value:"",path:"/",domain:".bodybuilding.com",end:new Date(new Date-9999)})}};return n}]}),e=this,define("angular-cookies",["angular"],function(){return function(){!function(l){"use strict";l.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(t,r){var n,o={},a={},i=!1,s=l.copy,c=l.isUndefined;return r.addPollFn(function(){var e=r.cookies();n!=e&&(s(n=e,a),s(e,o),i&&t.$apply())})(),i=!0,t.$watch(function(){var e,t,n,i;for(e in a)c(o[e])&&(r.cookies(e,void 0),delete a[e]);for(e in o)t=o[e],l.isString(t)||(t=""+t,o[e]=t),t!==a[e]&&(r.cookies(e,t),a[e]=t,i=!0);if(i)for(e in n=r.cookies(),o)o[e]!==n[e]&&(c(n[e])?(delete o[e],delete a[e]):o[e]=a[e]=n[e])}),o}]).factory("$cookieStore",["$cookies",function(n){return{get:function(e){e=n[e];return e&&l.fromJson(e)},put:function(e,t){n[e]=l.toJson(t)},remove:function(e){delete n[e]}}}])}((window,window.angular))}.apply(e,arguments)}),define("bb/ui/services/cookies/package",["angular","./cookie-service","angular-cookies"],function(e,t){return e.module("bb.ui.services.cookies",["ngCookies"]).service("cookieService",t)}),define("bb/ui/base-run",["angular","bb/ui/services/cookies/package"],function(e){"use strict";e.module("bb.ui.base-run",["bb.ui.services.cookies"]).run(["$rootScope","cookieService",function(e,n){e.$on("login.show",function(){window.location.assign("https://www.bodybuilding.com/profile/login?referrer="+encodeURIComponent(window.location.href))}),e.$on("signup.show",function(){window.location.assign("https://www.bodybuilding.com/profile/signup?referrer="+encodeURIComponent(window.location.href))}),e.$on("gdpr.show",function(){var t;try{t=new Event("gdprShow")}catch(e){document.createEvent&&(t=document.createEvent("gdprShow"))}t&&window.dispatchEvent(t)}),e.$on("flash.set",function(e,t){n.set({name:"bb-ui-flash-message",value:t.msg,path:"/",domain:".bodybuilding.com",end:new Date+2e4})})}])}),define("bb/ui/base-app",["angular","./base-config","./base-run"],function(i){"use strict";return function(n){var e={},t=i.module("bb.ui.base-app",["bb.ui.base-config","bb.ui.base-run"]);return n=i.extend({},{html5Mode:!1,disableAngularRouting:!0,singlePageApp:!1,elementSelector:"#js-bbcom-app"},n),t.config(["$locationProvider","$provide",function(e,t){n.disableAngularRouting?t.decorator("$browser",["$delegate",function(e){return e.onUrlChange=function(){},e.url=function(){return""},e}]):e.html5Mode(n.html5Mode)}]),t.run(["$rootScope","$window",function(e,c){function t(){var s=e.$on("$locationChangeStart",function(e,t,n){var i,r,o,a;c.location.href===n&&n!==t?(o=c.location.host,r=c.location.pathname,i=c.location.search,t.match(o)&&(a=!0,a=r?t.match(r):a)&&(o=!0,i&&(-1!==(r=t.indexOf("?"))&&(-1<(a=t.indexOf("#"))?t.substring(r+1,a):t.substring(r+1))===i.substring(1)||(o=!1)),o)||(s(),e.preventDefault()),c.location.href=t):"/"===c.location.pathname&&c.location.href===t&&t!==n&&(s(),e.preventDefault(),c.location.href=t)})}n.disableAngularRouting||n.singlePageApp||t()}]),e.init=function(){i.bootstrap(i.element(n.elementSelector),["bb.ui.base-app"])},e}}),define("bb/util/is-jasmine",[],function(){"use strict";return function(){if(window.jasmine&&window.expect&&window.it&&window.describe)return!0}}),t=this,define("angular-animate",["angular"],function(){return function(){!function(t,W,V){"use strict";W.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var i="$$ngAnimateChildren";return function(e,t,n){n=n.ngAnimateChildren;W.isString(n)&&0===n.length?t.data(i,!0):e.$watch(n,function(e){t.data(i,!!e)})}}).factory("$$animateReflow",["$$rAF","$document",function(t,e){var n=e[0].body;return function(e){return t(function(){e(n.offsetWidth)})}}]).config(["$provide","$animateProvider",function(e,m){var z,N=W.noop,B=W.forEach,_=m.$$selectors,H=W.isArray,Y=W.isString,f=W.isObject,q=1,x="$$ngAnimateState",M="ng-animate",D={running:!0};function G(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType==q)return n}}function b(e){return e&&W.element(e)}function h(e){return W.element(G(e))}function I(e,t){return G(e)==G(t)}e.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(c,i,v,y,k,C,r,e,t,n){z=n,k.data(x,D);var o=r.$watch(function(){return t.totalPendingRequests},function(e,t){0===e&&(o(),r.$$postDigest(function(){r.$$postDigest(function(){D.running=!1})}))}),A=0,a=m.classNameFilter(),w=a?function(e){return a.test(e)}:function(){return!0};function l(e,t){var n=e.data(x)||{};return t&&(n.running=!0,n.structural=!0,e.data(x,n)),n.disabled||n.running&&n.structural}function u(e){var t,n=i.defer();return n.promise.$$cancelFn=function(){t&&t()},r.$$postDigest(function(){t=e(function(){n.resolve()})}),n.promise}function d(e){if(f(e))return e.tempClasses&&Y(e.tempClasses)&&(e.tempClasses=e.tempClasses.split(/\s+/)),e}function T(s,t,c,l){var u,d,e=s[0];if(e){l&&(l.to=l.to||{},l.from=l.from||{}),H(c)&&(u=c[0],d=c[1],u?d?c=u+" "+d:(c=u,t="addClass"):(c=d,t="removeClass"));var n="setClass"==t,i=n||"addClass"==t||"removeClass"==t||"animate"==t,r=s.attr("class")+" "+c;if(w(r)){var o=N,a=[],p=[],m=N,f=[],b=[],r=(" "+r).replace(/\s+/g,".");return B(function(e){if(e){var t=[],n={},i=e.substr(1).split(".");(y.transitions||y.animations)&&t.push(v.get(_[""]));for(var r=0;r<i.length;r++){var o=i[r],a=_[o];a&&!n[o]&&(t.push(v.get(a)),n[o]=!0)}return t}}(r),function(e){!h(e,t)&&n&&(h(e,"addClass"),h(e,"removeClass"))}),{node:e,event:t,className:c,isClassBased:i,isSetClassOperation:n,applyStyles:function(){l&&s.css(W.extend(l.from||{},l.to||{}))},before:function(e){o=e,g(p,a,function(){o=N,e()})},after:function(e){m=e,g(b,f,function(){m=N,e()})},cancel:function(){B(a,function(e){(e||N)(!0)}),o(!0),B(f,function(e){(e||N)(!0)}),m(!0)}}}}function h(e,t){var n=e[t],e=e["before"+t.charAt(0).toUpperCase()+t.substr(1)];if(n||e)return"leave"==t&&(e=n,n=null),b.push({event:t,fn:n}),p.push({event:t,fn:e}),!0}function g(e,i,r){var o=[];B(e,function(e){e.fn&&o.push(e)});var a=0;B(o,function(e,t){function n(){!function(e){if(i){if((i[e]||N)(),++a<o.length)return;i=null}r()}(t)}switch(e.event){case"setClass":i.push(e.fn(s,u,d,n,l));break;case"animate":i.push(e.fn(s,c,l.from,l.to,n));break;case"addClass":i.push(e.fn(s,u||c,n,l));break;case"removeClass":i.push(e.fn(s,d||c,n,l));break;default:i.push(e.fn(s,n,l))}}),i&&0===i.length&&r()}}return{animate:function(t,e,n,i,r){return i=i||"ng-inline-animate",(r=d(r)||{}).from=n?e:null,r.to=n||e,u(function(e){return p("animate",i,h(t),null,null,N,r,e)})},enter:function(t,n,i,r){return r=d(r),t=W.element(t),n=b(n),i=b(i),l(t,!0),c.enter(t,n,i),u(function(e){return p("enter","ng-enter",h(t),n,i,N,r,e)})},leave:function(t,n){return n=d(n),s(t=W.element(t)),l(t,!0),u(function(e){return p("leave","ng-leave",h(t),null,null,function(){c.leave(t)},n,e)})},move:function(t,n,i,r){return r=d(r),t=W.element(t),n=b(n),i=b(i),s(t),l(t,!0),c.move(t,n,i),u(function(e){return p("move","ng-move",h(t),n,i,N,r,e)})},addClass:function(e,t,n){return this.setClass(e,t,[],n)},removeClass:function(e,t,n){return this.setClass(e,[],t,n)},setClass:function(a,e,t,n){n=d(n);var s="$$animateClasses";if(l(a=h(a=W.element(a))))return c.$$setClassImmediately(a,e,t,n);var i=a.data(s),r=!!i,o=(i=i||{classes:{}}).classes;return e=H(e)?e:e.split(" "),B(e,function(e){e&&e.length&&(o[e]=!0)}),t=H(t)?t:t.split(" "),B(t,function(e){e&&e.length&&(o[e]=!1)}),r?(n&&i.options&&(i.options=W.extend(i.options||{},n)),i.promise):(a.data(s,i={classes:o,options:n}),i.promise=u(function(e){var t,n,i,r=G(a);if(r&&(t=a.data(s),a.removeData(s),i=a.parent(),n=r.parentNode),n&&!n.$$NG_REMOVED&&!r.$$NG_REMOVED){var r=a.data(x)||{},o=function(e,t,n){var r={};B(n=n||{},function(t,e){B(e.split(" "),function(e){r[e]=t})});var o=Object.create(null);B((e.attr("class")||"").split(/\s+/),function(e){o[e]=!0});var a=[],s=[];return B(t&&t.classes||[],function(e,t){var n=o[t],i=r[t]||{};!1===e?!n&&"addClass"!=i.event||s.push(t):!0===e&&(n&&"removeClass"!=i.event||a.push(t))}),0<a.length+s.length&&[a.join(" "),s.join(" ")]}(a,t,r.active);return o?p("setClass",o,a,i,null,function(){o[0]&&c.$$addClassImmediately(a,o[0]),o[1]&&c.$$removeClassImmediately(a,o[1])},t.options,e):e()}e()}))},cancel:function(e){e.$$cancelFn()},enabled:function(e,t){switch(arguments.length){case 2:var n;e?E(t):((n=t.data(x)||{}).disabled=!0,t.data(x,n));break;case 1:D.disabled=!e;break;default:e=!D.disabled}return!!e}};function p(n,i,r,e,t,o,a,s){var c=N,l=T(r,n,i,a);if(!l)return _(),v(),y(),S(),c;n=l.event,i=l.className;var u=(u=W.element._data(l.node))&&u.events;if(e=e||(t||r).parent(),function(e,t){if(D.disabled)return!0;if(I(e,k))return D.running;var n,i,r;do{if(0===t.length)break;var o=I(t,k),a=o?D:t.data(x)||{};if(a.disabled)return!0}while(o&&(r=!0),!1!==n&&(o=t.data("$$ngAnimateChildren"),W.isDefined(o)&&(n=o)),i=i||a.running||a.last&&!a.last.isClassBased,t=t.parent());return!r||!n&&i}(r,e))return _(),v(),y(),S(),c;var d=r.data(x)||{},p=d.active||{},m=d.totalActive||0,t=d.last,e=!1;if(0<m){var f=[];if(l.isClassBased)"setClass"==t.event?(f.push(t),E(r,i)):p[i]&&((t=p[i]).event==n?e=!0:(f.push(t),E(r,i)));else if("leave"==n&&p["ng-leave"])e=!0;else{for(var b in p)f.push(p[b]);d={},E(r,!0)}0<f.length&&B(f,function(e){e.cancel()})}if(e=l.isClassBased&&!l.isSetClassOperation&&"animate"!=n&&!e?"addClass"==n==r.hasClass(i):e)return _(),v(),y(),w(),c;p=d.active||{},m=d.totalActive||0,"leave"==n&&r.one("$destroy",function(e){var t=W.element(this),n=t.data(x);!n||(n=n.active["ng-leave"])&&(n.cancel(),E(t,"ng-leave"))}),z.addClass(r,M),a&&a.tempClasses&&B(a.tempClasses,function(e){z.addClass(r,e)});var h=A++;return m++,p[i]=l,r.data(x,{last:l,active:p,index:h,totalActive:m}),v(),l.before(function(e){var t=r.data(x);e=e||!t||!t.active[i]||l.isClassBased&&t.active[i].event!=n,_(),!0===e?S():(y(),l.after(S))}),l.cancel;function g(e){var t="$animate:"+e;u&&u[t]&&0<u[t].length&&C(function(){r.triggerHandler(t,{event:n,className:i})})}function v(){g("before")}function y(){g("after")}function w(){g("close"),s()}function _(){_.hasBeenRun||(_.hasBeenRun=!0,o())}function S(){var e;S.hasBeenRun||(l&&l.applyStyles(),S.hasBeenRun=!0,a&&a.tempClasses&&B(a.tempClasses,function(e){z.removeClass(r,e)}),(e=r.data(x))&&(l&&l.isClassBased?E(r,i):(C(function(){var e=r.data(x)||{};h==e.index&&E(r,i)}),r.data(x,e))),w())}}function s(e){e=G(e);e&&(e=W.isFunction(e.getElementsByClassName)?e.getElementsByClassName(M):e.querySelectorAll("."+M),B(e,function(e){e=(e=W.element(e)).data(x);e&&e.active&&B(e.active,function(e){e.cancel()})}))}function E(e,t){var n,i;I(e,k)?D.disabled||(D.running=!1,D.structural=!1):t&&(n=e.data(x)||{},!(i=!0===t)&&n.active&&n.active[t]&&(n.totalActive--,delete n.active[t]),!i&&n.totalActive||(z.removeClass(e,M),e.removeData(x)))}}]),m.register("",["$window","$sniffer","$timeout","$$animateReflow",function(s,e,S,n){var c,l,i,k="",C=t.ontransitionend===V&&t.onwebkittransitionend!==V?(k="-webkit-",c="WebkitTransition","webkitTransitionEnd transitionend"):(c="transition","transitionend"),A=t.onanimationend===V&&t.onwebkitanimationend!==V?(k="-webkit-",l="WebkitAnimation","webkitAnimationEnd animationend"):(l="animation","animationend"),u="Duration",r="Property",d="Delay",p="IterationCount",o="PlayState",m="$$ngAnimateKey",T="$$ngAnimateCSS3Data",E=3,x=1.5,M=1e3,f={},b=0,a=[];function h(){i=i||n(function(){a=[],i=null,f={}})}function g(e,t){i&&i(),a.push(t),i=n(function(){B(a,function(e){e()}),a=[],i=null,f={}})}var v=null,y=0,w=[];function D(e,t){var n=G(e);e=W.element(n),w.push(e);e=Date.now()+t;e<=y||(S.cancel(v),y=e,v=S(function(){B(w,function(e){e=e.data(T);e&&B(e.closeAnimationFns,function(e){e()})}),w=[]},t,!1))}function I(e,t){var n,i,r,o,a=t?f[t]:null;return a||(o=r=i=n=0,B(e,function(e){var t;e.nodeType==q&&(e=(t=s.getComputedStyle(e)||{})[c+u],n=Math.max(_(e),n),e=t[c+d],i=Math.max(_(e),i),t[l+d],o=Math.max(_(t[l+d]),o),0<(e=_(t[l+u]))&&(e*=parseInt(t[l+p],10)||1),r=Math.max(e,r))}),a={total:0,transitionDelay:i,transitionDuration:n,animationDelay:o,animationDuration:r},t&&(f[t]=a)),a}function _(e){var t=0,e=Y(e)?e.split(/\s*,\s*/):[];return B(e,function(e){t=Math.max(parseFloat(e)||0,t)}),t}function O(e,t,n,i){var r=0<=["ng-enter","ng-leave","ng-move"].indexOf(n),o=(a=(c=t).parent(),(s=a.data(m))||(a.data(m,++b),s=b),s+"-"+G(c).getAttribute("class")),a=o+" "+n,s=f[a]?++f[a].total:0,c={};0<s&&((u=!f[l=o+" "+(d=n+"-stagger")])&&z.addClass(t,d),c=I(t,l),u&&z.removeClass(t,d)),z.addClass(t,n);var l=t.data(T)||{},u=I(t,a),d=u.transitionDuration,u=u.animationDuration;if(!r||0!==d||0!==u){r=i||r&&0<d,d=0<u&&0<c.animationDelay&&0===c.animationDuration,u=l.closeAnimationFns||[];t.data(T,{stagger:c,cacheKey:a,running:l.running||0,itemIndex:s,blockTransition:r,closeAnimationFns:u});u=G(t);return r&&($(u,!0),i&&t.css(i)),d&&P(u,!0),1}z.removeClass(t,n)}function $(e,t){e.style[c+r]=t?"none":""}function P(e,t){e.style[l+o]=t?"paused":""}function R(e,t,n,i){if(O(0,t,n,i))return function(e){e&&j(t,n)}}function L(e,t,n,i,r){if(t.data(T))return function(n,i,r,e){var t=G(n),o=n.data(T);if(-1!=t.getAttribute("class").indexOf(i)&&o){var a="",s="";B(i.split(" "),function(e,t){e=(0<t?" ":"")+e;a+=e+"-active",s+=e+"-pending"});var c=[],l=o.itemIndex,u=o.stagger,d=0;0<l&&((p=0)<u.transitionDelay&&0===u.transitionDuration&&(p=u.transitionDelay*l),(b=0)<u.animationDelay&&0===u.animationDuration&&(b=u.animationDelay*l,c.push(k+"animation-play-state")),d=Math.round(100*Math.max(p,b))/100),d||(z.addClass(n,a),o.blockTransition&&$(t,!1));var p=o.cacheKey+" "+a,m=I(n,p),f=Math.max(m.transitionDuration,m.animationDuration);if(0===f)return z.removeClass(n,a),j(n,i),void r();!d&&e&&0<Object.keys(e).length&&(m.transitionDuration||(n.css("transition",m.animationDuration+"s linear all"),c.push("transition")),n.css(e));var b=Math.max(m.transitionDelay,m.animationDelay),h=b*M;0<c.length&&(";"!==(p=t.getAttribute("style")||"").charAt(p.length-1)&&(p+=";"),t.setAttribute("style",p+" "));var g,v=Date.now(),y=A+" "+C,b=(d+(b+f)*x)*M;return 0<d&&(z.addClass(n,s),g=S(function(){g=null,0<m.transitionDuration&&$(t,!1),0<m.animationDuration&&P(t,!1),z.addClass(n,a),z.removeClass(n,s),e&&(0===m.transitionDuration&&n.css("transition",m.animationDuration+"s linear all"),n.css(e),c.push("transition"))},d*M,!1)),n.on(y,_),o.closeAnimationFns.push(function(){w(),r()}),o.running++,D(n,b),w}function w(){n.off(y,_),z.removeClass(n,a),z.removeClass(n,s),g&&S.cancel(g),j(n,i);var e,t=G(n);for(e in c)t.style.removeProperty(c[e])}function _(e){e.stopPropagation();var t=e.originalEvent||e,e=t.$manualTimeStamp||t.timeStamp||Date.now(),t=parseFloat(t.elapsedTime.toFixed(E));Math.max(e-v,0)>=h&&f<=t&&r()}r()}(t,n,i,r);j(t,n),i()}function U(e,t,n,i,r){var o=R(0,t,n,r.from);if(!o)return h(),void i();var a=o;return g(0,function(){a=L(0,t,n,i,r.to)}),function(e){(a||N)(e)}}function j(e,t){z.removeClass(e,t);t=e.data(T);t&&(t.running&&t.running--,t.running&&0!==t.running||e.removeData(T))}return{animate:function(e,t,n,i,r,o){return(o=o||{}).from=n,o.to=i,U(0,e,t,r,o)},enter:function(e,t,n){return U(0,e,"ng-enter",t,n=n||{})},leave:function(e,t,n){return U(0,e,"ng-leave",t,n=n||{})},move:function(e,t,n){return U(0,e,"ng-move",t,n=n||{})},beforeSetClass:function(e,t,n,i,r){r=r||{};r=R(0,e,F(n,"-remove")+" "+F(t,"-add"),r.from);if(r)return g(0,i),r;h(),i()},beforeAddClass:function(e,t,n,i){i=i||{};i=R(0,e,F(t,"-add"),i.from);if(i)return g(0,n),i;h(),n()},beforeRemoveClass:function(e,t,n,i){i=i||{};i=R(0,e,F(t,"-remove"),i.from);if(i)return g(0,n),i;h(),n()},setClass:function(e,t,n,i,r){return r=r||{},L(0,e,(n=F(n,"-remove"))+" "+(t=F(t,"-add")),i,r.to)},addClass:function(e,t,n,i){return i=i||{},L(0,e,F(t,"-add"),n,i.to)},removeClass:function(e,t,n,i){return i=i||{},L(0,e,F(t,"-remove"),n,i.to)}};function F(e,n){var i="";return e=H(e)?e:e.split(/\s+/),B(e,function(e,t){e&&0<e.length&&(i+=(0<t?" ":"")+e+n)}),i}}])}])}(window,window.angular)}.apply(t,arguments)}),define("bb/social/commenting/views",[],{init:function(e){"use strict";e.put("bb/social/commenting/comment-post.ng.html",'<form class="CommentForm CommentMedia" name=postForm ng-submit=postScope.postComment() novalidate once-class="{\'CommentForm--reply\': isReply}"><current-user-avatar class=CommentMedia-figure sizes=55px ng-if=postScope.loggedIn></current-user-avatar><div class="CommentMedia-body CommentForm-body"><div class=CommentMedia-textarea-wrap ng-class="{\n                \'CommentMedia-textarea-wrap--focus\': postScope.focus,\n                \'CommentMedia-textarea-wrap--logged-in\': postScope.loggedIn,\n                \'CommentMedia-textarea-wrap--invalid\': (postScope.showValidation && postForm.comment.$invalid ||\n                                                       postForm.comment.$dirty && postForm.comment.$invalid)\n                                                       && !postForm.comment.$error.required\n            }"><textarea name=comment ng-required=postScope.loggedIn ng-model=postScope.data.text ng-blur=postScope.onTextareaBlur() ng-focus=postScope.onTextareaFocus() ng-click=postScope.onTextareaClick($event) ng-minlength=5 ng-maxlength=2500 ng-disabled=postScope.disablePostTextarea bb-debounce msd-elastic class="CommentMedia-textarea CommentMedia-textarea--no-reqd-red bb-input bb-input--stretch bb-textarea--stop-growing" ng-class="{\n                    \'CommentMedia-textarea--logged-in\': postScope.loggedIn\n                }" placeholder="{{ postScope.placeholder }}">\n            </textarea></div><div class=CommentMedia-char-count-and-error><div class=CommentMedia-char-count ng-show="postScope.data.text.length > 2000">{{ postScope.data.text.length }} out of 2500 characters</div><ul class="bb-validation-msg bb-list--plain CommentMedia-maxlength-err" ng-show="postScope.showValidation || postScope.apiErr || postForm.comment.$dirty && postForm.comment.$invalid" data-test=comment-textarea-errors><li class=bb-form-msg--error ng-if=postForm.comment.$error.maxlength>Comment must be no longer than 2500 characters.</li><li class=bb-form-msg--error ng-if=postForm.comment.$error.minlength data-test=comment-minlength>Comment must be at least 5 characters.</li><li class=bb-form-msg--error ng-if="postScope.apiErr === \'400\'">{{ postScope.serverErrorMessage }}</li><li class=bb-form-msg--error ng-if="postScope.apiErr === \'401\'">We were unable to post your comment. Are you logged in?</li><li class=bb-form-msg--error ng-if="postScope.apiErr === \'UNKNOWN\'">Something went wrong! Go ahead and submit again.</li><li class=bb-form-msg--error ng-if="postScope.apiErr === \'FLOOD_CONTROL\'">Slow down! Only one comment allowed every 30 seconds.</li></ul></div><div class=CommentMedia-btn-and-char-count><div vc-recaptcha key=postScope.recaptchaKey size=compact ng-model=gRecaptchaResponse class=CommentMedia__recaptcha></div><button ng-disabled="postScope.busyPosting || !postScope.loggedIn || postForm.$invalid" class="CommentMedia-btn bb-spinner-btn bb-flat-btn bb-flat-btn--primary" ng-class="{\n                    \'bb-flat-btn--disabled\': !postScope.loggedIn || postForm.$invalid\n                }"><span bb-visible=!postScope.busyPosting once-if=isReply>Post Reply </span><span bb-visible=!postScope.busyPosting once-if=!isReply>Post Comment </span><span bb-visible=postScope.busyPosting class=bb-spinner-btn__spinner>Posting&hellip;</span></button></div></div></form><div ng-if="postScope.isPageComment && postScope.hasPosted" class=CommentForm-page-comment-moderation-msg>Comment Submitted! Profile comments may require member approval before appearing.</div>'),e.put("bb/social/commenting/comment-show.ng.html",'<div class=Comment><div class="Comment-content CommentMedia"><img class=CommentMedia-figure sizes="(min-width: 768px) 55px, 40px" fallback-src once-if=showScope.profileImageSrcSet ng-src="{{showScope.profileImageSrcSet[\'70x70\']}}" ng-srcset="\n                {{showScope.profileImageSrcSet[\'35x35\']}} 35w,\n                {{showScope.profileImageSrcSet[\'50x50\']}} 50w,\n                {{showScope.profileImageSrcSet[\'70x70\']}} 70w,\n                {{showScope.profileImageSrcSet[\'145x145\']}} 145w"><div class="Comment-profile-and-text CommentMedia-body"><div class=Comment-name><a class=Comment-name-slug once-href=showScope.authorLink.href title={{showScope.authorLink.title}} once-text=showScope.author.slug></a> <span class=Comment-name-realname ng-if=showScope.author.fullName>(<span once-text=showScope.author.fullName></span>)</span></div><bb-comment-text class=Comment-text comment=comment>{{comment.text}}</bb-comment-text></div></div><div class=Comment-actions ng-if=!hideActions><div class=Comment-action once-text=comment.timestampDisplay></div><div ng-if=showScope.canDelete class=Comment-action-divider></div><div ng-if=showScope.canDelete class=Comment-action data-test=delete><bb-delete-trigger entity=comment entity-type=comment></bb-delete-trigger></div><div ng-if="showScope.canReport || showScope.canModerate" class=Comment-action-divider></div><div ng-if="showScope.canReport || showScope.canModerate" class=Comment-action data-test=report><bb-report-trigger entity=comment entity-type=comment></bb-report-trigger></div><div ng-if="showReplyButton && !showScope.hideReplies" class=Comment-action-divider></div><div ng-if="showReplyButton && !showScope.hideReplies" class=Comment-action data-test=reply><button class="bb-btn--plain bb-link" ng-click=showScope.showReplyForm()>Reply</button></div></div></div>'),e.put("bb/social/commenting/comment-tree.ng.html",'<div class=CommentTree ng-repeat="topLevelCommentObj in comments.comments" ng-class="{\n        \'CommentTree--first\': $first\n    }"><bb-comment-show comment=topLevelCommentObj show-reply-button=true></bb-comment-show><div ng-if=topLevelCommentObj.isReplyFormVisible><bb-comment-post comment=topLevelCommentObj is-reply=true></bb-comment-post></div><div class=CommentTree--reply-posted ng-if="topLevelCommentObj.replyWasPosted && !topLevelCommentObj.isReplyFormVisible">Reply has been posted. Click "Show More Replies" to see your reply.</div><div class=CommentLeafContainer ng-if=topLevelCommentObj.comments.length><bb-comment-show class=CommentLeaf ng-repeat="replyComment in topLevelCommentObj.comments" comment=replyComment is-reply=true></bb-comment-show><bb-comments-show-more comment=topLevelCommentObj ng-if=topLevelCommentObj.next show-more=replies is-reply=true></bb-comments-show-more></div></div><bb-comments-show-more comment=comments ng-if=comments.next show-more=comments></bb-comments-show-more>'),e.put("bb/social/commenting/comments-count.ng.html","<div class=CommentsHeader><div class=CommentsHeader-heading ng-pluralize count=count when=\"{'0':'No comments', '1':'1 comment', 'other':'{} comments'}\">No Comments</div></div>"),e.put("bb/social/commenting/comments-empty.ng.html","<div class=CommentsEmpty><div class=CommentsEmpty-status>There are no comments yet.</div><div ng-click=scrollToCommentPost() class=CommentsEmpty-cta>Be The First!</div></div>"),e.put("bb/social/commenting/comments-show-more.ng.html","<div class=Comments-showmore><button ng-click=showMore.clickHandler() ng-disabled=showMore.busy class=Comments-showmore-btn once-class=\"{\n            'bb-btn--plain bb-link': isReply,\n            'bb-flat-btn bb-flat-btn--stretch bb-flat-btn--secondary bb-flat-btn--size-sm': !isReply\n        }\"><span class=Comments-showmore-btn--label bb-visible=!showMore.busy>{{showMore.link.title || showMore.fallbackText}}</span><div bb-visible=showMore.busy class=Comments-showmore-btn-spinner>Loading&hellip;</div></button></div>"),e.put("bb/social/commenting/comments.ng.html",'<div class=Comments ng-if=commentsScope.retrievingCommentsFailed><div class=CommentsEmpty><div class=CommentsEmpty-status>We were unable to retrieve comments. Refreshing the page may fix this issue.</div></div></div><div class=Comments ng-if=!commentsScope.retrievingCommentsFailed><bb-comments-count count=comments.totalCommentCount></bb-comments-count><div class="Grid-row Grid-row--resp CommentsLoginBeNice"><div class="Grid-unit CommentsLoginBeNice-login"><span class=CommentsLoginBeNice-login--link ng-if=!commentsScope.loggedIn ng-click=commentsScope.logInToCommentClicked()>Log in to comment</span></div><div class="Grid-unit CommentsLoginBeNice-benice"><div class=CommentsLoginBeNice-benice-heading>Please keep comments positive and constructive.</div><div class=CommentsLoginBeNice-benice-txt>Help the community by reporting inappropriate comments. Inappropriate comments may be reported and/or removed.</div></div></div><bb-comment-post id=comments-top-level-comment-post is-reply comment=comments></bb-comment-post><div class=CommentsHeading>Comments</div><bb-comments-empty ng-if=!comments.comments.length></bb-comments-empty><bb-comment-tree ng-if=comments.comments.length comments=comments></bb-comment-tree><bb-report-modal></bb-report-modal><bb-delete-modal></bb-delete-modal></div>')}}),define("bb/social/commenting/comments",[],function(){"use strict";return["$log","$rootScope","$timeout","currentUserService","loginResource","bbCommentService",function(n,i,e,t,r,o){return t.get(),{restrict:"E",templateUrl:"bb/social/commenting/comments.ng.html",scope:{entityType:"@",hideReplies:"@"},controller:["$scope","$element","$attrs",function(t){var e={};t.commentsScope=e,this.setComments=function(e){n.debug("updating comments %o",e),t.comments=e},this.setCommentsError=function(){e.retrievingCommentsFailed=!0},this.injectLocalComment=function(e){t.comments.totalCommentCount++,t.comments.commentCount++,t.comments.comments.unshift(e)},this.$scope=t,e.loggedIn=i.loggedIn,e.logInToCommentClicked=function(){o.showLoginInOrderToComment()}}]}}]}),define("bb/social/commenting/comments-count",[],function(){"use strict";return[function(){return{restrict:"E",templateUrl:"bb/social/commenting/comments-count.ng.html",scope:{count:"="}}}]}),define("bb/social/commenting/comments-show-more",[],function(){"use strict";return[function(){return{restrict:"E",templateUrl:"bb/social/commenting/comments-show-more.ng.html",scope:{comment:"=",isReply:"@"},link:function(e,t,n){var i={busy:!1};e.comment.hasLink("next")&&(i.link=e.comment.link("next"),i.clickHandler=function(){i.busy=!0,e.comment.next().finally(function(){i.busy=!1})},i.fallbackText="show more "+n.showMore),e.showMore=i}}}]}),define("bb/social/commenting/comments-empty",["angular"],function(r){"use strict";return["$timeout","$rootScope","bbCommentService",function(t,n,i){return{restrict:"E",templateUrl:"bb/social/commenting/comments-empty.ng.html",scope:{},link:function(e){e.scrollToCommentPost=function(){var e;n.loggedIn?((e=r.element("#comments-top-level-comment-post")).offset()&&r.element("html, body").animate({scrollTop:e.offset().top},500),t(function(){e.find("textarea").focus(),e.find(".CommentMedia-textarea-wrap").addClass("anim--yellow-fade")},500)):i.showLoginInOrderToComment()}}}}]}),define("bb/social/commenting/comment-tree",[],function(){"use strict";return["$rootScope",function(e){return{restrict:"E",templateUrl:"bb/social/commenting/comment-tree.ng.html",scope:{comments:"="},link:function(n){e.$on("entity.deleted",function(e,t){e.defaultPrevented||"comment"!==t.entityType||n.comments.contains(t.entity)&&(e.preventDefault(),e.stopPropagation(),n.comments.remove(t.entity))})}}}]}),define("bb/social/commenting/comment-post",["angular"],function(b){"use strict";return["$rootScope","$log","$timeout","$window","bbCommentService","currentUserService",function(l,e,u,d,p,m){var f={BANNED:"Your account is banned and you cannot comment at this time.",UNACTIVATED:"Your account is not activated, ​click here​ to activate your account before commenting.",INACTIVE:"Your account is inactive and you cannot comment at this time.",REPLY:"Leave a reply…",COMMENT:"Leave a comment…",LOGIN:"Please log in to comment."};return{restrict:"E",templateUrl:"bb/social/commenting/comment-post.ng.html",scope:{comment:"=",isReply:"@"},require:"^bbComments",link:function(n,i,e,t){var r,o,a={};function s(){return m.isInactive()||m.isBanned()}function c(){if(void 0===r){var e="testLocalStorage";try{d.localStorage.setItem(e,e),d.localStorage.removeItem(e),r=!0}catch(e){r=!1}}return r}a.data=b.copy({}),a.busyPosting=!1,a.bbComments=t,a.recaptchaKey="6LclYCUUAAAAANulcP-1X30lpREP8kWfkThPaB_o",a.isPageComment="pagecomment"===t.$scope.entityType,(n.postScope=a).onTextareaFocus=function(){a.focus=!0},a.onTextareaBlur=function(){a.focus=!1},a.onTextareaClick=function(e){l.loggedIn?m.isUnactivated()?d.location.href="https://my.bodybuilding.com/register.php?do=requestemail":s()&&(a.disablePostTextarea=!0,e.preventDefault()):p.showLoginInOrderToComment()},a.loggedIn=l.loggedIn,a.placeholder=f.LOGIN,m.get().then(function(e){e.user&&(a.profilePic=e.user.thumbUrl,s()&&(a.disablePostTextarea=!0),m.isBanned()?a.placeholder=f.BANNED:m.isUnactivated()?a.placeholder=f.UNACTIVATED:m.isInactive()?a.placeholder=f.INACTIVE:n.isReply?a.placeholder=f.REPLY:a.placeholder=f.COMMENT)}),l.$on("dialog.close",function(){a.disablePostTextarea=!1,s()&&(a.disablePostTextarea=!0)}),l.$on("dialog.open",function(){a.disablePostTextarea=!0}),a.postComment=function(){if(c()){var e=d.localStorage.getItem("lastCommentAt"),t=(new Date).getTime()-new Date(e).getTime();if(e&&t<2e4)return a.apiErr="FLOOD_CONTROL",a.busyPosting=!1,o&&u.cancel(o),void(o=u(function(){"FLOOD_CONTROL"===a.apiErr&&delete a.apiErr},2e4-t))}delete a.apiErr,a.busyPosting=!0,c()&&d.localStorage.setItem("lastCommentAt",new Date),delete a.apiErr,a.busyPosting=!0,n.comment.post(a.data).then(function(e){a.hasPosted=!0,a.errMsg=!1,a.busyPosting=!1,n.postForm.$setPristine(),i.find("form")[0].reset(),a.data=b.copy({}),n.isReply?(n.comment.isReplyFormVisible=!1,n.comment.next?n.comment.replyWasPosted=!0:n.comment.comments.push(e)):a.bbComments.injectLocalComment(e)},function(e){e&&400===e.status?(a.apiErr="400",a.serverErrorMessage=e.data.reason.charAt(0).toUpperCase()+e.data.reason.slice(1)):e&&401===e.status?a.apiErr="401":a.apiErr="UNKNOWN",a.busyPosting=!1})}}}}]}),define("bb/social/commenting/comment-show",[],function(){"use strict";return["$log","$rootScope","$timeout","bbCommentService",function(a,s,c,l){return{restrict:"E",templateUrl:"bb/social/commenting/comment-show.ng.html",require:"?^bbComments",scope:{comment:"=",showReplyButton:"@",hideActions:"@",isReply:"@"},link:function(e,t,n,i){var r,o={};e.showScope=o,e.comment.isReply=e.isReply,e.comment.author?(o.author=e.comment.author,o.authorLink=e.comment.author.link("bb:bodyspaceProfile"),o.profileImageSrcSet={},o.author.link("bb:profileImage").forEach(function(e){o.profileImageSrcSet[e.name]=e.href.replace("http:","https:")})):a.warn("No embedded author data"),i&&(r=i.$scope)&&(o.hideReplies="true"===r.hideReplies,r.$on("comment.showReply",function(){e.comment.isReplyFormVisible=!1})),o.showReplyForm=function(){s.loggedIn?(r&&r.$broadcast("comment.showReply"),t.parents(".CommentTree").css("height","auto"),e.comment.isReplyFormVisible=!0,c(function(){t.parents(".CommentTree").find("textarea").focus()},10)):l.showLoginInOrderToComment()},o.canReport=e.comment.canReport(),o.canModerate=e.comment.canModerate(),o.canDelete=e.comment.canDelete()}}}]}),define("bb/social/commenting/comment-text",[],function(){"use strict";return["$compile",function(r){var e={restrict:"E",scope:{comment:"="},transclude:!0,controller:["$scope","$element",function(n,i){(n.comment.text||"").split(/\n\n+/).map(function(e){return e.replace(/^\s+ (.+)\s+/gi,"$1")}).filter(function(e){return!!e}).forEach(function(e){var t=n.$new();t.paragraph=e,i.append(r('<p class="bb-paragraph">{{paragraph}}</p>')(t))})}]};return e}]}),define("bb/util/module-info",["module"],function(e){"use strict";var t={name:"<%= name %>",version:"<%= version %>"};return t.settings=e.config()||{},t.settings.loginUrl||(t.settings.loginUrl="https://api.bodybuilding.com/login"),void 0===t.settings.disableAngularRouting&&(t.settings.disableAngularRouting=!0),t}),define("bb/social/commenting/comment-service",["bb/util/module-info"],function(){"use strict";return["$rootScope",function(e){var t={showLoginInOrderToComment:function(){e.$emit("login.show",{headerTitle:"Log In",headerSubtitle:"You must be logged in to post a comment. Sign up if you don’t already have an account."})}};return t}]}),define("bb/social/commenting/comment-loader",[],function(){"use strict";return["$log","$timeout","HalComment","HALResource",function(a,s,c,l){var e={restrict:"A",require:"bbComments"};return e.link=function(t,e,n,i){var r;function o(){r&&s.cancel(r),r=s(function(){var e={entityType:n.entityType,topId:btoa(n.topId)};n.subId&&(e.subId=btoa(n.subId)),n.pageType&&n.userId&&"pagecomment"===n.entityType&&(e.topId=btoa("pagecomment-"+n.pageType+"-"+n.userId)),e={rel:"bb:comment",filter:l.filter.onName(n.linkName||"template"),config:{params:e}},c.fromRoot(e).then(function(e){a.debug("fetched comments %o",e),i&&"function"==typeof i.setComments?i.setComments(e):t.comments=e},function(e){a.error(e),i&&"function"==typeof i.setCommentsError?i.setCommentsError(e):t.retrievingCommentsFailed=!0})},222)}o(),n.$observe("entityType",o),n.$observe("topId",o),n.$observe("linkName",o),n.$observe("pageType",o)},e}]}),function(l){function s(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function c(e,t){return re.call(e,t)}function a(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function u(e){!1===Q.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function t(e,t){var n=!0;return p(function(){return n&&(u(e),n=!1),t.apply(this,arguments)},t)}function e(t,n){return function(e){return r(t.call(this,e),n)}}function n(){}function i(e,t){!1!==t&&E(e),m(this,e),this._d=new Date(+e._d)}function d(e){var t=_(e),n=t.year||0,i=t.quarter||0,r=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,c=t.minute||0,e=t.second||0,t=t.millisecond||0;this._milliseconds=+t+1e3*e+6e4*c+36e5*s,this._days=+a+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=Q.localeData(),this._bubble()}function p(e,t){for(var n in t)c(t,n)&&(e[n]=t[n]);return c(t,"toString")&&(e.toString=t.toString),c(t,"valueOf")&&(e.valueOf=t.valueOf),e}function m(e,t){var n,i,r;if(void 0!==t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),void 0!==t._i&&(e._i=t._i),void 0!==t._f&&(e._f=t._f),void 0!==t._l&&(e._l=t._l),void 0!==t._strict&&(e._strict=t._strict),void 0!==t._tzm&&(e._tzm=t._tzm),void 0!==t._isUTC&&(e._isUTC=t._isUTC),void 0!==t._offset&&(e._offset=t._offset),void 0!==t._pf&&(e._pf=t._pf),void 0!==t._locale&&(e._locale=t._locale),0<me.length)for(n in me)i=me[n],r=t[i],void 0!==r&&(e[i]=r);return e}function f(e){return e<0?Math.ceil(e):Math.floor(e)}function r(e,t,n){for(var i=""+Math.abs(e),e=0<=e;i.length<t;)i="0"+i;return(e?n?"+":"":"-")+i}function b(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function o(r,o){return function(e,t){var n,i;return null===t||isNaN(+t)||(i="moment()."+(n=o)+"(period, number) is deprecated. Please use moment()."+o+"(number, period).",Ve[n]||(u(i),Ve[n]=!0),n=e,e=t,t=n),h(this,Q.duration(e="string"==typeof e?+e:e,t),r),this}}function h(e,t,n,i){var r=t._milliseconds,o=t._days,t=t._months;i=null==i||i,r&&e._d.setTime(+e._d+r*n),o&&V(e,"Date",W(e,"Date")+o*n),t&&G(e,W(e,"Month")+t*n),i&&Q.updateOffset(e,o||t)}function g(e){return"[object Array]"===Object.prototype.toString.call(e)}function v(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function y(e,t,n){for(var i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),o=0,a=0;a<i;a++)(n&&e[a]!==t[a]||!n&&S(e[a])!==S(t[a]))&&o++;return o+r}function w(e){var t;return e&&(t=e.toLowerCase().replace(/(.)s$/,"$1"),e=Ne[e]||Be[t]||t),e}function _(e){var t,n,i={};for(n in e)c(e,n)&&(t=w(n),t&&(i[t]=e[n]));return i}function S(e){var t=+e,e=0;return e=0!=t&&isFinite(t)?0<=t?Math.floor(t):Math.ceil(t):e}function k(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function C(e,t,n){return H(Q([e,11,31+t-n]),t,n).week}function A(e){return T(e)?366:365}function T(e){return e%4==0&&e%100!=0||e%400==0}function E(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[ae]<0||11<e._a[ae]?ae:e._a[se]<1||e._a[se]>k(e._a[oe],e._a[ae])?se:e._a[ce]<0||24<e._a[ce]||24===e._a[ce]&&(0!==e._a[le]||0!==e._a[ue]||0!==e._a[de])?ce:e._a[le]<0||59<e._a[le]?le:e._a[ue]<0||59<e._a[ue]?ue:e._a[de]<0||999<e._a[de]?de:-1,e._pf._overflowDayOfYear&&(t<oe||se<t)&&(t=se),e._pf.overflow=t)}function x(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length&&e._pf.bigHour===l)),e._isValid}function M(e){return e&&e.toLowerCase().replace("_","-")}function D(e){var t;if(!pe[e]&&fe)try{t=Q.locale(),require("./locale/"+e),Q.locale(t)}catch(e){}return pe[e]}function I(e,t){var n;return t._isUTC?(n=t.clone(),t=(Q.isMoment(e)||v(e)?+e:+Q(e))-+n,n._d.setTime(+n._d+t),Q.updateOffset(n,!1),n):Q(e).local()}function O(e,t){return e.isValid()?(t=$(t,e.localeData()),He[t]||(He[t]=function(n){for(var e,i=n.match(ve),r=0,o=i.length;r<o;r++)i[r]=We[i[r]]||((e=i[r]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,""));return function(e){var t="";for(r=0;r<o;r++)t+=i[r]instanceof Function?i[r].call(e,n):i[r];return t}}(t)),He[t](e)):e.localeData().invalidDate()}function $(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(ye.lastIndex=0;0<=i&&ye.test(e);)e=e.replace(ye,n),ye.lastIndex=0,--i;return e}function P(e){var t=(e=e||"").match(Te)||[],e=((t[t.length-1]||[])+"").match(Fe)||["-",0,0],t=60*e[1]+S(e[2]);return"+"===e[0]?-t:t}function R(e){var t,n,i,r,o,a=e._w;null!=a.GG||null!=a.W||null!=a.E?(t=1,r=4,o=s(a.GG,e._a[oe],H(Q(),1,4).year),n=s(a.W,1),i=s(a.E,1)):(t=e._locale._week.dow,r=e._locale._week.doy,o=s(a.gg,e._a[oe],H(Q(),t,r).year),n=s(a.w,1),null!=a.d?(i=a.d)<t&&++n:i=null!=a.e?a.e+t:t),n=n,i=i,r=r,a=t,o=N(t=o,0,1).getUTCDay(),a={year:0<(a=7*(n-1)+((i=null!=i?i:a)-a)+(a-(o=0===o?7:o)+(r<o?7:0)-(o<a?7:0))+1)?t:t-1,dayOfYear:0<a?a:A(t-1)+a},e._a[oe]=a.year,e._dayOfYear=a.dayOfYear}function L(e){var t,n,i,r,o=[];if(!e._d){for(i=e,r=new Date,n=i._useUTC?[r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()]:[r.getFullYear(),r.getMonth(),r.getDate()],e._w&&null==e._a[se]&&null==e._a[ae]&&R(e),e._dayOfYear&&(r=s(e._a[oe],n[oe]),e._dayOfYear>A(r)&&(e._pf._overflowDayOfYear=!0),r=N(r,0,e._dayOfYear),e._a[ae]=r.getUTCMonth(),e._a[se]=r.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=n[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ce]&&0===e._a[le]&&0===e._a[ue]&&0===e._a[de]&&(e._nextDay=!0,e._a[ce]=0),e._d=(e._useUTC?N:z).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm),e._nextDay&&(e._a[ce]=24)}}function U(e){if(e._f===Q.ISO_8601)return j(e),0;e._a=[],e._pf.empty=!0;for(var t,n,i,r=""+e._i,o=r.length,a=0,s=$(e._f,e._locale).match(ve)||[],c=0;c<s.length;c++)n=s[c],(t=(r.match(function(e,t){var n=t._strict;switch(e){case"Q":return De;case"DDDD":return Oe;case"YYYY":case"GGGG":case"gggg":return n?$e:Se;case"Y":case"G":case"g":return Re;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?Pe:ke;case"S":if(n)return De;case"SS":if(n)return Ie;case"SSS":if(n)return Oe;case"DDD":return _e;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ae;case"a":case"A":return t._locale._meridiemParse;case"x":return xe;case"X":return Me;case"Z":case"ZZ":return Te;case"T":return Ee;case"SSSS":return Ce;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Ie:we;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return we;case"Do":return n?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return new RegExp(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))}}(n,e))||[])[0])&&(0<(i=r.substr(0,r.indexOf(t))).length&&e._pf.unusedInput.push(i),r=r.slice(r.indexOf(t)+t.length),a+=t.length),We[n]?(t?e._pf.empty=!1:e._pf.unusedTokens.push(n),function(e,t,n){var i,r=n._a;switch(e){case"Q":null!=t&&(r[ae]=3*(S(t)-1));break;case"M":case"MM":null!=t&&(r[ae]=S(t)-1);break;case"MMM":case"MMMM":null!=(i=n._locale.monthsParse(t,e,n._strict))?r[ae]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(r[se]=S(t));break;case"Do":null!=t&&(r[se]=S(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=S(t));break;case"YY":r[oe]=Q.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":r[oe]=S(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":r[ce]=S(t);break;case"m":case"mm":r[le]=S(t);break;case"s":case"ss":r[ue]=S(t);break;case"S":case"SS":case"SSS":case"SSSS":r[de]=S(1e3*("0."+t));break;case"x":n._d=new Date(S(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=P(t);break;case"dd":case"ddd":case"dddd":null!=(i=n._locale.weekdaysParse(t))?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=S(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=Q.parseTwoDigitYear(t)}}(n,t,e)):e._strict&&!t&&e._pf.unusedTokens.push(n);e._pf.charsLeftOver=o-a,0<r.length&&e._pf.unusedInput.push(r),!0===e._pf.bigHour&&e._a[ce]<=12&&(e._pf.bigHour=l),e._isPm&&e._a[ce]<12&&(e._a[ce]+=12),!1===e._isPm&&12===e._a[ce]&&(e._a[ce]=0),L(e),E(e)}function j(e){var t,n,i=e._i,r=Le.exec(i);if(r){for(e._pf.iso=!0,t=0,n=Ue.length;t<n;t++)if(Ue[t][1].exec(i)){e._f=Ue[t][0]+(r[6]||" ");break}for(t=0,n=je.length;t<n;t++)if(je[t][1].exec(i)){e._f+=je[t][0];break}i.match(Te)&&(e._f+="Z"),U(e)}else e._isValid=!1}function F(e){var t,n,i=e._i;i===l?e._d=new Date:v(i)?e._d=new Date(+i):null!==(t=be.exec(i))?e._d=new Date(+t[1]):"string"==typeof i?(j(n=e),!1===n._isValid&&(delete n._isValid,Q.createFromInputFallback(n))):g(i)?(e._a=function(e,t){for(var n=[],i=0;i<e.length;++i)n.push(t(e[i],i));return n}(i.slice(0),function(e){return parseInt(e,10)}),L(e)):"object"==typeof i?(t=e)._d||(n=_(t._i),t._a=[n.year,n.month,n.day||n.date,n.hour,n.minute,n.second,n.millisecond],L(t)):"number"==typeof i?e._d=new Date(i):Q.createFromInputFallback(e)}function z(e,t,n,i,r,o,a){a=new Date(e,t,n,i,r,o,a);return e<1970&&a.setFullYear(e),a}function N(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function B(e,t,n){var i=Q.duration(e).abs(),r=ie(i.as("s")),o=ie(i.as("m")),a=ie(i.as("h")),s=ie(i.as("d")),c=ie(i.as("M")),i=ie(i.as("y")),i=(r<Ye.s?["s",r]:1===o&&["m"])||o<Ye.m&&["mm",o]||1===a&&["h"]||a<Ye.h&&["hh",a]||1===s&&["d"]||s<Ye.d&&["dd",s]||1===c&&["M"]||c<Ye.M&&["MM",c]||1===i&&["y"]||["yy",i];return i[2]=t,i[3]=0<+e,i[4]=n,function(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}.apply({},i)}function H(e,t,n){var t=n-t,n=n-e.day();return t<n&&(n-=7),n<t-7&&(n+=7),n=Q(e).add(n,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function Y(e){var t=e._i,n=e._f;return e._locale=e._locale||Q.localeData(e._l),null===t||n===l&&""===t?Q.invalid({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),Q.isMoment(t)?new i(t,!0):((n?g(n)?function(e){var t,n,i,r,o;if(0===e._f.length)return e._pf.invalidFormat=!0,e._d=new Date(NaN),0;for(r=0;r<e._f.length;r++)o=0,t=m({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=a(),t._f=e._f[r],U(t),x(t)&&(o+=t._pf.charsLeftOver,o+=10*t._pf.unusedTokens.length,t._pf.score=o,(null==i||o<i)&&(i=o,n=t));p(e,n||t)}:U:F)(e),(e=new i(e))._nextDay&&(e.add(1,"d"),e._nextDay=l),e))}function q(e,t){var n,i;if(!(t=1===t.length&&g(t[0])?t[0]:t).length)return Q();for(n=t[0],i=1;i<t.length;++i)t[i][e](n)&&(n=t[i]);return n}function G(e,t){var n;return"string"==typeof t&&"number"!=typeof(t=e.localeData().monthsParse(t))||(n=Math.min(e.date(),k(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n)),e}function W(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function V(e,t,n){return"Month"===t?G(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function K(t,n){return function(e){return null!=e?(V(this,t,e),Q.updateOffset(this,n),this):W(this,t)}}function Z(e){return 400*e/146097}function X(e){return 146097*e/400}function J(e){"undefined"==typeof ender&&(ee=ne.moment,ne.moment=e?t("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",Q):Q)}for(var Q,ee,te,ne="undefined"!=typeof global?global:this,ie=Math.round,re=Object.prototype.hasOwnProperty,oe=0,ae=1,se=2,ce=3,le=4,ue=5,de=6,pe={},me=[],fe="undefined"!=typeof module&&module&&module.exports,be=/^\/?Date\((\-?\d+)/i,he=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ge=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,ve=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,ye=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,we=/\d\d?/,_e=/\d{1,3}/,Se=/\d{1,4}/,ke=/[+\-]?\d{1,6}/,Ce=/\d+/,Ae=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Te=/Z|[\+\-]\d\d:?\d\d/gi,Ee=/T/i,xe=/[\+\-]?\d+/,Me=/[\+\-]?\d+(\.\d{1,3})?/,De=/\d/,Ie=/\d\d/,Oe=/\d{3}/,$e=/\d{4}/,Pe=/[+-]?\d{6}/,Re=/[+-]?\d+/,Le=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ue=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],je=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Fe=/([\+\-]|\d\d)/gi,ze=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),Ne={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Be={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},He={},Ye={s:45,m:45,h:22,d:26,M:11},qe="DDD w W M D d".split(" "),Ge="M D H h m s w W".split(" "),We={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return r(this.year()%100,2)},YYYY:function(){return r(this.year(),4)},YYYYY:function(){return r(this.year(),5)},YYYYYY:function(){var e=this.year();return(0<=e?"+":"-")+r(Math.abs(e),6)},gg:function(){return r(this.weekYear()%100,2)},gggg:function(){return r(this.weekYear(),4)},ggggg:function(){return r(this.weekYear(),5)},GG:function(){return r(this.isoWeekYear()%100,2)},GGGG:function(){return r(this.isoWeekYear(),4)},GGGGG:function(){return r(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return S(this.milliseconds()/100)},SS:function(){return r(S(this.milliseconds()/10),2)},SSS:function(){return r(this.milliseconds(),3)},SSSS:function(){return r(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+r(S(e/60),2)+":"+r(S(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+r(S(e/60),2)+r(S(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Ve={},Ke=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];qe.length;)te=qe.pop(),We[te+"o"]=function(t,n){return function(e){return this.localeData().ordinal(t.call(this,e),n)}}(We[te],te);for(;Ge.length;)te=Ge.pop(),We[te+te]=e(We[te],2);for(We.DDDD=e(We.DDD,3),p(n.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var i,r;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=Q.utc([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(r="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;t<7;t++)if(this._weekdaysParse[t]||(n=Q([2e3,1]).day(t),n="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){e=this._calendar[e];return"function"==typeof e?e.apply(t,[n]):e},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)},pastFuture:function(e,t){e=this._relativeTime[0<e?"future":"past"];return"function"==typeof e?e(t):e.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return H(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),(Q=function(e,t,n,i){var r;return"boolean"==typeof n&&(i=n,n=l),(r={_isAMomentObject:!0})._i=e,r._f=t,r._l=n,r._strict=i,r._isUTC=!1,r._pf=a(),Y(r)}).suppressDeprecationWarnings=!1,Q.createFromInputFallback=t("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),Q.min=function(){return q("isBefore",[].slice.call(arguments,0))},Q.max=function(){return q("isAfter",[].slice.call(arguments,0))},Q.utc=function(e,t,n,i){var r;return"boolean"==typeof n&&(i=n,n=l),(r={_isAMomentObject:!0,_useUTC:!0,_isUTC:!0})._l=n,r._i=e,r._f=t,r._strict=i,r._pf=a(),Y(r).utc()},Q.unix=function(e){return Q(1e3*e)},Q.duration=function(e,t){var n,i,r,o=e,a=null;return Q.isDuration(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(a=he.exec(e))?(n="-"===a[1]?-1:1,o={y:0,d:S(a[se])*n,h:S(a[ce])*n,m:S(a[le])*n,s:S(a[ue])*n,ms:S(a[de])*n}):(a=ge.exec(e))?(n="-"===a[1]?-1:1,o={y:(i=function(e){e=e&&parseFloat(e.replace(",","."));return(isNaN(e)?0:e)*n})(a[2]),M:i(a[3]),d:i(a[4]),h:i(a[5]),m:i(a[6]),s:i(a[7]),w:i(a[8])}):"object"==typeof o&&("from"in o||"to"in o)&&(i=Q(o.from),a=I(a=Q(o.to),i),i.isBefore(a)?r=b(i,a):((r=b(a,i)).milliseconds=-r.milliseconds,r.months=-r.months),(o={}).ms=(r=r).milliseconds,o.M=r.months),o=new d(o),Q.isDuration(e)&&c(e,"_locale")&&(o._locale=e._locale),o},Q.version="2.8.4",Q.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",Q.ISO_8601=function(){},Q.momentProperties=me,Q.updateOffset=function(){},Q.relativeTimeThreshold=function(e,t){return Ye[e]!==l&&(t===l?Ye[e]:(Ye[e]=t,!0))},Q.lang=t("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return Q.locale(e,t)}),Q.locale=function(e,t){return e&&((e=void 0!==t?Q.defineLocale(e,t):Q.localeData(e))&&(Q.duration._locale=Q._locale=e)),Q._locale._abbr},Q.defineLocale=function(e,t){return null!==t?(t.abbr=e,pe[e]||(pe[e]=new n),pe[e].set(t),Q.locale(e),pe[e]):(delete pe[e],null)},Q.langData=t("moment.langData is deprecated. Use moment.localeData instead.",function(e){return Q.localeData(e)}),Q.localeData=function(e){var t;if(!(e=e&&e._locale&&e._locale._abbr?e._locale._abbr:e))return Q._locale;if(!g(e)){if(t=D(e))return t;e=[e]}return function(e){for(var t,n,i,r,o=0;o<e.length;){for(t=(r=M(e[o]).split("-")).length,n=(n=M(e[o+1]))?n.split("-"):null;0<t;){if(i=D(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&y(r,n,!0)>=t-1)break;t--}o++}return null}(e)},Q.isMoment=function(e){return e instanceof i||null!=e&&c(e,"_isAMomentObject")},Q.isDuration=function(e){return e instanceof d},te=Ke.length-1;0<=te;--te)!function(a){var s,c;if(0===a.indexOf("week"))s=7,c="day";else{if(0!==a.indexOf("month"))return;s=12,c="month"}Q[a]=function(t,e){var n,i,r=Q._locale[a],o=[];if("number"==typeof t&&(e=t,t=l),i=function(e){e=Q().utc().set(c,e);return r.call(Q._locale,e,t||"")},null!=e)return i(e);for(n=0;n<s;n++)o.push(i(n));return o}}(Ke[te]);for(te in Q.normalizeUnits=w,Q.invalid=function(e){var t=Q.utc(NaN);return null!=e?p(t._pf,e):t._pf.userInvalidated=!0,t},Q.parseZone=function(){return Q.apply(null,arguments).parseZone()},Q.parseTwoDigitYear=function(e){return S(e)+(68<S(e)?1900:2e3)},p(Q.fn=i.prototype,{clone:function(){return Q(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=Q(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():O(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):O(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return x(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&0<y(this._a,(this._isUTC?Q.utc(this._a):Q(this._a)).toArray()))},parsingFlags:function(){return p({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){e=O(this,e||Q.defaultFormat);return this.localeData().postformat(e)},add:o(1,"add"),subtract:o(-1,"subtract"),diff:function(e,t,n){var i,r,o=I(e,this),a=6e4*(this.zone()-o.zone());return"year"===(t=w(t))||"month"===t?(i=432e5*(this.daysInMonth()+o.daysInMonth()),r=12*(this.year()-o.year())+(this.month()-o.month()),e=this-Q(this).startOf("month")-(o-Q(o).startOf("month")),r+=(e-=6e4*(this.zone()-Q(this).startOf("month").zone()-(o.zone()-Q(o).startOf("month").zone())))/i,"year"===t&&(r/=12)):(i=this-o,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-a)/864e5:"week"===t?(i-a)/6048e5:i),n?r:f(r)},from:function(e,t){return Q.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(Q(),e)},calendar:function(e){var t=e||Q(),e=I(t,this).startOf("day"),e=this.diff(e,"days",!0),e=e<-6?"sameElse":e<-1?"lastWeek":e<0?"lastDay":e<1?"sameDay":e<2?"nextDay":e<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this,Q(t)))},isLeapYear:function(){return T(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){if("string"==typeof e)if(isNaN(e)){if("number"!=typeof(e=t.weekdaysParse(e)))return null}else e=parseInt(e,10);return e}(e,this.localeData()),this.add(e-t,"d")):t},month:K("Month",!0),startOf:function(e){switch(e=w(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return(e=w(e))===l||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(e,t){return"millisecond"===(t=w(void 0!==t?t:"millisecond"))?+(e=Q.isMoment(e)?e:Q(e))<+this:(Q.isMoment(e)?+e:+Q(e))<+this.clone().startOf(t)},isBefore:function(e,t){return"millisecond"===(t=w(void 0!==t?t:"millisecond"))?+this<+(e=Q.isMoment(e)?e:Q(e)):(e=Q.isMoment(e)?+e:+Q(e),+this.clone().endOf(t)<e)},isSame:function(e,t){return"millisecond"===(t=w(t||"millisecond"))?+this==+(e=Q.isMoment(e)?e:Q(e)):(e=+Q(e),+this.clone().startOf(t)<=e&&e<=+this.clone().endOf(t))},min:t("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return(e=Q.apply(null,arguments))<this?this:e}),max:t("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return this<(e=Q.apply(null,arguments))?this:e}),zone:function(e,t){var n,i=this._offset||0;return null==e?this._isUTC?i:this._dateTzOffset():("string"==typeof e&&(e=P(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&t&&(n=this._dateTzOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.subtract(n,"m"),i!==e&&(!t||this._changeInProgress?h(this,Q.duration(i-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Q.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?Q(e).zone():0,(this.zone()-e)%60==0},daysInMonth:function(){return k(this.year(),this.month())},dayOfYear:function(e){var t=ie((Q(this).startOf("day")-Q(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=H(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=H(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=H(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return C(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return C(this.year(),e.dow,e.doy)},get:function(e){return this[e=w(e)]()},set:function(e,t){return"function"==typeof this[e=w(e)]&&this[e](t),this},locale:function(e){return e===l?this._locale._abbr:(null!=(e=Q.localeData(e))&&(this._locale=e),this)},lang:t("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===l?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),Q.fn.millisecond=Q.fn.milliseconds=K("Milliseconds",!1),Q.fn.second=Q.fn.seconds=K("Seconds",!1),Q.fn.minute=Q.fn.minutes=K("Minutes",!1),Q.fn.hour=Q.fn.hours=K("Hours",!0),Q.fn.date=K("Date",!0),Q.fn.dates=t("dates accessor is deprecated. Use date instead.",K("Date",!0)),Q.fn.year=K("FullYear",!0),Q.fn.years=t("years accessor is deprecated. Use year instead.",K("FullYear",!0)),Q.fn.days=Q.fn.day,Q.fn.months=Q.fn.month,Q.fn.weeks=Q.fn.week,Q.fn.isoWeeks=Q.fn.isoWeek,Q.fn.quarters=Q.fn.quarter,Q.fn.toJSON=Q.fn.toISOString,p(Q.duration.fn=d.prototype,{_bubble:function(){var e,t=this._milliseconds,n=this._days,i=this._months,r=this._data;r.milliseconds=t%1e3,t=f(t/1e3),r.seconds=t%60,t=f(t/60),r.minutes=t%60,t=f(t/60),r.hours=t%24,n+=f(t/24),e=f(Z(n)),n-=f(X(e)),i+=f(n/30),n%=30,e+=f(i/12),i%=12,r.days=n,r.months=i,r.years=e},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return f(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*S(this._months/12)},humanize:function(e){var t=B(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){t=Q.duration(e,t);return this._milliseconds+=t._milliseconds,this._days+=t._days,this._months+=t._months,this._bubble(),this},subtract:function(e,t){t=Q.duration(e,t);return this._milliseconds-=t._milliseconds,this._days-=t._days,this._months-=t._months,this._bubble(),this},get:function(e){return this[(e=w(e)).toLowerCase()+"s"]()},as:function(e){var t,n;if("month"===(e=w(e))||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*Z(t),"month"===e?n:n/12;switch(t=this._days+Math.round(X(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:Q.fn.lang,locale:Q.fn.locale,toIsoString:t("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),r=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||r||o?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(o?o+"S":""):"P0D"},localeData:function(){return this._locale}}),Q.duration.fn.toString=Q.duration.fn.toISOString,ze)c(ze,te)&&function(e){Q.duration.fn[e]=function(){return this._data[e]}}(te.toLowerCase());Q.duration.fn.asMilliseconds=function(){return this.as("ms")},Q.duration.fn.asSeconds=function(){return this.as("s")},Q.duration.fn.asMinutes=function(){return this.as("m")},Q.duration.fn.asHours=function(){return this.as("h")},Q.duration.fn.asDays=function(){return this.as("d")},Q.duration.fn.asWeeks=function(){return this.as("weeks")},Q.duration.fn.asMonths=function(){return this.as("M")},Q.duration.fn.asYears=function(){return this.as("y")},Q.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===S(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th")}}),fe?module.exports=Q:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(e,t,n){return n.config&&n.config()&&!0===n.config().noGlobal&&(ne.moment=ee),Q}),J(!0)):J()}.call(this),define("bb/social/commenting/hal-comment",["angular","moment","bb/util/module-info"],function(s,c,e){"use strict";var l,u;return u=e.commentingRoot||"//api.bodybuilding.com/commenting",["HALResource","$q","$log","$window","currentUserService","HalCommentAuthor",function(e,o,r,t,n,i){function a(e){var t,n,r=this;s.extend(this,e),n=this.embedded("bb:comment"),s.isArray(n)?this.comments=n.map(function(e){return new a(e)}):this.comments=[],this.timestamp&&(this.timestampDisplay=(t=this.timestamp,e=3,n=c(),t=c(t),n.diff(t,"days")>e?t.format("MMMM Do, YYYY"):t.fromNow())),this.hasEmbedded("author")&&(this.author=new i(this.embedded("author"))),this.hasLink("next")&&(this.next=function(){var i=o.defer();return this.follow("next").then(function(e){var t,n=new a(e);e.hasEmbedded("bb:comment")&&(t=e._embedded["bb:comment"]),s.isArray(t)&&(r.totalCommentCount=e.totalCommentCount,r._embedded["bb:comment"]=r._embedded["bb:comment"].concat(t),r.comments=r.comments.concat(n.comments),r.commentCount=r.comments.length,n.hasLink("next")?r.link({rel:"next"}).href=n.link({rel:"next"}).href:delete r.next),i.resolve(n)}).catch(i.reject),i.promise})}return a.root=function(){return l=!l||t.jasmine?e.fromRoot(u):l},a.fromRoot=function(t){var n=o.defer();return this.root().then(function(e){return e.follow(t)}).then(function(e){n.resolve(new a(e))}).catch(n.reject),n.promise},a.prototype.hasComments=function(){return 0<this.commentCount&&this.hasEmbedded("bb:comment")&&s.isArray(this.embedded("bb:comment"))},a.prototype.canPost=function(){return this.hasLink("bb:commentOn")},a.prototype.canReport=function(){return this.hasLink("bb:report")},a.prototype.canModerate=function(){return this.hasLink("bb:moderate")},a.prototype.canDelete=function(){return this.hasLink("bb:delete")},a.prototype.post=function(e){var t=o.defer();return this.follow({rel:"bb:commentOn",config:{method:"POST",data:e}}).then(function(e){t.resolve(new a(e))}).catch(t.reject),t.promise},a.prototype.report=function(e){var t,n=o.defer(),i={headers:{}};if(this.hasLink("bb:report"))t="bb:report",i.method="POST";else{if(!this.hasLink("bb:moderate"))return r.error("No report link available");t="bb:moderate",i.method="DELETE",i.headers["Content-Type"]="application/json"}return i.data=e,this.follow({rel:t,config:i}).then(function(e){n.resolve(new a(e))}).catch(n.reject),n.promise},a.prototype.delete=function(){var t=o.defer();return this.follow({rel:"bb:delete",config:{method:"DELETE"}}).then(function(e){t.resolve(new a(e))}).catch(t.reject),t.promise},a.prototype.contains=function(t){var n;return-1!==this.comments.indexOf(t)?n=!0:this.comments.some(function(e){return n=-1!==e.comments.indexOf(t)}),n},a.prototype.remove=function(t){var n=t._links.self.href;function i(e){return e._links.self.href!==n}this.comments=this.comments.filter(i),this._embedded["bb:comment"]=this._embedded["bb:comment"].filter(i),this.comments.some(function(e){if(-1<e.comments.indexOf(t))return e.comments=e.comments.filter(i),!0}),this._embedded["bb:comment"].forEach(function(e){e._embedded["bb:comment"].length&&(e._embedded["bb:comment"]=e._embedded["bb:comment"].filter(i))})},a}]}),define("bb/social/commenting/hal-comment-author",["angular"],function(i){"use strict";return["$log","HALResource",function(e,t){function n(e){i.extend(this,e[0])}return n.prototype.profileImage=function(e){return this.link({rel:"bb:profileImage",filter:t.filter.onName(e)})},n}]}),define("bb/ui/services/hal/hal-resource",["angular"],function(p){"use strict";var m,t="application/hal+json";return m={accept:t},["$log","$http","$q","URITemplate",function(e,c,l,u){function d(e){var t,n=l.defer();function r(e){var o=this;function a(e){var t;return o._embedded&&(t="string"==typeof e?o._embedded[e]:o._embedded[e.rel],t="function"==typeof e.filter&&p.isArray(t)?1===(t=t.filter(e.filter)).length?new r(t=t[0]):t.map(function(e){return new r(e)}):p.isArray(t)?t.map(function(e){return new r(e)}):new r(t)),t}function n(e){var t="string"==typeof e?o._links[e]:o._links[e.rel],t="function"==typeof e.filter&&p.isArray(t)&&1===(t=t.filter(e.filter)).length?t[0]:t;return t}function s(e){var t=n(e),t=t.templated?function(e,t){var n,i=new u(e);for(n in e=p.copy(t))i.requires(n)&&delete t[n];return i.expand(e)}(t.href,e.config.params):t.href,t={url:t};return p.extend(t,e.config||{}),new d(c(t))}function i(t,n){var e,i;function r(e){0<t.length?e.follow(t,n):n.resolve(e)}return n=n||l.defer(),"string"==typeof(i=t.shift())&&(i={rel:i,config:p.extend({},{headers:m})}),o.hasEmbedded(i.rel)?r(a(i)):o.hasLink(i.rel)?s(i).then(r).catch(function(e){n.reject(e)}):n.reject((e=i,(i=l.defer()).reject({msg:"rel ["+e.rel+"] not found!",rel:e}),new d(i.promise))),n.promise}return o._state={loaded:!1,err:!1},p.extend(o,e),o.hasEmbedded=function(e){return o._embedded&&o._embedded[e]},o.hasLink=function(e){return o._links&&o._links[e]},o.embedded=a,o.link=n,o.selfLink=function(){return o.link("self")},o.follow=function(e,t){var n;return p.isArray(e)?n=i(e,t):"object"==typeof e?n=i([e],t):"string"==typeof e&&(n=i([{rel:e}],t)),n},o}return e.then(function(e){return(t=new r(e.data))._state.loaded=!0,t._state.response=e,n.resolve(t),t}).catch(function(e){return(t=new r(e))._state.err=e,n.reject(t),t}),n.promise}return d.APP_HAL_JSON=t,d.DEFAULT_HEADERS=m,d.fromRoot=function(e,t,n){var i;return n=n,(n=p.extend({url:e},n)).headers=p.extend({},m,n.headers),n=new d(c(n)),t?(i=l.defer(),n.then(function(e){i.resolve(e.follow(t))}).catch(function(e){i.reject(e)}),i.promise):n},d.filter={on:function(t,n){return function(e){e=p.isArray(n)&&n?-1<n.indexOf(e[t]):e[t]===n;return e}},onName:function(){var e=Array.prototype.slice.call(arguments);return d.filter.on("name",e)}},d}]}),define("bb/ui/services/uri-template/uri-template",[],function(){"use strict";return["UriTemplate",function(t){function n(e){this.uri=e,this.parsed=t.parse(e)}return n.parse=function(e,t){e=new n(e);return t?e.expand(t):e},n.prototype.expand=function(e){return this.parsed.expand(e)},n.prototype.requires=function(t){return(this.parsed._expressions||[]).some(function(e){e=e.components;if(e)return e.some(function(e){return e.name===t})})},n}]}),n=this,define("angular-uri-templates",["angular"],function(){return function(){angular.module("uri-template",[]).service("UriTemplate",function(){var t=["+","#",".","/",";","?","&"],e={append:function(e){0<this.string.length&&e.push(this)},isUnfulfillable:function(e){return!1},score:function(e){return 0}};function i(e){this.string=e}function r(e){this.string=e,-1!==t.indexOf(e.charAt(0))&&(this.operator=e.charAt(0),e=e.substring(1)),this.components=[],angular.forEach(e.split(","),function(e){this.components.push(new n(e,this.operator))},this)}function n(e,t){this.operator=t;t=e.split(":",-2);1<t.length?(this.name=t[0],this.limit=parseInt(t[1],10)):this.name=e,"*"==this.name.charAt(this.name.length-1)&&(this.name=this.name.substring(0,this.name.length-1),this.splat=!0)}function o(e){this.string=e;var n=this._expressions=[];angular.forEach(e.split("{"),function(e,t){-1!==e.indexOf("}")?(new r((e=e.split("}",2))[0]).append(n),new i(e[1]).append(n)):new i(e).append(n)})}((i.prototype=Object.create(e)).constructor=i).prototype.expand=function(){return this.string},((r.prototype=Object.create(e)).constructor=r).prototype.expand=function(n){var i=[];return angular.forEach(this.components,function(e){var t=e.expand(n);e.splat?angular.forEach(t,function(e,t){angular.isArray(e)?angular.forEach(e,function(e){";"===this.operator||"?"===this.operator||"&"===this.operator?i.push(t+"="+e):i.push(e)},this):i.push(t+"="+e)},this):";"==this.operator||"?"==this.operator||"&"==this.operator?angular.forEach(t,function(e,t){";"==this.operator&&(void 0===e||e.toString().length<1)?i.push(t):(i.length||void 0!==e&&1<=e.toString().length)&&i.push(t+"="+e)},this):angular.forEach(t,function(e){i.push(e)})},this),i.join("").length?(i="."==this.operator||"/"==this.operator||";"==this.operator||"&"==this.operator?i.join(this.operator):"?"==this.operator?i.join("&"):i.join(","),i=void 0!==this.operator&&"+"!==this.operator?this.operator+i:i):""},r.prototype.score=function(t){var n=0;return angular.forEach(this.components,function(e){n+=e.score(t)}),n},r.prototype.isUnfulfillable=function(t){if("+"!==this.operator&&void 0!==this.operator)return!1;var n=!1;return angular.forEach(this.components,function(e){!n&&0<e.score(t)&&(n=!0)}),!n},n.prototype.expand=function(e){var n,i={};return void 0!==e[this.name]&&(e=this.limited(e[this.name]),n=!1,this.splat&&!angular.isArray(e)||(n=!0,i[this.name]=[]),angular.forEach(e,function(e,t){n?i[this.name][t]=this.escape(e):i[t]=this.escape(e)},this)),i},n.prototype.escape=function(e){return"+"==this.operator||"#"==this.operator?encodeURI(e):encodeURIComponent(e).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")},n.prototype.limited=function(e){if(e.length>this.limit)return[e.substring(0,this.limit)];if(angular.isArray(e))return e;if(this.splat||!angular.isObject(e))return angular.isObject(e)?e:[e];var n=[];return angular.forEach(e,function(e,t){n.push(t),n.push(e)}),n},n.prototype.score=function(e){return void 0!==e[this.name]?1:0},o.prototype.expand=function(t){var n=[],i=!1;return t=t||{},angular.forEach(this._expressions,function(e){i||(e.isUnfulfillable(t)?i=!0:n.push(e.expand(t)))}),i?void 0:n.join("")},o.prototype.score=function(t){var n=0;t=t||{},angular.forEach(this._expressions,function(e){-1!=n&&(e.isUnfulfillable(t)?n=-1:n+=e.score(t))});var e=0;return angular.forEach(t,function(){e+=1}),e=Math.min(e,2*n),n-.1*(e-n)},o.prototype.toString=function(){return this.string},this.parse=function(e){return new o(e)}})}.apply(n,arguments)}),define("bb/ui/services/uri-template/package",["angular","./uri-template","angular-uri-templates"],function(e,t){"use strict";return e.module("bb.ui.services.uri-template",["uri-template"]).factory("URITemplate",t)}),define("bb/ui/services/hal/package",["angular","./hal-resource","bb/ui/services/uri-template/package"],function(e,t){"use strict";return e.module("bb.ui.services.hal",["bb.ui.services.uri-template"]).factory("HALResource",t)}),define("bb/social/reporting/views",[],{init:function(e){"use strict";e.put("bb/social/reporting/report-modal.ng.html","<bb-dialog><bb-dialog-header><div class=bb-dialog__title>{{ reportModalScope.isAdminOrModerator ? 'Delete Content' : 'Report Content' }}</div><div class=bb-dialog__subtitle></div></bb-dialog-header><bb-dialog-content><bb-report entity=reportModalScope.entity entity-type={{reportModalScope.entityType}}></bb-report></bb-dialog-content></bb-dialog>"),e.put("bb/social/reporting/report-trigger.ng.html","<button class=\"bb-btn--plain bb-link\" ng-click=reportTriggerScope.report()>{{ reportTriggerScope.isAdminOrModerator ? 'Delete' : 'Report' }}</button>"),e.put("bb/social/reporting/report.ng.html",'<form name=reportForm class=Report-form ng-submit=reportScope.submit() novalidate><section class="Report-section Report-section--what-were-reporting" ng-if="entityType === \'comment\' && entity"><bb-comment-show hide-actions=true comment=entity></bb-comment-show></section><section class=Report-section ng-if=!reportScope.hideYourInfo><h4 class="bb-h4 Report-heading">Your Info</h4><div class=bb-input-wrap><label class="bb-label Report-label">Name</label><input class="bb-input Report-input" required ng-maxlength=50 name=reporterName ng-model=reportScope.data.reporterName bb-debounce><div ng-switch="reportScope.showErrors || reportForm.reporterName.$dirty && reportForm.reporterName.$invalid"><ul class="Report-validation-msg bb-list--plain bb-invisible" ng-switch-when=false><li>Valid</li></ul><ul class="Report-validation-msg bb-list--plain" ng-switch-when=true><li class=bb-form-msg--error ng-show=reportForm.reporterName.$error.required>Name is required.</li><li class=bb-form-msg--error ng-show=reportForm.reporterName.$error.maxlength>Name must be no more than 50 characters.</li></ul></div></div><div class=bb-input-wrap><label class=bb-label>Email Address</label><input class="bb-input Report-input" ng-model=reportScope.data.reporterEmail ng-pattern=/^[a-zA-Z0-9\\._%+-]+@[a-zA-Z0-9\\.-]+\\.[a-zA-Z]{2,4}$/ ng-maxlength=128 required name=reporterEmail type=email bb-debounce><div ng-switch="reportScope.showErrors || reportForm.reporterEmail.$dirty && reportForm.reporterEmail.$invalid"><ul class="Report-validation-msg bb-list--plain bb-invisible" ng-switch-when=false><li>Valid</li></ul><ul class="Report-validation-msg bb-list--plain" ng-switch-when=true><li class=bb-form-msg--error ng-show=reportForm.reporterEmail.$error.required>Email address is required.</li><li class=bb-form-msg--error ng-show="reportForm.reporterEmail.$error.email || reportForm.reporterEmail.$error.pattern">Email address is not valid.</li><li class=bb-form-msg--error ng-show=reportForm.reporterEmail.$error.maxlength>Email must be no more than 128 characters.</li></ul></div></div></section><section class=Report-section><h4 class="bb-h4 Report-heading">Which of the following reasons apply?</h4><div class=bb-input-wrap><label ng-repeat="reason in reportScope.reasons" class="bb-label Report-label Report-label--reason"><input class=bb-checkbox type=checkbox ng-change=reportScope.validateReasons() ng-model=reason.isChecked> {{ reason.text }}</label><input type=hidden name=reasonsChecked ng-model=reportScope.reasonsChecked required><ul class="Report-validation-msg bb-list--plain" ng-show="reportScope.showErrors || reportScope.hasTouchedReasons && reportForm.reasonsChecked.$invalid"><li class=bb-form-msg--error ng-show=reportForm.reasonsChecked.$error.required data-test=reasons-checked>Choose at least one reason for reporting.</li></ul></div></section><section class=Report-section><h4 class="bb-h4 Report-heading"><span ng-show=reportScope.isAdminOrModerator data-test=why-deleting>Why are you deleting this comment? </span><span ng-hide=reportScope.isAdminOrModerator data-test=why-reporting>Why are you reporting this comment?</span></h4><div class=bb-input-wrap><textarea class="bb-textarea bb-textarea--stop-growing Report-textarea js-report-detail" name=detail ng-model=reportScope.data.details required ng-minlength=5 ng-maxlength=500 bb-debounce msd-elastic></textarea><div class=Report-chars-remaining ng-if="reportScope.data.details.length > 450">{{ 500 - reportScope.data.details.length }} characters remaining.</div><div ng-switch="reportScope.showErrors || reportForm.detail.$dirty && reportForm.detail.$invalid"><ul ng-switch-when=false class="Report-validation-msg bb-list--plain bb-invisible"><li>Valid</li></ul><ul ng-switch-when=true class="Report-validation-msg bb-list--plain"><li class=bb-form-msg--error ng-show=reportForm.detail.$error.required>Reporting details are required.</li><li class=bb-form-msg--error ng-show=reportForm.detail.$error.minlength>Reporting details must be at least 5 characters.</li><li class=bb-form-msg--error ng-show=reportForm.detail.$error.maxlength>Reporting details must be no more than 500 characters.</li></ul></div></div></section><section class=Report-section ng-if=reportScope.isAdminOrModerator><div class=bb-input-wrap><label class=bb-label><input class=bb-checkbox type=checkbox name=shouldNotify ng-model=reportScope.data.shouldNotify> Should we notify the user that their comment was deleted?</label></div></section><section class=Report-section><p ng-hide=reportScope.isAdminOrModerator>Only use this form to report questionable content. Your member info will remain anonymous.</p><p ng-show=reportScope.isAdminOrModerator><em>Any replies to this comment will also be deleted.</em></p></section><section class=Report-section ng-if=reportScope.apiErr><p class=bb-form-msg--error><span ng-if="reportScope.apiErr === \'401\'">You do not have permission to report this comment. </span><span ng-if="reportScope.apiErr === \'UNKNOWN\'">Something went wrong! Go ahead and try submitting again.</span></p></section><section class="Report-section Report-section--footer"><button class="bb-flat-btn bb-flat-btn--secondary" type=button ng-click=reportScope.cancel() ng-hide=reportScope.busyPosting>Cancel</button> <button class="bb-flat-btn bb-spinner-btn" ng-disabled=reportScope.busyPosting><span bb-visible=!reportScope.busyPosting>{{ reportScope.isAdminOrModerator ? \'Delete\' : \'Report\' }} </span><span bb-visible=reportScope.busyPosting class=bb-spinner-btn__spinner>Posting&hellip;</span></button></section></form>')}}),define("bb/social/reporting/report",[],function(){"use strict";return["$rootScope","$log","currentUserService",function(i,e,r){return{restrict:"E",templateUrl:"bb/social/reporting/report.ng.html",scope:{entity:"=",entityType:"@"},link:function(e,t){var n={};(e.reportScope=n).data={},e.$watch("entityType",function(e){var t;n.reasons=(t=[{key:"INAPPROPRIATE",text:"Inappropriate (Abuse, Threats, etc.)"},{key:"SPAM",text:"Spam (Advertising, Competitor Links, etc.)"}],"comment"===e&&t.push({key:"OFFENSIVE",text:"Offensive (Pornography, Sexual Remarks, etc.)"},{key:"SUSPICIOUS",text:"Suspicious (Phishing, Scams, etc.)"},{key:"OTHER",text:"Other"}),t)}),$(document.activeElement).blur(),i.loggedIn||t.find(".bb-input").first().focus(),n.validateReasons=function(){var t=[];n.hasTouchedReasons=!0,n.reasons.forEach(function(e){e.isChecked&&t.push(e.key)}),n.reasonsChecked=t.join(","),n.data.reasons=t},n.cancel=function(){i.$emit("report.hide")},n.submit=function(){e.reportForm.$invalid?n.showErrors=!0:(delete n.apiErr,n.busyPosting=!0,e.entity.report(n.data).then(function(){n.isAdminOrModerator&&e.$emit("entity.deleted",{entity:e.entity,entityType:e.entityType}),i.$emit("report.hide")},function(e){e&&401===e.status?n.apiErr="401":n.apiErr="UNKNOWN",n.busyPosting=!1}))},r.get().then(function(e){e.user&&e.user.userId&&(n.hideYourInfo=!0,r.isAdminOrModerator()&&(n.isAdminOrModerator=!0))})}}}]}),define("bb/social/reporting/report-modal",["angular"],function(s){"use strict";return["$rootScope","$log","currentUserService",function(o,e,a){return{restrict:"E",templateUrl:"bb/social/reporting/report-modal.ng.html",scope:{},link:function(e,t){var n,i={},r={entity:null,entityType:null};e.reportModalScope=i,n=t.find("bb-dialog"),o.$on("report.show",function(e,t){s.extend(i,r,t),n.controller("bbDialog").dialogOpen()}),o.$on("report.hide",function(){n.controller("bbDialog").dialogClose()}),a.get().then(function(){a.isAdminOrModerator()&&(i.isAdminOrModerator=!0)})}}}]}),define("bb/social/reporting/report-trigger",[],function(){"use strict";return["$rootScope","$log","currentUserService",function(n,e,i){return{restrict:"E",templateUrl:"bb/social/reporting/report-trigger.ng.html",scope:{entity:"=",entityType:"@"},link:function(e){var t={};(e.reportTriggerScope=t).report=function(){n.$emit("report.show",{entity:e.entity,entityType:e.entityType})},i.get().then(function(){i.isAdminOrModerator()&&(t.isAdminOrModerator=!0)})}}}]}),i=this,define("@bbcom/angular-md5",["angular"],function(){return function(){var e;window,(e=window.angular).module("angular-md5",["gdi2290.md5"]),e.module("ngMd5",["gdi2290.md5"]),e.module("gdi2290.md5",["gdi2290.gravatar-filter","gdi2290.md5-service","gdi2290.md5-filter"]),e.module("gdi2290.gravatar-filter",[]).filter("gravatar",["md5",function(n){var i={};return function(e,t){return i[e]||(t=t?n.createHash(t.toString().toLowerCase()):"",i[e]=e?n.createHash(e.toString().toLowerCase()):t),i[e]}}]),e.module("gdi2290.md5-filter",[]).filter("md5",["md5",function(t){return function(e){return e&&t.createHash(e.toString().toLowerCase())}}]),e.module("gdi2290.md5-service",[]).factory("md5",[function(){return{createHash:function(e){function s(e,t){return e<<t|e>>>32-t}function c(e,t){var n=2147483648&e,i=2147483648&t,r=1073741824&e,o=1073741824&t,t=(1073741823&e)+(1073741823&t);return r&o?2147483648^t^n^i:r|o?1073741824&t?3221225472^t^n^i:1073741824^t^n^i:t^n^i}function t(e,t,n,i,r,o,a){return e=c(e,c(c(t&n|~t&i,r),a)),c(s(e,o),t)}function n(e,t,n,i,r,o,a){return e=c(e,c(c(t&i|n&~i,r),a)),c(s(e,o),t)}function i(e,t,n,i,r,o,a){return e=c(e,c(c(t^n^i,r),a)),c(s(e,o),t)}function r(e,t,n,i,r,o,a){return e=c(e,c(c(n^(t|~i),r),a)),c(s(e,o),t)}function o(e){for(var t="",n="",i=0;i<=3;i++)t+=(n="0"+(e>>>8*i&255).toString(16)).substr(n.length-2,2);return t}for(var a,l,u,d,p=[],m=1732584193,f=4023233417,b=2562383102,h=271733878,g=(p=function(e){for(var t,n=e.length,i=n+8,i=16*(1+(i-i%64)/64),r=new Array(i-1),o=0,a=0;a<n;)o=a%4*8,r[t=(a-a%4)/4]=r[t]|e.charCodeAt(a)<<o,a++;return r[t=(a-a%4)/4]=r[t]|128<<(o=a%4*8),r[i-2]=n<<3,r[i-1]=n>>>29,r}(e)).length,v=0;v<g;v+=16)f=r(f=r(f=r(f=r(f=i(f=i(f=i(f=i(f=n(f=n(f=n(f=n(f=t(f=t(f=t(f=t(l=f,b=t(u=b,h=t(d=h,m=t(a=m,f,b,h,p[v+0],7,3614090360),f,b,p[v+1],12,3905402710),m,f,p[v+2],17,606105819),h,m,p[v+3],22,3250441966),b=t(b,h=t(h,m=t(m,f,b,h,p[v+4],7,4118548399),f,b,p[v+5],12,1200080426),m,f,p[v+6],17,2821735955),h,m,p[v+7],22,4249261313),b=t(b,h=t(h,m=t(m,f,b,h,p[v+8],7,1770035416),f,b,p[v+9],12,2336552879),m,f,p[v+10],17,4294925233),h,m,p[v+11],22,2304563134),b=t(b,h=t(h,m=t(m,f,b,h,p[v+12],7,1804603682),f,b,p[v+13],12,4254626195),m,f,p[v+14],17,2792965006),h,m,p[v+15],22,1236535329),b=n(b,h=n(h,m=n(m,f,b,h,p[v+1],5,4129170786),f,b,p[v+6],9,3225465664),m,f,p[v+11],14,643717713),h,m,p[v+0],20,3921069994),b=n(b,h=n(h,m=n(m,f,b,h,p[v+5],5,3593408605),f,b,p[v+10],9,38016083),m,f,p[v+15],14,3634488961),h,m,p[v+4],20,3889429448),b=n(b,h=n(h,m=n(m,f,b,h,p[v+9],5,568446438),f,b,p[v+14],9,3275163606),m,f,p[v+3],14,4107603335),h,m,p[v+8],20,1163531501),b=n(b,h=n(h,m=n(m,f,b,h,p[v+13],5,2850285829),f,b,p[v+2],9,4243563512),m,f,p[v+7],14,1735328473),h,m,p[v+12],20,2368359562),b=i(b,h=i(h,m=i(m,f,b,h,p[v+5],4,4294588738),f,b,p[v+8],11,2272392833),m,f,p[v+11],16,1839030562),h,m,p[v+14],23,4259657740),b=i(b,h=i(h,m=i(m,f,b,h,p[v+1],4,2763975236),f,b,p[v+4],11,1272893353),m,f,p[v+7],16,4139469664),h,m,p[v+10],23,3200236656),b=i(b,h=i(h,m=i(m,f,b,h,p[v+13],4,681279174),f,b,p[v+0],11,3936430074),m,f,p[v+3],16,3572445317),h,m,p[v+6],23,76029189),b=i(b,h=i(h,m=i(m,f,b,h,p[v+9],4,3654602809),f,b,p[v+12],11,3873151461),m,f,p[v+15],16,530742520),h,m,p[v+2],23,3299628645),b=r(b,h=r(h,m=r(m,f,b,h,p[v+0],6,4096336452),f,b,p[v+7],10,1126891415),m,f,p[v+14],15,2878612391),h,m,p[v+5],21,4237533241),b=r(b,h=r(h,m=r(m,f,b,h,p[v+12],6,1700485571),f,b,p[v+3],10,2399980690),m,f,p[v+10],15,4293915773),h,m,p[v+1],21,2240044497),b=r(b,h=r(h,m=r(m,f,b,h,p[v+8],6,1873313359),f,b,p[v+15],10,4264355552),m,f,p[v+6],15,2734768916),h,m,p[v+13],21,1309151649),b=r(b,h=r(h,m=r(m,f,b,h,p[v+4],6,4149444226),f,b,p[v+11],10,3174756917),m,f,p[v+2],15,718787259),h,m,p[v+9],21,3951481745),m=c(m,a),f=c(f,l),b=c(b,u),h=c(h,d);return(o(m)+o(f)+o(b)+o(h)).toLowerCase()}}}])}.apply(i,arguments)}),r=this,define("angular-base64",["angular"],function(){return function(){!function(){"use strict";function a(e,t){t=s.indexOf(e.charAt(t));if(-1==t)throw"Cannot decode base64";return t}function o(e,t){t=e.charCodeAt(t);if(255<t)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return t}var s;angular.module("base64",[]).constant("$base64",(s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",{encode:function(e){if(1!=arguments.length)throw"SyntaxError: Not enough arguments";var t,n,i=[],r=(e=""+e).length-e.length%3;if(0==e.length)return e;for(t=0;t<r;t+=3)n=o(e,t)<<16|o(e,t+1)<<8|o(e,t+2),i.push(s.charAt(n>>18)),i.push(s.charAt(n>>12&63)),i.push(s.charAt(n>>6&63)),i.push(s.charAt(63&n));switch(e.length-r){case 1:n=o(e,t)<<16,i.push(s.charAt(n>>18)+s.charAt(n>>12&63)+"==");break;case 2:n=o(e,t)<<16|o(e,t+1)<<8,i.push(s.charAt(n>>18)+s.charAt(n>>12&63)+s.charAt(n>>6&63)+"=")}return i.join("")},decode:function(e){var t,n,i=(e=""+e).length;if(0==i)return e;if(i%4!=0)throw"Cannot decode base64";t=0,"="==e.charAt(i-1)&&(t=1,"="==e.charAt(i-2)&&(t=2),i-=4);for(var r=[],o=0;o<i;o+=4)n=a(e,o)<<18|a(e,o+1)<<12|a(e,o+2)<<6|a(e,o+3),r.push(String.fromCharCode(n>>16,n>>8&255,255&n));switch(t){case 1:n=a(e,o)<<18|a(e,o+1)<<12|a(e,o+2)<<6,r.push(String.fromCharCode(n>>16,n>>8&255));break;case 2:n=a(e,o)<<18|a(e,o+1)<<12,r.push(String.fromCharCode(n>>16))}return r.join("")}}))}()}.apply(r,arguments)}),define("bb/ui/services/zeus-interceptor/zeus-interceptor",["angular"],function(a){"use strict";return["$q","$log",function(c,l){var n=function(e){var t,n=c.defer(),i=e.data,r=e.status,o=e.headers,a=e.config;return e.config&&e.config.zeus?(t=r<200?"http info":300<=r&&r<=399?"http redirect":400<=r&&r<=499?"http client error":"http server error",(i="string"==typeof i?{msg:i}:i)&&(i.reason=t),n.reject({data:i,status:r,headers:o,config:a})):n.reject(e),n.promise};return{response:function(e){var s=c.defer(),t=n;return e.config&&e.config.zeus?(e.status<200||299<e.status?t:function(t,e,n,i){var r=t,o="",a="";if(n("Content-Type")&&n("Content-Type").match(/text\/plain/g)&&"string"==typeof t&&(0<t.length&&(o=t.substr(0,1),a=t.substr(t.length-1,1)),o.match(/(\[|\{)/)&&a.match(/(\]|\})/)))try{r=JSON.parse(t)}catch(e){l.error('Unable to parse json "%o%',t)}r&&200===r.ret_code?s.resolve({data:r.data,status:e,headers:n,config:i}):"head"===i.method.toLowerCase()||"delete"===i.method.toLowerCase()?s.resolve({status:e,headers:n,config:i}):((t="string"==typeof t?{msg:t}:t).reason="api error ["+t.ret_code+":"+t.err_msg+"]",s.reject({data:t,status:e,headers:n,config:i}))})(e.data,e.status,e.headers,e.config):e.status<200||299<e.status?t(e.data,e.status,e.headers,e.config):s.resolve(e),s.promise},request:function(e){var t,n,i,r,o=function(n){return Object.keys(n).map(function(e){var t=(t=n[e])?a.isArray(t)?encodeURIComponent(t.join(",")):a.isObject(t)?o(t):encodeURIComponent(t.toString()).replace(/%20/g,"+"):"";return encodeURIComponent(e)+"="+t}).join("&")};return e.zeus?(a.extend(t={method:"POST",headers:{Accept:"application/json"}},e),"get"===t.method.toLowerCase()&&(l.info("zeus-http: Changing GET request %s to POST",t.url),t.params?(l.info("zeus-http: Changing query params to form params %o",t.params),t.data=t.params,t.url=t.url,delete t.params,-1!==t.url.indexOf("?")&&l.error("zeus-http: request has params in the URL and in config.params. Some params will be dropped.")):(l.info("zeus-http: GET request uses config.params",e),t.data=(i=t.url,r={},-1!==i.indexOf("?")?(i.split("?")[1].split("&").forEach(function(e){e=e.split("="),r[e[0]]=decodeURIComponent(e[1])}),l.info("zeus-http: GET params converted to params object",i,r)):l.info("zeus-http: GET request has no query params",i),r),t.url=-1!==(n=t.url).indexOf("?")?n.split("?")[0]:n),t.method="POST"),"post"===t.method.toLowerCase()&&(l.info("zeus-http: Changing content-type to application/x-www-form-urlencoded"),t.headers["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8;",t.data=o(t.data))):t=e,t},responseError:n}}]}),define("bb/util/storage",[],function(){"use strict";var o;function e(e){var t="testStorage";try{return window[e].setItem(t,t),window[e].removeItem(t),!0}catch(e){return!1}}function t(t,n){var i;try{i=window[t]}catch(e){window.console.error('Cannot access Storage object "'+t+'"')}function r(e){return o&&i&&"function"==typeof i[e]}this.data={},this.getItem=function(e){return r("getItem")?i.getItem(e):this.data.hasOwnProperty(e)?this.data[e]:n},this.setItem=function(e,t){return r("setItem")?i.setItem(e,t):e?this.data[e]=String(t):n},this.removeItem=function(e){return r("removeItem")?i.removeItem(e):delete this.data[e]},this.key=function(e){return r("key")?i.key(e):Object.keys(this.data)[e]},this.clear=function(){if(r("clear"))return i.clear();this.data={}},this.length=function(){return(o&&i&&"number"===i.length?i:Object.keys(this.data)).length}}return o=e("localStorage")&&e("sessionStorage"),{local:new t("localStorage"),session:new t("sessionStorage"),hasStorage:function(){return o}}}),define("bb/util/browser/get-meta",[],function(){"use strict";return function(e){var t=document.querySelector('meta[name="'+e+'"]');return e=t?t.getAttribute("content"):window[e.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()})]}}),define("bb/ui/services/csrf/csrf-service",["angular","bb/util/storage","bb/util/browser/get-meta","bb/util/is-jasmine"],function(e,a,s,c){"use strict";return["$rootScope","$q",function(e,i){var r={isRunning:!1,requests:[]},o={storageKey:"bbCSRF",storageDateKey:"bbCSRFDate",metaKey:"bb-csrf",token:null,set:function(e){e&&(this.token=e,a.session.setItem(this.storageKey,e),a.session.setItem(this.storageDateKey,new Date))},get:function(){var t=i.defer(),e=s(this.metaKey),n=a.session.getItem(this.storageKey);return this.isTooOld()&&this.clear(),this.token?t.resolve(this.token):e?(this.set(e),t.resolve(e)):n?(this.set(n),t.resolve(n)):this.fetchFromAPI().then(function(e){this.set(e),t.resolve(e)}.bind(o)).catch(t.reject),t.promise},hasToken:function(){return this.token},clear:function(){this.token=null,a.session.removeItem(this.storageKey),a.session.removeItem(this.storageDateKey)},isTooOld:function(){return!(!a.session.getItem(this.storageDateKey)||!a.session.getItem(this.storageKey))&&6e4<new Date-new Date(a.session.getItem(this.storageDateKey))},fetchFromAPI:function(){var e,t,n=i.defer();return c()?(o.set("abc-123-xyz-789"),n.resolve()):(r.requests.push(n),r.isRunning||(r.isRunning=!0,(e=new XMLHttpRequest).addEventListener("load",function(){t=JSON.parse(this.responseText).csrf,r.isRunning=!1,t?r.requests.forEach(function(e){e.resolve(t)}):r.requests.forEach(function(e){e.reject()}),r.requests=[]}),e.withCredentials=!0,e.open("POST","https://api.bodybuilding.com/wrapper/csrf"),e.send())),n.promise}};return e.$on("login",function(e,t){o.set(t.success&&t.data&&t.data.csrfLoginToken&&t.data.csrfLoginToken.csrf)}),e.$on("logout",o.clear.bind(o)),{getCSRFToken:o.get.bind(o)}}]}),define("bb/ui/services/csrf/package",["angular","./csrf-service"],function(e,t){"use strict";return e.module("bb.ui.services.csrf",[]).service("csrfService",t)}),define("bb/ui/services/zeus-interceptor/package",["angular","./zeus-interceptor","bb/ui/services/csrf/package"],function(e,t){"use strict";return e.module("bb.ui.services.zeus-interceptor",["bb.ui.services.csrf"]).service("zeusInterceptor",t).config(["$httpProvider",function(e){e.interceptors.push("zeusInterceptor"),e.defaults.withCredentials=!0}])}),define("bb/ui/services/http-interceptor/http-interceptor",[],function(){"use strict";return["csrfService","$q","$log",function(e,r,o){return{request:function(t){var n=r.defer(),i=t.url;return t.requiresCSRF||document.cookie.split(";").some(function(e){return"lgn"===e.split("=")[0].trim()})&&!t.zeus&&-1!==i.indexOf("bodybuilding.com")&&"https://api.bodybuilding.com/wrapper/csrf"!==i?e.getCSRFToken().then(function(e){t.headers["BB-CSRF"]=e,n.resolve(t)}).catch(function(e){o.warn("Unable to populate CSRF token for API call %s",i,e),n.resolve(t)}):n.resolve(t),n.promise}}}]}),define("bb/ui/services/http-interceptor/package",["angular","./http-interceptor","bb/ui/services/csrf/package"],function(e,t){"use strict";return e.module("bb.ui.services.http-interceptor",["bb.ui.services.csrf"]).service("httpInterceptor",t).config(["$httpProvider",function(e){e.interceptors.push("httpInterceptor"),e.defaults.withCredentials=!0}])}),define("bb/ui/services/user/user-module",["angular","@bbcom/angular-md5","angular-base64","bb/ui/services/zeus-interceptor/package","bb/ui/services/http-interceptor/package","angular-cookies"],function(e){"use strict";e=e.module("bb.ui.services.user",["ngMd5","base64","bb.ui.services.zeus-interceptor","bb.ui.services.http-interceptor","ngCookies"]);return e.constant("bbUserServicesConfig",{api:{currentUser:{get:"https://api.bodybuilding.com/api-proxy/rightsidebar/getinfo"}}}),e}),define("bb/util/enums/bodyspace-group",[],function(){"use strict";var i={names:{GUEST:1,REGISTERED_USER:2,UNACTIVATED:3,MODERATOR:7,SUPER_MODERATOR:5,ADMINISTRATOR:6,BANNED:8,MISERABLE_USERS:10,VIDEO_ADMIN:11},1:{name:"GUEST",title:"Unregistered / logged out",authorizations:[1]},2:{name:"REGISTERED_USER",title:"Registered",authorizations:[1,2]},3:{userTitle:"REGISTERED_USER",title:"Users awaiting email confirmation",authorizations:[1]},4:{userTitle:"REGISTERED_USER",title:"(COPPA) Users awaiting moderation",authorizations:[1]},5:{userTitle:"SUPER_MODERATOR",title:"Super moderators",authorizations:[1,2,5,7]},6:{userTitle:"ADMINISTRATOR",title:"Administrators",authorizations:[1,2,5,6,7,11]},7:{userTitle:"MODERATOR",title:"Moderators",authorizations:[1,2,7]},8:{userTitle:"BANNED",title:"Banned by moderators",authorizations:[1,8]},9:{userTitle:"IFBB Pro Bodybuilder",title:"IFBB Pro Bodybuilders",authorizations:[1,2,9]},10:{userTitle:"MISERABLE_USERS",title:"Miserable users",authorizations:[1]},11:{userTitle:"VIDEO_ADMIN",title:"Video administrators",authorizations:[1,2,11]},forId:function(e){return i[e]},isAuthorized:function(e,t){var n,t=e&&(n=i[e])?-1<n.authorizations.indexOf(t):1===t;return t},isModerator:function(e){return i.isAuthorized(e,i.names.MODERATOR)},isSuperModerator:function(e){return i.isAuthorized(e,i.names.SUPER_MODERATOR)},isAdmin:function(e){return i.isAuthorized(e,i.names.ADMINISTRATOR)},isRegisteredUser:function(e){return i.isAuthorized(e,i.names.REGISTERED_USER)},isBanned:function(e){return i.names.BANNED===e},isUnactivated:function(e){return i.names.UNACTIVATED===e}};return i}),define("lodash/internal/baseToString",[],function(){return function(e){return null==e?"":e+""}}),define("lodash/utility/uniqueId",["../internal/baseToString"],function(n){var i=0;return function(e){var t=++i;return n(e)+t}}),define("bb/ui/services/user/current-user",["angular","./user-module","bb/util/enums/bodyspace-group","bb/util/storage","lodash/utility/uniqueId"],function(p,e,m,f,b){"use strict";var h={isRunning:!1,requests:[]};function t(i,n,r,o,e,a,s){var c,l,u,t="currentUser";function d(){var e,t,n,i=l._currentUser?l._currentUser.user:{};p.equals(u,i)||(u=i,o.info("CurrentUserService#syncRootScope",i),a.currentUser=i,a.loggedIn=l.isLoggedIn(),i&&i.userId&&((e={store:[],my:[]}).store.push({href:"https://www.bodybuilding.com/store/account/order-history",label:"Order History",key:"myStore.orderHistory"}),e.store.push({href:"https://www.bodybuilding.com/store/account/quick-reorder.jsp",label:"Quick Reorder",key:"myStore.quickReorder"}),e.store.push({href:"https://www.bodybuilding.com/store/account/",label:"Manage Account",key:"myStore.manageAccount"}),e.store.push({href:"https://www.bodybuilding.com/store/account/wish-list.jsp",label:"Wish List",key:"myStore.wishList"}),e.my.push({href:"https://my.bodybuilding.com/community/my-bodyspace/",label:"Dashboard",key:"myBodyspace.dashboard"}),e.my.push({href:"https://bodyspace.bodybuilding.com/community/goal",label:"Goal",key:"myBodyspace.goal"}),e.my.push({href:"https://bodyspace.bodybuilding.com/community/plan",label:"Plan",key:"myBodyspace.plan"}),e.my.push({href:"https://bodyspace.bodybuilding.com/community/track",label:"Track",key:"myBodyspace.track"}),e.my.push({href:"https://bodyspace.bodybuilding.com/community/motivation",label:"Motivation",key:"myBodyspace.motivation"}),e.my.push({href:"https://my.bodybuilding.com/friends/"+i.slug,label:"Friends",key:"myBodyspace.friends"}),e.my.push({href:"https://my.bodybuilding.com/followers/"+i.slug,label:"Followers",key:"myBodyspace.followers"}),e.my.push({href:"https://my.bodybuilding.com/alerts/"+i.slug+"?tab=actionitems",label:"Notifications",key:"myBodyspace.notifications"}),l._currentUser&&l._currentUser.navigationLinks?p.isArray(l._currentUser.navigationLinks.links)?a.profileLinks=(t=l._currentUser.navigationLinks,(n={store:[],my:[]}).store=t.links[0].links,n.my=t.links[1].links,n):(o.warn("Expected profile menu links to be an array not an object!"),a.profileLinks=e):a.profileLinks=e),a.$emit("currentUser.changed",a.currentUser))}return a.currentUser={},c={saveToSessionStorage:function(){try{f.session.setItem(t,JSON.stringify(l._currentUser)),o.debug("CurrentUserService#saveToSessionStorage: Current user saved to sessionStorage")}catch(e){o.error("Unable to save to session storage:\n%o",e)}},removeFromSessionStorage:function(){f.session.removeItem(t)},isValueInLocalStorage:function(){var e=f.session.getItem(t);return e&&"null"!==e&&"undefined"!==e},load:function(e){l._currentUser=this.loadFromLocalStorage(),d(),l._currentUser&&(o.debug("CurrentUserService#load: Loaded current user from sessionStorage",l._currentUser),e.notify("user loaded from sessionStorage"),e.resolve(l._currentUser)),this.loadFromServer(e)},loadFromServer:function(e){var t,n={needsuser:1};s.user&&(n.userid=s.user),"debug"===o.level&&(t=b("currentUserService-"),o.time(t),e.promise.then(function(){o.timeEnd(t)})),h.requests.push(e),h.isRunning||(h.isRunning=!0,i.get(r.api.currentUser.get,{params:n,zeus:!0}).then(function(e){e=e.data;h.isRunning=!1,l._currentUser=e,c.saveToSessionStorage(),d(),h.requests.forEach(function(e){e.resolve(l._currentUser)}),h.requests=[]}).catch(function(e){var t=e.data;h.isRunning=!1,h.requests.forEach(function(e){o.error("CurrentUserService#loadFromServer: Unable to load user from server",t),e.reject(t)}),h.requests=[]}))},loadFromLocalStorage:function(){return c.isValueInLocalStorage()?JSON.parse(f.session.getItem(t)):null}},a.loggedIn=(l={_currentUser:null,_email:null,get:function(e){var t=n.defer();return e||this.isLoggedIn()?this._currentUser?t.resolve(this._currentUser):c.load(t):t.resolve({}),t.promise},getEmail:function(){var t=n.defer();return this._email?t.resolve(this._email):l.reload().then(function(e){return e.user?i.get("//api.bodybuilding.com/profile/"+e.user.userId+"/email"):t.reject("NO_USER_DATA")}).then(function(e){e&&e.data.userEmails?t.resolve(e.data.userEmails):t.reject("NO_EMAIL_DATA")}).catch(t.reject),t.promise},flush:function(){c.saveToSessionStorage()},reload:function(){var e=n.defer();return c.loadFromServer(e),e.promise},isLoggedIn:function(){return!!e.lgn},getUnitOfMeasure:function(){var e="imperial";return e=this._currentUser&&this._currentUser.user?this._currentUser.user.unitOfMeasure:e},isBanned:function(){return!(!this._currentUser||!this._currentUser.user)&&m.isBanned(this._currentUser.user.groupId)},isUnactivated:function(){return!(!this._currentUser||!this._currentUser.user)&&m.isUnactivated(this._currentUser.user.groupId)},isInactive:function(){return!(!this._currentUser||!this._currentUser.user)&&(!this._currentUser.user.activated&&!this.isUnactivated())},isAdminOrModerator:function(){if(this._currentUser&&this._currentUser.user){var e=this._currentUser.user.groupId;return m.isModerator(e)||m.isAdmin(e)}return!1},hasUnreadNotifs:function(){var e=this._currentUser;return!(!e||!e.user)&&0<[e.unreadAlertsCount,e.actionItemCount,e.requestsCount,e.unreadMessageCount].reduce(function(e,t){return e+t})}}).isLoggedIn(),a.$on("login",function(e,t){t.success&&(c.removeFromSessionStorage(),l.reload())}),a.$on("logout",function(){c.removeFromSessionStorage(),l.get()}),a.loggedIn||(c.removeFromSessionStorage(),l._currentUser=null),l}return e.service("currentUserService",["$http","$q","bbUserServicesConfig","$log","$cookies","$rootScope","$window",t]),t}),define("bb/ui/core/views",[],{init:function(e){"use strict";e.put("bb/ui/core/dialog-content.html","<div class=bb-dialog__content ng-transclude></div>"),e.put("bb/ui/core/dialog-footer.html","<footer class=bb-dialog__footer><div class=bb-dialog__footer-actions ng-transclude></div></footer>"),e.put("bb/ui/core/dialog-header.html","<header class=bb-dialog__header><div class=bb-dialog__header-content ng-transclude></div><div class=bb-dialog__header-actions><button class=bb-close ng-click=dialogClose()></button></div></header>"),e.put("bb/ui/core/dialog.html",'<div class="bb-dialog-mask bb-hide" tracking-name={{trackingName}} use-hide={{useHideApproach}}><div class=bb-dialog nghide="useHideApproach && !showDialog" ng-if="showDialog || useHideApproach" ng-transclude></div></div>')}}),define("bb/ui/util/device-service",[],function(){"use strict";function e(e,t){return{min:e,max:t}}var a=e(0,767),s=e(768,991),c=e(992,1199),l=e(1200,Number.MAX_VALUE),u={};return function(n,e,i){var t={};function r(){var e=n.device.breakpoint,t=u.desktopWide.matches?"desktop-wide":u.desktop.matches?"desktop":u.tablet.matches?"tablet":"mobile";t!==e&&n.$apply(function(){i.debug("DeviceService#updateDeviceSize: breakpoint is now %s",t),n.device.breakpoint=t,n.$emit("device.breakpoint.changed",t,e)})}function o(){var e=t.getDevice();return e.usesTouchEvents||"mobile"===e.breakpoint||"tablet"===e.breakpoint}return n.device={},u.mobile=e.matchMedia("(max-width: "+a.max+"px)"),u.tablet=e.matchMedia("(min-width: "+s.min+"px)"),u.desktop=e.matchMedia("(min-width: "+c.min+"px)"),u.desktopWide=e.matchMedia("(min-width: "+l.min+"px)"),t.mediaQueries=u,t.bindScreenSize=function(){r(),e.onresize=function(){r()}},t.getDevice=function(){return n.device},t.USES_TOUCH_EVENTS="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,n.device.usesTouchEvents=t.USES_TOUCH_EVENTS,i.debug("DeviceService.USES_TOUCH_EVENTS is %s",t.USES_TOUCH_EVENTS),t.looksLikeMobile=o,t.looksLikeDesktop=function(){return!o()},t.cssFeatureTest=function(e,t,n){var i=e+":",r=document.createElement("test").style;return r.cssText=n?i+t:i+["-webkit-","-moz-","-ms-","-o-",""].join(t+";"+i)+t+";",r[e]},t}}),define("bb/ui/util/ua-service",[],function(){"use strict";return function(){var e={},t=(s=navigator.userAgent).match(/(Android);?[\s/]+([\d.]+)?/),n=s.match(/(iPad).*OS\s([\d_]+)/),i=s.match(/(iPod)(.*OS\s([\d_]+))?/),r=s.match(/Trident\/7/),o=s.match(/Edge\//),a=!n&&s.match(/(iPhone\sOS)\s([\d_]+)/),s=document.documentElement;return t&&(e.android=!0,e.version=t[2]),a&&!i&&(e.ios=e.iphone=!0,e.version=a[2].replace(/_/g,".")),n&&(e.ios=e.ipad=!0,e.version=n[2].replace(/_/g,".")),i&&(e.ios=e.ipod=!0,e.version=i[3]?i[3].replace(/_/g,"."):null),o&&(e.edge=!0,s.className=s.className+" is-edge"),r&&(e.ie11=!0,s.className=s.className+" is-ie11"),e.version&&(e.version=parseFloat(e.version)),e.supportsFixedPositioning=function(){return!0},e}}),define("bb/ui/util/package",["angular","bb/ui/util/device-service","bb/ui/util/ua-service"],function(e,t,n){"use strict";e=e.module("bb.ui.util",[]);return e.service("deviceService",["$rootScope","$window","$log",t]).service("uaService",[n]),e.run(["deviceService",function(e){e.bindScreenSize()}]),e}),define("bb/ui/core/core-module",["angular","bb/ui/core/views","bb/ui/util/package"],function(e,t){"use strict";return e.module("bb.ui.core",["bb.ui.util"]).run(["$templateCache",t.init])}),define("bb/ui/core/debounce",["bb/ui/core/core-module"],function(e){"use strict";e.directive("bbDebounce",["$timeout",function(a){return{restrict:"A",priority:99,require:"ngModel",link:function(e,t,n,i){var r;function o(){e.$apply(function(){var e=t.val().trim();i.$setViewValue(e)})}"radio"!==n.type&&"checkbox"!==n.type&&t.unbind("input").bind("blur",function(){a(o)}).bind("input",function(){a.cancel(r),r=a(o,n.bbDebounce||666)})}}}])}),define("bb/ui/core/dialog",["bb/ui/core/core-module","angular"],function(e,l){"use strict";var t={require:"?^bbDialog",restrict:"EA",transclude:!0,link:function(t,e,n,i){i&&(t.dialogOpen=i.dialogOpen,t.dialogClose=i.dialogClose,t.$watch(i.getActions,function(e){t.actions=e}),t.$watch(i.getParams,function(e){t.params=e}))}},n=function(n,i){function r(e){return e.attr("tracking-name")}function o(e,t){var n=e.controller("bbDialog").getScope();n.showDialog!==t&&n.$evalAsync(function(){n.showDialog=t})}var e={close:function(e){var t;return e?(e=r(t=e.hasClass("bb-dialog-mask")?e:e.parents(".bb-dialog-mask")),t.size()?t.hasClass("bb-hide")?n.debug("dialogService#close: dialog already closed"):(o(t,!1),i.addClass(t,"bb-hide").then(function(){l.element(document.body).removeClass("bb-lock-scroll")}),void(e&&n.log("TODO track",{name:e,action:"close"}))):n.debug("dialogService#close: no dialog")):n.debug("dialogService#close: no elem")},open:function(e){var t;return e?(e=r(t=e.hasClass("bb-dialog-mask")?e:e.find(".bb-dialog-mask")),t.size()?void(t.find(".bb-dialog").length&&"true"!==t.attr("use-hide")||(l.element(document.body).addClass("bb-lock-scroll"),i.removeClass(t,"bb-hide"),o(t,!0),e&&n.log("TODO track",{name:e,action:"open"}))):n.debug("dialogService#open: no dialog")):n.debug("dialogService#open: no elem")}};return e},i=function(){return l.extend({},{templateUrl:"bb/ui/core/dialog-header.html"},t)},r=function(){return l.extend({},{templateUrl:"bb/ui/core/dialog-footer.html"},t)},o=function(){return l.extend({},{templateUrl:"bb/ui/core/dialog-content.html"},t)},a=function(i){return{restrict:"EA",link:function(e,t,n){t.on("click",function(){if(n.selector)i.open(l.element(n.selector));else{for(;0===t.find(".bb-dialog-mask").length;)t=t.parent();i.open(t.find(".bb-dialog-mask"))}})}}},s=function(c){var e={templateUrl:"bb/ui/core/dialog.html",restrict:"EA",transclude:!0,scope:{type:"@",size:"@",trackingName:"@"},controller:["$rootScope","$scope","$element","$log","$attrs",function(t,n,i,r,e){var o=this,a=n.dialogElem=i.find(".bb-dialog-mask"),s="bb-dialog--default";n.type&&"lightbox"===n.type.toLowerCase()&&(s="bb-dialog--lightbox"),a.parent().addClass(s),n.size&&a.parent().addClass("bb-dialog--"+n.size),n.actions={},n.params={},n.showDialog=!1,n.useHideApproach=!1,n.dialogClose=function(){n.params={},t.$emit("dialog.close",i),c.close(a)},n.dialogOpen=function(e){t.$emit("dialog.open",i),c.open(a),n.params=e||{}},this.getActions=function(){return n.actions},this.getParams=function(){return n.params},this.setAction=function(e,t){return r.debug("DialogController#setAction",e,t),n.actions[e]=t,n[e]=t,this},this.dialogClose=n.dialogClose,this.dialogOpen=n.dialogOpen,this.getScope=function(){return n},"clickToDismiss"in e&&i.on("click",function(e){l.element(e.target).hasClass("bb-dialog-mask")&&o.dialogClose()}),"useHideApproach"in e&&(n.useHideApproach=!0)}]};return e};return e.service("dialogService",["$log","$animate",n]),e.directive("bbDialog",["dialogService",s]),e.directive("bbDialogTrigger",["dialogService",a]),e.directive("bbDialogHeader",[i]),e.directive("bbDialogFooter",[r]),e.directive("bbDialogContent",[o]),{DialogService:n,DialogTrigger:a,DialogHeader:i,DialogFooter:r,DialogContent:o,Dialog:s}}),o=this,define("angular-elastic",["angular"],function(){return function(){angular.module("monospaced.elastic",[]).constant("msdElasticConfig",{append:""}).directive("msdElastic",["$timeout","$window","msdElasticConfig",function(_,S,k){"use strict";return{require:"ngModel",restrict:"A, C",link:function(r,e,t,n){var o,i,a,s,c,l,u,d,p,m,f,b,h,g=e[0],v=e;function y(){var e,t,n,i;f!==g&&(f=g,l=getComputedStyle(g),angular.forEach(h,function(e){a+=e+":"+l.getPropertyValue(e)+";"}),c.setAttribute("style",a)),b||(b=!0,c.value=g.value+o,c.style.overflowY=g.style.overflowY,e=""===g.style.height?"auto":parseInt(g.style.height,10),"px"===(t=getComputedStyle(g).getPropertyValue("width")).substr(t.length-2,2)&&(n=parseInt(t,10)-d.width,c.style.width=n+"px"),n=c.scrollHeight,m<n?(n=m,i="scroll"):n<p&&(n=p),n+=d.height,g.style.overflowY=i||"hidden",e!==n&&(g.style.height=n+"px",r.$emit("elastic:resize",v)),_(function(){b=!1},1))}function w(){b=!1,y()}"TEXTAREA"===g.nodeName&&S.getComputedStyle&&(v.css({overflow:"hidden","overflow-y":"hidden","word-wrap":"break-word"}),u=g.value,g.value="",g.value=u,e=t.msdElastic||k.append,o="\\n"===e?"\n":e,i=angular.element(S),a="position: absolute; top: -999px; right: auto; bottom: auto; left: 0 ;overflow: hidden; -webkit-box-sizing: content-box;-moz-box-sizing: content-box; box-sizing: content-box;min-height: 0 !important; height: 0 !important; padding: 0;word-wrap: break-word; border: 0;",s=angular.element('<textarea tabindex="-1" style="'+a+'"/>').data("elastic",!0),c=s[0],u=(l=getComputedStyle(g)).getPropertyValue("resize"),d="border-box"===l.getPropertyValue("box-sizing")||"border-box"===l.getPropertyValue("-moz-box-sizing")||"border-box"===l.getPropertyValue("-webkit-box-sizing")?{width:parseInt(l.getPropertyValue("border-right-width"),10)+parseInt(l.getPropertyValue("padding-right"),10)+parseInt(l.getPropertyValue("padding-left"),10)+parseInt(l.getPropertyValue("border-left-width"),10),height:parseInt(l.getPropertyValue("border-top-width"),10)+parseInt(l.getPropertyValue("padding-top"),10)+parseInt(l.getPropertyValue("padding-bottom"),10)+parseInt(l.getPropertyValue("border-bottom-width"),10)}:{width:0,height:0},t=parseInt(l.getPropertyValue("min-height"),10),e=parseInt(l.getPropertyValue("height"),10),p=Math.max(t,e)-d.height,m=parseInt(l.getPropertyValue("max-height"),10),h=["font-family","font-size","font-weight","font-style","letter-spacing","line-height","text-transform","word-spacing","text-indent"],v.data("elastic")||(m=m&&0<m?m:9e4,c.parentNode!==document.body&&angular.element(document.body).append(c),v.css({resize:"none"===u||"vertical"===u?"none":"horizontal"}).data("elastic",!0),"onpropertychange"in g&&"oninput"in g?g.oninput=g.onkeyup=y:g.oninput=y,i.bind("resize",w),r.$watch(function(){return n.$modelValue},function(e){w()}),r.$on("elastic:adjust",function(){w()}),_(y),r.$on("$destroy",function(){s.remove(),i.unbind("resize",w)})))}}}])}.apply(o,arguments)}),define("bb/social/reporting/package",["angular","bb/util/is-jasmine","./views","./report","./report-modal","./report-trigger","bb/ui/services/user/current-user","bb/ui/core/debounce","bb/ui/core/dialog","angular-elastic"],function(e,t,n,i,r,o){"use strict";e=e.module("bb.social.reporting",["bb.ui.core","bb.ui.services.user","monospaced.elastic"]);return e.directive("bbReport",i),e.directive("bbReportModal",r),e.directive("bbReportTrigger",o),e.config(["$compileProvider",function(e){e.debugInfoEnabled(!!t())}]),e.run(["$templateCache",n.init]),e}),define("bb/social/moderation/views",[],{init:function(e){"use strict";e.put("bb/social/moderation/delete-modal.ng.html","<bb-dialog><bb-dialog-header><div class=bb-dialog__title>Delete Comment</div><div class=bb-dialog__subtitle></div></bb-dialog-header><bb-dialog-content><bb-delete entity=deleteModalScope.entity entity-type={{deleteModalScope.entityType}}></bb-delete></bb-dialog-content></bb-dialog>"),e.put("bb/social/moderation/delete-trigger.ng.html",'<button class="bb-btn--plain bb-link" ng-click=snip()>Delete</button>'),e.put("bb/social/moderation/delete.ng.html",'<div class=DeleteForm><section class=DeleteForm-section><p>Do you really want to delete this comment? This action cannot be undone.</p></section><section class=DeleteForm-section ng-if=!entity.isReply><p><em>Any replies to this comment will also be deleted.</em></p></section><section class=DeleteForm-section ng-if=deleteScope.apiErr><p class=bb-form-msg--error><span ng-if="deleteScope.apiErr === \'401\'">You do not have permission to delete this comment. </span><span ng-if="deleteScope.apiErr === \'UNKNOWN\'">Something went wrong! Go ahead and try submitting again.</span></p></section><section class="DeleteForm-section DeleteForm-section--footer"><button class="bb-flat-btn bb-flat-btn--secondary" ng-click=deleteScope.cancel() ng-hide=deleteScope.busyPosting>Cancel</button> <button class="bb-flat-btn bb-spinner-btn" ng-disabled=deleteScope.busyPosting ng-click=deleteScope.submit()><span bb-visible=!deleteScope.busyPosting>Delete </span><span bb-visible=deleteScope.busyPosting class=bb-spinner-btn__spinner>Deleting&hellip;</span></button></section></div>')}}),define("bb/social/moderation/delete",[],function(){"use strict";return["$rootScope",function(n){return{restrict:"E",templateUrl:"bb/social/moderation/delete.ng.html",scope:{entity:"=",entityType:"@"},link:function(e){var t=e.deleteScope||{};(e.deleteScope=t).submit=function(){t.busyPosting=!0,delete t.apiErr,e.entity.delete().then(function(){e.$emit("entity.deleted",{entity:e.entity,entityType:e.entityType}),n.$emit("delete.hide")},function(e){401===e.status?t.apiErr="401":t.apiErr="UNKNOWN",t.busyPosting=!1})},t.cancel=function(){n.$emit("delete.hide")}}}}]}),define("bb/social/moderation/delete-modal",["angular"],function(a){"use strict";return["$rootScope",function(o){return{restrict:"E",templateUrl:"bb/social/moderation/delete-modal.ng.html",scope:{},link:function(e,t){var n=t.find("bb-dialog"),i={},r={entity:null,entityType:null};e.deleteModalScope=i,o.$on("delete.show",function(e,t){a.extend(i,r,t),n.controller("bbDialog").dialogOpen()}),o.$on("delete.hide",function(){n.controller("bbDialog").dialogClose()})}}}]}),define("bb/social/moderation/delete-trigger",[],function(){"use strict";return["$rootScope",function(t){return{restrict:"E",templateUrl:"bb/social/moderation/delete-trigger.ng.html",scope:{entity:"=",entityType:"@"},link:function(e){e.snip=function(){t.$emit("delete.show",{entity:e.entity,entityType:e.entityType})}}}}]}),define("bb/social/moderation/package",["angular","bb/util/is-jasmine","./views","./delete","./delete-modal","./delete-trigger","bb/ui/core/dialog"],function(e,t,n,i,r,o){"use strict";e=e.module("bb.social.moderation",["bb.ui.core"]);return e.directive("bbDelete",i),e.directive("bbDeleteModal",r),e.directive("bbDeleteTrigger",o),e.config(["$compileProvider",function(e){e.debugInfoEnabled(!!t())}]),e.run(["$templateCache",n.init]),e}),function(){"use strict";function r(t,n){return function(e){return new m(n,!0).update(e)[t]()}}function e(e){var t=r("hex",e);(t=o?p(t,e):t).create=function(){return new m(e)},t.update=function(e){return t.create().update(e)};for(var n=0;n<a.length;++n){var i=a[n];t[i]=r(i,e)}return t}var s="object"==typeof window?window:{},o=!s.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node,t=!(s=o?global:s).JS_SHA256_NO_COMMON_JS&&"object"==typeof module&&module.exports,n="function"==typeof define&&define.amd,c="undefined"!=typeof ArrayBuffer,l="0123456789abcdef".split(""),i=[-2147483648,8388608,32768,128],u=[24,16,8,0],h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=["hex","array","digest","arrayBuffer"],d=[],p=function(t,e){var n=require("crypto"),i=require("buffer").Buffer,r=e?"sha224":"sha256";return function(e){if("string"==typeof e)return n.createHash(r).update(e,"utf8").digest("hex");if(c&&e instanceof ArrayBuffer)e=new Uint8Array(e);else if(void 0===e.length)return t(e);return n.createHash(r).update(new i(e)).digest("hex")}};function m(e,t){t?(d[0]=d[16]=d[1]=d[2]=d[3]=d[4]=d[5]=d[6]=d[7]=d[8]=d[9]=d[10]=d[11]=d[12]=d[13]=d[14]=d[15]=0,this.blocks=d):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}m.prototype.update=function(e){if(!this.finalized){for(var t,n,i="string"!=typeof e,r=0,o=(e=i&&c&&e instanceof s.ArrayBuffer?new Uint8Array(e):e).length||0,a=this.blocks;r<o;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),i)for(n=this.start;r<o&&n<64;++r)a[n>>2]|=e[r]<<u[3&n++];else for(n=this.start;r<o&&n<64;++r)(t=e.charCodeAt(r))<128?a[n>>2]|=t<<u[3&n++]:(t<2048?a[n>>2]|=(192|t>>6)<<u[3&n++]:(t<55296||57344<=t?a[n>>2]|=(224|t>>12)<<u[3&n++]:(t=65536+((1023&t)<<10|1023&e.charCodeAt(++r)),a[n>>2]|=(240|t>>18)<<u[3&n++],a[n>>2]|=(128|t>>12&63)<<u[3&n++]),a[n>>2]|=(128|t>>6&63)<<u[3&n++]),a[n>>2]|=(128|63&t)<<u[3&n++]);this.lastByteIndex=n,this.bytes+=n-this.start,64<=n?(this.block=a[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this}},m.prototype.finalize=function(){var e,t;this.finalized||(this.finalized=!0,e=this.blocks,t=this.lastByteIndex,e[16]=this.block,e[t>>2]|=i[3&t],this.block=e[16],56<=t&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[15]=this.bytes<<3,this.hash())},m.prototype.hash=function(){for(var e,t,n,i,r,o,a=this.h0,s=this.h1,c=this.h2,l=this.h3,u=this.h4,d=this.h5,p=this.h6,m=this.h7,f=this.blocks,b=16;b<64;++b)e=((t=f[b-15])>>>7|t<<25)^(t>>>18|t<<14)^t>>>3,t=f[b-2],f[b]=f[b-16]+e+f[b-7]+((t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)<<0;for(o=s&c,b=0;b<64;b+=4)this.first?(l=this.is224?(n=300032,m=(t=f[0]-1413257819)-150054599<<0,t+24177077<<0):(n=704751109,m=(t=f[0]-210244248)-1521486534<<0,t+143694565<<0),this.first=!1):(m=l+(t=m+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&d^~u&p)+h[b]+f[b])<<0,l=t+((e=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+((n=a&s)^a&c^o))<<0),p=c+(t=p+((m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&u^~m&d)+h[b+1]+f[b+1])<<0,c=t+((e=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10))+((i=l&a)^l&s^n))<<0,d=s+(t=d+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&m^~p&u)+h[b+2]+f[b+2])<<0,s=t+((e=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10))+((r=c&l)^c&a^i))<<0,u=a+(t=u+((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&p^~d&m)+h[b+3]+f[b+3])<<0,a=t+((e=(s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+((o=s&c)^s&l^r))<<0;this.h0=this.h0+a<<0,this.h1=this.h1+s<<0,this.h2=this.h2+c<<0,this.h3=this.h3+l<<0,this.h4=this.h4+u<<0,this.h5=this.h5+d<<0,this.h6=this.h6+p<<0,this.h7=this.h7+m<<0},m.prototype.toString=m.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,i=this.h3,r=this.h4,o=this.h5,a=this.h6,s=this.h7,a=l[e>>28&15]+l[e>>24&15]+l[e>>20&15]+l[e>>16&15]+l[e>>12&15]+l[e>>8&15]+l[e>>4&15]+l[15&e]+l[t>>28&15]+l[t>>24&15]+l[t>>20&15]+l[t>>16&15]+l[t>>12&15]+l[t>>8&15]+l[t>>4&15]+l[15&t]+l[n>>28&15]+l[n>>24&15]+l[n>>20&15]+l[n>>16&15]+l[n>>12&15]+l[n>>8&15]+l[n>>4&15]+l[15&n]+l[i>>28&15]+l[i>>24&15]+l[i>>20&15]+l[i>>16&15]+l[i>>12&15]+l[i>>8&15]+l[i>>4&15]+l[15&i]+l[r>>28&15]+l[r>>24&15]+l[r>>20&15]+l[r>>16&15]+l[r>>12&15]+l[r>>8&15]+l[r>>4&15]+l[15&r]+l[o>>28&15]+l[o>>24&15]+l[o>>20&15]+l[o>>16&15]+l[o>>12&15]+l[o>>8&15]+l[o>>4&15]+l[15&o]+l[a>>28&15]+l[a>>24&15]+l[a>>20&15]+l[a>>16&15]+l[a>>12&15]+l[a>>8&15]+l[a>>4&15]+l[15&a];return this.is224||(a+=l[s>>28&15]+l[s>>24&15]+l[s>>20&15]+l[s>>16&15]+l[s>>12&15]+l[s>>8&15]+l[s>>4&15]+l[15&s]),a},m.prototype.array=m.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,i=this.h3,r=this.h4,o=this.h5,a=this.h6,s=this.h7,a=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,i>>24&255,i>>16&255,i>>8&255,255&i,r>>24&255,r>>16&255,r>>8&255,255&r,o>>24&255,o>>16&255,o>>8&255,255&o,a>>24&255,a>>16&255,a>>8&255,255&a];return this.is224||a.push(s>>24&255,s>>16&255,s>>8&255,255&s),a},m.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e};var f=e();(f.sha256=f).sha224=e(!0),t?module.exports=f:(s.sha256=f.sha256,s.sha224=f.sha224,n&&define("sha256",[],function(){return f}))}(),a="undefined"!=typeof self?self:this,s=function(e){"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var l=window.dataLayer||[];function a(e){try{window.sessionStorage&&"function"==typeof window.sessionStorage.removeItem&&window.sessionStorage.removetem(e)}catch(e){}}function u(e,t){try{t&&("string"!=typeof t&&(t=JSON.stringify(t)),window.sessionStorage&&"function"==typeof window.sessionStorage.setItem&&window.sessionStorage.setItem(e,t))}catch(e){}}function d(e){var t,n;try{!window.sessionStorage||"function"!=typeof window.sessionStorage.getItem||(n=window.sessionStorage.getItem(e))&&(t=n.match(/^(\{|\[)/)?JSON.parse(n):n)}catch(e){}return t}var p=0,m={bbZone1:void 0,bbZone2:void 0,bbZone3:void 0,bbZone4:void 0,isExit:void 0,exitType:void 0,position:void 0,promoType:void 0,promoId:void 0,resultCount:void 0,id:void 0,elementId:void 0,elementClass:void 0,elementType:void 0,eventType:void 0,name:void 0,href:void 0,x:void 0,y:void 0,width:void 0,height:void 0,itemSource:{version:"2.6.3"},navigation:{target:void 0}};function f(e,t,n,i,r,o,a){++p,(o=c({},{itemSource:a},m,o)).itemSource.name||(o.itemSource.name="not-provided",o.itemSource.stack=new Error("").stack),o.eventNumber=p,o.mark||"function"!=typeof window.performance.mark||(a=e+t+p,window.performance.mark(a),o.mark=window.performance.getEntriesByName(a)[0].startTime);o={event:"bbEvent.".concat(e),bbEvent:{event:e,category:t,action:n,label:i,fields:o}};return"number"==typeof r?o.bbEvent.value=r:r&&window.console.warn("Attempt to set value with type %s! Value must be a number! Stack: %s",s(r),(new Error).stack),l.push(o),o}var b=["bbUserId","bbCommerceUserId","bbUserHomeCountry","bbUserHomeState","bbUserHomeCity","bbUserGoalsMain","bbUserGoalsBodyFat","bbUserGoalsPhysique","bbUserGender","bbUserMilitaryBranch","bbUserJoinDate","bbUserLastLogin","bbCommerceOrderCount","bbCommerceLastOrder"];function h(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i={};e.forEach(function(e){return i=c(i,e)});var r=i.privacySettings,o=d("bbUserLoginMethod");return t&&n?(t.event="bbEvent.userDataLoaded",t.bbUserLoggedInStatus=n,t.bbUserLoginMethod=o,t.bbUserLastLogin&&(t.bbUserLastLogin=x(t.bbUserLastLogin)),t.bbUserJoinDate&&(t.bbUserJoinDate=x(t.bbUserJoinDate)),t.subscriptionInfo&&t.subscriptionInfo.allAccessSubscriptionExpiration&&(t.subscriptionInfo.allAccessSubscriptionExpiration=x(t.subscriptionInfo.allAccessSubscriptionExpiration))):n||(t={event:"bbEvent.userDataReset",userId:void 0,bbUserLoggedInStatus:!1,bbUserJoinDate:void 0,bbUserLastLogin:void 0,bbUserHomeCountry:void 0,bbUserHomeState:void 0,bbUserHomeCity:void 0,bbUserGoalsBodyFat:void 0,bbUserGoalsPhysique:void 0,bbUserMilitaryBranch:void 0,bbForumUserRep:void 0,bbUserGoalsMain:void 0,bbUserType:void 0,bbUserSubscriptionStatus:void 0,bbUserCurrencyCode:void 0,subscriptionInfo:void 0,bbUserLoginMethod:void 0,bbCommerceUserId:void 0},a("bba.profile")),t&&(r&&r.experience||b.forEach(function(e){return t[e]=void 0}),e.push(t)),t}function g(e,t,n,i,r){var o;if(!i&&window.performance&&"function"==typeof window.performance.mark&&(o="".concat(e,".").concat(t),window.performance.mark(o),i=(i="array"===(i=window.performance.getEntriesByName(o,"mark")).constructor.name.toLowerCase()?i[i.length-1]:i).startTime),i){n={event:"bbEvent.timing",bbTiming:{hitType:"timing",category:e,variable:t,value:i,label:n}};return r&&(n.itemSource=r),l.push(n),n}}var v=0;function y(e,t){return"".concat(e.name,"[").concat(e.markIndex,"][").concat(++e.counter,"]").concat(t?"."+t:"")}var n=!(!window.performance||"function"!=typeof window.performance.mark),w=!(!window.performance||"function"!=typeof window.performance.measure);function _(e){var t;return n&&(window.performance.mark(e),t=window.performance.getEntriesByName(e,"mark")),t}var S=function(){function n(e,t){r(this,n),this.category=e,this.name=t,this.markIndex=++v,this.counter=0}var e,t,i;return e=n,(t=[{key:"start",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return this.startMark=_(y(this)),this.startMark&&"array"===this.startMark.constructor.name.toLowerCase()&&(this.startMark=this.startMark[this.startMark.length-1]),t&&this.startMark&&g(this.category,this.name+".offset",e,this.startMark.startTime),this}},{key:"measure",value:function(e){var t,n,i,r=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return!window.performance||"function"!=typeof window.performance.measure||(n=(n=_(y(this)))&&"array"===n.constructor.name.toLowerCase()?n[n.length-1]:n)&&this.startMark&&w&&(i=y(this,e),window.performance.measure(i,this.startMark.name,n.name),(t=window.performance.getEntriesByName(i,"measure"))&&"array"===t.constructor.name.toLowerCase()&&(t=t[t.length-1]),g(this.category,this.name+".duration",e,t.duration),r&&g(this.category,this.name+".offset",e,n.startTime)),t}}])&&o(e.prototype,t),i&&o(e,i),n}();function k(e){if(r(this,k),null==e)throw new Error('Cannot construct URL from "'.concat(e,'"'));var t,n,i;for(i in n=e.match(/^https?:\/\/.*/)?new URL(e):(t=window.location,t=e.match(/^\/.*/)?"".concat(t.protocol,"/"):"".concat(t.protocol,"//").concat(t.hostname,"/"),new URL("".concat(t).concat(e))))"function"!=typeof i&&(this[i]=n[i]);this.domain=this.hostname.replace(/^(.+\.)*(\w.*)\.\w+$/,"$2"),this.domain||(this.domain=this.hostname),this.fileName=(n.pathname||n.path||"/").replace(/.*\/(.+)\/?$/,"$1")}var C=864e5,A=7*C,T=30*C,E=12*T;function x(e){var t,n,i=Date.now()-("number"==typeof e?e:e.getTime()),e=Math.abs(i),i=0<i?"ago":"from now";return E<=e?n=1<(t=Math.floor(e/E))?"years":"year":T<=e?n=1<(t=Math.floor(e/T))?"months":"month":A<=e?n=1<(t=Math.floor(e/A))?"weeks":"week":C<=e&&(1<(t=Math.floor(e/C))?n="days":1===t&&(n="day")),n?"".concat(t," ").concat(n," ").concat(i):"today"}function M(){var n=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"===e?t:3&t|8).toString(16)})}e.version="2.6.3",e.sessionSet=u,e.sessionGet=d,e.pushEvent=f,e.validationError=function(e,t,n,i,r,o){return f("validation.".concat(e),"validation",t,n,i,r,o)},e.loginStateChanged=function(e,t,n,i,r,o){return(i=i||{}).bbUserLoginMethod=n,o=f("loginStateChanged","user",e?"login":"logout",t||e?"signed in":"signed out",void 0,i,o),a("bbUserLoginMethod"),a("bba.profile"),e&&n&&u("bbUserLoginMethod",n),h(r,l,e),o},e.pushException=function(e,t,n,i,r){var o,a={};try{o=new k(t||window.location.href)}catch(e){}if(t=r?r.constructor.name:"exception",o=o?"".concat(o.href," :: (line:").concat(n,", col:").concat(i,")"):"exception",e=e,a.line=n,a.col=i,r&&(a.stack=r.stack),0<n&&e&&5<e.length)return l.push({event:"bbEvent.exception",bbEvent:{eventType:"exception",event:t,category:"error",action:o,label:e,fields:a}})},e.populateUserData=h,e.pushTiming=g,e.PerformanceMeasure=S,e.measureExecution=function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"start",r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"completed",o=!(5<arguments.length&&void 0!==arguments[5])||arguments[5],t=new S(e,t);return t.start(i,o),n=n(),t.measure(r,o),n},e.pageView=function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},r=4<arguments.length?arguments[4]:void 0;return i.bbPageName=e,i.event="pageview",i.bbPageViewId=i.bbPageViewId||M(),t&&(i.bbPageType=t),n&&(i.bbPageSubType=n),r&&(i.itemSource=r),l.push(i),i},e.UrlUtil=k,e.getClickZones=function(e){for(var t={},n=!0,i=/^(body|html|head)$/,r=e.localName.match(i)?e:e.parentNode;r&&n;)r&&r.localName&&!r.localName.match(i)||(n=!1),r.dataset&&Object.keys(r.dataset).filter(function(e){return e.match(/^bbZone\d+$/)}).forEach(function(e){t[e]=t[e]||r.dataset[e].toLowerCase(),r.dataset.bbPosition&&(t["".concat(e,"_position")]=r.dataset.bbPosition.toLowerCase())}),n=!t.bbZone1,r=r.parentNode;return t},e.relativeTime=x,e.uuid=M,e.navigationEvent=function(e,t,n,i,r){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"script",a=6<arguments.length?arguments[6]:void 0,s=7<arguments.length?arguments[7]:void 0;return a.itemSource=s||a.itemSource||{name:"not provided"},r?a.navigation={target:r,initiator:o}:a.navigation||(a.navigation={target:"not provided",navigationInitiator:o}),f("click",e,t,n,i,a,s)},e.httpStatus=function(e,t,n){return f("pageError","error","https.status",e,null,t,n)},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?s(exports):"function"==typeof define&&define.amd?define("@bbcom/bb-analytics",["exports"],s):s(a["@bbcom/bb-analytics"]={}),define("bb/ui/services/user/login-resource",["./user-module","bb/util/is-jasmine","sha256","@bbcom/bb-analytics","bb/util/storage"],function(e,o,p,a,m){"use strict";function t(r,s,c,l,u,n){var i={},d={login:[],logout:[]};return i.URL="https://api.bodybuilding.com/login/web",i._doLogout=function(){var e=location.hostname,t="my.bodybuilding.com"===e||"www.teenbodybuilding.com"===e||"www.bodybuilding.com"===e&&location.pathname.length<=1?"https://www.bodybuilding.com":location.href;m.hasStorage()&&m.session.removeItem("bba.profile"),a.loginStateChanged(!1),o()?i._redirectUrl_=t:((e=document.createElement("form")).action="https://api.bodybuilding.com/logout"+(t?"?callback="+n.encode(t):""),e.method="POST",e.name="BBCOM_LOGOUT_FORM",e.style.display="none",document.body.appendChild(e),document.forms.BBCOM_LOGOUT_FORM.submit())},i.registerLogoutObserver=function(e){d.logout.push(e)},i.registerLoginObserver=function(e){d.login.push(e)},i.login=function(e){var t=l.defer(),n={};function o(e){l.all(d.login.map(function(e){return e()})).finally(function(){s.$emit("login",{success:!0,data:e.data}),t.resolve()})}function a(){s.$emit("login",{success:!1}),t.reject()}return n.username=e.username||"",n.password=u.createHash(e.password||""),c.post(i.URL,n,{withCredentials:!0}).then(function(e){var n=l.defer(),i=e.data;return i.showCaptcha?(r.debug("loginResource: Showing captcha"),s.$on("login.captchaResult",function(e,t){n.resolve({responseData:i,captchaResult:t})}),s.$emit("login.runCaptcha")):(r.debug("loginResource: Not showing captcha"),n.resolve({responseData:i})),n.promise}).then(function(e){var t,n,i=e.responseData,e={captchaResult:e.captchaResult,challenge:i},r=i.dataToHash;t="md5"!==i.hashMethod&&"sha256"===i.hashMethod?p:u.createHash;for(n=0;n<i.iterations;n++)r=t(r);e.hashResult=r,c.post(i.verificationUrl,e,{withCredentials:!0}).then(o,a)}).catch(a),t.promise},i.logout=function(){s.$emit("logout"),l.all(d.logout.map(function(e){return e()})).finally(i._doLogout)},i}return e.service("loginResource",["$log","$rootScope","$http","$q","md5","$base64",t]),t}),define("bb/ui/core/avatar",["bb/ui/core/core-module"],function(e){"use strict";e.directive("fallbackSrc",function(){return{restrict:"A",link:function(e,t,n){var i=n.fallbackSrc||"https://artifacts.bbcomcdn.com/bb-resources/2.0.0/img/avatar/Avatar-Unisex-Default_35x35.jpg?fallback";n.ngSrc||n.src?t.one("error",function(){t.removeAttr("srcset"),n.$set("src",i)}):n.$set("src",i)}}})}),define("bb/ui/core/visible",["bb/ui/core/core-module"],function(e){"use strict";e.directive("bbVisible",function(){return function(e,t,n){t.css("visibility","hidden"),e.$watch(n.bbVisible,function(e){e?t.css("visibility","visible"):t.css("visibility","hidden")})}})}),define("bb/ui/signup/signup-service",[],function(){"use strict";return["$rootScope","locationService","cookieService",function(e,n,i){function t(e,t){i.remove("lgn"),t=t.signupURL||"https://www.bodybuilding.com/profile/signup?referrer="+encodeURIComponent(t&&t.redirectURL||location.href),n.assign(t)}return{init:function(){e.$on("signup.show",t)}}}]}),define("bb/ui/flash-message/flash-message-service",[],function(){"use strict";return["cookieService",function(t){var e={set:function(e){t.set({name:"bb-ui-flash-message",value:e,path:"/",domain:".bodybuilding.com",end:new Date+2e4})}};return e}]}),define("bb/ui/flash-message/package",["angular","./flash-message-service","bb/ui/services/cookies/package"],function(e,t){"use strict";return e.module("bb.ui.flash-message",["bb.ui.services.cookies"]).service("flashMessageService",t)}),define("bb/ui/services/utils/utils-module",["angular","bb/ui/flash-message/package"],function(e){"use strict";return e.module("bb.ui.services.utils",["bb.ui.flash-message"])}),define("bb/ui/services/utils/location-service",["./utils-module","bb/util/is-jasmine"],function(e,i){e.service("locationService",["flashMessageService",function(t){function n(e){e&&t.set(e)}return{assign:function(e,t){i()||(n(t),location.assign(e))},reload:function(e,t){i()||(n(t),location.reload(!!e))}}}])}),define("bb/ui/signup/package",["angular","./signup-service","bb/ui/services/utils/location-service"],function(e,t){"use strict";return e.module("bb.ui.signup",["bb.ui.services.utils"]).service("bbUiSignupService",t).run(["bbUiSignupService",function(e){e.init()}])}),define("bb/ui/login/views",[],{init:function(e){"use strict";e.put("bb/ui/login/apple-button.ng.html",'<div class=Login__apple><div id=appleid-signin class=apple-signin-button data-color=black data-border=true data-type="sign in" ng-hide="hideApple || loadingFailed"></div><div class="Login__apple-error-msg bb-form-msg--error" ng-if="error.key == \'POPUP_BLOCKER\'">The login did not complete. Check your popup blocker and try again.</div><div class="Login__apple-error-msg bb-form-msg--error" ng-if="error.key == \'BB_SERVER_ERROR\'">There was an error registering the Apple sign in account into the system. Try again later.</div><div class="Login__apple-error-msg bb-form-msg--error" ng-if="error.key == \'OTHER_ERROR\'">There was an error logging you in with Apple Sign In. Try again later.</div></div>'),e.put("bb/ui/login/facebook-button.ng.html",'<div class=Login__fb><button ng-click=fbBtnScope.onClick() class="bb-btn--facebook bb-btn--stretch bb-spinner-btn" data-bb-label="login with facebook" data-bb-action=login.facebook data-component=bb/ui/login/facebook-button><span bb-visible=!fbBtnScope.busy class=FacebookButton__text>{{ fbBtnScope.label }} </span><span bb-visible=fbBtnScope.busy class=bb-spinner-btn__spinner>{{ fbBtnScope.label }}</span></button><div class=Login__fb-error-msg ng-if="error.key == \'NO_ASSOCIATED_BSPACE_ACCOUNT\'">Your Facebook account is not associated with a BodySpace account. <span class=bb-link bb-emit=login.show bb-emit-params="{ \'hideFacebook\': true, \'hideSignin\': true }">Log in </span>to an existing BodySpace account or <span class=bb-link bb-emit=signup.show>create a new BodySpace account </span>.</div><div class="Login__fb-error-msg bb-form-msg--error" ng-if="error.key == \'USER_CANCELLED\'">The login did not complete. You may have clicked cancel, or your popup blocker may have blocked the Facebook login dialog. Check your popup blocker and try again.</div><div class="Login__fb-error-msg bb-form-msg--error" ng-if="error.key == \'INVALID_DATA\'">There was an error logging you in with Facebook. Try again later.</div></div>'),e.put("bb/ui/login/login.ng.html",'<div class=Login><h2 class=Login__heading>Sign In to Your Account</h2><bb-apple-button id=login-apple-button redirect-url="{{ redirectURL }}" hide-apple="{{ hideApple }}"></bb-apple-button><bb-facebook-button id=login-facebook-button type=login redirect-url="{{ redirectURL }}" ng-hide=hideFacebook></bb-facebook-button><div ng-if=!isFramed ng-hide=hideSignin class=Login__well>Don&apos;t have an account yet? <button id=login-signup-link class="bb-btn--plain bb-link js-signup Login__signup-link" data-bb-action=signup ng-click=loginScope.signup()>Sign up now</button></div><div ng-hide=hideFacebook class=bb-hr-with-label><div class=bb-hr-with-label__label ng-class="{ \'bb-hr-with-label__label--in-dialog\': loginScope.isInDialog}">or</div></div><div class=js-bb-login__container><div class=bb-inputs-wrap><div class=bb-input-wrap><input id=login-username-input class="bb-input bb-input--stretch Login__username" placeholder="Email Address or Username" name=username ng-model=loginScope.credentials.username autofocus autocorrect=off autocapitalize=off ng-if=!disableAutofocus> <input id=login-username-input class="bb-input bb-input--stretch Login__username" placeholder="Email Address or Username" name=username ng-model=loginScope.credentials.username autocorrect=off autocapitalize=off ng-if=disableAutofocus></div><div class=bb-input-wrap><input id=login-password-input class="bb-input bb-input--stretch bb-input--has-forgot-password" placeholder=Password type=password name=password ng-model=loginScope.credentials.password></div></div><div class=bb-inputs-wrap><div ng-if=!isFramed class=bb-input-wrap><button id=login-submit-button class="bb-flat-btn bb-flat-btn--size-md bb-input--stretch bb-spinner-btn js-login" data-bb-action=login data-bb-label=login data-component=bb/ui/login/login ng-click=loginScope.login()><span class=bb-spinner-btn__spinner bb-visible=loginScope.busyPosting>Signing In&hellip; </span><span bb-visible=!loginScope.busyPosting>Sign In</span></button></div><div class="bb-input-wrap Login__signup"><a id=login-forgot-password-link class=js-forgot-password-link data-bb-action=forgot-password data-bb-label="Forgot password" href=https://www.bodybuilding.com/profile/forgot-password>Forgot your password?</a></div></div></div><div id=login-error-messages class=bb-form-msg--error ng-if=loginScope.errMsg><p ng-if="loginScope.errMsg === \'PASSWORD\'">Password is required.</p><p ng-if="loginScope.errMsg === \'USERNAME\'">Username is required.</p><p ng-if="loginScope.errMsg === \'INCORRECT\'">The username or password is incorrect.</p><p ng-if="loginScope.errMsg === \'MAYBE_OFFLINE\'">The server was not reachable. Check your network connection.</p><p ng-if="loginScope.errMsg === \'INCORRECT\'" class=bb-form-msg--info>Have you <a id=login-forgot-username-link href=https://www.bodybuilding.com/profile/forgot-password>forgotten your username or password?</a></p></div><div ng-if=!loginScope.isCaptchaDisabled><div vc-recaptcha on-create=onCaptchaCreate(widgetId) on-success=onCaptchaSuccess(response) on-expire=onCaptchaExpire() key="\'6LffBTYUAAAAAOVu998M6lU1Y-yMY0bkyPjcccTj\'" size="\'invisible\'" ng-model=loginScope.gRecaptchaResponse></div></div><div ng-if=isFramed class=frame-footer><div ng-hide=hideSignin>Don&apos;t have an account yet? <button id=login-signup-link class="bb-btn--plain bb-link js-signup Login__signup-link" data-bb-action=signup ng-click=loginScope.signup()>Sign up now</button></div><div class=Grid-unit><button id=login-submit-button class="bb-flat-btn bb-flat-btn--size-md bb-spinner-btn js-login" data-bb-action=login data-bb-label=login data-component=bb/ui/login/login ng-click=loginScope.login()><span class=bb-spinner-btn__spinner bb-visible=loginScope.busyPosting>Signing In&hellip; </span><span bb-visible=!loginScope.busyPosting>Sign In</span></button></div></div></div>'),e.put("bb/ui/login/modal.ng.html","<bb-dialog tracking-name=login><bb-dialog-header><div class=bb-dialog__title ng-if=header.title>{{ header.title }}</div><div class=bb-dialog__subtitle ng-if=header.subtitle>{{ header.subtitle }}</div></bb-dialog-header><bb-dialog-content><bb-login reload={{reload}} redirect-url={{redirectURL}} redirect-label={{redirectLabel}} dispatch={{dispatch}} emit={{emit}} hide-facebook={{hideFacebook}} hide-signin={{hideSignin}}></bb-login></bb-dialog-content></bb-dialog>")}}),define("bb/ui/login/login-service",[],function(){"use strict";return["$rootScope","profileService",function(t,n){var i={showLogin:function(e){t.$emit("login.show",e)},authenticationRequired:function(){var e=n.isLoggedIn();return e||i.showLogin(),e}};return t.loginService=i}]}),define("bb/util/keys",[],function(){"use strict";var e={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pauseBreak:19,capsLock:20,escape:27,space:32,pageIp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40};return e.arrow={left:e.leftArrow,right:e.rightArrow,up:e.upArrow,down:e.downArrow},e.arrows=[e.leftArrow,e.rightArrow,e.upArrow,e.downArrow],e.insert=45,e.delete=46,e[0]=48,e[1]=49,e[2]=50,e[3]=51,e[4]=52,e[5]=53,e[6]=54,e[7]=55,e[8]=56,e[9]=57,e.a=65,e.b=66,e.c=67,e.d=68,e.e=69,e.f=70,e.g=71,e.h=72,e.i=73,e.j=74,e.k=75,e.l=76,e.m=77,e.n=78,e.o=79,e.p=80,e.q=81,e.r=82,e.s=83,e.t=84,e.u=85,e.v=86,e.w=87,e.x=88,e.y=89,e.z=90,e.leftWindowKey=91,e.rightWindowKey=92,e.selectKey=93,e.numpad0=96,e.numpad1=97,e.numpad2=98,e.numpad3=99,e.numpad4=100,e.numpad5=101,e.numpad6=102,e.numpad7=103,e.numpad8=104,e.numpad9=105,e.multiply=106,e.add=107,e.subtract=109,e.decimalPoint=110,e.divide=111,e.f1=112,e.f2=113,e.f3=114,e.f4=115,e.f5=116,e.f6=117,e.f7=118,e.f8=119,e.f9=120,e.f10=121,e.f11=122,e.f12=123,e.numLock=144,e.scrollLock=145,e.semiColon=186,e.equalSign=187,e.comma=188,e.dash=189,e.period=190,e.forwardSlash=191,e.graveAccent=192,e.openBracket=219,e.backSlash=220,e.closeBraket=221,e.singleQuote=222,e}),define("bb/util/objects",[],function(){"use strict";var e={isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isString:function(e){return"string"==typeof e},isDate:function(e){return"[object Date]"===Object.prototype.toString.call(e)},isNumber:function(e){return"number"==typeof e}},a=window.angular?window.angular.equals:window._&&window._.equals?window._.equals:window.jQuery?window.jQuery.equals:function(n,i){var r,e,o=!0;return n!==i&&(o=Object.prototype.toString.call(n)===Object.prototype.toString.call(i))&&(r=Object.keys(n),e=Object.keys(i),(o=r.length===e.length)&&function(){for(var e,t=r.length;t--&&(e=r[t],o=a(n[e],i[e])););}()),o};return e.equals=a,e}),define("bb/util/strings",["./objects"],function(i){"use strict";var n={};return n.parseQueryString=function(e){var t,n,e=-1<(e=(t=e).indexOf("?"))?t.substring(e+1):"";return n={},(e=e)&&e.split("&").forEach(function(e){var t=e.split("="),e=t[0];1<t.length?(t=decodeURIComponent(t[1]),n[e]?(i.isArray(n[e])||(n[e]=[n[e]]),n[e].push(t)):n[e]=t):n[e]=!0}),n},n.getQueryParam=function(e,t){return n.parseQueryString(t)[e]},n.format=function(e,t){var n=Array.prototype.slice;return void 0===t?e:(e=2<arguments.length||"object"!=typeof t?(t=n.call(arguments)).shift():e).replace(/\{[^\|}]+\}/g,function(e){e=e.substring(1,e.length-1);return"function"==typeof t[e]?t[e]():t[e]})},n}),c=this,define("angular-recaptcha",["angular"],function(){return function(){!function(){"use strict";angular.module("vcRecaptcha",[])}(),function(h){"use strict";h.module("vcRecaptcha").provider("vcRecaptchaService",function(){var f=this,b={};f.onLoadFunctionName="vcRecaptchaApiLoaded",f.setDefaults=function(e){h.copy(e,b)},f.setSiteKey=function(e){b.key=e},f.setTheme=function(e){b.theme=e},f.setStoken=function(e){b.stoken=e},f.setSize=function(e){b.size=e},f.setType=function(e){b.type=e},f.setLang=function(e){b.lang=e},f.setBadge=function(e){b.badge=e},f.setOnLoadFunctionName=function(e){f.onLoadFunctionName=e},f.$get=["$rootScope","$window","$q","$document","$interval",function(t,e,i,n,r){var o,a=i.defer(),s=a.promise,c={};e.vcRecaptchaApiLoadedCallback=e.vcRecaptchaApiLoadedCallback||[];function l(){o=e.grecaptcha,a.resolve(o)}var u,d;function p(){if(!o)throw new Error("reCaptcha has not been loaded yet.")}function m(){return h.isFunction((e.grecaptcha||{}).render)}return e.vcRecaptchaApiLoadedCallback.push(l),e[f.onLoadFunctionName]=function(){e.vcRecaptchaApiLoadedCallback.forEach(function(e){e()})},m()?l():e.document.querySelector('script[src^="https://www.google.com/recaptcha/api.js"]')?u=r(function(){m()&&(r.cancel(u),l())},25):((d=e.document.createElement("script")).async=!0,d.defer=!0,d.src="https://www.google.com/recaptcha/api.js?onload="+f.onLoadFunctionName+"&render=explicit",n.find("body")[0].appendChild(d)),{create:function(t,n){return n.sitekey=n.key||b.key,n.theme=n.theme||b.theme,n.stoken=n.stoken||b.stoken,n.size=n.size||b.size,n.type=n.type||b.type,n.hl=n.lang||b.lang,n.badge=n.badge||b.badge,n.sitekey||function(){throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')}(),(o?i.when(o):s).then(function(e){e=e.render(t,n);return c[e]=t,e})},reload:function(e){p(),o.reset(e),t.$broadcast("reCaptchaReset",e)},execute:function(e){p(),o.execute(e)},useLang:function(e,t){var n=c[e];if(!n)throw new Error("reCaptcha Widget ID not exists",e);e=n.querySelector("iframe");if(!t)return e&&e.src&&/[?&]hl=\w+/.test(e.src)?e.src.replace(/.+[?&]hl=(\w+)([^\w].+)?/,"$1"):null;e&&e.src&&(n=e.src,/[?&]hl=/.test(n)?n=n.replace(/([?&]hl=)\w+/,"$1"+t):n+=(-1===n.indexOf("?")?"?":"&")+"hl="+t,e.src=n)},getResponse:function(e){return p(),o.getResponse(e)},getInstance:function(e){return c[e]},destroy:function(e){delete c[e]}}}]})}(angular),function(d){"use strict";d.module("vcRecaptcha").directive("vcRecaptcha",["$document","$timeout","vcRecaptchaService",function(c,l,u){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"=?",stoken:"=?",theme:"=?",size:"=?",type:"=?",lang:"=?",badge:"=?",tabindex:"=?",required:"=?",onCreate:"&",onSuccess:"&",onExpire:"&"},link:function(i,t,n,e){i.widgetId=null,e&&d.isDefined(n.required)&&i.$watch("required",s);var r=i.$watch("key",function(e){u.create(t[0],{callback:function(e){l(function(){i.response=e,s(),i.onSuccess({response:e,widgetId:i.widgetId})})},key:e,stoken:i.stoken||n.stoken||null,theme:i.theme||n.theme||null,type:i.type||n.type||null,lang:i.lang||n.lang||null,tabindex:i.tabindex||n.tabindex||null,size:i.size||n.size||null,badge:i.badge||n.badge||null,"expired-callback":a}).then(function(n){s(),i.widgetId=n,i.onCreate({widgetId:n}),i.$on("$destroy",o),i.$on("reCaptchaReset",function(e,t){!d.isUndefined(t)&&n!==t||(i.response="",s())})}),r()});function o(){e&&e.$setValidity("recaptcha",null),u.destroy(i.widgetId),d.element(c[0].querySelectorAll(".pls-container")).parent().remove()}function a(){l(function(){i.response="",s(),i.onExpire({widgetId:i.widgetId})})}function s(){e&&e.$setValidity("recaptcha",!1===i.required?null:Boolean(i.response))}}}}])}(angular)}.apply(c,arguments)}),define("bb/ui/login/login",["bb/util/keys","bb/util/strings","@bbcom/bb-analytics","angular-recaptcha"],function(b,h,g){"use strict";return["$log","$rootScope","loginResource","currentUserService","locationService","vcRecaptchaService","$http",function(c,l,u,d,p,m,f){var e={restrict:"EA",templateUrl:"bb/ui/login/login.ng.html",scope:{hideFacebook:"@?hideFacebook",hideApple:"@?hideApple",hideSignin:"@?hideSignin",reload:"@?reload",redirectURL:"@?redirectUrl",signupURL:"@?signupUrl",redirectLabel:"@?redirectLabel",dispatch:"@?dispatch",emit:"@?emit",disableAutofocus:"@?disableAutofocus"},require:"?^bbDialog"};return e.link=function(n,e,t,i){var r,o,a,s;n.loginScope=r={},n.isFramed=!!window.__IS_FRAMED,r.isInDialog=i,r.isCaptchaDisabled=!0,r.credentials={username:"",password:""},r.login=function(){r.credentials.username?r.credentials.password?(r.busyPosting=!0,u.login(r.credentials).then(function(){var t;r.errMsg=null,d.get().then(function(e){if(f.get("https://api.bodybuilding.com/profile/ga").then(function(e){g.loginStateChanged(!0,"logged in",i?"login-dialog":"login-page",{component:"bb/ui/login/login",itemSource:{name:"bb-ui"}},e)}).catch(function(e){c.warn("Error fetching GA profile data. %s",e.message),g.loginStateChanged(!0,"logged in",i?"login-dialog":"login-page",{component:"bb/ui/login/login",itemSource:{name:"bb-ui"}},null)}),"true"===n.dispatch){try{t=new Event("loginSuccess")}catch(e){(t=document.createEvent("Event")).initEvent("loginSuccess",!0,!0)}t.user=e,d.getEmail().then(function(e){t.email=e[0].emailAddress,window.dispatchEvent(t)}),r.busyPosting=!1}else"true"===n.reload?p.reload(!0):o?p.assign(o):"true"===n.emit?l.$emit("login.success"):r.isInDialog||p.assign("https://www.bodybuilding.com")})},function(e,t){c.error("bb-login: Failed login - status:%s ::err:%o",t,e),r.errMsg=0===t?"MAYBE_OFFLINE":"INCORRECT";r.busyPosting=!1,g.validationError("loginStateChanged","login.failed","login failed",void 0,{component:"bb/ui/login/login",itemSource:{name:"bb-ui"}})})):r.errMsg="PASSWORD":r.errMsg="USERNAME"},r.signup=function(){l.$emit("signup.show",{redirectURL:o,signupURL:a})},o=n.redirectURL,a=n.signupURL,(s=h.getQueryParam("referrer",location.href))&&(o=decodeURIComponent(s)),s=h.getQueryParam("requireLogin",location.href),"isStandaloneLoginPage"in t&&d.isLoggedIn()&&void 0===s&&p.assign(o||"https://www.bodybuilding.com","You’re already logged in!"),e.find(".js-bb-login__container").on("keydown",function(e){e.which===b.enter&&n.$apply(r.login)}),r.isInDialog&&e.find(".Login__username").first().focus(),n.onCaptchaCreate=function(e){r.captchaWidgetId=e},n.onCaptchaSuccess=function(e){l.$emit("login.captchaResult",e)},l.$on("login.runCaptcha",function(){r.isCaptchaDisabled=!1,n.$watch(function(){return r.captchaWidgetId},function(e){void 0!==e&&(m.reload(),m.execute())})})},e}]}),define("bb/ui/login/modal",[],function(){"use strict";return[function(){var e={restrict:"EA",templateUrl:"bb/ui/login/modal.ng.html",scope:{}};return e.controller=["$rootScope","$scope","$element","$window",function(n,i,e,t){var r;r=e.find("bb-dialog"),t.addEventListener("loginShow",function(e){e={headerTitle:e.headerTitle,headerSubtitle:e.headerSubtitle,reload:e.reload},n.$emit("login.show",e)}),n.$on("login.show",function(e,t){i.header={},i.reload="true",t&&(i.header.title=t.headerTitle,i.header.subtitle=t.headerSubtitle,i.reload=t.reload||i.reload,i.redirectURL=t.redirectURL,i.redirectLabel=t.redirectLabel,i.dispatch=t.dispatch,i.emit=t.emit,i.hideFacebook=t.hideFacebook,i.hideSignin=t.hideSignin),r.controller("bbDialog").dialogOpen(),n.$emit("facebook.needsSDKInjected")}),n.$on("login",function(e,t){t.success&&r.controller("bbDialog").dialogClose()})}],e}]}),define("bb/ui/login/facebook-button",["@bbcom/bb-analytics"],function(d){"use strict";return["facebookService","$log","$rootScope","locationService",function(s,c,l,u){var e={restrict:"EA",templateUrl:"bb/ui/login/facebook-button.ng.html",scope:{type:"@",label:"@",redirectURL:"@?redirectUrl"},require:"?^bbDialog",link:function(n,e,t,i){var r,o;function a(e){var t={component:"bb/ui/login/facebook-button",itemSource:{name:"bb-ui"}};e&&401===e.status?(t.message="Facebook account not linked",n.error={key:"NO_ASSOCIATED_BSPACE_ACCOUNT"}):n.error=e,c.error("FacebookButton#loginAction: Error logging in.",e),d.validationError("loginStateChanged","login.facebook.failed","facebook login failed",void 0,t)}n.fbBtnScope=o={},i||l.$emit("facebook.needsSDKInjected"),r={login:{onClick:function(){o.busy=!0,s.login().then(function(){d.loginStateChanged(!0,null,i?"login-dialog.facebook":"login-page.facebook",{component:"bb/ui/login/facebook-button",itemSource:{name:"bb-ui"}}),i?u.reload(!0):u.assign(n.redirectURL||"https://www.bodybuilding.com")}).catch(a).finally(function(){o.busy=!1})},label:"Sign In with Facebook"},signup:{onClick:function(){o.busy=!0,s.getDataForSignUp().then(function(e){l.$emit("bbFacebookButton:signupData",e)}).catch(function(e){l.$emit("bbFacebookButton:signupData",e)}).finally(function(){o.busy=!1})},label:"Sign up with Facebook"},connect:{onClick:function(){o.busy=!0,s.connect().catch(a).finally(function(){o.busy=!1})},label:"Connect with Facebook"}},n.type=n.type||"login",o.onClick=r[n.type].onClick,o.label=n.label||r[n.type].label}};return e}]}),define("bb/ui/login/apple-button",["@bbcom/bb-analytics"],function(s){"use strict";return["appleService","$log","$document","locationService","appleServiceConfig",function(n,r,e,o,a){return{restrict:"EA",templateUrl:"bb/ui/login/apple-button.ng.html",link:function(i){function t(e,t){var n=e.key;s.validationError("loginStateChanged","login.apple.failed","apple login failed",void 0,{component:"bb/ui/login/apple-button",itemSource:{name:"bb-ui"}}),void 0===n&&(n="popup_blocked_by_browser"===e.detail.error?"POPUP_BLOCKER":"OTHER_ERROR"),i.error={key:n},t||i.$apply(),r.error("Apple Sign-in Error: ",n,e.type,e.detail)}i.hideApple?r.warn("BbAppleButton#linkAppleButton: hidding apple login method"):(n.loadAppleID().then(function(e){e.auth.init(a.config)}).catch(function(){r.error("BbAppleButton#linkAppleButton: fail loading apple script"),i.loadingFailed=!0}),e.on("AppleIDSignInOnSuccess",function(e){n.login(e).then(function(){s.loginStateChanged(!0,null,"login-dialog.apple",{component:"bb/ui/login/apple-button",itemSource:{name:"bb-ui"}}),o.assign(i.redirectURL||"https://www.bodybuilding.com")}).catch(function(){t({key:"BB_SERVER_ERROR"},!0)})}),e.on("AppleIDSignInOnFailure",t))},scope:{hideApple:"@",redirectURL:"@?redirectUrl"}}}]}),define("bb/ui/login/login-required",[],function(){"use strict";return["$log","$rootScope","$timeout","currentUserService","loginResource",function(e,a,s,c,l){return{restrict:"A",scope:{loginParams:"&?bbLoginParams"},link:function(t,e){var n,i;function r(){c.reload().then(function(e){n=e,c.getEmail().then(function(e){i=e[0].emailAddress,o()}).catch(o)})}function o(){var t;try{t=new Event("loginSuccess")}catch(e){(t=document.createEvent("Event")).initEvent("loginSuccess",!0,!0)}t.user=n,t.email=i,e[0].dispatchEvent(t)}e.on("click",function(){(a.loggedIn?r:function(){var e=t.loginParams?t.loginParams():{};!1===e.reload&&(e.reload="false");e.emit=!0,s(function(){a.$emit("login.show",e)})})()}),a.$on("login.success",function(e,t){t&&t.user&&t.email?(n=t.user,i=t.email,o()):r()}),t.logOut=l.logout}}}]}),define("bb/ui/services/user/profile-service",["./user-module","bb/util/strings","bb/util/storage","./login-resource"],function(e,m,f){"use strict";return e.service("profileService",["$q","$http","$cookies","$log","loginResource",function(n,i,e,t,r){var o,a={},s=f.session,c="bbcom-profile-service-cache",l="bbcom-profile-service-cache-ttl",u=document.querySelector('link[rel="bb:profile-api-root"]'),d={isRunning:!1,requests:[]};function p(e,t){2===arguments.length&&!t.success||(s.removeItem(l),s.removeItem(c))}return o=u?u.href:"https://profile-api.bodybuilding.com/",u||t.warn('profileService: Missing `link[rel="bb:profile-api-root"]`'),a.isLoggedIn=function(){return!!e.lgn},a.get=function(){var e,t=n.defer();return e=s.getItem(l),s.getItem(c)&&e&&Date.now()<new Date(Number(e))?t.resolve(JSON.parse(s.getItem(c))):(d.requests.push(t),d.isRunning||(d.isRunning=!0,i.get(m.format("{0}profile/me",o)).then(function(t){var e;d.requests.forEach(function(e){e.resolve(t.data)}),e=t.data,s.setItem(l,Date.now()+6e4),s.setItem(c,JSON.stringify(e))}).catch(function(t){d.requests.forEach(function(e){e.reject(t)})}).finally(function(){d.requests=[],d.isRunning=!1}))),t.promise},a.set=function(t){var e=n.defer();return a.isLoggedIn()?a.getUserId().then(function(e){return i.put("https://api.bodybuilding.com/profile/"+e,t)}).then(function(){e.resolve(),p()}).catch(e.reject):e.reject(),e.promise},a.setTextFields=function(t){var e=n.defer();return a.isLoggedIn()?a.getUserId().then(function(e){return i.post("https://api.bodybuilding.com/profile/setprofiletextfield",{profiletextfield:JSON.stringify(t),userid:e},{zeus:!0,requiresCSRF:!0})}).then(function(){e.resolve(),p()}).catch(e.reject):e.reject(),e.promise},a.getUserId=function(){var t=n.defer();return a.get().then(function(e){e=e.userId;t[e?"resolve":"reject"](e)}).catch(t.reject),t.promise},r.registerLogoutObserver(p),r.registerLoginObserver(p),a.isLoggedIn()||p(),a}])}),define("bb/ui/core/emit",["bb/ui/core/core-module"],function(e){"use strict";e.directive("bbEmit",["$rootScope","$timeout",function(n,i){return{restrict:"A",scope:{eventName:"@bbEmit",eventParams:"&?bbEmitParams"},link:function(t,e){e.on("click",function(){var e;t.eventParams&&(e=t.eventParams()),i(function(){n.$emit(t.eventName,e)})})}}}])}),define("lodash/lang/isObject",[],function(){return function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}}),define("lodash/internal/isObjectLike",[],function(){return function(e){return!!e&&"object"==typeof e}}),define("lodash/lang/isString",["../internal/isObjectLike"],function(t){var n=Object.prototype.toString;return function(e){return"string"==typeof e||t(e)&&"[object String]"==n.call(e)}}),define("lodash/support",[],function(){var e=Array.prototype,r=Error.prototype,o=Object.prototype.propertyIsEnumerable,a=e.splice,s={};return function(){function e(){this.x=1}var t,n={0:1,length:1},i=[];for(t in e.prototype={valueOf:1,y:1},new e)i.push(t);s.enumErrorProps=o.call(r,"message")||o.call(r,"name"),s.enumPrototypes=o.call(e,"prototype"),s.nonEnumShadows=!/valueOf/.test(i),s.ownLast="x"!=i[0],s.spliceObjects=(a.call(n,0,1),!n[0]),s.unindexedChars="x"[0]+Object("x")[0]!="xx"}(),s}),define("lodash/internal/toObject",["../lang/isObject","../lang/isString","../support"],function(r,o,a){return function(e){if(a.unindexedChars&&o(e)){for(var t=-1,n=e.length,i=Object(e);++t<n;)i[t]=e.charAt(t);return i}return r(e)?e:Object(e)}}),define("lodash/internal/baseGet",["./toObject"],function(o){return function(e,t,n){if(null!=e){e=o(e);for(var i=0,r=((t=void 0!==n&&n in e?[n]:t).length);null!=e&&i<r;)e=o(e)[t[i++]];return i&&i==r?e:void 0}}}),define("lodash/lang/isFunction",["./isObject"],function(t){var n=Object.prototype.toString;return function(e){return t(e)&&"[object Function]"==n.call(e)}}),define("lodash/internal/isHostObject",[],function(){return function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}}()}),define("lodash/lang/isNative",["./isFunction","../internal/isHostObject","../internal/isObjectLike"],function(t,n,i){var r=/^\[object .+?Constructor\]$/,e=Object.prototype,o=Function.prototype.toString,e=e.hasOwnProperty,a=RegExp("^"+o.call(e).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return function(e){return null!=e&&(t(e)?a.test(o.call(e)):i(e)&&(n(e)?a:r).test(e))}}),define("lodash/internal/getNative",["../lang/isNative"],function(n){return function(e,t){return t=null==e?void 0:e[t],n(t)?t:void 0}}),define("lodash/internal/isLength",[],function(){return function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991}}),define("lodash/lang/isArray",["../internal/getNative","../internal/isLength","../internal/isObjectLike"],function(e,t,n){var i=Object.prototype.toString;return e(Array,"isArray")||function(e){return n(e)&&t(e.length)&&"[object Array]"==i.call(e)}}),define("lodash/internal/toPath",["./baseToString","../lang/isArray"],function(t,n){var i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,o=/\\(\\)?/g;return function(e){if(n(e))return e;var r=[];return t(e).replace(i,function(e,t,n,i){r.push(n?i.replace(o,"$1"):t||e)}),r}}),define("lodash/object/get",["../internal/baseGet","../internal/toPath"],function(i,r){return function(e,t,n){return void 0===(t=null==e?void 0:i(e,r(t),t+""))?n:t}}),l=this,define("angular-facebook",["angular"],function(){return function(){!function(r,c){"use strict";var l,u={},d={sdk:!1,injectState:null,ready:!1};function p(e){var t,n,i=e.defer();return"success"===d.injectState?i.resolve():("progress"===d.injectState&&l.promise.then(function(){return i.resolve(),i.promise}),t="//connect.facebook.net/"+u.locale+"/sdk.js",(n=document.createElement("script")).id="facebook-jssdk",n.async=!0,i=e.defer(),-1!==r.location.protocol.indexOf("file:")&&(t="https:"+t),n.onload=function(){d.sdk=!0,d.injectState="success",l.promise.then(i.resolve)},n.onerror=function(){d.injectState="error",i.reject()},n.src=t,document.getElementsByTagName("head")[0].appendChild(n)),i.promise}c.module("facebook",[]).value("settings",u).value("flags",d).provider("Facebook",[function(){u.appId=null,this.setAppId=function(e){u.appId=e},this.getAppId=function(){return u.appId},u.locale="en_US",this.setLocale=function(e){u.locale=e},this.getLocale=function(){return u.locale},u.status=!0,this.setStatus=function(e){u.status=e},this.getStatus=function(){return u.status},u.channelUrl=null,this.setChannel=function(e){u.channelUrl=e},this.getChannel=function(){return u.channelUrl},u.cookie=!0,this.setCookie=function(e){u.cookie=e},this.getCookie=function(){return u.cookie},u.xfbml=!0,this.setXfbml=function(e){u.xfbml=e},this.getXfbml=function(){return u.xfbml},this.setAuthResponse=function(e){u.authResponse=e||!0},this.getAuthResponse=function(){return u.authResponse},u.frictionlessRequests=!1,this.setFrictionlessRequests=function(e){u.frictionlessRequests=e},this.getFrictionlessRequests=function(){return u.frictionlessRequests},u.hideFlashCallback=null,this.setHideFlashCallback=function(e){u.hideFlashCallback=e||null},this.getHideFlashCallback=function(){return u.hideFlashCallback},this.setInitCustomOption=function(e,t){return!!c.isString(e)&&(u[e]=t,u[e])},this.getInitOption=function(e){return!(!c.isString(e)||!u.hasOwnProperty(e))&&u[e]},u.loadSDK=!0,this.setLoadSDK=function(e){u.loadSDK=!!e},this.getLoadSDK=function(){return u.loadSDK},u.version="v2.0",this.setSdkVersion=function(e){u.version=e},this.getSdkVersion=function(){return u.version},this.init=function(e,t){c.isString(e)&&(u.appId=e),c.isNumber(e)&&(u.appId=e.toString()),c.isObject(e)&&c.extend(u,e),c.isDefined(t)&&(u.loadSDK=!!t)},this.$get=["$q","$rootScope","$window",function(o,a,s){function e(){this.appId=u.appId}return e.prototype.isReady=function(){return d.ready},e.prototype.injectSDK=function(){return p(o)},e.prototype.login=function(){var n,i,t=o.defer(),r=Array.prototype.slice.call(arguments);return c.forEach(r,function(e,t){c.isFunction(e)&&(n=e,i=t)}),c.isFunction(n)&&c.isNumber(i)&&r.splice(i,1,function(e){a.$evalAsync(function(){e&&c.isUndefined(e.error)?t.resolve(e):t.reject(e),c.isFunction(n)&&n(e)})}),l.promise.then(function(e){e.login.apply(e,r)}),t.promise},c.forEach(["logout","api","ui","getLoginStatus"],function(r){e.prototype[r]=function(){var n,i,t=o.defer(),e=Array.prototype.slice.call(arguments);return c.forEach(e,function(e,t){c.isFunction(e)&&(n=e,i=t)}),c.isFunction(n)&&c.isNumber(i)&&e.splice(i,1,function(e){a.$evalAsync(function(){e&&c.isUndefined(e.error)?t.resolve(e):t.reject(e),c.isFunction(n)&&n(e)})}),l.promise.then(function(){s.FB[r].apply(FB,e)}),t.promise}}),e.prototype.parseXFBML=function(){var e=o.defer();return l.promise.then(function(){s.FB.XFBML.parse(),e.resolve()}),e.promise},c.forEach(["subscribe","unsubscribe"],function(r){e.prototype[r]=function(){var n,i,t=o.defer(),e=Array.prototype.slice.call(arguments);return c.forEach(e,function(e,t){c.isFunction(e)&&(n=e,i=t)}),c.isFunction(n)&&c.isNumber(i)&&e.splice(i,1,function(e){a.$evalAsync(function(){e&&c.isUndefined(e.error)?t.resolve(e):t.reject(e),c.isFunction(n)&&n(e)})}),l.promise.then(function(){s.FB.Event[r].apply(FB,e)}),t.promise}}),new e}]}]).run(["$rootScope","$q","$window",function(n,e,t){l=e.defer();var i=u.loadSDK;delete u.loadSDK,t.fbAsyncInit=function(){n.$evalAsync(function(){if(!u.appId)throw"Missing appId setting.";FB.init(u),d.ready=!0,c.forEach({"auth.login":"login","auth.logout":"logout","auth.prompt":"prompt","auth.sessionChange":"sessionChange","auth.statusChange":"statusChange","auth.authResponseChange":"authResponseChange","xfbml.render":"xfbmlRender","edge.create":"like","edge.remove":"unlike","comment.create":"comment","comment.remove":"uncomment"},function(t,e){FB.Event.subscribe(e,function(e){n.$evalAsync(function(){n.$broadcast("Facebook:"+t,e)})})}),n.$broadcast("Facebook:load"),l.resolve(FB)})},(t=document.getElementById("fb-root"))||((t=document.createElement("div")).id="fb-root",document.body.insertBefore(t,document.body.childNodes[0])),i&&p(e)}])}(window,angular)}.apply(l,arguments)}),define("bb/ui/services/gdpr/gdpr-service",["bb/util/browser/get-meta"],function(r){"use strict";return["$log","$rootScope",function(n,e){var i={isAllowed:function(e,t){window.admiral&&window.bbGetConsent?window.bbGetConsent(e,t):window.bbGdprIsAllowed?t(window.bbGdprIsAllowed(e)):(n.warn("GdprService#isAllowed: Missing `window.bbGdprIsAllowed`. Defaulting to false"),t(!1))},hasCookie:function(e){window.admiral&&window.bbIsConsentKnown?window.bbIsConsentKnown(e):window.bbGdprHasCookie?e(window.bbGdprHasCookie()):(n.warn("GdprService#hasCookie: Missing `window.bbGdprhasCookie`. Defaulting to false"),e(!1))},isEU:function(e){window.admiral&&window.bbIsEU?window.bbIsEU(e):window.bbGdprIsEU?e(window.bbGdprIsEU()):(n.warn("GdprService#isEU: Missing `window.bbGdprIsEU`. Defaulting to true"),e(!0))},willShowModal:function(t){var n="disabled"!==r("bb:consent-modal-enabled")&&"disabled"!==r("bb:gdpr-modal-enabled");i.hasCookie(function(e){t(n&&!e)})}};return window.admiral&&window.admiral("after","cmp.updated",function(){e.$emit("consent-modal.updated")}),i}]}),define("bb/ui/services/gdpr/package",["angular","./gdpr-service"],function(e,t){"use strict";return e.module("bb.ui.services.gdpr",[]).service("gdprService",t)}),define("bb/ui/facebook/facebook-module",["angular","angular-facebook","bb/ui/services/http-interceptor/package","bb/ui/services/gdpr/package"],function(e){"use strict";e=e.module("bb.ui.facebook",["facebook","bb.ui.core","bb.ui.services.http-interceptor","bb.ui.services.gdpr"]);return e.config(["FacebookProvider",function(e){e.init({loadSDK:!1,version:"v2.8",appId:"197335844169"})}]),e.constant("facebookServiceConfig",{api:{login:"https://api.bodybuilding.com/login/facebook"}}),e}),define("bb/ui/facebook/facebook-service",["lodash/object/get","./facebook-module"],function(n,e){"use strict";e.factory("facebookService",["$q","$http","$rootScope","currentUserService","facebookServiceConfig","Facebook","gdprService",function(r,i,o,a,s,c,e){var t={};function l(e){return n(e,"socialMediaCategoryList.authorizationMap.FACEBOOK",!1)}function u(){var t=r.defer();return c.login(function(e){"connected"===e.status?e.authResponse?t.resolve(e.authResponse):t.reject({key:"INVALID_DATA",message:"Invalid data returned by Facebook SDK"}):t.reject({key:"USER_CANCELLED",message:"User cancelled login"})}),t.promise}return o.$on("facebook.needsSDKInjected",c.injectSDK),t.isReady=function(){return c.isReady()},t.login=function(){var t=r.defer();return c.injectSDK().then(function(){u().then(function(e){return t=e.userID,n=e.accessToken,e=s.api.login,i.post(e,{socialUserId:t,accessToken:n},{cache:!1});var t,n},t.reject).then(function(e){o.$emit("login",{success:!0,data:e}),t.resolve(e)},function(e){"object"!=typeof e&&t.resolve(null),t.reject(e)})}),t.promise},t.getDataForSignUp=function(){var t,n=r.defer();return t=["id","first_name","last_name","name","email","birthday","gender"],c.injectSDK().then(function(){u().then(function(e){o.$emit("FacebookService:authResponse",e),c.api("/me",{fields:t.join(",")},function(e){e.error?n.reject(e):n.resolve(e)})},function(e){n.reject(e)})}),n.promise},t.connect=function(){var e=r.defer();return c.injectSDK().then(function(){u().then(e.resolve,e.reject)}),e.promise},t.isBodyspaceAccountConnectedToFacebook=function(){var t=r.defer();return e.isAllowed("social",function(e){e?(window.console.warn("GDPR: facebookService#isBodyspaceAccountConnectedToFacebook disabled"),t.reject({key:"DISABLED_BY_GDPR",message:"FB functionality disabled by GDPR"})):a.get().then(function(e){l(e)?t.resolve("BODYSPACE_ACCOUNT_IS_CONNECTED"):t.reject({key:"BODYSPACE_ACCOUNT_IS_NOT_CONNECTED",message:"Bodyspace account is not connected"})},function(){t.reject({key:"FAILED_TO_GET_USER",message:"Could not retrieve current user"})})}),t.promise},t.getFacebookSharingPreferences=function(n){var i=r.defer();return e.isAllowed("social",function(e){e?(window.console.warn("GDPR: facebookService#getFacebookSharingPreferences disabled"),i.reject({key:"DISABLED_BY_GDPR",message:"FB functionality disabled by GDPR"})):a.get().then(function(e){var t;l(e)||i.reject({key:"BODYSPACE_ACCOUNT_NOT_CONNECTED",message:"Bodyspace account is not connected to a Facebook account"}),t=e.socialMediaCategoryList.socialMediaCategories[0].socialPreferenceList.socialPreferences,(e={}).weight=t[0].map.FACEBOOK,e.bodyfat=t[1].map.FACEBOOK,e.bodystat=t[2].map.FACEBOOK,n?i.resolve(e[n]):i.resolve()},function(){i.reject({key:"FAILED_TO_GET_USER",message:"Could not retrieve current user"})})}),i.promise},t}])}),define("bb/ui/apple/apple-module",["angular","bb/ui/services/http-interceptor/package"],function(e){"use strict";e=e.module("bb.ui.apple",["bb.ui.core","bb.ui.services.http-interceptor"]);return e.constant("appleServiceConfig",{api:{login:"https://api.bodybuilding.com/login/apple",signup:"https://api.bodybuilding.com/profile/apple"},config:{clientId:"com.bodybuilding.web",scope:"name email",redirectURI:window.location.origin+"/login/apple/redirect",usePopup:!0}}),e}),define("bb/ui/apple/apple-service",["lodash/object/get","./apple-module"],function(d,e){"use strict";e.factory("appleService",["$q","$http","$rootScope","$log","appleServiceConfig",function(s,c,l,i,u){var e={};return e.login=function(e){var t=s.defer(),n=d(e,"detail.authorization.code"),i=d(e,"detail.authorization.id_token"),r=d(e,"detail.user.email",null),o=d(e,"detail.user.name.firstName",null),a=d(e,"detail.user.name.lastName",null),e=d(e,"detail.authorization.state",null);return o=o,a=a,e={authorizationCode:n,identityToken:i,state:e=e},o=(r=r)||o||a?(e.email=r,e.fullName={familyName:a,givenName:o},u.api.signup):u.api.login,c.post(o,e,{cache:!1}).then(function(e){l.$emit("login",{success:!0,data:e}),t.resolve(e)},t.reject),t.promise},e.loadAppleID=function(){var e,t,n=s.defer();return window.AppleID?n.resolve(window.AppleID):(e=s.defer(),(t=document.getElementById("appleIdScript"))||((t=document.createElement("script")).id="appleIdScript",t.src="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",t.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(t)),t.addEventListener("load",e.resolve),t.addEventListener("error",e.reject),e.promise.then(function(){window.define&&window.define.amd&&i.warn("AppleService#loadAppleID: apple script is not compatible with RequireJS in window"),window.AppleID?n.resolve(window.AppleID):n.reject()}).catch(n.reject)),n.promise},e}])}),define("bb/ui/login/package",["angular","./views","./login-service","./login","./modal","./facebook-button","./apple-button","./login-required","bb/ui/services/utils/location-service","bb/ui/services/user/current-user","bb/ui/services/user/login-resource","bb/ui/services/user/profile-service","bb/ui/core/dialog","bb/ui/core/emit","bb/ui/core/visible","bb/ui/facebook/facebook-service","bb/ui/apple/apple-service","bb/ui/signup/package","bb/ui/flash-message/package","angular-recaptcha"],function(e,n,t,i,r,o,a,s){"use strict";e=e.module("bb.ui.login",["bb.ui.services.user","bb.ui.services.utils","bb.ui.core","bb.ui.facebook","bb.ui.apple","bb.ui.signup","bb.ui.flash-message","vcRecaptcha"]);return e.run(["$rootScope","$templateCache",function(e,t){n.init(t),e.loginModal=function(){e.emit("loginModal")}}]),e.service("loginService",t),e.directive("bbLogin",i),e.directive("bbLoginModal",r),e.directive("bbFacebookButton",o),e.directive("bbAppleButton",a),e.directive("bbLoginRequired",s),e}),define("bb/ui/profile/profile-module",["angular"],function(e){"use strict";return e.module("bb.ui.profile",[])}),define("bb/ui/profile/current-user-avatar",["bb/ui/profile/profile-module","bb/ui/services/user/current-user","bb/util/strings"],function(e,t,d){"use strict";e.directive("currentUserAvatar",["$log","currentUserService",function(i,r){var n="//common.bbcomcdn.com/images/default-avatar/",o=[35,50,70,80,100,145,180,196,295],a={male:"Male",female:"Female",unisex:"Unisex",unknown:"Unisex"};function s(e,t){return e=a[(e||"unisex").toLowerCase()],-1===o.indexOf(t=t||35)&&i.warn("Size of "+t+" not allowed."),d.format("{imgDir}Avatar-{gender}-Default_{size}x{size}.jpg",{imgDir:n,gender:e,size:t})}function c(t){return o.map(function(e){return s(t,e)+" "+e+"w"}).join(", ")}function l(e,t){return void 0===e?s(null,t):(-1===o.indexOf(t=t||35)&&i.warn("Size of "+t+" not allowed."),e=/^https?:(.+)(\.[^.]+)$/.exec(e),t={protocol:location.protocol,imgPath:e[1],ext:e[2],size:t},d.format("{protocol}{imgPath}-{size}x{size}{ext}",t))}function u(t){return o.map(function(e){return l(t,e)+" "+e+"w"}).join(", ")}return n=n.replace("http:",location.protocol),{template:'<img ng-src="{{src}}" ng-srcset="{{srcSet}}">',replace:!0,restrict:"E",scope:{},link:function(t,e,n){n.profilePicOriginalPath?(t.src=l(n.profilePicOriginalPath,35),t.srcSet=u(n.profilePicOriginalPath)):r.get().then(function(e){e.user?void 0===e.user.profilePicOriginalPath?(t.src=s(e.user.gender,35),t.srcSet=c(e.user.gender)):(t.src=l(e.user.profilePicOriginalPath,35),t.srcSet=u(e.user.profilePicOriginalPath)):(t.src=s("Unisex",35),t.srcSet=c("Unisex"))},function(e){i.warn("Displaying Unisex Default avatar because:",e),t.src=s("Unisex",35),t.srcSet=c("Unisex")})}}}])}),u=this,define("angular-once",["angular"],function(){return function(){!function(i,l){"use strict";function u(t,n,e,i,r,o){var a=i(t);if(a!==l)return o(n,i==r?a:r(t));var s=t.$watch(e,function(e){if(e!=l)return c(),o(n,i==r?e:r(t))});function c(){s&&s()}t.$on("$destroy",c)}var e=i.module("once",[]);var t=[{name:"onceText",binding:function(e,t){e.text(null!==t?t:"")}},{name:"onceHtml",binding:function(e,t){e.html(t)}},{name:"onceSrc",priority:99,binding:function(e,t){e.attr("src",t)}},{name:"onceHref",priority:99,binding:function(e,t){e.attr("href",t)}},{name:"onceTitle",binding:function(e,t){e.attr("title",t)}},{name:"onceAlt",binding:function(e,t){e.attr("alt",t)}},{name:"onceId",binding:function(e,t){e.attr("id",t)}},{name:"onceIf",priority:600,binding:function(e,t){t||e.remove()}},{name:"onceClass",binding:function(e,t){var n;i.isObject(t)&&!i.isArray(t)&&(n=[],i.forEach(t,function(e,t){e&&n.push(t)}),t=n),t&&e.addClass(i.isArray(t)?t.join(" "):t)}},{name:"onceStyle",binding:function(e,t){e.css(t)}},{name:"onceShow",binding:function(e,t){t?e.css("display",""):e.css("display","none")}},{name:"onceHide",binding:function(e,t){t?e.css("display","none"):e.css("display","")}}];i.forEach(t,function(a){e.directive(a.name,["$parse",function(o){return{priority:a.priority||0,link:function(e,t,n){var i=n.onceWaitFor||n[a.name],r=o(i);u(e,t,i,r,n.onceWaitFor?o(n[a.name]):r,a.binding)}}}])}),e.directive("once",["$parse",function(c){return function(o,a,s){i.forEach(s,function(e,i){var t,n,r;/^onceAttr[A-Z]/.test(i)&&(t=s.onceWaitFor||s[i],n=c(t),r=s.onceWaitFor?c(s[i]):n,u(o,a,t,n,r,function(e,t){var n=i.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).substr(10);e.attr(n,t)}))})}}])}((window,window.angular))}.apply(u,arguments)}),define("bb/social/commenting/package",["angular","bb/util/is-jasmine","angular-animate","./views","./comments","./comments-count","./comments-show-more","./comments-empty","./comment-tree","./comment-post","./comment-show","./comment-text","./comment-service","./comment-loader","./hal-comment","./hal-comment-author","bb/ui/services/hal/package","bb/social/reporting/package","bb/social/moderation/package","bb/ui/services/user/current-user","bb/ui/services/user/login-resource","bb/ui/services/http-interceptor/package","bb/ui/core/avatar","bb/ui/core/debounce","bb/ui/core/visible","bb/ui/signup/package","bb/ui/login/package","bb/ui/profile/profile-module","bb/ui/profile/current-user-avatar","angular-once","angular-recaptcha"],function(e,t,n,i,r,o,a,s,c,l,u,d,p,m,f,b){"use strict";e=e.module("bb.social.commenting",["ngAnimate","bb.ui.core","bb.ui.login","bb.ui.signup","bb.ui.services.user","bb.ui.services.hal","bb.ui.services.http-interceptor","bb.social.reporting","bb.social.moderation","bb.ui.profile","once","vcRecaptcha"]);return e.directive("bbComments",r),e.directive("bbCommentsCount",o),e.directive("bbCommentsShowMore",a),e.directive("bbCommentsEmpty",s),e.directive("bbCommentTree",c),e.directive("bbCommentPost",l),e.directive("bbCommentShow",u),e.directive("bbCommentLoader",m),e.directive("bbCommentText",d),e.factory("HalComment",f),e.factory("HalCommentAuthor",b),e.service("bbCommentService",p),e.config(["$compileProvider",function(e){e.debugInfoEnabled(!!t())}]),e.run(["$templateCache",i.init]),e}),define("bb/ui/slider/views",[],{init:function(e){"use strict";e.put("bb/ui/slider/control.html",'<div class="Slider-control Slider-control--{{direction}}" ng-if=control.enabled data-bb-category=slider data-bb-action={{direction}} ng-click=control.fire($event)><div class="Slider-controlIcon Slider-controlIcon--{{direction}}"></div></div>'),e.put("bb/ui/slider/fade-out.html","<div class=Slider__fade-out-overlay></div>"),e.put("bb/ui/slider/layer.html","<div ng-class=classes ng-style=styles ng-transclude></div>"),e.put("bb/ui/slider/pager.html",'<div class="Slider-pager Grid-row" ng-if=pager.enabled><button data-page={{$index}} class="Slider-pagerBtn Grid-unit bb-btn--plain" ng-class="{\'Slider-pagerBtn--active\': slider.currentSlide == $index }" ng-repeat="slide in slider.slides" data-bb-category=slider data-bb-action=pager[{{$index}}] ng-click=slider.jump($index)></button></div>'),e.put("bb/ui/slider/responsive-image.html",'<a class="js__image Slider-image-link" ng-if=resposiveImage.href ng-href={{resposiveImage.href}}></a><div class="js__image Slider-image-link" ng-if=!resposiveImage.href></div>'),e.put("bb/ui/slider/slide.html","<div class=Slider-slide ng-transclude></div>"),e.put("bb/ui/slider/slider.html","<div class=Slider ng-transclude></div>")}}),define("jquery",[],function(){return window.jQuery}),function(r,s,l){"use strict";var o=["","webkit","Moz","MS","ms","o"],e=s.createElement("div"),n="function",a=Math.round,u=Math.abs,c=Date.now;function d(e,t,n){return setTimeout(g(e,n),t)}function i(e,t,n){return Array.isArray(e)&&(p(e,n[t],n),1)}function p(e,t,n){if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==l)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(var i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function t(n,e,t){var i="DEPRECATED METHOD: "+e+"\n"+t+" AT \n";return function(){var e=new Error("get-stack-trace"),t=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",e=r.console&&(r.console.warn||r.console.log);return e&&e.call(r.console,i,t),n.apply(this,arguments)}}var m="function"!=typeof Object.assign?function(e){if(e===l||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==l&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}:Object.assign,f=t(function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)(!n||n&&e[i[r]]===l)&&(e[i[r]]=t[i[r]]),r++;return e},"extend","Use `assign`."),b=t(function(e,t){return f(e,t,!0)},"merge","Use `assign`.");function h(e,t,n){var i=t.prototype,t=e.prototype=Object.create(i);t.constructor=e,t._super=i,n&&m(t,n)}function g(e,t){return function(){return e.apply(t,arguments)}}function v(e,t){return typeof e==n?e.apply(t&&t[0]||l,t):e}function y(e,t){return e===l?t:e}function w(t,e,n){p(C(e),function(e){t.addEventListener(e,n,!1)})}function _(t,e,n){p(C(e),function(e){t.removeEventListener(e,n,!1)})}function S(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function k(e,t){return-1<e.indexOf(t)}function C(e){return e.trim().split(/\s+/g)}function A(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function T(e){return Array.prototype.slice.call(e,0)}function E(e,n,t){for(var i=[],r=[],o=0;o<e.length;){var a=n?e[o][n]:e[o];A(r,a)<0&&i.push(e[o]),r[o]=a,o++}return i=t?n?i.sort(function(e,t){return e[n]>t[n]}):i.sort():i}function x(e,t){for(var n,i=t[0].toUpperCase()+t.slice(1),r=0;r<o.length;){if((n=(n=o[r])?n+i:t)in e)return n;r++}return l}var M=1;function D(e){e=e.ownerDocument||e;return e.defaultView||e.parentWindow||r}var I="ontouchstart"in r,O=x(r,"PointerEvent")!==l,$=I&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),P="touch",R=25,L=1,U=4,j=8,F=1,z=2,N=4,B=8,H=16,Y=z|N,q=B|H,G=Y|q,W=["x","y"],V=["clientX","clientY"];function K(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){v(t.options.enable,[t])&&n.handler(e)},this.init()}function Z(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,o=t&L&&i-r==0,r=t&(U|j)&&i-r==0;n.isFirst=!!o,n.isFinal=!!r,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=X(t));1<r&&!n.firstMultiple?n.firstMultiple=X(t):1===r&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=(a||o).center,r=t.center=J(i);t.timeStamp=c(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=ne(s,r),t.distance=te(s,r),function(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},o=e.prevInput||{};t.eventType!==L&&o.eventType!==U||(r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y});t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}(n,t),t.offsetDirection=ee(t.deltaX,t.deltaY);r=Q(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=r.x,t.overallVelocityY=r.y,t.overallVelocity=u(r.x)>u(r.y)?r.x:r.y,t.scale=a?function(e,t){return te(t[0],t[1],V)/te(e[0],e[1],V)}(a.pointers,i):1,t.rotation=a?function(e,t){return ne(t[1],t[0],V)+ne(e[1],e[0],V)}(a.pointers,i):0,t.maxPointers=!n.prevInput||t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers,function(e,t){var n,i,r=e.lastInterval||t,o=t.timeStamp-r.timeStamp;{var a,s,c;t.eventType!=j&&(R<o||r.velocity===l)?(a=t.deltaX-r.deltaX,s=t.deltaY-r.deltaY,c=Q(o,a,s),n=c.x,i=c.y,c=u(c.x)>u(c.y)?c.x:c.y,s=ee(a,s),e.lastInterval=t):(c=r.velocity,n=r.velocityX,i=r.velocityY,s=r.direction)}t.velocity=c,t.velocityX=n,t.velocityY=i,t.direction=s}(n,t);e=e.element;S(t.srcEvent.target,e)&&(e=t.srcEvent.target);t.target=e}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function X(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:a(e.pointers[n].clientX),clientY:a(e.pointers[n].clientY)},n++;return{timeStamp:c(),pointers:t,center:J(t),deltaX:e.deltaX,deltaY:e.deltaY}}function J(e){var t=e.length;if(1===t)return{x:a(e[0].clientX),y:a(e[0].clientY)};for(var n=0,i=0,r=0;r<t;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:a(n/t),y:a(i/t)}}function Q(e,t,n){return{x:t/e||0,y:n/e||0}}function ee(e,t){return e===t?F:u(e)>=u(t)?e<0?z:N:t<0?B:H}function te(e,t,n){var i=t[(n=n||W)[0]]-e[n[0]],n=t[n[1]]-e[n[1]];return Math.sqrt(i*i+n*n)}function ne(e,t,n){var i=t[(n=n||W)[0]]-e[n[0]],n=t[n[1]]-e[n[1]];return 180*Math.atan2(n,i)/Math.PI}K.prototype={handler:function(){},init:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(D(this.element),this.evWin,this.domHandler)}};var ie={mousedown:L,mousemove:2,mouseup:U},re="mousedown",oe="mousemove mouseup";function ae(){this.evEl=re,this.evWin=oe,this.pressed=!1,K.apply(this,arguments)}h(ae,K,{handler:function(e){var t=ie[e.type];t&L&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=U),this.pressed&&(t&U&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var se={pointerdown:L,pointermove:2,pointerup:U,pointercancel:j,pointerout:j},ce={2:P,3:"pen",4:"mouse",5:"kinect"},le="pointerdown",ue="pointermove pointerup pointercancel";function de(){this.evEl=le,this.evWin=ue,K.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(le="MSPointerDown",ue="MSPointerMove MSPointerUp MSPointerCancel"),h(de,K,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=se[i],o=ce[e.pointerType]||e.pointerType,a=o==P,i=A(t,e.pointerId,"pointerId");r&L&&(0===e.button||a)?i<0&&(t.push(e),i=t.length-1):r&(U|j)&&(n=!0),i<0||(t[i]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(i,1))}});var pe={touchstart:L,touchmove:2,touchend:U,touchcancel:j};function me(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,K.apply(this,arguments)}h(me,K,{handler:function(e){var t,n=pe[e.type];n===L&&(this.started=!0),this.started&&(t=function(e,t){var n=T(e.touches),e=T(e.changedTouches);t&(U|j)&&(n=E(n.concat(e),"identifier",!0));return[n,e]}.call(this,e,n),n&(U|j)&&t[0].length-t[1].length==0&&(this.started=!1),this.callback(this.manager,n,{pointers:t[0],changedPointers:t[1],pointerType:P,srcEvent:e}))}});var fe={touchstart:L,touchmove:2,touchend:U,touchcancel:j},be="touchstart touchmove touchend touchcancel";function he(){this.evTarget=be,this.targetIds={},K.apply(this,arguments)}h(he,K,{handler:function(e){var t=fe[e.type],n=function(e,t){var n=T(e.touches),i=this.targetIds;if(t&(2|L)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,a=T(e.changedTouches),s=[],c=this.target;if(o=n.filter(function(e){return S(e.target,c)}),t===L)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;r=0;for(;r<a.length;)i[a[r].identifier]&&s.push(a[r]),t&(U|j)&&delete i[a[r].identifier],r++;if(s.length)return[E(o.concat(s),"identifier",!0),s]}.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:P,srcEvent:e})}});var ge=2500;function ve(){K.apply(this,arguments);var e=g(this.handler,this);this.touch=new he(this.manager,e),this.mouse=new ae(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function ye(e){var t,n,e=e.changedPointers[0];e.identifier===this.primaryTouch&&(t={x:e.clientX,y:e.clientY},this.lastTouches.push(t),n=this.lastTouches,setTimeout(function(){var e=n.indexOf(t);-1<e&&n.splice(e,1)},ge))}h(ve,K,{handler:function(e,t,n){var i=n.pointerType==P,r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)!function(e,t){e&L?(this.primaryTouch=t.changedPointers[0].identifier,ye.call(this,t)):e&(U|j)&&ye.call(this,t)}.call(this,t,n);else if(r&&function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(t-r.x),r=Math.abs(n-r.y);if(o<=25&&r<=25)return!0}return!1}.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var we=x(e.style,"touchAction"),_e=we!==l,Se="manipulation",ke="none",Ce="pan-x",Ae="pan-y",Te=function(){if(!_e)return!1;var t={},n=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){t[e]=!n||r.CSS.supports("touch-action",e)}),t}();function Ee(e,t){this.manager=e,this.set(t)}Ee.prototype={set:function(e){"compute"==e&&(e=this.compute()),_e&&this.manager.element.style&&Te[e]&&(this.manager.element.style[we]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return p(this.manager.recognizers,function(e){v(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(e){if(k(e,ke))return ke;var t=k(e,Ce),n=k(e,Ae);if(t&&n)return ke;if(t||n)return t?Ce:Ae;if(k(e,Se))return Se;return"auto"}(t.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var i=this.actions,r=k(i,ke)&&!Te.none,o=k(i,Ae)&&!Te[Ae],a=k(i,Ce)&&!Te[Ce];if(r){var s=1===e.pointers.length,i=e.distance<2,e=e.deltaTime<250;if(s&&i&&e)return}if(!a||!o)return r||o&&n&Y||a&&n&q?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var xe=1;function Me(e){this.options=m({},this.defaults,e||{}),this.id=M++,this.manager=null,this.options.enable=y(this.options.enable,!0),this.state=xe,this.simultaneous={},this.requireFail=[]}function De(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function Ie(e){return e==H?"down":e==B?"up":e==z?"left":e==N?"right":""}function Oe(e,t){t=t.manager;return t?t.get(e):e}function $e(){Me.apply(this,arguments)}function Pe(){$e.apply(this,arguments),this.pX=null,this.pY=null}function Re(){$e.apply(this,arguments)}function Le(){Me.apply(this,arguments),this._timer=null,this._input=null}function Ue(){$e.apply(this,arguments)}function je(){$e.apply(this,arguments)}function Fe(){Me.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ze(e,t){return(t=t||{}).recognizers=y(t.recognizers,ze.defaults.preset),new Ne(e,t)}Me.prototype={defaults:{},set:function(e){return m(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(i(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Oe(e,this)).id]||(t[e.id]=e).recognizeWith(this),this},dropRecognizeWith:function(e){return i(e,"dropRecognizeWith",this)||(e=Oe(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(i(e,"requireFailure",this))return this;var t=this.requireFail;return-1===A(t,e=Oe(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(i(e,"dropRequireFailure",this))return this;e=Oe(e,this);e=A(this.requireFail,e);return-1<e&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(t){var n=this,e=this.state;function i(e){n.manager.emit(e,t)}e<8&&i(n.options.event+De(e)),i(n.options.event),t.additionalEvent&&i(t.additionalEvent),8<=e&&i(n.options.event+De(e))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|xe)))return!1;e++}return!0},recognize:function(e){e=m({},e);if(!v(this.options.enable,[this,e]))return this.reset(),void(this.state=32);56&this.state&&(this.state=xe),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(e){},getTouchAction:function(){},reset:function(){}},h($e,Me,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=6&t,e=this.attrTest(e);return i&&(n&j||!e)?16|t:i||e?n&U?8|t:2&t?4|t:2:32}}),h(Pe,$e,{defaults:{event:"pan",threshold:10,pointers:1,direction:G},getTouchAction:function(){var e=this.options.direction,t=[];return e&Y&&t.push(Ae),e&q&&t.push(Ce),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,o=e.deltaX,a=e.deltaY;return r&t.direction||(i=t.direction&Y?(r=0===o?F:o<0?z:N,n=o!=this.pX,Math.abs(e.deltaX)):(r=0===a?F:a<0?B:H,n=a!=this.pY,Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return $e.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Ie(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),h(Re,$e,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ke]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){var t;1!==e.scale&&(t=e.scale<1?"in":"out",e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),h(Le,Me,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(U|j)&&!r)this.reset();else if(e.eventType&L)this.reset(),this._timer=d(function(){this.state=8,this.tryEmit()},t.time,this);else if(e.eventType&U)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&e.eventType&U?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}}),h(Ue,$e,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ke]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),h(je,$e,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Y|q,pointers:1},getTouchAction:function(){return Pe.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(Y|q)?t=e.overallVelocity:n&Y?t=e.overallVelocityX:n&q&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&u(t)>this.options.velocity&&e.eventType&U},emit:function(e){var t=Ie(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),h(Fe,Me,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Se]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&L&&0===this.count)return this.failTimeout();if(i&&r&&n){if(e.eventType!=U)return this.failTimeout();r=!this.pTime||e.timeStamp-this.pTime<t.interval,n=!this.pCenter||te(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,n&&r?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=d(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=d(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ze.VERSION="2.0.7",ze.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Ue,{enable:!1}],[Re,{enable:!1},["rotate"]],[je,{direction:Y}],[Pe,{direction:Y},["swipe"]],[Fe],[Fe,{event:"doubletap",taps:2},["tap"]],[Le]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Ne(e,t){this.options=m({},ze.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((e=this).options.inputClass||(O?de:$?he:I?ve:ae))(e,Z),this.touchAction=new Ee(this,this.options.touchAction),Be(this,!0),p(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function Be(n,i){var r,o=n.element;o.style&&(p(n.options.cssProps,function(e,t){r=x(o.style,t),i?(n.oldCssProps[r]=o.style[r],o.style[r]=e):o.style[r]=n.oldCssProps[r]||""}),i||(n.oldCssProps={}))}Ne.prototype={set:function(e){return m(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t,n=this.session;if(!n.stopped){this.touchAction.preventDefaults(e);var i=this.recognizers,r=n.curRecognizer;(!r||r&&8&r.state)&&(r=n.curRecognizer=null);for(var o=0;o<i.length;)t=i[o],2===n.stopped||r&&t!=r&&!t.canRecognizeWith(r)?t.reset():t.recognize(e),!r&&14&t.state&&(r=n.curRecognizer=t),o++}},get:function(e){if(e instanceof Me)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(i(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),(e.manager=this).touchAction.update(),e},remove:function(e){return i(e,"remove",this)||!(e=this.get(e))||-1!==(e=A(t=this.recognizers,e))&&(t.splice(e,1),this.touchAction.update()),this;var t},on:function(e,t){if(e!==l&&t!==l){var n=this.handlers;return p(C(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==l){var n=this.handlers;return p(C(e),function(e){t?n[e]&&n[e].splice(A(n[e],t),1):delete n[e]}),this}},emit:function(e,t){var n,i,r;this.options.domEvents&&(n=e,i=t,(r=s.createEvent("Event")).initEvent(n,!0,!0),(r.gesture=i).target.dispatchEvent(r));var o=this.handlers[e]&&this.handlers[e].slice();if(o&&o.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var a=0;a<o.length;)o[a](t),a++}},destroy:function(){this.element&&Be(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},m(ze,{INPUT_START:L,INPUT_MOVE:2,INPUT_END:U,INPUT_CANCEL:j,STATE_POSSIBLE:xe,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:F,DIRECTION_LEFT:z,DIRECTION_RIGHT:N,DIRECTION_UP:B,DIRECTION_DOWN:H,DIRECTION_HORIZONTAL:Y,DIRECTION_VERTICAL:q,DIRECTION_ALL:G,Manager:Ne,Input:K,TouchAction:Ee,TouchInput:he,MouseInput:ae,PointerEventInput:de,TouchMouseInput:ve,SingleTouchInput:me,Recognizer:Me,AttrRecognizer:$e,Tap:Fe,Pan:Pe,Swipe:je,Pinch:Re,Rotate:Ue,Press:Le,on:w,off:_,each:p,merge:b,extend:f,assign:m,inherit:h,bindFn:g,prefixed:x}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=ze,"function"==typeof define&&define.amd?define("hammerjs",[],function(){return ze}):"undefined"!=typeof module&&module.exports?module.exports=ze:r.Hammer=ze}(window,document),define("bb/ui/slider/slider",["jquery","hammerjs"],function(b,h){"use strict";return function(){var e={restrict:"EA",templateUrl:"bb/ui/slider/slider.html",scope:{},transclude:!0,controller:["$log","$scope","$rootScope","$element","$attrs","$animate","$timeout","uaService",function(e,i,n,r,o,a,t,s){r.addClass("bb-slider-loaded");var c,l,u={slides:[],currentSlide:0},d=!1,p=new h(r.get(0));function m(){if(o.bbSliderResize&&(s.ios||s.android)){var e,t;switch(n.device.breakpoint){case"mobile":e=o.mobileBreakpoint||768;break;case"tablet":e=o.tabletBreakpoint||o.desktopBreakpoint||1200;break;case"desktop":e=o.desktopBreakpoint||1200;break;case"desktop-wide":e=o.desktopWideBreakpoint||o.desktopBreakpoint||1200;break;default:e=1200}t=b(window).width()/e,r.height(300*(t=1<t?1:t))}}function f(e,t,n){d=!0,n=0<=(n=isNaN(n)?1:n),t.removeClass("ng-hide"),e.removeClass("Slider-slide--enter--begin").removeClass("Slider-slide--enter--begin-backward").removeClass("Slider-slide--enter").removeClass("Slider-slide--enter--complete"),e.addClass(n?"Slider-slide--exit":"Slider-slide--exit-backward"),t.addClass(n?"Slider-slide--enter--begin":"Slider-slide--enter--begin-backward"),t.removeClass("Slider-slide--exit--complete"),t.removeClass("Slider-slide--exit"),t.removeClass("Slider-slide--exit-backward"),a.addClass(t,"Slider-slide--enter").then(function(){t.removeClass("Slider-slide--enter"),t.removeClass("Slider-slide--enter--begin"),t.removeClass("Slider-slide--enter--begin-backward"),t.addClass("Slider-slide--enter--complete"),d=!1}),i.$broadcast("slider.changed")}window.BB&&window.BB.Action&&window.BB.Action.Binder&&t(function(){window.BB.Action.Binder.wire(r.find(".bbBinder"))}),p.get("swipe").set({threshold:5,velocity:.2}),p.on("swipe",function(e){4===e.direction&&i.$apply(function(){u.previous()}),2===e.direction&&i.$apply(function(){u.next()})}),u.next=function(){var e;d||1===u.slides.length||((e=u.currentSlide)===u.slides.length-1?u.currentSlide=0:u.currentSlide++,f(u.slides[e],u.slides[u.currentSlide],1))},u.previous=function(){var e;d||1===u.slides.length||(0===(e=u.currentSlide)?u.currentSlide=u.slides.length-1:u.currentSlide--,f(u.slides[e],u.slides[u.currentSlide],-1))},u.jump=function(e){var t;d||(t=u.currentSlide,u.currentSlide=e,f(u.slides[t],u.slides[u.currentSlide],e-t))},this.controls=u,i.slider=u,c=i.$watch("slider.slides",function(){u.slides[0].addClass("Slider-slide--enter--complete").removeClass("ng-hide"),c()}),l=r.css("width"),b(window).on("resize.sliderResize",function(){r.css("width")!==l&&(m(),l=r.css("width"))}),i.$on("$destroy",function(){b(window).off("resize.sliderResize")}),m(),n.$on("device.breakpoint.changed",m)}]};return e}}),define("bb/ui/slider/slide",["bb/ui/slider/slider"],function(){"use strict";return function(){var e={require:"^?bbSlider",restrict:"E",scope:{},transclude:!0,templateUrl:"bb/ui/slider/slide.html",link:function(e,t,n,i){t.addClass("bb-slide__container").addClass("ng-hide"),i?(e.slider=i.controls,e.slide=i.controls.slides.length,i.controls.slides.push(t)):(e.slide=0,e.slider={currentSlide:0})}};return e}}),define("bb/ui/slider/fade-out",["bb/ui/slider/slider"],function(){"use strict";return function(){var e={require:"^?bbSlider",restrict:"E",scope:{},transclude:!1,templateUrl:"bb/ui/slider/fade-out.html",link:function(){}};return e}}),define("bb/ui/slider/pager",["bb/ui/slider/slider"],function(){"use strict";return function(){var e={restrict:"EA",require:"^bbSlider",templateUrl:"bb/ui/slider/pager.html",link:function(e,t,n,i){var r,o={enabled:!0};e.pager=o,i&&(e.slider=i.controls,o.enabled=!1,r=e.$watch(function(){return i.controls.slides},function(e){e&&1<e.length&&(r(),o.enabled=!0)}))}};return e}}),define("bb/ui/slider/layer",[],function(){"use strict";return function(){return function(e){var i;return i=e.classes,{scope:{},replace:!0,restrict:"EA",transclude:!0,templateUrl:"bb/ui/slider/layer.html",link:function(e,t,n){e.styles={},e.classes=i,n.backgroundImage&&(e.styles["background-image"]='url("'+n.backgroundImage+'")'),n.backgroundPosition&&(e.styles["background-position"]=n.backgroundPosition),n.background&&(e.styles.background=n.background),n.opacity&&(e.styles.opacity=n.opacity)}}}}}),define("bb/util/dom/visible",[],function(){"use strict";return function(e){var t,n=!0,i=e.getBoundingClientRect();return n=!window.document.body.contains(e)||i.top<0&&i.bottom<0||i.left<0&&i.right<0||"hidden"===(t=window.document.defaultView.getComputedStyle(e,null)).visibility||"none"===t.display||"0"===t.opacity?!1:n}}),define("bb/util/dom/package",["./visible"],function(e){"use strict";return{isVisible:e}}),define("bb/ui/slider/autoplay",["angular","bb/util/dom/package"],function(b,h){"use strict";return function(d,p,m,f){var e={restrict:"AC",require:"^?bbSlider"};return e.link=function(t,n,e,i){var r,o,a,s;function c(){i.controls.next()}function l(){f.ios||f.android?(s=null,p.debug("Mobile device detected: Disabling slider autoplay")):s=d(c,1e3*o)}function u(){var e=h.isVisible(n.get(0));e&&!s?(p.debug("Slider is now visible setting up autoplay."),l()):!e&&s?(p.debug("Slider no longer visible stopping autoplay."),d.cancel(s),s=null):p.debug("Scrolling stopped no change to slider autoplay state.")}o=e.bbSliderAutoplay||5,n.hover(function(){d.cancel(s),s=null,p.debug("Hovered: Autoplay has been paused")},function(){l(),p.debug("Unhovered: Autoplay has been resumed")}),r=t.$watch(function(){return i.controls.slides},function(e){e&&1<e.length&&(r(),l(),t.$watch(function(){return i.controls.currentSlide},function(){s&&(d.cancel(s),l())}))}),b.element(window).on("scroll",function(){a=a?(d.cancel(a),null):d(u,50)}),m.$on("siteNav.openState",function(e,t){t.open?s&&(d.cancel(s),s=null,p.debug("Slider autoplay disabled while nav is open.")):s||(l(),p.debug("Slider autoplay enabled after nav close event."))})},e}}),define("bb/ui/slider/control",[],function(){"use strict";return function(){var e={restrict:"EA",require:"^?bbSlider",scope:{direction:"@direction"},templateUrl:"bb/ui/slider/control.html",link:function(t,e,n,i){var r,o={enabled:!1};t.control=o,r=t.$watch(function(){return i.controls.slides},function(e){e&&1<e.length&&(r(),"next"===t.direction?o.fire=i.controls.next:o.fire=i.controls.previous,o.enabled=!0)})}};return e}}),define("bb/ui/slider/responsive-image",[],function(){"use strict";return function(l,u,d){var e={restrict:"E",scope:{},templateUrl:"bb/ui/slider/responsive-image.html"};function p(e,t,n){return{href:e,src:t,breakPoint:n}}return e.link=function(e,t,n){var i,r,o,a,s;function c(){if(n.mobileSrc&&(i=new p(n.mobileHref,n.mobileSrc,"mobile")),n.desktopSrc&&(r=new p(n.desktopHref,n.desktopSrc,"desktop")),n.tabletSrc&&(o=new p(n.tabletHref,n.tabletSrc,"tablet")),n.desktopWideSrc&&(a=new p(n.desktopWideHref,n.desktopWideSrc,"desktop-wide")),d.ios||d.android)switch(l.device.breakpoint){case"mobile":s=i||o||r||a;break;case"tablet":s=o||r||i||a;break;case"desktop":s=r||o||i||a;break;case"desktop-wide":s=a||r||o||i;break;default:s=i||o||r||a}else s=r||o||i||a;e.resposiveImage=s,u(function(){t.find(".js__image").css("background-image","url('"+s.src+"')")},5)}c(),l.$on("device.breakpoint.changed",c)},e}}),define("bb/ui/slider/package",["angular","bb/ui/slider/views","bb/ui/slider/slider","bb/ui/slider/slide","bb/ui/slider/fade-out","bb/ui/slider/pager","bb/ui/slider/layer","bb/ui/slider/autoplay","bb/ui/slider/control","bb/ui/slider/responsive-image","angular-animate","bb/ui/util/package"],function(e,t,n,i,r,o,a,s,c,l){"use strict";e=e.module("bb.ui.slider",["bb.ui.util","ngAnimate"]);return e.run(["$templateCache",t.init]),e.directive("bbSlider",[n]),e.directive("bbSlide",[i]),e.directive("bbFadeOutScreen",[r]),e.directive("bbSliderPager",[o]),e.service("LayerFactory",[a]),e.directive("bbFloor",["LayerFactory",function(e){return new e({classes:"prlx__floor"})}]),e.directive("bbOverlay",["LayerFactory",function(e){return new e({classes:"prlx__overlay row"})}]),e.directive("bbScreen",["LayerFactory",function(e){return new e({classes:"prlx__screen"})}]),e.directive("bbOverlayImage",["LayerFactory",function(e){return new e({classes:"prlx__image"})}]),e.directive("bbOverlayHeadline",["LayerFactory",function(e){return new e({classes:"prlx__headline"})}]),e.directive("bbSliderAutoplay",["$timeout","$log","$rootScope","uaService",s]),e.directive("bbSliderControl",[c]),e.directive("bbResponsiveImage",["$rootScope","$timeout","uaService",l]),e}),define("bb/ui/social/views",[],{init:function(e){"use strict";e.put("bb/ui/social/share-buttons.html","<div class=bb-share ng-switch=shareType><div class=bb-share__jumbo-share ng-switch-when=jumbo-counter><div class=addthis_jumbo_share></div></div><div class=bb-share__jumbo-without-counter ng-switch-when=jumbo-without-counter><div class=addthis_sharing_toolbox></div></div><div class=bb-share__default-share ng-switch-default><div class=addthis_responsive_sharing></div></div></div>")}}),define("bb/ui/social/social-module",["angular","bb/ui/social/views"],function(e,t){"use strict";e=e.module("bb.ui.social",[]);return e.run(["$templateCache",t.init]),e}),define("bb/ui/social/youtube-embed",["bb/ui/social/social-module"],function(e){"use strict";var t=function(o,a){var e={restrict:"EAC",template:'<iframe width="{{width}}" height="{{height}}" ng-src="{{src}}" frameborder="0" allowfullscreen></iframe>',scope:{},link:function(e,t,n){var i,r;n.src?(i=(n.width||560)+"",r=(n.height||315)+"",e.width=i,e.height=r,e.src=a.trustAsResourceUrl(n.src)):o.error("YouTubeEmbed: No src defined for loading a YouTube video.")}};return e};return e.directive("bbYoutubeEmbed",["$log","$sce",t]),t}),define("bb/ui/social/share-buttons",["bb/ui/social/social-module"],function(e){"use strict";return e.directive("bbShareButtons",function(){var e={restrict:"AE",scope:{},templateUrl:"bb/ui/social/share-buttons.html",controller:["$scope","$attrs","$log",function(e,t,n){var i={DEFAULT:"default",JUMBO_COUNTER:"jumbo-counter",JUMBO_WITHOUT_COUNTER:"jumbo-without-counter"};e.shareType=function(){if(!t.type)return n.debug("bbShareButtons: No type defined, using default style."),i.DEFAULT;for(var e in i)if(i.hasOwnProperty(e)&&t.type===i[e])return n.debug("bbShareButtons: Using %o style.",i[e]),i[e];return n.debug("bbShareButtons: Unsupported type defined, using default style."),i.DEFAULT}()}]};return e})}),define("bb/ui/social/package",["bb/ui/social/youtube-embed","bb/ui/social/share-buttons"],function(e,t){"use strict";return{youtubeEmbed:e,shareButtons:t}}),define("bb/ui/all-access-subscribe-btn/views",[],{init:function(e){"use strict";e.put("bb/ui/all-access-subscribe-btn/all-access-subscribe-btn.ng.html",'<div class=AASB><a class="bb-flat-btn bb-flat-btn--size-lg AASB-btn" id="{{ omnitureId }}" data-bb-category=all-access data-bb-action=subscribe data-bb-label={{subscribeInterval}} href=https://www.bodybuilding.com/store/sub/all-access.html><span class=AASB-label ng-if="subscribeInterval != \'yearly\'">{{ btnLabel || "Monthly Subscription" }} </span><span class=AASB-label ng-if="subscribeInterval == \'yearly\'">{{ btnLabel || "Yearly Subscription" }} </span><span class=AASB-divider></span> <span class=AASB-price ng-if="subscribeInterval != \'yearly\'">{{ subscribeAmount || "$8.99" }}<span class=AASB-interval>/mo</span> <span class=AASB-currencyType>USD</span> </span><span class=AASB-price ng-if="subscribeInterval == \'yearly\'">{{ subscribeAmount || "$89.99" }}<span class=AASB-interval>/yr</span> <span class=AASB-currencyType>USD</span></span></a></div>')}}),define("bb/ui/all-access-subscribe-btn/all-access-subscribe-btn",["bb/util/browser/get-meta"],function(t){"use strict";return[function(){return{restrict:"AE",templateUrl:"bb/ui/all-access-subscribe-btn/all-access-subscribe-btn.ng.html",scope:{btnLabel:"@",subscribeInterval:"@",subscribeAmount:"@"},link:function(e){"yearly"===e.subscribeInterval?(e.omnitureId="ALL_ACCESS_SUBSCRIBE_BTN_YEARLY",t("bb:all-access:subscribe-label-yearly")&&(e.btnLabel=t("bb:all-access:subscribe-label-yearly")),t("bb:all-access:subscribe-amount-yearly")&&(e.subscribeAmount=t("bb:all-access:subscribe-amount-yearly"))):(e.omnitureId="ALL_ACCESS_SUBSCRIBE_BTN_MONTHLY",t("bb:all-access:subscribe-label-monthly")&&(e.btnLabel=t("bb:all-access:subscribe-label-monthly")),t("bb:all-access:subscribe-amount-monthly")&&(e.subscribeAmount=t("bb:all-access:subscribe-amount-monthly")))}}}]}),define("bb/ui/all-access-subscribe-btn/package",["angular","./views","./all-access-subscribe-btn"],function(e,t,n){return e.module("bb.ui.all-access-subscribe-btn",[]).directive("bbAllAccessSubscribeBtn",n).run(["$templateCache",t.init])}),define("bb/ui/entitlements/entitlements",[],function(){return["entitlementsService",function(i){return{restrict:"AE",templateUrl:"bb/ui/entitlements/entitlements.ng.html",transclude:!0,scope:{ifHasEntitlement:"@",ifMissingEntitlement:"@"},link:function(t,n){t.isReady=!1,t.shouldShow=!1;var e=t.ifHasEntitlement||t.ifMissingEntitlement;i.hasEntitlement(e).then(function(e){t.isReady=!0,e&&t.ifHasEntitlement||!e&&t.ifMissingEntitlement?(t.shouldShow=!0,n.show()):n.remove()}).catch(n.remove)}}}]}),define("bb/ui/entitlements/views",[],{init:function(e){"use strict";e.put("bb/ui/entitlements/entitlements.ng.html",'<div ng-if="isReady && shouldShow" ng-transclude ng-cloak></div>')}}),define("bb/ui/entitlements/entitlements-service",["bb/util/browser/get-meta"],function(l){"use strict";return["$q","$http","$log",function(o,a,s){var e={},c=[];return e.hasEntitlement=function(n){var e,t=o.defer(),i=document.querySelector('link[rel="bb:subscription-api-root"]'),r=i?i.href+"entitlements/check":"https://subscription-api.bodybuilding.com/entitlements/check";return i||s.warn('entitlementsService: Missing `link[rel="bb:subscription-api-root"]`'),l("bb:entitlements")?-1!==l("bb:entitlements").split(",").map(function(e){return e.trim()}).indexOf(n)?t.resolve(!0):t.resolve(!1):document.cookie.split(";").some(function(e){return"lgn"===e.split("=")[0].trim()})?(e=t,c[i=n]?c[i].requests.push(e):c[i]={isRunning:!1,requests:[e]},c[n].isRunning||(c[n].isRunning=!0,a.post(r,{checkAccessFor:n}).then(function(e){var t=document.createElement("meta");t.setAttribute("name","bb:entitlements"),e&&e.data&&e.data.active?(c[n].requests.forEach(function(e){e.resolve(!0)}),t.setAttribute("content","All Access")):(c[n].requests.forEach(function(e){e.resolve(!1)}),t.setAttribute("content","NONE")),document.head.appendChild(t)}).catch(function(t){c[n].requests.forEach(function(e){e.reject(t)})}).finally(function(){c[n].requests=[],c[n].isRunning=!1}))):t.resolve(!1),t.promise},e}]}),define("bb/ui/entitlements/package",["angular","./entitlements","./views","./entitlements-service"],function(e,t,n,i){return e.module("bb.ui.entitlements",[]).service("entitlementsService",i).directive("bbEntitlements",t).run(["$templateCache",n.init])}),d=this,define("angular-debounce",["angular"],function(){return function(){"use strict";angular.module("debounce",[]).service("debounce",["$timeout",function(l){return function(t,n,i,r){var o,a,s,c;function e(){s=this,a=arguments;var e=i&&!o;return o&&l.cancel(o),o=l(function(){o=null,i||(c=t.apply(s,a))},n,r),c=e?t.apply(s,a):c}return e.cancel=function(){l.cancel(o),o=null},e}}]).directive("debounce",["debounce","$parse",function(l,u){return{require:"ngModel",priority:999,link:function(e,t,n,i){var r,o,a=u(n.debounce)(e),e=!!u(n.immediate)(e),s=i.$render.bind(i),c=l(function(e){o=!0,i.$$lastCommittedViewValue=r,i.$setViewValue(e),o=!1},parseInt(a,10),e);i.$render=function(){s(),c.cancel(),r=this.$viewValue},i.$parsers.unshift(function(e){return o?r=e:(c(i.$viewValue),r)})}}}])}.apply(d,arguments)}),define("bb/ui/services/simple-signup/simple-signup-service",["angular"],function(a){"use strict";return["$log","$http","$q",function(i,r,o){var e={};return e.setUserStatus=function(e){var n,t={};return e.email&&e.source&&e.optIn?-1===["OPT_IN","OPT_OUT"].indexOf(e.optIn)?o.reject("INVALID_OPT-IN_VALUE"):(t.property="bbcom",t.email=e.email,t.source=e.source,t.optIn=e.optIn,e.custom&&(t.customFields=(e=e.custom,n=[],a.forEach(e,function(e,t){e={name:t,value:e};n.length<5?n.push(e):i.warn("SimpleSignupService#mapCustomFields: Max fields exceeded. Could not add: %o",e)}),n)),r({method:"POST",data:t,url:"https://simple-signup.bodybuilding.com/simplesignup/",withCredentials:!0}).catch(function(e){return i.warn("SimpleSignupService#setUserStatus: An error occurred %o",e),o.reject(e)})):o.reject("REQUIRED_PARAM_MISSING")},e.getUserStatus=function(e){return r({method:"GET",url:"https://simple-signup.bodybuilding.com/simplesignup/bbcom/"+e,dataType:"json",withCredentials:!0}).catch(function(e){return i.warn("SimpleSignupService#getUserStatus: An error occurred %o",e),o.reject(e)})},e}]}),define("bb/ui/services/simple-signup/package",["angular","./simple-signup-service"],function(e,t){"use strict";return e.module("bb.ui.services.simple-signup",[]).service("simpleSignupService",t)}),define("bb/ui/email-capture/module",["angular","angular-debounce","bb/ui/core/dialog","bb/ui/services/simple-signup/package"],function(e){"use strict";return e.module("bb.ui.email-capture",["debounce","bb.ui.core","bb.ui.services.simple-signup"])}),define("bb/ui/email-capture/views",[],{init:function(e){"use strict";e.put("bb/ui/email-capture/email-capture-modal.ng.html","<bb-dialog tracking-name=emailCaptureDialog click-to-dismiss><bb-dialog-content><div ng-transclude></div></bb-dialog-content></bb-dialog>"),e.put("bb/ui/email-capture/email-capture-trigger.ng.html","<div class=email-capture-trigger ng-show=viewStateReady ng-transclude></div>"),e.put("bb/ui/email-capture/email-capture.ng.html","<div class=email-capture ng-transclude></div>")}}),define("bb/ui/email-capture/email-capture",["./module"],function(e){"use strict";return e.directive("bbEmailCapture",[function(){return{restrict:"EA",templateUrl:"bb/ui/email-capture/email-capture.ng.html",transclude:!0,scope:{source:"@",optIn:"@",onSuccessUrl:"@"},controller:["$scope","$element",function(t,e){this.openModal=function(){e.find("bb-dialog").controller("bbDialog").dialogOpen()},this.closeModal=function(){e.find("bb-dialog").controller("bbDialog").dialogClose()},this.getSource=function(){return t.source||"Unknown"},this.getOptIn=function(e){e=e||t.optIn;return"true"===e||!0===e?e="OPT_IN":"false"!==e&&!1!==e||(e="OPT_OUT"),e},this.getOnSuccessUrl=function(){return t.onSuccessUrl}}]}}])}),define("bb/ui/email-capture/email-capture-modal",["./module"],function(e){"use strict";return e.directive("bbEmailCaptureModal",["$log","$window","simpleSignupService",function(r,o,a){return{restrict:"EA",require:"^bbEmailCapture",transclude:!0,templateUrl:"bb/ui/email-capture/email-capture-modal.ng.html",link:function(n,e,t,i){n.params={},n.handleSubmit=function(){var e,t;n.capturePending=!0,t=i.getOnSuccessUrl(),(e=n.params).source=i.getSource(),e.optIn=i.getOptIn(e.optIn),a.setUserStatus(e).then(function(){n.verified=!0,n.capturePending=!1,t&&(o.location.href=t)}).catch(function(e){r.error("Error: ",e),n.errorState=!0,n.capturePending=!1})}}}}])}),define("bb/ui/email-capture/email-capture-trigger",["./module"],function(e){"use strict";return e.directive("bbEmailCaptureTrigger",["$log","simpleSignupService",function(e,r){return{restrict:"EA",require:"^bbEmailCapture",transclude:!0,templateUrl:"bb/ui/email-capture/email-capture-trigger.ng.html",link:function(t,e,n,i){t.viewStateReady=!1,t.source=i.getSource(),r.getUserStatus(t.source||"Unknown").then(function(e){e&&e.data&&((e=e.data[0])&&e.source&&(t.verified=!0)),t.viewStateReady=!0}),t.openModal=i.openModal,t.closeModal=i.closeModal}}}])}),define("bb/ui/email-capture/package",["./module","./views","./email-capture","./email-capture-modal","./email-capture-trigger"],function(e,t){"use strict";return e.run(["$templateCache",t.init]),{module:e}}),define("lodash/internal/baseProperty",["./toObject"],function(n){return function(t){return function(e){return null==e?void 0:n(e)[t]}}}),define("lodash/internal/getLength",["./baseProperty"],function(e){return e("length")}),define("lodash/internal/isArrayLike",["./getLength","./isLength"],function(t,n){return function(e){return null!=e&&n(t(e))}}),define("lodash/lang/isArguments",["../internal/isArrayLike","../internal/isObjectLike"],function(t,n){var e=Object.prototype,i=e.hasOwnProperty,r=e.propertyIsEnumerable;return function(e){return n(e)&&t(e)&&i.call(e,"callee")&&!r.call(e,"callee")}}),define("lodash/internal/isIndex",[],function(){var n=/^\d+$/;return function(e,t){return t=null==t?9007199254740991:t,-1<(e="number"==typeof e||n.test(e)?+e:-1)&&e%1==0&&e<t}}),define("lodash/internal/arrayEach",[],function(){return function(e,t){for(var n=-1,i=e.length;++n<i&&!1!==t(e[n],n,e););return e}}),define("lodash/object/keysIn",["../internal/arrayEach","../lang/isArguments","../lang/isArray","../lang/isFunction","../internal/isIndex","../internal/isLength","../lang/isObject","../lang/isString","../support"],function(e,m,f,b,h,g,v,y,w){var _="[object Error]",S="[object Object]",k="[object String]",C=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],A=Error.prototype,T=Object.prototype,E=String.prototype,x=T.hasOwnProperty,M=T.toString,D={};return D["[object Array]"]=D["[object Date]"]=D["[object Number]"]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},D["[object Boolean]"]=D[k]={constructor:!0,toString:!0,valueOf:!0},D[_]=D["[object Function]"]=D["[object RegExp]"]={constructor:!0,toString:!0},D[S]={constructor:!0},e(C,function(e){for(var t in D)x.call(D,t)&&((t=D[t])[e]=x.call(t,e))}),function(e){if(null==e)return[];for(var t=(t=(e=!v(e)?Object(e):e).length)&&g(t)&&(f(e)||m(e)||y(e))&&t||0,n=e.constructor,i=-1,r=b(n)&&n.prototype||T,o=r===e,a=Array(t),s=0<t,c=w.enumErrorProps&&(e===A||e instanceof Error),l=w.enumPrototypes&&b(e);++i<t;)a[i]=i+"";for(d in e)l&&"prototype"==d||c&&("message"==d||"name"==d)||s&&h(d,t)||"constructor"==d&&(o||!x.call(e,d))||a.push(d);if(w.nonEnumShadows&&e!==T){var n=e===E?k:e===A?_:M.call(e),u=D[n]||D[S];for(n==S&&(r=T),t=C.length;t--;){var d,p=u[d=C[t]];o&&p||(p?!x.call(e,d):e[d]===r[d])||a.push(d)}}return a}}),define("lodash/internal/shimKeys",["../lang/isArguments","../lang/isArray","./isIndex","./isLength","../lang/isString","../object/keysIn"],function(c,l,u,d,p,m){var f=Object.prototype.hasOwnProperty;return function(e){for(var t=m(e),n=t.length,i=n&&e.length,r=!!i&&d(i)&&(l(e)||c(e)||p(e)),o=-1,a=[];++o<n;){var s=t[o];(r&&u(s,i)||f.call(e,s))&&a.push(s)}return a}}),define("lodash/object/keys",["../internal/getNative","../internal/isArrayLike","../lang/isObject","../internal/shimKeys","../support"],function(e,n,i,r,o){var a=e(Object,"keys");return a?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||("function"==typeof e?o.enumPrototypes:n(e))?r(e):i(e)?a(e):[]}:r}),define("bb/ui/gdpr-iframe/gdpr-iframe",["lodash/object/keys"],function(c){return["gdprService","$rootScope",function(a,s){return{restrict:"EA",templateUrl:"bb/ui/gdpr-iframe/gdpr-iframe.ng.html",link:function(e,t,n){var t=t.get(0),i=t.querySelector("iframe"),r=c(n);function o(t){e.isExperienceAllowed=t,r.forEach(function(e){"$"!==e.slice(0,1)&&(t?i.setAttribute(e,n[e]):i.removeAttribute(e))})}t.removeAttribute("style"),e.isExperienceAllowed=!1,a.isAllowed("experience",o),s.$on("consent-modal.updated",function(){a.isAllowed("experience",o)})},scope:{}}}]}),define("bb/ui/gdpr-iframe/views",[],{init:function(e){"use strict";e.put("bb/ui/gdpr-iframe/gdpr-iframe.ng.html",'<div ng-show=isExperienceAllowed><iframe></iframe></div><div ng-show=!isExperienceAllowed class=GdprIframe-noShow><p class=GdprIframe-noShowPara>This content cannot be displayed because you have disabled Experience cookies. Update your cookie settings to show this content.</p><p class=GdprIframe-noShowPara><button bb-emit=gdpr.show class="bb-flat-btn bb-flat-btn--titlecase">Update Cookie Settings</button></p></div>')}}),define("bb/ui/gdpr-iframe/package",["angular","./gdpr-iframe","./views","bb/ui/services/gdpr/package","bb/ui/core/emit"],function(e,t,n){"use strict";return e.module("bb.ui.gdpr-iframe",["bb.ui.services.gdpr","bb.ui.core"]).directive("bbGdprIframe",t).run(["$templateCache",n.init])}),define("bb/content/big-picture/big-picture-amd",["require","exports","module"],function(require,e,t){function n(){var e=u.getBoundingClientRect();return l("transform:","translate3D("+(e.left-(p[Y]-e.width)/2)+"px, "+(e.top-(p[H]-e.height)/2)+"px, 0) scale3D("+u[Y]/m[Y]+", "+u[H]/m[H]+", 0);")}function i(){4===m.readyState?o():b.error?o("video"):S=G(i,35)}function r(e){R||(e&&c(k,"top:"+u.offsetTop+"px;left:"+u.offsetLeft+"px;height:"+u[H]+"px;width:"+u[Y]+"px"),u.parentElement[e?j:z](k),_=e)}function o(e){if(_&&r(),$&&$(),"string"==typeof e)return s(),alert("Error: The requested "+e+" could not be displayed.");O&&!I&&D.push(v),c(m,n()),c(p,"opacity:1;"+B),P=G(P,410),x=!0,G(function(){c(m,l("transition:","transform .35s;")+l("transform:","none;")),T&&G(c.bind(null,C,"opacity:1"),250)},60)}function a(e){var t=e.target,e=[C,E,b,A];t&&t.blur(),M||~e.indexOf(t)||(m.style.cssText+=n(),c(p,B),G(s,350),W(P),M=!(x=!1))}function s(){U.body[z](p),p[z](m),c(p,""),(m===h?g:m).removeAttribute("src"),T&&(c(C,""),p[z](C)),M=!1}function c(e,t){e.style.cssText=t}function l(e,t){var n=e+t;return"-webkit-"+n+e+"-webkit-"+t+n}var u,d,p,m,f,b,h,g,v,y,w,_,S,k,C,A,T,E,x,M,D,I,O,$,P,R,L,U,j,F,z,N,B,H,Y,q,G,W;L=window,U=document,j="appendChild",F="createElement",z="removeChild",N="innerHTML",B="pointer-events:auto",H="clientHeight",Y="clientWidth",q="addEventListener",G=L.setTimeout,W=L.clearTimeout,t.exports=function(e){d||function(){function e(){var e=U[F]("button");return e.className="bp-x",e[N]="&#215;",e}D=[];var t=U[F]("STYLE");t[N]="#bp_caption,#bp_container{bottom:0;left:0;right:0;position:fixed;opacity:0}#bp_container>*,.bp-x,#bp_loader{position:absolute;right:0}#bp_container{top:0;z-index:9999;background:rgba(0,0,0,.7);opacity:0;pointer-events:none;transition:opacity .35s}#bp_loader{top:0;left:0;bottom:0;display:-webkit-flex;display:flex;margin:0;cursor:wait;z-index:9}#bp_loader svg{width:40%;max-height:40%;margin:auto;"+l("animation:","ldr .7s infinite linear;")+"}"+function(e){return"@-webkit-"+e+"@"+e}("keyframes ldr{to{"+l("transform:","rotate(1turn);")+"}}")+"#bp_container img,#bp_sv,#bp_vid{max-height:96%;max-width:96%;top:0;bottom:0;left:0;margin:auto;box-shadow:0 0 3em rgba(0,0,0,.4);z-index:-1}#bp_sv{width:171vh}#bp_caption{font-size:.9em;padding:1.3em;background:rgba(15,15,15,.94);color:#fff;text-align:center;transition:opacity .3s}.bp-x{font-family:Arial;top:0;cursor:pointer;opacity:.8;font-size:3em;padding:0 .3em;color:#fff;background:transparent;border:0;text-shadow:0 0 2px #000}#bp_caption .bp-x{left:2%;top:auto;right:auto;bottom:100%;padding:0 .6em;background:#d74040;border-radius:2px 2px 0 0;font-size:2.3em;text-shadow:none}.bp-x:hover,.bp-x:focus{opacity:1}.bp-x:active{outline:0}@media (max-aspect-ratio:9/5){#bp_sv{height:53vw}}",U.head[j](t),(p=U[F]("DIV")).id="bp_container",p.onclick=a,y=e(),p[j](y),f=U[F]("IMG"),(b=U[F]("VIDEO")).id="bp_vid",b.autoplay=!0,b.controls=!0,b.loop=!0,(C=U[F]("DIV")).id="bp_caption",(E=e()).onclick=function(){c(C,"opacity:0"),G(function(){T=!1,p[z](C)},300)},C[j](E),A=U[F]("SPAN"),C[j](A),(k=U[F]("DIV")).id="bp_loader",k[N]='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 399 399"><path d="M341 58.5C303 20.8 253 0 199.6 0 146.4 0 96.2 20.8 58.5 58.5 20.8 96.2 0 146.5 0 199.7 0 253 20.8 303.2 58.5 341c37.7 37.6 88 58.4 141.2 58.4 53.3 0 103.5-20.8 141.2-58.5 37.6-37.8 58.4-88 58.4-141.3 0-53.3-20.8-103.5-58.5-141.2zm-13 12.8c34.3 34.3 53.2 80 53.2 128.4h-41c0-77.4-63-140.4-140.5-140.4-4.6 0-9 .2-13.6.7V18.7c4.6-.4 9-.5 13.7-.5 48.5 0 94 18.8 128.4 53zM199.8 322c-67.4 0-122.2-55-122.2-122.3S132.3 77.5 199.7 77.5 322 132.3 322 199.7 267 322 199.6 322z"/></svg>',(h=U[F]("DIV")).id="bp_sv",(g=U[F]("IFRAME")).allowFullscreen=!0,g.onload=o,c(g,"border:0px;height:100%;width:100%"),h[j](g),f.onload=o,f.onerror=o.bind(null,"image"),L[q]("resize",function(){_&&r(!0)}),U[q]("keyup",function(e){27===e.keyCode&&x&&a(p)}),U[q]("focus",function(e){x&&!p.contains(e.target)&&(e.stopPropagation(),y.focus())},!0),d=!0}(),_&&(W(S),s()),w=e.ytSrc||e.vimeoSrc,$=e.animationStart,P=e.animationEnd,R=e.noLoader,u=e.el,O=!1,(T=u.getAttribute("caption"))&&(A[N]=T,p[j](C)),w?(r(!0),m=h,function(e){e=e?"www.youtube.com/embed/"+w+"?enablejsapi=1&html5=1&rel=0&showinfo=0&":"player.vimeo.com/video/"+w+"?";g.src="https://"+e+"autoplay=1"}(!!e.ytSrc)):e.jwSrc?(r(!0),m=h,g.src=e.jwSrc):e.imgSrc?(O=!0,v=e.imgSrc,(I=~D.indexOf(v))||r(!0),(m=f).src=v):e.vidSrc?(r(!0),(m=b).src=e.vidSrc,i()):(m=f).src="IMG"===u.tagName?u.src:L.getComputedStyle(u).backgroundImage.replace(/^url|[\(|\)|'|"]/g,""),p[j](m),U.body[j](p)}}),define("bb/content/big-picture/big-picture",["angular","./big-picture-amd"],function(e,a){return["$rootScope","deviceService",function(r,o){return{restrict:"A",scope:{imgSrc:"@",jwSrc:"@",vidSrc:"@",vidSrcMobile:"@",ytSrc:"@",vimeoSrc:"@"},transclude:!0,link:function(t,e){var n,i={el:e[0],noLoader:!0,animationEnd:function(){r.$emit("bbBigPicture.loadingComplete",i),t.isLoading=!1}};if(["imgSrc","jwSrc","vidSrc","ytSrc","vimeoSrc"].forEach(function(e){t[e]&&(i[e]=t[e],n=!0),o.mediaQueries.mobile.matches&&t.vidSrcMobile&&"vidSrc"===e&&(i.vidSrc=t.vidSrcMobile)}),!n)return window.console.error("bbBigPicture: missing src");e.on("click",function(){r.$emit("bbBigPicture.loadingStart",i),t.isLoading=!0,a(i)}),t.$on("$destroy",function(){e.off("click")})},templateUrl:"bb/content/big-picture/big-picture.ng.html"}}]}),define("bb/content/big-picture/views",[],{init:function(e){"use strict";e.put("bb/content/big-picture/big-picture.ng.html","<div class=BigPicture><span class=BigPicture--loading bb-visible=isLoading>&hellip; </span><span ng-transclude class=BigPicture--content bb-visible=!isLoading></span></div>")}}),define("bb/content/big-picture/package",["angular","./big-picture","./views","bb/ui/util/ua-service","bb/ui/core/visible"],function(e,t,n){"use strict";return e.module("bb.content.big-picture",["bb.ui.util","bb.ui.core"]).directive("bbBigPicture",t).run(["$templateCache",n.init])}),define("bb/content/content-carousel/carousel",["angular"],function(u){"use strict";return["$timeout","ContentCarouselService",function(l,e){return{restrict:"A",scope:{nativeScrollOnMobile:"@"},transclude:!0,templateUrl:"bb/content/content-carousel/carousel.ng.html",controller:["$scope","$element","$attrs",function(e,t,n){var i,r,o=0,a={left:!1,right:!1};function s(){a.left=0<r.scrollLeft(),a.right=r.scrollLeft()<r.prop("scrollWidth")-r.width(),l(function(){e.$apply(function(){e.scrollable=a})})}function c(e){var t=0,n=r.width();if(e)for(;t<=n&&0<o;)0<=n-(t+=u.element(i[o]).outerWidth(!0))&&o--;else for(;t<=n&&o<i.length;)0<=n-(t+=u.element(i[o]).outerWidth(!0))&&o++;!function(e){e=function(e){for(var t,n=0;0<e;e--)t=u.element(i[e]),n+=t.outerWidth(!0);return Math.abs(n)}(e);r.animate({scrollLeft:e},"fast",s)}(o)}this.handleSlideEvent=function(e){c(e)},this.useNativeScrollOnMobile=function(){return window.matchMedia("(max-width: 991px)").matches&&e.nativeScrollOnMobile},this.init=function(){r=u.element(t.find(".ContentCarousel-view")[0]),i=r.children(),s(),e.$watch(function(){return t.text().length},function(){r=u.element(t.find(".ContentCarousel-view")[0]),i=r.children(),s()})},e.useNativeScrollOnMobile=this.useNativeScrollOnMobile(),e.scrollable=a}]}}]}),define("bb/content/content-carousel/carousel-view",[],function(){"use strict";return[function(){return{restrict:"A",transclude:!0,require:"^?bbContentCarousel",scope:{},templateUrl:"bb/content/content-carousel/carousel-view.ng.html",link:function(e,t,n,i){var r={};i&&!i.useNativeScrollOnMobile()?(i.init(),r.left=function(){i.handleSlideEvent(!0)},r.right=function(){i.handleSlideEvent()}):e.carouselDisabled=!0,e.controls=r}}}]}),define("bb/content/content-carousel/carousel-service",[],function(){"use strict";return[function(){var t,r={has3d:!1,transformProperty:null};return function(){var e,t,n=document.createElement("p"),i={webkitTransform:"-webkit-transform",msTransform:"-ms-transform",transform:"transform"};for(e in document.body.insertBefore(n,null),i)void 0!==n.style[e]&&(n.style[e]="translate3d(1px,1px,1px)",t=window.getComputedStyle(n).getPropertyValue(i[e]));document.body.removeChild(n),r.has3d=void 0!==t&&0<t.length&&"none"!==t}(),t="transform",void 0!==document.body.style[t]?["webkit","moz","o","ms"].every(function(e){e="-"+e+"-transform";return void 0===document.body.style[e]||(t=e,!1)}):t=void 0!==document.body.style.webkitTransform?"-webkit-transform":void 0,r.transformProperty=t,r}]}),define("bb/content/content-carousel/views",[],{init:function(e){"use strict";e.put("bb/content/content-carousel/carousel-view.ng.html",'<div class=ContentCarousel-container><div ng-if=!carouselDisabled class="ContentCarousel-control ContentCarousel-control--left"><button class=ContentCarousel-controlButton ng-click=controls.left()>&nbsp;</button></div><div class=ContentCarousel-viewport><div class=ContentCarousel-view ng-transclude></div></div><div ng-if=!carouselDisabled ng-class="{\'ContentCarousel-control--disabled\': !scrollable.right}" class="ContentCarousel-control ContentCarousel-control--right"><button class=ContentCarousel-controlButton ng-click=controls.right()>&nbsp;</button></div></div>'),e.put("bb/content/content-carousel/carousel.ng.html","<div class=ContentCarousel ng-class=\"{\n    'ContentCarousel-disabledLeftControl': !scrollable.left,\n    'ContentCarousel-disabledRightControl': !scrollable.right,\n    'ContentCarousel-useNativeScroll': useNativeScrollOnMobile\n}\" ng-transclude></div>")}}),define("bb/content/content-carousel/package",["angular","./carousel","./carousel-view","./carousel-service","./views"],function(e,t,n,i,r){"use strict";return e.module("bb.content.content-carousel",[]).directive("bbContentCarousel",t).directive("bbContentCarouselView",n).service("ContentCarouselService",i).run(["$templateCache",r.init])}),define("lodash/date/now",["../internal/getNative"],function(e){return e(Date,"now")||function(){return(new Date).getTime()}}),define("lodash/function/debounce",["../lang/isObject","../date/now"],function(v,y){var w,_=Math.max;return function(i,r,e){var o,a,s,c,l,u,d,p,m=0,f=!1,b=!0;if("function"!=typeof i)throw new TypeError("Expected a function");function t(e,t){t&&clearTimeout(t),a=u=d=w,e&&(m=y(),s=i.apply(l,o),u||a||(o=l=w))}function h(){var e=r-(y()-c);e<=0||r<e?t(d,a):u=setTimeout(h,e)}function g(){t(b,u)}function n(){var e,t,n;return o=arguments,c=y(),l=this,d=b&&(u||!p),!1===f?e=p&&!u:(n=(t=f-(c-(m=!a&&!p?c:m)))<=0||f<t)?(a=a&&clearTimeout(a),m=c,s=i.apply(l,o)):a=a||setTimeout(g,t),n&&u?u=clearTimeout(u):u||r===f||(u=setTimeout(h,r)),e&&(n=!0,s=i.apply(l,o)),!n||u||a||(o=l=w),s}return r=!(r<0)&&+r||0,!0===e?b=!(p=!0):v(e)&&(p=!!e.leading,f="maxWait"in e&&_(+e.maxWait||0,r),b="trailing"in e?!!e.trailing:b),n.cancel=function(){u&&clearTimeout(u),a&&clearTimeout(a),m=0,a=u=d=w},n}}),define("bb/content/plan-popup-widget/plan-popup-trigger",["angular","lodash/function/debounce"],function(u,d){"use strict";return["$rootScope","$window","PlanPopupService",function(s,c,l){return{restrict:"A",scope:{planId:"@",hoverOnDesktop:"@",onlyMobile:"@",onlyDesktop:"@"},link:function(e,t,n){var i={planId:n.planId||null,hoverOnDesktop:"hoverOnDesktop"in n,onlyMobile:"onlyMobile"in n,onlyDesktop:"onlyDesktop"in n},r=s.planPopupState;function o(e){l.showPopup(i.planId,e.currentTarget)}function a(){!i.hoverOnDesktop||i.onlyMobile||r.looksLikeMobile?(t.off("mouseover"),t.off("mouseleave")):(t.on("mouseover",function(e){o(e),r.triggerHovered=!0}),t.on("mouseleave",function(){r.triggerHovered=!1,l.triggerClose()})),i.onlyDesktop&&!r.looksLikeMobile?t.on("click",o):t.off("click"),i.onlyMobile&&r.looksLikeMobile?t.on("click",o):t.off("click")}a(),u.element(c).on("resize",d(function(){r.looksLikeMobile=!!window.matchMedia("(max-width: 991px)").matches,r.looksLikeMobile||(r.popupVisible=!1),a(),s.$apply(function(){s.planPopupState=r})},100))}}}]}),define("bb/content/plan-popup-widget/plan-popup",["angular"],function(o){"use strict";return["$rootScope","PlanPopupService",function(i,r){return{restrict:"A",scope:{},templateUrl:"bb/content/plan-popup-widget/plan-popup.ng.html",link:function(t,e,n){t.state=i.planPopupState;e=o.element(e.find(".PlanPopup-container")[0]);i.planPopupState.popupElement=e,t.showMoreDesc=!1,t.toggleShowMoreDesc=function(e){t.showMoreDesc?(e.currentTarget.parentNode.classList.remove("PlanPopup-description--open"),t.showMoreDesc=!1):(e.currentTarget.parentNode.classList.add("PlanPopup-description--open"),t.showMoreDesc=!0)},t.closePopup=function(){r.triggerClose()},t.state.looksLikeMobile||(e.on("mouseover.planPopup",function(){i.planPopupState.popupHovered=!0}),e.on("mouseleave.planPopup",function(){i.planPopupState.popupHovered=!1,r.triggerClose()}))}}}]}),define("lodash/internal/createBaseFor",["./toObject"],function(l){return function(c){return function(e,t,n){for(var i=l(e),r=n(e),o=r.length,a=c?o:-1;c?a--:++a<o;){var s=r[a];if(!1===t(i[s],s,i))break}return e}}}),define("lodash/internal/baseFor",["./createBaseFor"],function(e){return e()}),define("lodash/internal/baseForOwn",["./baseFor","../object/keys"],function(n,i){return function(e,t){return n(e,t,i)}}),define("lodash/internal/createBaseEach",["./getLength","./isLength","./toObject"],function(s,c,l){return function(o,a){return function(e,t){var n=e?s(e):0;if(!c(n))return o(e,t);for(var i=a?n:-1,r=l(e);(a?i--:++i<n)&&!1!==t(r[i],i,r););return e}}}),define("lodash/internal/baseEach",["./baseForOwn","./createBaseEach"],function(e,t){return t(e)}),define("lodash/internal/arraySome",[],function(){return function(e,t){for(var n=-1,i=e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}}),define("lodash/internal/equalArrays",["./arraySome"],function(m){return function(e,t,n,i,r,o,a){var s=-1,c=e.length,l=t.length;if(c!=l&&!(r&&c<l))return!1;for(;++s<c;){var u=e[s],d=t[s],p=i?i(r?d:u,r?u:d,s):void 0;if(void 0!==p){if(p)continue;return!1}if(r){if(!m(t,function(e){return u===e||n(u,e,i,r,o,a)}))return!1}else if(u!==d&&!n(u,d,i,r,o,a))return!1}return!0}}),define("lodash/internal/equalByTag",[],function(){return function(e,t,n){switch(n){case"[object Boolean]":case"[object Date]":return+e==+t;case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object Number]":return e!=+e?t!=+t:e==+t;case"[object RegExp]":case"[object String]":return e==t+""}return!1}}),define("lodash/internal/equalObjects",["../object/keys"],function(g){var v=Object.prototype.hasOwnProperty;return function(e,t,n,i,r,o,a){var s=g(e),c=s.length;if(c!=g(t).length&&!r)return!1;for(var l=c;l--;){var u=s[l];if(!(r?u in t:v.call(t,u)))return!1}for(var d=r;++l<c;){var p=e[u=s[l]],m=t[u],f=i?i(r?m:p,r?p:m,u):void 0;if(!(void 0===f?n(p,m,i,r,o,a):f))return!1;d=d||"constructor"==u}if(!d){var b=e.constructor,h=t.constructor;if(b!=h&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof h&&h instanceof h))return!1}return!0}}),define("lodash/lang/isTypedArray",["../internal/isLength","../internal/isObjectLike"],function(t,n){var i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1;var r=Object.prototype.toString;return function(e){return n(e)&&t(e.length)&&!!i[r.call(e)]}}),define("lodash/internal/baseIsEqualDeep",["./equalArrays","./equalByTag","./equalObjects","../lang/isArray","./isHostObject","../lang/isTypedArray"],function(m,f,b,h,g,v){var y="[object Arguments]",w="[object Array]",_="[object Object]",e=Object.prototype,S=e.hasOwnProperty,k=e.toString;return function(e,t,n,i,r,o,a){var s=h(e),c=h(t),l=w,u=w;s||((l=k.call(e))==y?l=_:l!=_&&(s=v(e))),c||((u=k.call(t))==y?u=_:u!=_&&v(t));var d=l==_&&!g(e),c=u==_&&!g(t);if((u=l==u)&&!s&&!d)return f(e,t,l);if(!r){d=d&&S.call(e,"__wrapped__"),c=c&&S.call(t,"__wrapped__");if(d||c)return n(d?e.value():e,c?t.value():t,i,r,o,a)}if(!u)return!1;a=a||[];for(var p=(o=o||[]).length;p--;)if(o[p]==e)return a[p]==t;return o.push(e),a.push(t),r=(s?m:b)(e,t,n,i,r,o,a),o.pop(),a.pop(),r}}),define("lodash/internal/baseIsEqual",["./baseIsEqualDeep","../lang/isObject","./isObjectLike"],function(s,c,l){return function e(t,n,i,r,o,a){return t===n||(null==t||null==n||!c(t)&&!l(n)?t!=t&&n!=n:s(t,n,e,i,r,o,a))}}),define("lodash/internal/baseIsMatch",["./baseIsEqual","./toObject"],function(u,d){return function(e,t,n){var i=t.length,r=i,o=!n;if(null==e)return!r;for(e=d(e);i--;){var a=t[i];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<r;){var s=(a=t[i])[0],c=e[s],l=a[1];if(o&&a[2]){if(void 0===c&&!(s in e))return!1}else{s=n?n(c,l,s):void 0;if(!(void 0===s?u(l,c,n,!0):s))return!1}}return!0}}),define("lodash/internal/isStrictComparable",["../lang/isObject"],function(t){return function(e){return e==e&&!t(e)}}),define("lodash/object/pairs",["./keys","../internal/toObject"],function(a,s){return function(e){e=s(e);for(var t=-1,n=a(e),i=n.length,r=Array(i);++t<i;){var o=n[t];r[t]=[o,e[o]]}return r}}),define("lodash/internal/getMatchData",["./isStrictComparable","../object/pairs"],function(i,r){return function(e){for(var t=r(e),n=t.length;n--;)t[n][2]=i(t[n][1]);return t}}),define("lodash/internal/baseMatches",["./baseIsMatch","./getMatchData","./toObject"],function(r,o,a){return function(e){var t=o(e);if(1==t.length&&t[0][2]){var n=t[0][0],i=t[0][1];return function(e){return null!=e&&((e=a(e))[n]===i&&(void 0!==i||n in e))}}return function(e){return r(e,t)}}}),define("lodash/internal/baseSlice",[],function(){return function(e,t,n){var i=-1,r=e.length;(n=void 0===n||r<n?r:+n||0)<0&&(n+=r),r=n<(t=(t=null!=t&&+t||0)<0?r<-t?0:r+t:t)?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o}}),define("lodash/internal/isKey",["../lang/isArray","./toObject"],function(i,r){var o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,a=/^\w*$/;return function(e,t){var n=typeof e;return!!("string"==n&&a.test(e)||"number"==n)||!i(e)&&(!o.test(e)||null!=t&&e in r(t))}}),define("lodash/array/last",[],function(){return function(e){var t=e?e.length:0;return t?e[t-1]:void 0}}),define("lodash/internal/baseMatchesProperty",["./baseGet","./baseIsEqual","./baseSlice","../lang/isArray","./isKey","./isStrictComparable","../array/last","./toObject","./toPath"],function(s,c,l,e,t,u,d,p,m){return function(n,i){var r=e(n),o=t(n)&&u(i),a=n+"";return n=m(n),function(e){if(null==e)return!1;var t=a;if(e=p(e),(r||!o)&&!(t in e)){if(null==(e=1==n.length?e:s(e,l(n,0,-1))))return!1;t=d(n),e=p(e)}return e[t]===i?void 0!==i||t in e:c(i,e[t],void 0,!0)}}}),define("lodash/utility/identity",[],function(){return function(e){return e}}),define("lodash/internal/bindCallback",["../utility/identity"],function(t){return function(o,a,e){if("function"!=typeof o)return t;if(void 0===a)return o;switch(e){case 1:return function(e){return o.call(a,e)};case 3:return function(e,t,n){return o.call(a,e,t,n)};case 4:return function(e,t,n,i){return o.call(a,e,t,n,i)};case 5:return function(e,t,n,i,r){return o.call(a,e,t,n,i,r)}}return function(){return o.apply(a,arguments)}}}),define("lodash/internal/basePropertyDeep",["./baseGet","./toPath"],function(i,e){return function(t){var n=t+"";return t=e(t),function(e){return i(e,t,n)}}}),define("lodash/utility/property",["../internal/baseProperty","../internal/basePropertyDeep","../internal/isKey"],function(t,n,i){return function(e){return(i(e)?t:n)(e)}}),define("lodash/internal/baseCallback",["./baseMatches","./baseMatchesProperty","./bindCallback","../utility/identity","../utility/property"],function(r,o,a,s,c){return function(e,t,n){var i=typeof e;return"function"==i?void 0===t?e:a(e,t,n):null==e?s:"object"==i?r(e):void 0===t?c(e):o(e,t)}}),define("lodash/internal/baseFind",[],function(){return function(e,i,t,r){var o;return t(e,function(e,t,n){if(i(e,t,n))return o=r?t:e,!1}),o}}),define("lodash/internal/baseFindIndex",[],function(){return function(e,t,n){for(var i=e.length,r=n?i:-1;n?r--:++r<i;)if(t(e[r],r,e))return r;return-1}}),define("lodash/internal/createFind",["./baseCallback","./baseFind","./baseFindIndex","../lang/isArray"],function(o,a,s,c){return function(i,r){return function(e,t,n){if(t=o(t,n,3),c(e)){n=s(e,t,r);return-1<n?e[n]:void 0}return a(e,t,i)}}}),define("lodash/collection/find",["../internal/baseEach","../internal/createFind"],function(e,t){return t(e)}),define("bb/content/plan-popup-widget/plan-popup-service",["angular","@bbcom/bb-analytics","lodash/object/get","lodash/function/debounce","lodash/collection/find"],function(f,b,h,g,v){return["$http","$q","$document","$timeout","$rootScope",function(t,e,l,i,n){var r={},o=f.element(l[0].body),a=g(c,400),s=g(m,400),u="https://cms-api.bodybuilding.com/Bbcomtrainer",d={triggerElement:null,looksLikeMobile:!!window.matchMedia("(max-width: 991px)").matches,triggerHovered:!1,popupHovered:!1,popupElement:null,popupVisible:!1,plan:null};function p(e){var t=l[0].documentElement,e=e.getBoundingClientRect();return{top:e.top+window.pageYOffset-t.clientTop,left:e.left+window.pageXOffset-t.clientLeft}}function c(){d.triggerHovered||d.popupHovered||(d.popupVisible=!1,d.plan={},r.unlockScroll(),i(function(){n.$apply(function(){n.planPopupState=d})}))}function m(e,c){d.triggerElement===c&&d.popupVisible||!d.looksLikeMobile&&!d.triggerHovered||(d.popupVisible=!1,t({url:u+"/"+e,method:"GET"}).then(function(e){var t=e.data;d.triggerElement=c,d.popupVisible=!0,d.looksLikeMobile&&o.addClass("bb-lock-scroll");var n=h(t,"_links.bb-trainer:headerImage",""),e=(v(n,function(e){return"tablet"===e.name})||{}).href;d.plan={shortName:t.shortName||"",mobileHeader:(n=e,(e="377x212")&&-1!==n.indexOf(".jpg")?n.replace(".jpg","")+"-"+e+".jpg":n),url:h(t,"_links.marketing[0].href",""),difficultyLevel:t.difficultyLevel||"",description:t.description,duration:n=(n=t.weeks)?1===n?n+" Week":n+" Weeks":"",videoUrl:"jwplayer"!==(n=h(t,"_links.bb-trainer:previewVideo","")).source?"youtube"===n.source?h(n,"_links.href",""):"":(n=h(n,"_links.m3u8.href","")?n._links.m3u8.href.replace("https://content.jwplatform.com/videos/","").replace(".m3u8",""):"")?"https://content.jwplatform.com/players/"+n+"-1eURB2Lz.html":"",workoutsPerWeek:t.estimatedWorkoutsPerWeek||"",workoutLength:t.minMaxWorkoutRange.replace(/\/[^\/]+$/,"")+" Min."},i(function(){var e,t,n,i,r,o,a,s;e=c,t=f.element(e),n=d.popupElement,i=p(e).top-25,r=p(e).left,o=t.outerWidth(!0),a=window.innerWidth,s=window.innerHeight,e=n.outerWidth(!0),t=n.outerHeight(!0),(r=.5<=(o+r)/a?r-e:r+o)<0&&(r=a-e-50),(i=i<l.scrollTop()?l.scrollTop()+100:i)+t>window.pageYOffset+s&&(i=window.pageYOffset+s-t-30),n.css({top:i,left:r})}),d.analyticsOpenCloseLabel="plan-popup__angular--"+(d.looksLikeMobile?"isMobile":"isDesktop"),b.pushEvent("dialog.planPopup","all-access","open",d.analyticsOpenCloseLabel)}))}return n.planPopupState=d,r.unlockScroll=function(){o.removeClass("bb-lock-scroll")},r.triggerClose=function(){(d.looksLikeMobile?c:a)()},r.showPopup=function(e,t){(d.looksLikeMobile?m:s)(e,t)},r}]}),define("bb/content/plan-popup-widget/views",[],{init:function(e){"use strict";e.put("bb/content/plan-popup-widget/plan-popup.ng.html",'<div ng-show=state.popupVisible class=PlanPopup-wrapper data-bb-zone3=planPopup><div class=PlanPopup-backdrop ng-show=state.popupVisible ng-click=closePopup()></div><div ng-class="{\'PlanPopup-container--shown\': state.popupVisible}" class=PlanPopup-container><div class=PlanPopup-titleContainer><h2 class=PlanPopup-title><a href="{{ state.plan.url }}" data-bb-category=all-access data-bb-action=viewPlan data-bb-label="{{ state.plan.shortName }}">{{ state.plan.shortName }}</a></h2><span class=PlanPopup-close ng-click=closePopup() data-bb-category=all-access data-bb-action=close data-bb-label="{{ state.analyticsOpenCloseLabel }}"></span></div><div ng-if="state.looksLikeMobile && state.plan.mobileHeader"><img class=PlanPopup-image ng-srcset="{{ state.plan.mobileHeader }}" alt="{{ state.plan.shortName }}"></div><div class=PlanPopup-box><div ng-show=state.plan.duration class=PlanPopup-info><span class=PlanPopup-infoLabel>Duration:</span> <span class=PlanPopup-infoValue>{{ state.plan.duration }}</span></div><div ng-show=state.plan.workoutsPerWeek class=PlanPopup-info><span class=PlanPopup-infoLabel>Workouts/Week:</span> <span class=PlanPopup-infoValue>{{ state.plan.workoutsPerWeek }}</span></div><div ng-show=state.plan.difficultyLevel class=PlanPopup-info><span class=PlanPopup-infoLabel>Level:</span> <span class=PlanPopup-infoValue>{{ state.plan.difficultyLevel }}</span></div><div ng-show=state.plan.workoutLength class=PlanPopup-info><span class=PlanPopup-infoLabel>Workout Length:</span> <span class=PlanPopup-infoValue>{{ state.plan.workoutLength }}</span></div></div><div ng-show=state.plan.description ng-class="{\'PlanPopup-description--show-all\': state.plan.description.length < 250}" class=PlanPopup-description><div class=PlanPopup-descriptionText>{{ state.plan.description }}</div><div ng-if="state.plan.description.length >= 250" class=PlanPopup-descriptionSeeMore ng-click=toggleShowMoreDesc($event) data-bb-category=all-access data-bb-action=togglePlanPopupDescription data-bb-label="Toggle {{ state.plan.shortName }} Description"><span ng-show=showMoreDesc>Show Less</span> <span ng-hide=showMoreDesc>Show More</span></div></div><div ng-if=state.plan.videoUrl class=PlanPopup-videoContainer><div class=PlanPopup-video bb-big-picture jw-src="{{ state.plan.videoUrl }}" data-bb-category=all-access data-bb-action=viewTrailer data-bb-label="{{ state.plan.shortName }}">Watch Preview</div></div><a ng-href="{{ state.plan.url }}" class=PlanPopup-button data-bb-category=all-access data-bb-action=viewPlan data-bb-label="{{ state.plan.shortName }}">View Plan</a></div></div>')}}),define("bb/content/plan-popup-widget/package",["angular","./plan-popup-trigger","./plan-popup","./plan-popup-service","./views"],function(e,t,n,i,r){"use strict";return e.module("bb.content.plan-popup-widget",[]).directive("bbPlanPopupTrigger",t).directive("bbPlanPopup",n).service("PlanPopupService",i).run(["$templateCache",r.init])}),define("bb/cms/frontend/js/views",[],{init:function(e){"use strict";e.put("bb/cms/frontend/js/all-access-marketing-widget/all-access-marketing-widget.ng.html",'<div class=AAMW style="background-image: url(\'{{ widgetData.backgroundImageUrl }}\')" ng-class="{\n        \'AAMW--on-light\': widgetData.onLight,\n        \'AAMW--on-dark\': widgetData.onDark,\n    }" ng-if=!apiError><div class="AAMW-header AAMW-section"><img class=AAMW-headerImg ng-if=widgetData.onDark src=https://www.bodybuilding.com/images/2017/december/allaccess-mobile-logo.png> <img class=AAMW-headerImg ng-if=widgetData.onLight src=https://www.bodybuilding.com/images/2017/december/allaccess-mobile-logo2.png></div><div class="AAMW-description AAMW-section">{{ widgetData.description }}</div><div class="AAMW-subscribeBtn AAMW-section"><div bb-all-access-subscribe-btn subscribe-interval="{{ widgetData.allAccessSubscribeInterval }}"></div></div><div class="AAMW-learnMore AAMW-section"><a class=AAMW-learnMoreLink ng-href="{{ widgetData.learnMoreLink }}">Learn More</a></div></div><div ng-if=apiError></div>'),e.put("bb/cms/frontend/js/article-calculator/templates/bmi.tmpl.html","<h5>BMI Template</h5>"),e.put("bb/cms/frontend/js/article-calculator/templates/carb.tmpl.html","<h5>Carb Template</h5>"),e.put("bb/cms/frontend/js/article-calculator/templates/default.tmpl.html",'<div><h5>Error loading calculator, please check component "type" attribute...</h5></div>'),e.put("bb/cms/frontend/js/article-calculator/templates/fat.tmpl.html","<h5>Fat Template</h5>"),e.put("bb/cms/frontend/js/article-calculator/templates/protein.tmpl.html",'<div class="article-calculator article-calculator--protein" xmlns=http://www.w3.org/1999/html xmlns=http://www.w3.org/1999/html><div class=article-calculator__header>PROTEIN INTAKE CALCULATOR</div><div class=aricle-calculator__body><form name=articleCalculatorForm ng-submit=calculateProtein(articleCalculatorForm) autocomplete=off novalidate><div class=article-calculator__sub-header>Unit of Measure</div><div class=article-calculator__radio-group><div class=article-calculator__input--container><label class=article-calculator__input--label><input class=article-calculator__input--radio type=radio ng-model=userData.unitOfMeasure ng-change=unitOfMeasureChange(userData.unitOfMeasure) value=imperial> Imperial <small>(feet, inches, pounds)</small></label></div><div class=article-calculator__input--container><label class=article-calculator__input--label><input class=article-calculator__input--radio type=radio ng-model=userData.unitOfMeasure ng-change=unitOfMeasureChange(userData.unitOfMeasure) value=metric> Metric <small>(meters, centimeters, kilograms)</small></label></div></div><div class=article-calculator__sub-header>Age</div><div class=article-calculator__input--container><label class=article-calculator__input--label><input class=article-calculator__input type=number size=3 min=18 max=150 ng-model=userData.age name=age placeholder=Years required> <strong>yrs.</strong></label></div><div class=article-calculator__sub-header>Sex</div><div class=article-calculator__radio-group><div class=article-calculator__input--container><label class=article-calculator__input--label><input class=article-calculator__input--radio type=radio ng-model=userData.gender value=male> Male</label></div><div class=article-calculator__input--container><label class=article-calculator__input--label><input class=article-calculator__input--radio type=radio ng-model=userData.gender value=female> Female</label></div></div><div class=article-calculator__sub-header>Height</div><div class=article-calculator__input--container><label class=article-calculator__input--label ng-if="userData.unitOfMeasure == \'imperial\'"><input class=article-calculator__input type=number min=0 max=15 size=2 placeholder=Feet ng-model=userData.height.ft name=height required> <strong>ft.</strong> <input class=article-calculator__input type=number min=0 max=11 size=2 placeholder=Inches ng-model=userData.height.in name=height required> <strong>in.</strong></label><label class=article-calculator__input--label ng-if="userData.unitOfMeasure == \'metric\'"><input class=article-calculator__input type=number min=0 max=5 size=1 placeholder=Meters ng-model=userData.height.m name=height required> <strong>m</strong> <input class=article-calculator__input type=number min=0 max=460 size=3 placeholder=Centimeters ng-model=userData.height.cm name=height required> <strong>cm</strong></label></div><div class=article-calculator__sub-header>Weight</div><div class=article-calculator__input--container><label class=article-calculator__input--label ng-if="userData.unitOfMeasure == \'imperial\'"><input class=article-calculator__input type=number min=0 max=1000 size=4 ng-model=userData.weight.lbs name=weight required> <strong>lbs.</strong></label><label class=article-calculator__input--label ng-if="userData.unitOfMeasure == \'metric\'"><input class=article-calculator__input type=number min=0 max=460 size=3 ng-model=userData.weight.kg name=weight required> <strong>kg</strong></label></div><div class=article-calculator__sub-header>Goal</div><div class=article-calculator__radio-group><div class=article-calculator__input--container><label class=article-calculator__input--label><input class=article-calculator__input--radio type=radio name=mainGoal.fat ng-model=userData.mainGoal value=fat> Fat Loss</label></div><div class=article-calculator__input--container><label class=article-calculator__input--label><input class=article-calculator__input--radio type=radio ng-model=userData.mainGoal value=maintenance> Maintenance</label></div><div class=article-calculator__input--container><label class=article-calculator__input--label><input class=article-calculator__input--radio type=radio ng-model=userData.mainGoal value=muscle> Gain Muscle</label></div></div><div class=article-calculator__sub-header>Activity Level</div><div class=article-calculator__input--container><label class=article-calculator__input--label><input class=article-calculator__input--radio type=radio ng-model=userData.activityLevel value=light> Lightly active (moderate exercise but sedentary job)</label></div><div class=article-calculator__input--container><label class=article-calculator__input--label><input class=article-calculator__input--radio type=radio ng-model=userData.activityLevel value=moderate> Moderately active (intense exercise but sedentary job)</label></div><div class=article-calculator__input--container><label class=article-calculator__input--label><input class=article-calculator__input--radio type=radio ng-model=userData.activityLevel value=very> Very active (moderate exercise and active job)</label></div><div class=article-calculator__input--container><label class=article-calculator__input--label><input class=article-calculator__input--radio type=radio ng-model=userData.activityLevel value=extra> Extra active (intense exercise and active job)</label></div><div class=article-calculator__error--container ng-if=!articleCalculatorForm.$valid><span class=article-calculator__error--message ng-if=articleCalculatorForm.$error.required>All fields are required</span></div><div class=article-calculator__actionbar><button class=bb-flat-btn type=submit>Calculate</button> <button class=bb-flat-btn type=button ng-if=settings.allowReset ng-click=resetForm()>Reset</button></div></form></div><div class=aricle-calculator__output></div><div ng-if=settings.debug><h4>Debug Data</h4>{{userData}}</div></div>'),e.put("bb/cms/frontend/js/cms-article-collection/templates/cms-article-collection-template.html",'<div ng-class="{\'hide-more\': showReadMore===false, \'hide-date\': showDate===false, \'hide-description\': showDescription===false, \'hide-title\': showTitle===false, \'hide-title\': !widgetTitle, \'no-articles\': articleList.length===0 && !transclusion}" class=Comp__article-collection><h4 class=Comp__article-collection--widget-title>{{widgetTitle}} <a class=Comp__article-collection-more-link href={{viewMoreLink}} ng-if=viewMoreLink>{{viewMoreLabel}}</a></h4><div class=Comp__article-collection--article-list ng-if=!transclusion><div class=article-collection-loading ng-class="{\'article-collection-loading--loading\':shared.loading}"><span class=article-collection-loading__spinner></span></div><div class="video-rotator bb-carousel__skin--default" bb-carousel><bb-carousel-view><bb-video-thumb ng-repeat="video in articleList" ng-if="type==\'videos\'" video=video></bb-video-thumb></bb-carousel-view></div><div ng-repeat="article in articleList" ng-if="type==\'articles\'" class="Comp__article-collection--article {{articleColumnClass}}"><div class=Comp__article-collection--article-image-container><a class=Comp__article-collection--article-image-link ng-href={{article.url}}><img class="Comp__article-collection--article-image Comp__article-collection--article-image--small" ng-src={{article.smallboxThumbnailUrl}} alt={{article.name}}> <img ng-show="layout===\'hero-image\' && $first" class="Comp__article-collection--article-image Comp__article-collection--article-image--large" ng-src={{article.largeImageUrl}} alt={{article.name}}></a></div><figcaption><a class=Comp__article-collection--article-title ng-href={{article.url}} ng-bind-html="article.name | trust_html"></a><div class=Comp__article-collection--article-description ng-bind-html="article.description | trust_html"></div></figcaption><div class=Comp__article-collection--article-info><div class=Comp__article-collection--article-date>{{(article.updatedDate*1000) | date:\'mediumDate\'}}</div><a class=Comp__article-collection--article-view-more ng-href={{article.url}}><span class=Comp__article-collection--view-more-long>Read </span>More &rsaquo;</a></div></div></div><div ng-if=loadingFirst class=article-collection__transcluded-article-collection style=position:relative><div class=article-collection-loading ng-class="{\'article-collection-loading--loading\':shared.loading}"><span class=article-collection-loading__spinner></span></div><div ng-transclude></div></div></div>'),e.put("bb/cms/frontend/js/content-read-time/content-read-time.html",'<span ng-show=readTimeString class=bb-read-time><span ng-show=delimiter class=bb-read-time__delimiter ng-bind-html="delimiter | trust_html">{{delimiter}}</span> <span class=bb-read-time__icon></span> <span class=bb-read-time__time>{{readTimeString}}</span></span>'),e.put("bb/cms/frontend/js/find-a-plan-results/fap-results-frontend.html",'<section class=Comp__find-a-plan-results><div ng-if="programList.length > 0" class=Comp__find-a-plan-results__top><h4 class=section-header-stripe><div class=header-inner>Top Plan For You</div></h4><div class=program-large><a class=article-image-container ng-href={{programListTop.recommendation.article.url}}><div class=blue-flag><span class=flag-content><span class=flag-text><span class=member-count>5K</span> Members Completed</span></span></div><img class=article-image ng-src="{{programListTop.recommendation.article.largeImageUrl.replace(\'http:\', \'https:\')}}" alt={{programListTop.recommendation.article.name}}></a><figcaption><a class=article-title ng-href={{programListTop.recommendation.article.url}}>{{programListTop.recommendation.article.name}}</a><div class=article-description>{{programListTop.recommendation.article.description}}</div></figcaption><div class=article-info><span class=program-detail>{{programListTop.recommendation.numberOfWeeks}} Weeks &#47; {{programListTop.recommendation.daysPerWeek}} Workouts Per Week</span></div><div class=article-links><a class="button blue" ng-href={{programListTop.recommendation.article.url}}>View Plan</a> <span class="watch-video-button top-program button grey" data-video={{programListTop.recommendation.article.videoUrl}} data-image={{programListTop.recommendation.article.largeImageUrl}} ng-click=addVideo($event) ng-show="programListTop.recommendation.article.videoUrl != \'\' && programListTop.recommendation.article.videoUrl != null">Watch Video</span><div class=social-links></div></div><div class=video-container><div class=video-padding></div></div></div></div><div ng-if="programList.length > 3" class=Comp__find-a-plan-results__other><h4 class=section-header-stripe><div class=header-inner>Other Recommended Plans</div></h4><div class=program-small><div class=program-row><div ng-repeat="program in programListOtherFirstRow track by $index" ng-class="{\'col-sm-end\': $index%3==2}" class="program-article col-xs-4 col-sm-4"><a class=article-image-container ng-href={{program.recommendation.article.url}}><img class=article-image ng-src="{{program.recommendation.article.featureboxThumbnailUrl.replace(\'http:\', \'https:\')}}" alt={{program.recommendation.article.name}}></a><figcaption><a class=article-title ng-href={{program.recommendation.article.url}}>{{program.recommendation.article.name}}</a><div class=article-description>{{program.recommendation.article.description}}</div></figcaption><div class=article-info><span class=program-detail>{{program.recommendation.numberOfWeeks}} Weeks &#47; {{program.recommendation.daysPerWeek}} Workouts Per Week</span></div><div class=article-links><a class="button blue" ng-href={{program.recommendation.article.url}}>View Plan</a><div class=watch-video><span class="watch-video-button other-program video-link" data-video={{program.recommendation.article.videoUrl}} data-image="{{program.recommendation.article.largeImageUrl.replace(\'http:\', \'https:\')}}" ng-click=addVideo($event) ng-show="program.recommendation.article.videoUrl != \'\' && program.recommendation.article.videoUrl != null">Watch Video</span></div></div></div></div><div class=video-container><div class=video-padding></div></div><div class="program-row last-row"><div ng-repeat="program in programListOtherSecondRow track by $index" ng-class="{\'col-sm-end\': $index%3==2}" class="program-article col-xs-4 col-sm-4"><a class=article-image-container ng-href={{program.recommendation.article.url}}><img class=article-image ng-src="{{program.recommendation.article.featureboxThumbnailUrl.replace(\'http:\', \'https:\')}}" alt={{program.recommendation.article.name}}></a><figcaption><a class=article-title ng-href={{program.recommendation.article.url}}>{{program.recommendation.article.name}}</a><div class=article-description>{{program.recommendation.article.description}}</div></figcaption><div class=article-info><span class=program-detail>{{program.recommendation.numberOfWeeks}} Weeks &#47; {{program.recommendation.daysPerWeek}} Workouts Per Week</span></div><div class=article-links><a class="button blue" ng-href={{program.recommendation.article.url}}>View Plan</a><div class=watch-video><span class="watch-video-button other-program video-link" data-video={{program.recommendation.article.videoUrl}} data-image="{{program.recommendation.article.largeImageUrl.replace(\'http:\', \'https:\')}}" ng-click=addVideo($event) ng-show="program.recommendation.article.videoUrl != \'\' && program.recommendation.article.videoUrl != null">Watch Video</span></div></div></div></div><div class=video-container><div class=video-padding></div></div></div></div><div ng-if=showError() class=Comp__find-a-plan-results__error><p>There was an error retreiving your program recommendations.</p></div></section>'),e.put("bb/cms/frontend/js/find-a-plan/fap-frontend.html",'<section class=fap-wizard><div ng-hide=hideLeft class=fap-wizard__column--left><div class=fap-wizard__title>Find Your Free<div class=fap-wizard__title--large>Fitness Plan!</div></div><div class=fap-wizard__description>Designed by the world\'s best trainers, athletes, and industry experts to help you get the best possible results. <a class=fap-wizard__browse-all href=https://www.bodybuilding.com/fun/find-a-plan-all.html>Browse All Plans</a></div></div><div class=fap-wizard__column--right><div class=fap-wizard__pager><div class=fap-wizard__pager--item ng-click=setCurrentIndex($index) ng-class="{\'fap-wizard__pager--item-first\':$first, \'fap-wizard__pager--item-selected\':$index <= selectedIndex}" ng-repeat="page in fap.pages track by $index"><span class=fap-wizard__pager--bar ng-if=!$first></span> <span class="bb-btn--plain fap-wizard__pager--button"></span></div></div><div class=fap-wizard__content ng-include=fap.pages[selectedIndex].template></div><button ng-if="selectedIndex > 0" class="bb-btn--plain fap-wizard__button--back" ng-click=stepBackward()>&lsaquo; Back</button></div></section>'),e.put("bb/cms/frontend/js/find-a-plan/templates/age.html",'<div id=DPG_FAP_Wizard_Age class=fap-wizard__page><div class=fap-wizard__page--title>What is Your Age?</div><div class=fap-wizard__stat-wrapper><form name=fapAgeForm novalidate><div class=fap-wizard__stat-container><input class=fap-wizard__stat ng-model=fap.data.age name=userAge type=number ng-required=true min=18 max=150 placeholder=--\x3e<div class=fap-wizard__stat-label>YEARS</div></div><button class="bb-flat-btn bb-flat-btn--stretch bb-flat-btn--primary fap-wizard__btn-nav" ng-class="{\'fap-wizard__button--disabled\': fapAgeForm.$invalid}" ng-disabled=fapAgeForm.$invalid ng-click=stepForward()>NEXT: HEIGHT</button></form></div><div class="bb-form-msg--error fap-wizard__error-msg" ng-show="fapAgeForm.userAge.$error.min || fapAgeForm.userAge.$error.max">Age must be between 18 and 150 years.</div></div>'),e.put("bb/cms/frontend/js/find-a-plan/templates/gender.html",'<div id=DPG_FAP_Wizard_Gender class=fap-wizard__page><div class=fap-wizard__page--title>Choose Your Gender:</div><div class="Grid-row fap-wizard__page--content"><div class=fap-wizard__img--panel><div class="fap-wizard__img fap-wizard__img--gender-male"></div><button class="bb-flat-btn bb-flat-btn--stretch fap-wizard__btn--gender" ng-click="setProperty(\'gender\', \'male\')">Male</button></div><div class=fap-wizard__img--panel><div class="fap-wizard__img fap-wizard__img--gender-female"></div><button class="bb-flat-btn bb-flat-btn--stretch fap-wizard__btn--gender" ng-click="setProperty(\'gender\', \'female\')">Female</button></div></div></div>'),e.put("bb/cms/frontend/js/find-a-plan/templates/goal.html",'<div id=DPG_FAP_Wizard_Goal class=fap-wizard__page><div class=fap-wizard__page--title>Choose Your Main Goal:</div><div class="Grid-row fap-wizard__page--content"><div class=fap-wizard__img--panel><div ng-if="fap.data.gender == \'male\'" class="fap-wizard__img fap-wizard__goal--male-build"></div><div ng-if="fap.data.gender == \'female\'" class="fap-wizard__img fap-wizard__goal--female-build"></div><button class="bb-flat-btn bb-flat-btn--stretch" ng-click="setProperty(\'goal\', \'build\', true)">Build Muscle</button></div><div class=fap-wizard__img--panel><div ng-if="fap.data.gender == \'male\'" class="fap-wizard__img fap-wizard__goal--male-lose"></div><div ng-if="fap.data.gender == \'female\'" class="fap-wizard__img fap-wizard__goal--female-lose"></div><button class="bb-flat-btn bb-flat-btn--stretch" ng-click="setProperty(\'goal\', \'lose\', true)">Lose Fat</button></div><div class=fap-wizard__img--panel><div ng-if="fap.data.gender == \'male\'" class="fap-wizard__img fap-wizard__goal--male-transform"></div><div ng-if="fap.data.gender == \'female\'" class="fap-wizard__img fap-wizard__goal--female-transform"></div><button class="bb-flat-btn bb-flat-btn--stretch" ng-click="setProperty(\'goal\', \'transform\', true)">Transform</button></div></div></div>'),e.put("bb/cms/frontend/js/find-a-plan/templates/height.html",'<div id=DPG_FAP_Wizard_Height class=fap-wizard__page><div class=fap-wizard__page--title>What is Your Height?</div><div class=fap-wizard__stat-wrapper><form name=fapHeightForm novalidate><div class=fap-wizard__stat-container><div ng-if="user.unitOfMeasure == \'imperial\'" class="Grid-row Grid-row--centered"><div><input class=fap-wizard__stat ng-model=fap.data.height.ft name=userHeightFt type=number ng-required=true min=1 max=12 placeholder=--\x3e<div class=fap-wizard__stat-label>Ft.</div></div><div><input class=fap-wizard__stat ng-model=fap.data.height.in name=userHeightIn type=number ng-required=true min=0 max=11 placeholder=--\x3e<div class=fap-wizard__stat-label>In.</div></div></div><div ng-if="user.unitOfMeasure == \'metric\'" class="Grid-row Grid-row--centered"><div><input class=fap-wizard__stat ng-model=fap.data.height.cm name=userHeightCm type=number ng-required=true min=1 max=366 placeholder=--\x3e<div class=fap-wizard__stat-label>cm.</div></div></div></div><button class="bb-flat-btn bb-flat-btn--stretch bb-flat-btn--primary fap-wizard__btn-nav" ng-class="{\'fap-wizard__button--disabled\': fapHeightForm.$invalid}" ng-disabled=fapHeightForm.$invalid ng-click=stepForward()>NEXT: GOAL</button></form></div><div class="bb-form-msg--error fap-wizard__error-msg" ng-show="fapHeightForm.userHeightFt.$error.min || fapHeightForm.userHeightFt.$error.max || apHeightForm.userHeightIn.$error.min || fapHeightForm.userHeightIn.$error.max">Please insert a valid height.</div><div class="bb-form-msg--error fap-wizard__error-msg" ng-show="fapHeightForm.userHeightCm.$error.min || fapHeightForm.userHeightCm.$error.max">Please insert a valid height.</div></div>'),e.put("bb/cms/frontend/js/mobile-app-download/mobile-app-download.html","<div class=mobile-app-download ng-class=\"{'mobile-app-download--open': notificationOpen}\"><div class=mobile-app-download__container><button class=mobile-app-download__close ng-click=notificationClose()><span class=mobile-app-download__close--icon>&times;</span></button> <a class=mobile-app-download__content ng-href={{appURL}}><img class=mobile-app-download__icon ng-src=\"{{'//'+ currentHost + icon}}\"><div class=mobile-app-download__info><div ng-show=isAndroid><div class=mobile-app-download__title>{{androidTitle}}</div><div class=mobile-app-download__type>Android</div><div class=mobile-app-download__description>{{androidDescription}}</div></div><div ng-show=isAppleIos><div class=mobile-app-download__title>{{appleTitle}}</div><div class=mobile-app-download__type>iOS</div><div class=mobile-app-download__description>{{appleDescription}}</div></div></div><div class=mobile-app-download__button--view>View</div></a></div></div>"),e.put("bb/cms/frontend/js/product-grid/product-grid.html",'<div ng-if=productData id=Comp__product-grid class=Comp__product-grid><div ng-repeat="item in productData | limitTo: 4 track by $index" class="product-grid-item product-grid-item--{{$index + 1}}"><figure><div class=product-grid-item-thumb-container><a class=product-grid-item-thumb ng-href={{item.url}}><picture><img ng-src={{item.imgUrl}} alt={{item.name}}></picture></a></div><figcaption><div class=product-grid-item-title><a ng-href={{item.url}}>{{item.name}}</a></div><div class=product-grid-item-price-container><span class=product-grid-item-price>{{item.price}}</span> <span ng-if=item.strikePrice class=product-grid-item-price--strike>{{item.strikePrice}}</span></div><div ng-if="showBadge && item.badge" class=product-grid-item-badge><img src=https://artifacts.bbcomcdn.com/bb-resources/2.1.5/free-shipping/free-shipping.svg alt="free shipping badge"></div><div class=product-grid-item-rating>{{item.rating}}</div></figcaption><a class="bb-flat-btn product-grid-item-btn" ng-href={{item.url}}>Go Now</a></figure></div></div>'),e.put("bb/cms/frontend/js/product-rotators/4up/cms-4up-rotator.html","<div id=cms-4up-rotator><a ng-if=brandImage ng-href={{brandUrl}}><img class=cms-4up__brand-img ng-src={{brandImage}}></a><div class=cms-4up__container><a class=cms-4up__container--header ng-href={{brandUrl}}><img ng-if=logoImage ng-src={{logoImage}}> <span ng-if=title class=cms-4up__title>{{title}} &rang;</span></a><div ng-transclude></div></div></div>"),e.put("bb/cms/frontend/js/product-rotators/6up/cms-6up-rotator.html","<div id=cms-6up-rotator><a class=cms-6up__title ng-if=title ng-href={{href}}>{{title}} &rang;</a><div ng-transclude></div></div>"),e.put("bb/cms/frontend/js/product-rotators/product-rotator-frontend.html",'<div id=cms-product-rotator ng-cloak><div class="cms-product-rotator__control cms-product-rotator__control--left"><button ng-click=scrollView(true) ng-disabled="viewport.scrolledItems == 0">&lang;</button></div><div class=cms-product-rotator__viewport><div class=cms-product-rotator__view><div class=cms-product-rotator__item ng-style=data.itemWidth ng-repeat="item in data.items track by $index"><a class=cms-product-rotator__item--img-container ng-href="{{removeProtocol(item._links[\'canonical\'].href)}}"><img ng-src="{{removeProtocol(item._links[\'bb:image\'][2].href)}}" class=cms-product-rotator__item--img></a><div class=cms-product-rotator__labels><a class=cms-product-rotator__item--brand ng-href="{{removeProtocol(item._links[\'bb:brand\'].href)}}">{{item.brandName}}</a> <a class=cms-product-rotator__item--name ng-href="{{removeProtocol(item._links[\'canonical\'].href)}}">{{item.name}}</a></div><a ng-href="{{removeProtocol(item._links[\'canonical\'].href)}}" bb-add-to-cart-trigger class=bb-flat-btn>Add to Cart</a></div></div><div class=cms-product-rotator__overlay></div></div><div class="cms-product-rotator__control cms-product-rotator__control--right"><button ng-click=scrollView() ng-disabled=!viewport.scrollable>&rang;</button></div></div>'),e.put("bb/cms/frontend/js/product-slide-up/product-slide-up.html",'<a id=Comp__product-slide-up class=Comp__product-slide-up ng-href={{productData.url}}><figure class=product-slide-up--figure><div class=product-slide-up--thumb-container><picture class=product-slide-up--thumb><img ng-src={{productData.imgUrl}} alt={{productData.name}}></picture></div><figcaption class=product-slide-up--figcaption><div class=product-slide-up--figcaption-top><div class=product-slide-up--title>{{productData.name}}</div></div><div class=product-slide-up--figcaption-bottom><div class=product-slide-up--price-container><span class=product-slide-up--price>{{productData.price}}</span> <span ng-if=productData.strikePrice class=product-slide-up--price--strike>{{productData.strikePrice}}</span></div><div ng-if="showBadge && productData.badge" class=product-slide-up--badge><img src=https://www.bodybuilding.com/images/store-images/icon-free-shipping-blue.png alt="free shipping badge"></div><div class=product-slide-up--btn>Go Now</div></div></figcaption></figure></a>'),e.put("bb/cms/frontend/js/recipes/filter/filter-results-selector.ng.html",'<div class=bb-filter-results-selector ng-class="{\'bb-filter-results-selector--showing\': filterResultsShowing}"><div ng-if=filterResultsShowing class=bb-filter-results-selector__scrollable><div class=bb-filter-results-selector__selector-title><span class=bb-filter-results-selector__selector-title-label>Filter Results</span> <button class=bb-filter-results-selector__selector-title-close ng-click=cancel()></button></div><ul class=bb-recipe-filter-results__selector-list><li ng-repeat="sort in filters.sorts" class="bb-recipe-filter-results__filter-group bb-recipe-filter-results__filter-group--sort-mode"><div class=bb-recipe-filter-results__selector-heading>{{sort.name}}</div><div class=bb-recipe-filter-results__selector-buttons><div class=bb-recipe-filter-results__selector-button ng-repeat="item in sort.items" ng-class="{\'bb-recipe-filter-results__selector-button--selected\': sort.selectedItem == item}" ng-click="selectSort(sort, item)"><span class=bb-recipe-filter-results__selector-button-radio></span> <span>{{item.label}}</span></div></div></li><li ng-repeat="filter in temporaryFilters" class=bb-recipe-filter-results__filter-group ng-class="{\'bb-recipe-filter-results__filter-group--sort-mode\': filter.sortMode}"><div class=bb-recipe-filter-results__selector-heading>{{filter.name}}</div><div class=bb-recipe-filter-results__selector-buttons><div class=bb-recipe-filter-results__selector-button ng-repeat="item in filter.items" ng-class="{\'bb-recipe-filter-results__selector-button--selected\': item.selected}" ng-click="selectFilter($parent.$index, $index)"><span class=bb-recipe-filter-results__selector-button-checkbox></span> <span>{{item.label}}</span></div></div></li></ul></div><div class=bb-recipe-selector__selector-confirmation ng-if=filterResultsShowing><button class="bb-flat-btn bb-flat-btn--primary bb-flat-btn--size-lg bb-recipe-selector__selector-apply" ng-click=apply()>Apply</button> <button class="bb-flat-btn bb-flat-btn--secondary bb-flat-btn--size-lg bb-recipe-selector__selector-cancel" ng-click=cancel()>Cancel</button></div></div>'),e.put("bb/cms/frontend/js/recipes/filter/filter-results.ng.html","<button class=recipe-filter-results ng-click=showMenu() ng-class=\"{'recipe-filter-results--showing': filterResultsShowing}\"><div class=recipe-filter-results__label><span class=recipe-filter-results__label-text>{{label}} <strong ng-if=sortByFilter class=recipe-filter-results__sort-label>{{sortByFilter.label}}</strong></span></div></button>"),e.put("bb/cms/frontend/js/recipes/filter/macro-range-selector.ng.html",'<div class=bb-recipe-macro-range__selector ng-class="{\'bb-recipe-macro-range__selector--showing\':macroSelectorShowing}"><div ng-if=macroSelectorShowing><div class=bb-recipe-macro-range__selector-title><span class=bb-recipe-macro-range__selector-title-label>Set your macro range</span> <button class=bb-recipe-macro-range__selector-title-close ng-click=cancel()></button></div><ul class=bb-recipe-macro-range__selector-list><li ng-repeat="macro in selections"><div class=bb-recipe-macro-range__selector-heading>{{macro.name}}</div><ul class=bb-recipe-macro-range__selector-group><li class=bb-recipe-macro-range__selector-item ng-repeat="range in macro.ranges" ng-class="{\'bb-recipe-macro-range__selector-item__selected\': range == macro.selectedRange}" ng-click="selectMacro(macro, range)"><button class=bb-recipe-macro-range__selector-button>{{range.min}}<span ng-if="range.max != -1">-{{range.max}}</span> {{range.label}}<span ng-if="range.max == -1"> +</span></button></li></ul></li></ul><div class=bb-recipe-selector__selector-confirmation><button class="bb-flat-btn bb-flat-btn--primary bb-flat-btn--size-lg bb-recipe-selector__selector-apply" ng-click=apply()>Apply</button> <button class="bb-flat-btn bb-flat-btn--secondary bb-flat-btn--size-lg bb-recipe-selector__selector-cancel" ng-click=cancel()>Cancel</button></div></div></div>'),e.put("bb/cms/frontend/js/recipes/filter/macro-range.ng.html","<button class=bb-recipe-macro-range ng-click=showMenu() ng-class=\"{'bb-recipe-macro-range--showing': macroSelectorShowing}\"><div class=bb-recipe-macro-range__label><span class=bb-recipe-macro-range__label-text>Set macro range</span> <span class=bb-recipe-macro-range__label-icon ng-class=\"{'bb-recipe-macro-range__label-icon--open': macroSelectorShowing}\">&#x025BE;</span></div></button>"),e.put("bb/cms/frontend/js/recipes/filter/recipe-category-filter.ng.html",'<div class=bb-recipe-category-filter><ul class=recipe-filter-results-desktop><li class=recipe-filter-desktop-button ng-repeat="filter in filters.filters" ng-if=!filter.hideInDesktop ng-class="{\'recipe-filter-desktop-menu--showing\': openFilterMenu == filter}"><button class=recipe-filter-desktop-button__label ng-click="toggleFilterMenu($event, filter)">{{filter.name}}</button><ul class=recipe-filter-desktop-menu><li ng-repeat="item in filter.items" class=recipe-filter-desktop-menu__item><button class=recipe-filter-desktop-menu__item-button ng-click="selectItem(filter, item)" ng-class="{\'bb-recipe-filter-results__selector-button--selected\': item.selected}"><span class=bb-recipe-filter-results__selector-button-checkbox></span> <span class=bb-recipe-filter-results__selector-button-label>{{item.label}}</span></button></li></ul></li></ul><div class=recipes-filter-controls><bb-recipe-filter-results switch=filterResultsShowing></bb-recipe-filter-results><bb-recipe-macro-range switch=macroSelectorShowing></bb-recipe-macro-range></div><div class=recipes-filter-overview ng-if="hasFilters() || hasMacros()"><ul class=recipe-filter-tags ng-if=hasFilters()><li class=recipe-filter-tags--tag ng-class="{\'recipe-filter-tags__tag--hidden-in-desktop\': sort.hideInDesktop}" ng-repeat="sort in filters.sorts"><span class=recipe-filter-tags--tag-label>{{sort.selectedItem.label}}</span> <button class=recipe-filter-tags--tag-button ng-click=removeSort($index)>&times;</button></li><li class=recipe-filter-tags--tag ng-class="{\'recipe-filter-tags__tag--hidden-in-desktop\': filter.hideInDesktop}" ng-repeat="filter in filters.selectedFilters"><span class=recipe-filter-tags--tag-label>{{filter.label}}</span> <button class=recipe-filter-tags--tag-button ng-click="removeFilter($index, filter)">&times;</button></li></ul><ul class=recipe-macro-ranges ng-if=hasMacros()><li ng-repeat="macro in macros" ng-if=macro.selectedRange class=recipe-macro-ranges__tag><span class=recipe-macro-ranges__tag-label>{{macro.name}}</span> <span class=recipe-macro-ranges__tag-value>{{macro.selectedRange.min}} <span ng-if="macro.selectedRange.max > 0">- {{macro.selectedRange.max}}</span> {{macro.selectedRange.label}} <span ng-if="macro.selectedRange.max < 0">+</span></span></li></ul><div class=recipe-filters-clear><button ng-click=clearAllFilters() class=recipe-filters-clear__button>Clear all filters</button></div></div><div class=recipes-filter-controls--desktop><bb-recipe-macro-range switch=macroSelectorShowing desktop-mode=true></bb-recipe-macro-range><bb-recipe-filter-results switch=filterResultsShowing sort-mode=true sort-by-filter=filters.sorts[0].selectedItem></bb-recipe-filter-results></div><bb-filter-results-selector filters=filters switch=filterResultsShowing></bb-filter-results-selector><bb-macro-range-selector macros=macros switch=macroSelectorShowing></bb-macro-range-selector></div>'),e.put("bb/cms/frontend/js/recipes/recipe-category.ng.html",'<div class=bb-recipe-category-display><div class=bb-recipe-category-display__updating ng-if=serviceInProgress><span class=bb-recipe-category-display__updating-spinner></span></div><div ng-if=hasFilters><div ng-if="recipes.length === 0" class=bb-recipe-category-display--no-results><span ng-if=error>There was an error filtering your results.</span> <span ng-if=!error>No recipes match your criteria.</span></div><div class=bb-recipe-category-results ng-if="recipes.length > 0"><h1 class=bb-recipe-category-results__category-title>{{categoryTitle}}</h1><div class=bb-recipe-category-results__recipe-count>{{totalRecipes}}<ng-pluralize count=recipes.length when="{\'1\': \' recipe\', \'other\': \' recipes\'}"></ng-pluralize></div><div class=bb-recipe-category-grid><div class=bb-recipe-card ng-repeat="recipe in recipes"><div class=bb-recipe-card__content><div class=bb-recipe-card__image-container-container><a class=bb-recipe-card__image-container ng-href={{recipe._links.alternate[0].href}}><img class=bb-recipe-card__image ng-src="{{getImageSize(recipe._links[\'bb-cms:contentImage\'][0].href, \'640xh\')}}"></a></div><div class=bb-recipe-card__text-container><h2 class=bb-recipe-card__title><a ng-href={{recipe._links.alternate[0].href}} class=bb-recipe-card__title-link>{{recipe.name}}</a></h2><p class="bb-recipe-card__description bb-truncate-directive" bb-truncate="" bb-truncate-lines=2>{{recipe.description}}</p><p class=bb-recipe-card__date>{{recipe.publishDate | date : \'MMMM d, yyyy\'}}</p></div></div></div></div><div class=bb-recipe-category--show-more ng-if=hasNextPage()><button class="bb-recipe-category__show-more-button bb-flat-btn bb-flat-btn--size-lg" ng-click=showMoreFiltered()>Show More</button></div></div></div><ng-transclude ng-if=!hasFilters></ng-transclude></div>'),e.put("bb/cms/frontend/js/recommended-articles/recommended-articles.html",'<div ng-show="config.widgetTitle && articleList.length > 0" class=widget-heading--container><h3 class=widget-heading__title>{{config.widgetTitle}}</h3></div><div ng-show="articleList.length > 0" ng-class=optionClasses() class=cms-article-list><div class=cms-article-list--container><div ng-repeat="article in articleList | limitTo: config.totalArticles track by $index" id=gain-recommended-{{$index+1}} class="cms-article-list--article col {{columnsClass}}"><figure><a class=thumb-container ng-href={{article.url}}><div class=thumb><picture><img ng-src={{imgResizeUrl(article.imageUrl)}} alt={{article.title}}></picture></div></a><figcaption><span class=title><a ng-href={{article.url}}>{{article.title}}</a></span></figcaption></figure></div></div></div>'),e.put("bb/cms/frontend/js/recommended-products/recommended-products.html",'<div ng-if="productList.length > 0" id=recommended-products-carousel><div ng-if=widgetTitle class=widget-heading--container><h3 class=widget-heading__title>{{widgetTitle}}</h3><a ng-if=viewMoreUrl class=widget-heading__url ng-href={{viewMoreUrl}}>{{viewMoreLabel}}</a></div><div ng-class=optionClasses() class=cms-product-list><div class=cms-product-list--container><bb-carousel class=bb-carousel__skin--default><bb-carousel-view><div ng-repeat="item in productList | limitTo: totalProducts track by $index" id=recommended-product-{{$index+1}} class="cms-product-list--item col {{columnsClass}}"><figure><a class=thumb-container ng-href={{item.recommendation.productUrl}}><div class=thumb><picture><img ng-src="{{item.recommendation.imageUrl.replace(\'_450_\', \'_130_\').replace(\'http:\', \'https:\')}}" alt="{{item.recommendation.brand}} - {{item.recommendation.name}}"></picture></div></a><figcaption><span class=title><a ng-href={{item.recommendation.productUrl}}>{{item.recommendation.brand}} - {{item.recommendation.name}}</a> </span><span ng-if="showDescription && item.recommendation.description" class=description>{{item.recommendation.description}}</span> <span ng-if="showBadge && item.recommendation.bEliteVectorUrl" class=badge><img src=https://artifacts.bbcomcdn.com/bb-resources/2.1.5/free-shipping/free-shipping.svg alt="free shipping badge"> </span><span ng-if=showRating class=rating><span class=rating-inner>{{item.recommendation.rating | number:1}}</span></span></figcaption></figure></div></bb-carousel-view></bb-carousel></div></div></div>'),e.put("bb/cms/frontend/js/slider-lite/templates/slide-lite-template.html",'<div ng-cloak ng-show=images.enabled><a class=bb-slider-lite__slide--link ng-href={{images.imgUrl}}><img ng-if="checkBreakpoint() === \'desktop\'" class=bb-slider-lite__slide__img ng-src={{images.desktop}} alt={{images.imgDesc}}> <img ng-if="checkBreakpoint() === \'tablet\'" class=bb-slider-lite__slide__img ng-src={{images.tablet}} alt={{images.imgDesc}}> <img ng-if="checkBreakpoint() === \'mobile\'" class=bb-slider-lite__slide__img ng-src={{images.mobile}} alt={{images.imgDesc}}><div ng-if="images.textTitle || images.sponsorImg" class=bb-slider-lite__optional-info><div ng-if=images.textTitle class=bb-slider-lite__text><div ng-if="images.textCategory && images.textCategoryUrl" class=bb-slider-lite__text--category><a ng-href={{images.textCategoryUrl}}>{{images.textCategory}}</a></div><div class=bb-slider-lite__text--title><a ng-href={{images.imgUrl}}>{{images.textTitle}}</a></div><div ng-if=images.textDesc class=bb-slider-lite__text--desc><span>{{images.textDesc}}</span></div></div><div ng-if="images.sponsorImg && images.sponsorUrl" class=bb-slider-lite__sponsor><div ng-if=images.sponsorByLine class=bb-slider-lite__sponsor--by><span>{{images.sponsorByLine}}</span></div><div class=bb-slider-lite__sponsor--img><a ng-href={{images.sponsorUrl}}><img ng-src={{images.sponsorImg}} alt={{images.sponsorName}}> <span class=bb-slider-lite__sponsor--mobile-only>&nbsp;{{images.sponsorName}}</span></a></div></div></div></a></div>'),e.put("bb/cms/frontend/js/slider-lite/templates/slider-lite-template.html",'<div class=bb-slider-lite__container><div class=bb-slider-lite__slide-viewport ng-transclude></div><div ng-show="navShow == true" class=bb-slider-lite__nav><div class="bb-slider-lite__nav--btn bb-slider-lite__nav--btn-prev" ng-click=prevBtn()></div><div class="bb-slider-lite__nav--btn bb-slider-lite__nav--btn-next" ng-click=nextBtn()></div></div></div>'),e.put("bb/cms/frontend/js/toolbars/mobile-toolbar/mobile-toolbar.html",'<div class=bb-mobile-toolbar><div bb-entitlements if-missing-entitlement="All Access" class=all-access__toolbar><p class=all-access__toolbar--large-mobile>{{numOfPlans}}+ premium fitness plans, only $8.99/month <a href=https://www.bodybuilding.com/fun/all-access.html>learn more</a></p><p class=all-access__toolbar--small-mobile><a href=https://www.bodybuilding.com/fun/all-access.html>{{numOfPlans}}+ premium fitness plans, only $8.99/month</a></p></div></div>')}}),define("bb/cms/frontend/js/services/country-codes",[],function(){"use strict";return[{name:"Afghanistan",code:"AF"},{name:"Åland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"AndorrA",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:'Cote D"Ivoire',code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:'Korea, Democratic People"S Republic of',code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:'Lao People"S Democratic Republic',code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"RWANDA",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia and Montenegro",code:"CS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan, Province of China",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}]}),define("bb/cms/frontend/js/article-calculator/article-calculator",["angular"],function(d){"use strict";return["$log","$rootScope","currentUserService","statsService",function(s,c,l,u){return{restrict:"AE",templateUrl:function(e,t){var n="bb/cms/frontend/js/article-calculator/templates/";return{protein:n+"protein.tmpl.html",carb:n+"carb.tmpl.html",fat:n+"fat.tmpl.html",bmi:n+"bmi.tmpl.html"}[t.type.toLowerCase()]||n+"default.tmpl.html"},link:function(e,t,n){var i={debug:!0,allowReset:e.$eval(n.allowReset)||!0,autofill:e.$eval(n.autofill)||!0,inchesToFeetRatio:.083333},o={activityLevel:"light",unitOfMeasure:"imperial",gender:"male",mainGoal:"fat",weight:{kg:0,lbs:0},height:{m:0,cm:0,ft:0,in:0}},r=d.copy(o),a=c.loggedIn;e.unitOfMeasureChange=function(e){s.log("Current Unit of Measure",e)},e.resetForm=function(){s.log("resetting form"),e.userData=o=d.copy(r),s.log(r)},e.calculateProtein=function(e){e.$valid&&s.log("YAY")},a&&i.autofill&&l.get().then(function(e){if(e){s.log("USER INFO",e);try{return o.unitOfMeasure=e.user.unitOfMeasure||"imperial",o.gender=e.user.gender||"Male",o.bodyfat=e.bodyFatPercentage||0,o.weight.lbs=e.weight||190,o.mainGoal=e.goals.mainGoal.code||"fat",o.age=(t=e.user.birthday,n=new Date,i=new Date(t),r=n.getFullYear()-i.getFullYear(),((t=n.getMonth()-i.getMonth())<0||0==t&&n.getDate()<i.getDate())&&r--,r||""),u.get({userid:e.user.userId})}catch(e){s.warn("Error retrieving user data %s",e)}}var t,n,i,r}).then(function(e){var t;e&&e.data&&(s.log("User Stats",e),"imperial"===e.data.format&&(t=e.data.height.stats.value,o.height.ft=Math.floor(t*i.inchesToFeetRatio)||5,o.height.in=Math.floor(t%12)||10),"metric"===e.data.format&&(o.height.m=e.data.height.stats.value.toFixed(0)||70,o.height.cm=e.data.height.stats.value||70)),r=d.copy(o)}),e.settings=i,e.userData=o}}}]}),define("bb/cms/frontend/js/services/cms-service-module",["angular"],function(e){"use strict";return e.module("bb.cms.services",[])}),define("bb/cms/frontend/js/services/cms-product-service",["./cms-service-module"],function(e){"use strict";return e.service("cmsProductService",["$http","$q",function(n,i){var r,e={},o="https://search.bodybuilding.com/search";return n.defaults.headers.common["BB-App"]="cms-app, 1.0.0",e.removeProtocol=function(e){return e&&e.replace(/^https?:/i,"")},e.getProductsByCategoryId=function(e,t){return e=e||"PROTEIN",r=i.defer(),n({url:o+"/type/commerce/category/"+e,method:"GET",params:t}).success(r.resolve).error(function(e){r.reject("Error returning products from search endpoint:"+e)}),r.promise},e.getProductBySkuId=function(e,t){return r=i.defer(),n({url:o+"/type/commerce/skugroup/"+e,method:"GET",params:t}).success(r.resolve).error(function(e){r.reject("Error returning products from search endpoint:"+e)}),r.promise},e.searchQuery=function(e){return r=i.defer(),n({url:o+"/type/commerce/",method:"GET",params:{query:e}}).success(r.resolve).error(function(e){r.reject("Error returning products from search endpoint:"+e)}),r.promise},e}])}),define("lodash/internal/baseMap",["./baseEach","./isArrayLike"],function(t,n){return function(e,i){var r=-1,o=n(e)?Array(e.length):[];return t(e,function(e,t,n){o[++r]=i(e,t,n)}),o}}),define("lodash/internal/baseSortBy",[],function(){return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}}),define("lodash/internal/baseCompareAscending",[],function(){return function(e,t){if(e!==t){var n=null===e,i=void 0===e,r=e==e,o=null===t,a=void 0===t,s=t==t;if(t<e&&!o||!r||n&&!a&&s||i&&s)return 1;if(e<t&&!n||!s||o&&!i&&r||a&&r)return-1}return 0}}),define("lodash/internal/compareAscending",["./baseCompareAscending"],function(n){return function(e,t){return n(e.criteria,t.criteria)||e.index-t.index}}),define("lodash/internal/isIterateeCall",["./isArrayLike","./isIndex","../lang/isObject"],function(r,o,a){return function(e,t,n){if(!a(n))return!1;var i=typeof t;if("number"==i?r(n)&&o(t,n.length):"string"==i&&t in n){t=n[t];return e==e?e===t:t!=t}return!1}}),define("lodash/collection/sortBy",["../internal/baseCallback","../internal/baseMap","../internal/baseSortBy","../internal/compareAscending","../internal/isIterateeCall"],function(n,o,a,s,c){return function(e,i,t){if(null==e)return[];t&&c(e,i,t)&&(i=void 0);var r=-1;return i=n(i,t,3),e=o(e,function(e,t,n){return{criteria:i(e,t,n),index:++r,value:e}}),a(e,s)}}),define("lodash/function/throttle",["./debounce","../lang/isObject"],function(o,a){return function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return!1===n?i=!1:a(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),o(e,t,{leading:i,maxWait:+t,trailing:r})}}),define("lodash/internal/indexOfNaN",[],function(){return function(e,t,n){for(var i=e.length,r=t+(n?0:-1);n?r--:++r<i;){var o=e[r];if(o!=o)return r}return-1}}),define("lodash/internal/baseIndexOf",["./indexOfNaN"],function(o){return function(e,t,n){if(t!=t)return o(e,n);for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}}),define("lodash/internal/cacheIndexOf",["../lang/isObject"],function(n){return function(e,t){return e=e.data,("string"==typeof t||n(t)?e.set.has(t):e.hash[t])?0:-1}}),define("lodash/internal/cachePush",["../lang/isObject"],function(n){return function(e){var t=this.data;"string"==typeof e||n(e)?t.set.add(e):t.hash[e]=!0}}),define("lodash/internal/root",[],function(){var e={function:!0,object:!0},t=e[typeof exports]&&exports&&!exports.nodeType&&exports,n=e[typeof module]&&module&&!module.nodeType&&module,t=t&&n&&"object"==typeof global&&global&&global.Object&&global,n=e[typeof self]&&self&&self.Object&&self,e=e[typeof window]&&window&&window.Object&&window;return t||e!==(this&&this.window)&&e||n||this}),define("lodash/internal/SetCache",["./cachePush","./getNative","./root"],function(e,t,n){var i=t(n,"Set"),r=t(Object,"create");function o(e){var t=e?e.length:0;for(this.data={hash:r(null),set:new i};t--;)this.push(e[t])}return o.prototype.push=e,o}),define("lodash/internal/createCache",["./SetCache","./getNative","./root"],function(t,e,n){var i=e(n,"Set"),r=e(Object,"create");return function(e){return r&&i?new t(e):null}}),define("lodash/internal/baseUniq",["./baseIndexOf","./cacheIndexOf","./createCache"],function(p,m,f){return function(e,t){var n=-1,i=p,r=e.length,o=!0,a=o&&200<=r,s=a?f():null,c=[];s?(i=m,o=!1):(a=!1,s=t?[]:c);e:for(;++n<r;){var l=e[n],u=t?t(l,n,e):l;if(o&&l==l){for(var d=s.length;d--;)if(s[d]===u)continue e;t&&s.push(u),c.push(l)}else i(s,u,0)<0&&((t||a)&&s.push(u),c.push(l))}return c}}),define("lodash/internal/sortedUniq",[],function(){return function(e,t){for(var n,i=-1,r=e.length,o=-1,a=[];++i<r;){var s=e[i],c=t?t(s,i,e):s;i&&n===c||(n=c,a[++o]=s)}return a}}),define("lodash/array/uniq",["../internal/baseCallback","../internal/baseUniq","../internal/isIterateeCall","../internal/sortedUniq"],function(r,o,a,s){return function(e,t,n,i){return(e?e.length:0)?(null!=t&&"boolean"!=typeof t&&(n=a(e,t,i=n)?void 0:t,t=!1),n=null==n?n:r(n,i,3),(t?s:o)(e,n)):[]}}),define("bb/cms/frontend/js/product-grid/product-grid",["angular","bb/cms/frontend/js/services/cms-product-service","lodash/collection/sortBy","lodash/function/throttle","lodash/array/uniq","moment"],function(v,e,y,w,_,S){"use strict";return["$log","$window","cmsProductService","CountryAwareService",function(f,b,h,g){return{restrict:"EA",scope:{},templateUrl:"bb/cms/frontend/js/product-grid/product-grid.html",link:function(i,e,t){var n,r,o,a,s,c=Math.round(1.5*b.innerHeight),l={},u=S.utc().format("MM/DD/YYYY"),d=[],p={size:10,Ns:"P_sku.sold30size.sold30Rank"};function m(){t.categoryId&&!d.length&&h.getProductsByCategoryId(t.categoryId,p).then(function(e){(e=e._embedded&&e._embedded.item?_(e._embedded.item,function(e){return e._embedded["bb:product"].name}):e)&&4<=e.length?((e=e.slice(0,4)).forEach(function(e){r=!1,e._links["bb:b-elite-badge"]&&(r=!0),(e={name:e.name||"",imgUrl:e._links["bb:image"][1].href||"",price:e.salePriceDisplay||"",strikePrice:e.strikePrice||"",rating:e._embedded["bb:product"].rating?i.formatRating(e._embedded["bb:product"].rating.value):"N/A",url:e._embedded["bb:product"]._links.canonical.href||"",badge:r}).name&&e.imgUrl&&e.url&&d.push(e)}),i.productData=d):f.warn("product grid widget returning less than 4 results for categoryId:"+t.categoryId)})}i.showBadge=g.hasCurrentCountry(["en_US"]),o=w(function(){n=e[0].offsetTop,s=b.pageYOffset+c,n<=s&&(t.skuIds?(a=t.skuIds.split(","))&&4===a.length&&a.forEach(function(t,n){t&&(r=!1,h.getProductBySkuId(t).then(function(e){e&&(e._links["bb:b-elite-badge"]&&(r=!0),(l={id:t,name:e.skugroupDisplayName||"",imgUrl:e._links["bb:imageUrl"].href||"",price:e.price||"",strikePrice:e.strikePrice||"",rating:i.formatRating(e.avgRating),url:e._links["bb:url"].href||"",badge:r}).name&&l.imgUrl&&l.url&&d.push(l)),d&&4===d.length?(d=y(d,function(e){return a.indexOf(e.id)}),i.productData=d):3===n&&d.length<4&&m()}))}):t.categoryId&&m(),v.element(b).off("scroll.productGrid",o))},400),i.formatRating=function(e){return 10===e?e:2<=e?(Math.round(10*e)/10).toFixed(1):"N/A"},(t.categoryId||t.skuIds)&&(!t.expDate||u<S.utc(t.expDate).format("MM/DD/YYYY"))&&v.element(b).on("scroll.productGrid",o)}}}]}),define("bb/cms/frontend/js/recipes/module",["angular"],function(e){"use strict";return e.module("bb.cms.recipes",[])}),define("bb/cms/frontend/js/services/recipe-service",["./cms-service-module"],function(e){"use strict";e.service("recipeService",["$q","$http",function(c,l){var u,d={newest:"publishDate",popularity:"popularity"},i=null;function p(e){var t,n=e.data._embedded["bb-cms:search-results"];return n.forEach(function(e){e.publishDate&&(t=new Date(e.publishDate),e.publishDate=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))}),i=e.data._links.next&&e.data._links.next[0].href,{recipes:n,totalRecipes:e.data.total}}return{setApiBase:function(e){e?u=e.replace("-internal",""):console.warn("Passing "+e+" to recipeService.setApiBase")},getRecipesByPublishDate:function(e,t,n,i){var r,o,a=c.defer(),s=[];if(Object.keys(d).includes(n)||(console.log("sortBy `%s` not valid, defaulting to `%s`.",n,"newest"),n="newest"),"string"==typeof e&&(e=[e]),isNaN(i)&&(i=20),-1===(o=u||(-1<window.location.hostname.indexOf("cms-stage")?"https://cms-api.stage-cloud.bodybuilding.com/":"https://cms-api.bodybuilding.com/")).search(/\/$/)&&(o+="/"),o+="BbcomRecipe?sort="+d[n]+"&order=desc",o+="&limit="+i,void 0!==t){for(r in t)s.push(r+"="+t[r][0]+":to:"+(-1===t[r][1]?"*":t[r][1]));o+="&"+s.join("&")}return 0<e.length&&(o+="&_embedded.category.key="+e.join(":and:")),l({method:"GET",url:o}).then(function(e){e=p(e);a.resolve(e)},function(e){console.warn(e),a.reject(e)}),a.promise},initialFetch:function(e){var t=c.defer();return e=e.replace("-internal",""),l({method:"GET",url:e}).then(function(e){t.resolve(p(e))},function(e){console.warn(e),t.reject(e)}),t.promise},next:function(){var t=c.defer();return i&&l({method:"GET",url:i}).then(function(e){e=p(e);t.resolve(e)},function(e){console.warn(e),t.reject(e)}),t.promise},hasNext:function(){return!!i}}}])}),define("bb/ui/dropdown/dropdown",["angular","bb/util/keys"],function(_,S){"use strict";function k(e){return e.slice(0).sort(function(e,t){return e.index-t.index})}return["$window","$document","$timeout",function(v,y,w){var e={restrict:"E",require:["ngModel","bbDropdown"],templateUrl:"bb/ui/dropdown/dropdown.ng.html",controllerAs:"vm",transclude:!0,scope:{placeholder:"@",showMobileHeader:"=?",showIndicatorRadio:"=?"}};return e.link=function(o,t,e,n){var a,i,r,s,c,l,u=_.element(v),d=n[0],p=n[1];function m(){l="",s=null,c=!1}function f(){p.modelValue=d.$modelValue,p.onModelChange()}function b(e){var t,n;e=e||0,(n=-1===(n=-1===(n=(t=k(p.options)).indexOf(p.focusedOption))?t.indexOf(p.selectedOption):n)?0:n+e)in t&&w(t[n].focus,16,!1)}function h(e){o.showOptions&&!t[0].contains(e.target)&&(o.showOptions=!1,o.$digest())}function g(){o.showOptions&&(o.showOptions=!1,o.$digest())}o.disabled=!1,"ngDisabled"in e&&e.$observe("disabled",function(e){o.disabled=!!e}),p.customLabelElement&&t.find(".bb-dropdown__label").addClass("bb-dropdown__label--custom").empty().append(p.customLabelElement),i=700,r=w,l="",a={isSearching:function(){return c},append:function(e){return r.cancel(s),s=r(m,i,!(c=!0)),l+=String.fromCharCode(e).toLowerCase()}},p.$setViewValue=d.$setViewValue.bind(d),d.$render=f,d.$viewChangeListeners.push(f),t.on("click",function(e){e.isDefaultPrevented()||o.disabled||(o.showOptions=!o.showOptions,o.$apply(),o.showOptions&&b())}),t.on("keydown",function(e){var t,n=e.keyCode||e.which;(t=n)===S.arrow.up||t===S.arrow.down||t===S.tab||t===S.enter||t===S.space||t===S.escape?n===S.space&&a.isSearching()||n===S.tab&&!o.showOptions||function(e,t){var n=p.focusedOption,i=o.showOptions;function r(){o.showOptions=!0,o.$digest(),b()}e.preventDefault(),t===S.tab&&(t=e.shiftKey?S.arrow.up:S.arrow.down);t===S.arrow.up||t===S.arrow.down?i?b(t===S.arrow.up?-1:1):r():t===S.escape?i&&(o.showOptions=!1,o.$digest()):t!==S.enter&&t!==S.space||(i?n&&!n.disabled&&o.$apply(function(){o.showOptions=!1,p.$setViewValue(n.value)}):r())}(e,n):/\w/.test(String.fromCharCode(n))&&function(e){var t,n,i=a.append(e),r=k(p.options);for(n=0,t=r.length;n<t;n++)if(0===function(e){return String(e).toLowerCase().replace(/[^\w]/g,"")}(r[n].label).indexOf(i)){r[n].focus();break}}(n)}),y.on("click",h),u.on("blur",g),o.$on("$destroy",function(){y.off("click",h),u.off("blur",g)})},e.controller=["$scope",function(e){var n=this;function t(){var t=n.emptyOption;n.options.forEach(function(e){e.selected=e.value===n.modelValue,e.selected&&(t=e)}),i(t)}function i(e){n.selectedOption=e,n.selectedOption.selected=!0}n.options=[],n.emptyOption={label:"",value:null,focus:_.noop},n.selectedOption=null,n.focusedOption=null,n.modelValue=null,n.addOption=function(e){n.options.push(e)},n.setEmptyOption=function(e){e.value=null,n.emptyOption=e,n.options.unshift(e)},n.isEmptyOptionSelected=function(){return n.selectedOption===n.emptyOption},n.setFocusedOption=function(e){n.focusedOption=e},n.removeOption=function(e){var t=n.options.indexOf(e);~t&&(n.options.splice(t,1),e.selected&&i(n.emptyOption))},n.onModelChange=t,e.$watchCollection(function(){return n.options},t)}],e}]}),define("bb/ui/dropdown/dropdown-label",[],function(){"use strict";return[function(){return{restrict:"E",require:"^bbDropdown",transclude:"element",priority:100,link:function(e,t,n,i,r){r(function(e,t){i.customLabelElement=e,t.$watch(function(){return i.isEmptyOptionSelected()},function(e){t.hasSelection=!e})})}}}]}),define("bb/ui/dropdown/dropdown-option",["angular"],function(e){"use strict";var o=e.isUndefined,a=0;return[function(){var e={restrict:"E",require:"^bbDropdown",templateUrl:"bb/ui/dropdown/dropdown-option.ng.html",transclude:!0,scope:{value:"=?",label:"@?"}};return e.link=function(t,e,n,i){var r=e.find(".bb-dropdown__option");t.index=0,t.disabled=!1,t.ariaId="bb-drop-option-ariaId-"+a++,o(n.value)?i.setEmptyOption(t):i.addOption(t),o(n.label)&&t.$watch(function(){return e.text().trim()},function(e){t.label=e}),"ngRepeat"in n&&t.$watch(function(){return t.$parent.$index},function(e){t.index=parseInt(e,10)||0}),"ngDisabled"in n&&n.$observe("disabled",function(e){t.disabled=!!e}),t.focus=function(){r[0].focus(),r.triggerHandler("focus")},e.on("click",function(e){t.disabled?e.preventDefault():i.$setViewValue(t.value)}),r.on("blur",function(){i.setFocusedOption(null)}),r.on("focus",function(){i.setFocusedOption(t)}),t.$on("$destroy",function(){i.removeOption(t)})},e}]}),define("bb/ui/dropdown/dropdown-options",["angular"],function(h){"use strict";return["$rootScope","$document","$window","deviceService",function(p,m,f,b){var e={restrict:"C",scope:{showOptions:"="}};return e.link=function(r,e){var t,n,i,o=m[0].body,a=e.parent(),s=h.element(m[0].documentElement),c="bb-dropdown-lock-scroll",l=b.getDevice();function u(){n=!0,i=Math.max(f.scrollY,o.scrollTop),a[0].scrollTop=0,o.style.top=-i+"px",s.addClass(c)}function d(){n=!1,s.removeClass(c),o.style.top="",o.scrollTop=i}t=p.$on("device.breakpoint.changed",function(e,t,n){var i="mobile"!==t&&"mobile"===n;r.showOptions&&("mobile"===t&&"mobile"!==n?u():i&&d())}),e.on("$animate:before",function(){var e=r.showOptions,t="mobile"===l.breakpoint;e&&t&&u()}),e.on("$animate:close",function(){!r.showOptions&&n&&d()}),r.$on("$destroy",function(){t(),n&&d()})},e}]}),define("bb/ui/dropdown/views",[],{init:function(e){"use strict";e.put("bb/ui/dropdown/dropdown-option.ng.html","<div role=option id={{ariaId}} class=bb-dropdown__option tabindex=\"{{ disabled ? -1 : 0 }}\" ng-class=\"{'bb-dropdown__option--selected': selected,'bb-dropdown__option--disabled': disabled}\" ng-disabled=disabled><div class=bb-dropdown__option__content ng-transclude></div><div class=bb-dropdown__option__indicator></div></div>"),e.put("bb/ui/dropdown/dropdown.ng.html","<div role=listbox class=bb-dropdown-wrapper aria-activedescendant={{vm.selectedOption.ariaId}}><div class=bb-dropdown tabindex=\"{{ disabled ? -1 : 0 }}\" ng-disabled=disabled ng-class=\"{'bb-dropdown--active': showOptions,'bb-dropdown--disabled': disabled}\"><div class=bb-dropdown__arrow></div><div class=bb-dropdown__label ng-class=\"{ 'bb-dropdown__label--unselected': vm.isEmptyOptionSelected() }\" title={{vm.selectedOption.label}}>{{ vm.selectedOption.label || placeholder || '&nbsp;' }}</div></div><div class=bb-dropdown__options-mask ng-class=\"{ 'bb-dropdown__options-mask--show': showOptions }\"><div class=bb-dropdown__options show-options=showOptions ng-class=\"{'bb-dropdown__options--show-indicator': showIndicatorRadio,'bb-dropdown__options--show': showOptions}\"><div ng-if=showMobileHeader class=bb-dropdown__options-header><h2 class=bb-dropdown__options-title ng-click=$event.preventDefault()>{{placeholder || 'Options'}}</h2><button class=bb-close></button></div><div ng-transclude></div></div></div></div>")}}),define("bb/ui/dropdown/package",["angular","./dropdown","./dropdown-label","./dropdown-option","./dropdown-options","./views","angular-animate","bb/ui/util/package"],function(e,t,n,i,r,o){"use strict";e=e.module("bb.ui.dropdown",["ngAnimate","bb.ui.util"]);return e.directive({bbDropdown:t,bbDropdownLabel:n,bbDropdownOption:i,bbDropdownOptions:r}),e.run(["$templateCache",o.init]),e}),define("bb/cms/frontend/js/recipes/recipe-category",["./module","../services/recipe-service","bb/ui/dropdown/package"],function(e){"use strict";return e.directive("bbRecipeCategory",["$rootScope","recipeService",function(e,a){return{restrict:"E",scope:{categoryTitle:"@",categoryKey:"@",pageSize:"@",initialFetch:"@",fetchBase:"@"},templateUrl:"bb/cms/frontend/js/recipes/recipe-category.ng.html",transclude:!0,link:function(o){o.pageSize=parseInt(o.pageSize,10),a.setApiBase(o.fetchBase),e.$on("recipe.category.filter.change",function(e,t,n,i){var r=t.map(function(e){return e.key});(t&&t.length||n)&&(o.serviceInProgress=!0,a.getRecipesByPublishDate(r,n,i,o.pageSize).then(function(e){o.hasFilters=!0,o.recipes=e.recipes,o.totalRecipes=e.totalRecipes,o.serviceInProgress=!1,o.error=null},function(e){o.recipes=[],o.serviceInProgress=!1,o.error=e}))}),e.$on("recipe.category.filter.clear",function(e){o.hasFilters=!1}),o.getImageSize=function(e,t){return e=(e=e||"https://www.bodybuilding.com/images/2017/august/recipe-database-generic-image-header.jpg").replace(/\.([^.]+)$/,"-"+t+".$1")},o.initialFetch=o.initialFetch.replace("-internal",""),a.initialFetch(o.initialFetch).then(function(e){o.hasFilters=!0,o.recipes=e.recipes,o.totalRecipes=e.totalRecipes,o.serviceInProgress=!1,o.error=null},function(e){console.warn("Initial fetch error:",e)}),o.hasNextPage=function(){return a.hasNext()},o.showMoreFiltered=function(){a.hasNext()&&(o.serviceInProgress=!0,a.next().then(function(e){o.recipes=o.recipes.concat(e.recipes),o.totalRecipes=e.totalRecipes,o.serviceInProgress=!1}))}}}}])}),define("bb/cms/frontend/js/recipes/filter/filter-results",["../module"],function(e){"use strict";return e.directive("bbRecipeFilterResults",["bbRecipeCategoryMenuManager",function(i){return{restrict:"E",scope:{filterResultsShowing:"=switch",sortByFilter:"=sortByFilter"},templateUrl:"bb/cms/frontend/js/recipes/filter/filter-results.ng.html",replace:!0,link:function(t,e,n){"true"===n.sortMode?(t.label="Sort by: ",t.sortByLabel="Newest"):t.label="Filter results",t.showMenu=function(){var e;t.filterResultsShowing||(t.filterResultsShowing=!0,e=document.querySelector(".bb-filter-results-selector"),i.setCurrentMenu(e,function(){t.filterResultsShowing=!1}))}}}}])}),define("bb/cms/frontend/js/recipes/filter/macro-range",["../module"],function(e){"use strict";return e.directive("bbRecipeMacroRange",["bbRecipeCategoryMenuManager",function(i){return{restrict:"E",scope:{macroSelectorShowing:"=switch"},templateUrl:"bb/cms/frontend/js/recipes/filter/macro-range.ng.html",replace:!0,link:function(t,e,n){t.showMenu=function(){var e;t.macroSelectorShowing||(t.macroSelectorShowing=!0,e=document.querySelector(".bb-recipe-macro-range__selector"),i.setCurrentMenu(e,function(){t.macroSelectorShowing=!1}))}}}}])}),define("bb/cms/frontend/js/recipes/filter/filter-results-selector",["angular","../module"],function(i,e){"use strict";return e.directive("bbFilterResultsSelector",["$rootScope",function(n){return{restrict:"E",scope:{filters:"=",filterResultsShowing:"=switch"},templateUrl:"bb/cms/frontend/js/recipes/filter/filter-results-selector.ng.html",replace:!0,link:function(s,e,t){s.$watch("filterResultsShowing",function(e,t){e?(s.temporaryFilters=i.copy(s.filters.filters),s.uncommittedSelections=[],s.filters.selectedFilters.forEach(function(e){s.uncommittedSelections.push(function(e){var t,n,i,r,o=s.filters.filters,a=o.length;e:for(t=0;t<a;t++)for(r=o[t],i=r.items.length,n=0;n<i;n++)if(r.items[n]===e)break e;return[t,n]}(e))}),"mobile"===n.device.breakpoint&&i.element("body").addClass("bb-lock-scroll")):i.element("body").removeClass("bb-lock-scroll")}),n.$on("device.breakpoint.changed",function(e,t,n){"mobile"===t?s.filterResultsShowing&&i.element("body").addClass("bb-lock-scroll"):"tablet"===t&&"mobile"===n&&i.element("body").removeClass("bb-lock-scroll")}),s.selectFilter=function(n,i){console.log(n,i);var r,e=s.temporaryFilters[n].items[i];e.selected=!e.selected,e.selected?s.uncommittedSelections.push([n,i]):(s.uncommittedSelections.forEach(function(e,t){e[0]===n&&e[1]===i&&(r=t)}),s.uncommittedSelections.splice(r,1))},s.selectSort=function(e,t){e.selectedItem==t?e.selectedItem=null:e.selectedItem=t,"mobile"!==n.device.breakpoint&&s.apply()},s.cancel=function(){s.filterResultsShowing=!1},s.apply=function(){s.filterResultsShowing=!1,s.filters.selectedFilters.forEach(function(e){e.selected=!1}),s.filters.selectedFilters=[],s.uncommittedSelections.forEach(function(e){e=s.filters.filters[e[0]].items[e[1]];e.selected=!0,console.log("Committing this filter:",e),s.filters.selectedFilters.push(e)})}}}}])}),define("bb/cms/frontend/js/recipes/filter/macro-range-selector",["angular","../module"],function(r,e){"use strict";return e.directive("bbMacroRangeSelector",[function(){return{restrict:"E",scope:{macros:"=",macroSelectorShowing:"=switch"},templateUrl:"bb/cms/frontend/js/recipes/filter/macro-range-selector.ng.html",replace:!0,link:function(n,e,t){var i=t.desktopMode;n.$watch("macroSelectorShowing",function(e,t){e?(n.selections=r.copy(n.macros),i&&r.element("body").addClass("bb-lock-scroll")):r.element("body").removeClass("bb-lock-scroll")}),n.selectMacro=function(e,t){e.selectedRange==t?e.selectedRange=null:e.selectedRange=t},n.cancel=function(){n.macroSelectorShowing=!1},n.apply=function(){n.macroSelectorShowing=!1,n.macros=n.selections}},controller:["$scope",function(e){}]}}])}),define("bb/cms/frontend/js/recipes/filter/recipe-category-filter",["../module","./filter-results-selector","./macro-range-selector"],function(e){"use strict";return e.directive("bbRecipeCategoryFilter",["$rootScope","$timeout","bbRecipeCategoryMenuManager",function(s,e,c){return{restrict:"E",scope:{},templateUrl:"bb/cms/frontend/js/recipes/filter/recipe-category-filter.ng.html",replace:!0,link:function(i,e,t){var n,r=!1,o=!1;function a(){var t={};return i.macros.forEach(function(e){e.selectedRange&&(t[e.searchKey]=[e.selectedRange.min,e.selectedRange.max])}),t}i.filterResultsShowing=!1,i.macroSelectorShowing=!1,i.openFilterMenu=null,i.filters={sorts:[{name:"Sort by",items:[{label:"Most Popular",key:"popularity"},{label:"Newest",key:"newest",selected:!0}],hideInDesktop:!0,sortMode:!0,selectedItem:"Newest"}],filters:[{name:"Course",items:[{label:"Appetizers",key:"appetizers"},{label:"Breakfast",key:"breakfast-1"},{label:"Lunch",key:"lunch"},{label:"Dinner",key:"dinner"},{label:"Side Dishes",key:"side-dishes"},{label:"Salads",key:"salads"},{label:"Dessert",key:"dessert"}]},{name:"Ingredient",items:[{label:"Chicken & Poultry",key:"chicken-and-poultry"},{label:"Beef",key:"beef"},{label:"Seafood",key:"seafood"},{label:"Pork",key:"pork"},{label:"Pasta",key:"pasta"},{label:"Vegetables",key:"vegetables"}]},{name:"Specialty Diets",items:[{label:"Vegetarian",key:"vegetarian-1"},{label:"Vegan",key:"vegan-1"},{label:"Low-Carb",key:"low-carb"},{label:"High-Protein",key:"high-protein"},{label:"High-Fiber",key:"high-fiber"},{label:"Paleo",key:"paleo"},{label:"Gluten-Free",key:"gluten-free"},{label:"Dairy-Free",key:"dairy-free"},{label:"Egg-Free",key:"egg-free"},{label:"Heart-Healthy",key:"heart-healthy"},{label:"Low-Cholesterol",key:"low-cholesterol"},{label:"Low-Fat",key:"low-fat"},{label:"Low-Sodium",key:"low-sodium"},{label:"Low-Sugar",key:"low-sugar"}]},{name:"Cooking Type",items:[{label:"Crockpot",key:"crockpot"},{label:"Baking",key:"baking"},{label:"BBQ & Grilling",key:"bbq-and-grilling"}]},{name:"Dish Type",items:[{label:"Smoothies & Shakes",key:"smoothies-and-shakes"},{label:"Sandwiches & Wraps",key:"sandwiches-and-wraps"},{label:"Soups & Stews",key:"soups-and-stews"},{label:"Protein Bars & Cookies",key:"protein-bars-and-cookies"},{label:"Quick & Easy",key:"quick-and-easy"},{label:"Breads & Muffins",key:"breads-and-muffins"},{label:"Condiments & Dips",key:"condiments-and-dips"}]}],selectedFilters:[]},i.macros=[{name:"Calories",searchKey:"totalNutrientsPerServing.calories",ranges:[{min:0,max:150,label:"cals"},{min:150,max:350,label:"cals"},{min:350,max:-1,label:"cals"}]},{name:"Protein",searchKey:"totalNutrientsPerServing.protein",ranges:[{min:0,max:15,label:"g"},{min:15,max:35,label:"g"},{min:35,max:-1,label:"g"}]},{name:"Carbs",searchKey:"totalNutrientsPerServing.carbohydrates",ranges:[{min:0,max:15,label:"g"},{min:15,max:35,label:"g"},{min:35,max:-1,label:"g"}]},{name:"Fats",searchKey:"totalNutrientsPerServing.fat",ranges:[{min:0,max:15,label:"g"},{min:15,max:35,label:"g"},{min:35,max:-1,label:"g"}]},{name:"Time",searchKey:"totalTime",ranges:[{min:1,max:15,label:"mins"},{min:15,max:30,label:"mins"},{min:30,max:-1,label:"mins"}]}],i.filters.sorts[0].selectedItem=i.filters.sorts[0].items[1],i.$watch("filters",function(){var e;r?(e=i.filters.sorts[0].selectedItem.key,s.$emit("recipe.category.filter.change",i.filters.selectedFilters,a(),e)):r=!0},!0),i.$watch("macros",function(){var e;o?(e=i.filters.sorts[0].selectedItem.key,s.$emit("recipe.category.filter.change",i.filters.selectedFilters,a(),e)):o=!0},!0),i.toggleFilterMenu=function(e,t){i.openFilterMenu!==t&&(n=e.target.parentElement.querySelector(".recipe-filter-desktop-menu"),c.setCurrentMenu(n,function(){i.openFilterMenu=null}),i.openFilterMenu=t)},i.selectItem=function(e,t){t.selected=!t.selected;var n=i.filters.selectedFilters.indexOf(t);-1<n?i.filters.selectedFilters.splice(n,1):i.filters.selectedFilters.push(t)},i.hasFilters=function(){return 0<i.filters.selectedFilters.length},i.hasMacros=function(){for(var e=i.macros.length,t=0;t<e;t++)if(i.macros[t].selectedRange)return!0;return!1},i.removeFilter=function(e,t){t.selected=!1,i.filters.selectedFilters.splice(e,1),0===i.filters.selectedFilters.length&&s.$emit("recipe.category.filter.clear")},i.clearAllFilters=function(){i.filters.selectedFilters=[],i.filters.filters.forEach(function(e){e.items.forEach(function(e){e.selected=!1})}),i.macros.forEach(function(e){e.selectedRange=null}),s.$emit("recipe.category.filter.clear")}}}}])}),define("bb/cms/frontend/js/recipes/filter/menu-manager-service",["../module"],function(e){"use strict";e.factory("bbRecipeCategoryMenuManager",["$timeout",function(n){var i=null,r=null;function o(e){e.target.classList.contains("bb-input--has-forgot-password")||i&&!i.contains(e.target)&&a()}function a(){i=null,document.body.removeEventListener("click",o),r&&r()}return{setCurrentMenu:function(e,t){i&&a(),i=e,r=t,n(function(){document.body.addEventListener("click",o)},100)}}}])}),define("bb/cms/frontend/js/recipes/package",["./module","./recipe-category","./filter/filter-results","./filter/macro-range","./filter/recipe-category-filter","./filter/menu-manager-service"],function(e){"use strict";return{module:e}}),define("bb/cms/frontend/js/recommended-articles/recommended-articles",["angular","bb/util/browser/get-meta","lodash/function/throttle"],function(m,e,f){"use strict";var b;return e=e("bb:content-tier-disabled"),b=!(!e||"disabled"!==e),["$http","$q","$window",function(u,d,p){return{restrict:"E",scope:{},templateUrl:"bb/cms/frontend/js/recommended-articles/recommended-articles.html",link:function(t,e,n){var i,r,o,a={columns:parseInt(n.columns)||3,options:n.options||"stacked",totalArticles:parseInt(n.totalArticles)||6,widgetTitle:n.widgetTitle||"",identifier:n.identifier||null,environment:n.environment||"prod"},s=d.defer(),c="stage"===a.environment?"https://gain-api.stage-cloud.bodybuilding.com/recommendations/articles/":"https://gain-api.bodybuilding.com/recommendations/articles/",l=Math.round(1.5*p.innerHeight);t.articleList=[],t.columnsClass="col-"+a.columns,t.config=a,o=f(function(){i=e[0].offsetTop,r=p.pageYOffset+l,i<=r&&(function(e){if(e)return u({method:"GET",url:c+e+"/articles",dataType:"json",withCredentials:!0,cache:!0}).success(function(e){s.resolve(e)}).error(function(e){s.reject("An error occurred while retrieving recommended article data")}),s.promise}(a.identifier).then(function(e){t.articleList=e}),m.element(p).off("scroll.recommendedArticles",o))},400),t.optionClasses=function(){return a.options.trim().replace(/,/g," ")},t.imgResizeUrl=function(e){var t=e.split(".").pop();return-1===e.indexOf("www.bodybuilding.com")||"png"!==t&&"jpg"!==t?e:e.replace(/.jpg|.png|-960xh|-830x467/gi,"").replace("http:","https:")+"-200x113."+t},t.isBElite=function(e){e=!b&&"belite"==e.recommendation.contentTier;return e},m.element(p).on("scroll.recommendedArticles",o)}}}]}),define("bb/cms/frontend/js/toolbars/mobile-toolbar/module",["angular"],function(e){"use strict";return e.module("bb.cms.mobile-toolbar",[])}),define("bb/cms/frontend/js/toolbars/mobile-toolbar/mobile-toolbar",["angular","./module","lodash/function/throttle"],function(p,e,m){"use strict";return e.directive("bbMobileToolbar",["$window","$timeout","$rootScope",function(l,u,d){return{restrict:"E",scope:{share:"@",numOfPlans:"@"},replace:!0,templateUrl:"bb/cms/frontend/js/toolbars/mobile-toolbar/mobile-toolbar.html",link:function(t,e){var n,i,r,o=l.matchMedia("(max-width: 767px)"),a=0;function s(){(n=p.element(".at-share-dock.atss"))&&0<n.length&&(n.removeClass("add-this--showing"),n.find(".at-share-btn").on("click",function(e){t.closeShare()}))}function c(){t.shareIsOpen&&t.closeShare(),e.removeClass("show-mobile-toolbar")}t.salesLink="https://www.bodybuilding.com/store/coupons_promos.html",t.storeLink="https://www.bodybuilding.com/store",r=m(function(){(i=l.pageYOffset)<a?e.addClass("show-mobile-toolbar"):c();a=i},100),"false"===t.share?t.shareButton=!1:t.shareButton=!0,document.body.addEventListener("AddThis.isReady",function(e){s(),n&&0===n.length&&u(s,1e3)}),t.toggleShare=function(){t.shareIsOpen?t.closeShare():t.openShare()},t.openShare=function(){n&&0<n.length?(t.shareIsOpen=!0,n.addClass("add-this--showing"),e.find(".bb-mobile-toolbar__toolbar").addClass("bb-mobile-toolbar__toolbar--sharing")):(s(),t.openShare())},t.closeShare=function(){t.shareIsOpen=!1,n.removeClass("add-this--showing"),e.find(".bb-mobile-toolbar__toolbar").removeClass("bb-mobile-toolbar__toolbar--sharing")},o.matches&&(p.element(l).on("scroll.mobileToolbar",r),d.$on("ngDropover.opening",function(e,t){"bbUserMenu"===t.id&&c()}))}}}])}),define("bb/cms/frontend/js/toolbars/mobile-toolbar/package",["./module","./mobile-toolbar"],function(e){"use strict";return{module:e}}),define("bb/cms/frontend/js/country-aware/country-hide.js",["angular"],function(r){"use strict";return["$log","CountryAwareService",function(e,i){return{restrict:"A",priority:100,compile:function(e,t){var n;t.countryHide.length&&(n=t.countryHide.split(","),!i.hasCurrentCountry(n)&&i.currentCountry||(t.$set("countryHide","true"),r.element(e).addClass("country-verified")))}}}]}),define("bb/cms/frontend/js/country-aware/country-show.js",["angular"],function(e){"use strict";return["$log","CountryAwareService",function(e,i){return{restrict:"A",priority:100,compile:function(e,t){var n;t.countryShow.length?(n=t.countryShow.split(","),i.hasCurrentCountry(n)||!i.currentCountry?t.$set("shownInCountry","true"):t.$set("shownInCountry","false")):t.$set("shownInCountry","true"),t.$set("countryShow",void 0)}}}]}),define("bb/cms/frontend/js/services/country-aware.js",["angular","./cms-service-module","bb/util/browser/get-meta"],function(e,t,r){"use strict";return t.service("CountryAwareService",["$log",function(e){var t={},n=null,i=r("bb:locale")||"";return t.hasCurrentCountry=function(e){var t=!1;return Array.isArray(e)&&e.some(function(e){e!==n&&"all"!==e||(t=!0)}),t},function(){try{i&&(n=i,t.currentCountry=n)}catch(e){console.log("Unable to retrieve location cookie",e)}}(),t.currentCountry=n,t}])}),define("bb/cms/frontend/js/country-aware/package",["angular","./country-hide.js","./country-show.js","bb/cms/frontend/js/services/country-aware.js"],function(e,t,n,i){"use strict";e=e.module("bb.cms.country-aware",[]);return e.service("CountryAwareService",i),e.directive("countryShow",n),e}),define("bb/cms/frontend/js/all-access-marketing-widget/all-access-marketing-widget-directive",[],function(){"use strict";return["allAccessMarketingWidgetService",function(e){return{restrict:"AE",templateUrl:"bb/cms/frontend/js/all-access-marketing-widget/all-access-marketing-widget.ng.html",scope:{contentKey:"@"},link:function(n){n.widgetData={},e.get(n.contentKey).then(function(t){Object.keys(t).forEach(function(e){n.widgetData[e]=t[e]}),"light"===n.widgetData.isBackgroundDarkOrLight?n.widgetData.onLight=!0:n.widgetData.onDark=!0}).catch(function(){n.apiError=!0})}}}]}),define("bb/cms/frontend/js/all-access-marketing-widget/all-access-marketing-widget-service",["bb/util/module-info"],function(o){"use strict";function a(e,t){return e._links[t][0]}return["$q","$http",function(i,r){var e={get:function(e){var n=i.defer(),t="stage"===o.settings.env?"https://cms-api.stage-cloud.bodybuilding.com/AllAccessMarketingWidget/name/":"https://cms-api.bodybuilding.com/AllAccessMarketingWidget/name/";return r.get(t+e).then(function(e){var t={},e=e.data;t.description=e.description,t.subscriptionInterval=e.subscriptionInterval,t.isBackgroundDarkOrLight=e.backgroundTheme,t.learnMoreLink=a(e,"bb-allAccessWidget:learnMoreUrl").href,t.backgroundImageUrl=a(e,"bb-allAccessWidget:backgroundImage").href,n.resolve(t)}).catch(n.reject),n.promise}};return e}]}),define("bb/cms/frontend/js/all-access-marketing-widget/package",["angular","./all-access-marketing-widget-directive","./all-access-marketing-widget-service","bb/ui/all-access-subscribe-btn/package"],function(e,t,n,i){return e.module("bb.cms.all-access-marketing-widget",[i.name]).directive("bbAllAccessMarketingWidget",t).service("allAccessMarketingWidgetService",n)}),define("bb/ui/services/user/legacy-helper",["./user-module","./current-user"],function(e){"use strict";var a,t=function(e,t,n){var i,r,o={};return window.BB&&window.BB.Data&&window.BB.Data.User?a=window.BB.Data.User:(n.warn("BB.Data.User is missing! It will be polyfilled to a minimum level of functionality!"),a={set:function(e,t){this[e]=t},get:function(e){return this[e]},isReady:function(){return a._isReady},notifyUserLoaded:function(){try{window.BB.Data.User.refreshStats()}catch(e){n.warn("Could not run BB.Data.User.refreshStats")}this._isReady=!0}},window.BB||(window.BB={}),window.BB.Data||(window.BB.Data={}),window.BB.Data.User=a),r=function(){t.$watch(function(){return e._currentUser},function(e){e&&e.user&&i(e),a.isReady&&!a.isReady()&&a.notifyUserLoaded()}),e.get()},i=function(e){var t;if(n.debug("LegacyUserHelper#updateUser: Updating BB.Data.User",e.user),t=e.user,a.set("slug",t.slug),a.set("userName",t.userName),a.set("id",t.userId),a.set("realName",t.realName),a.set("gender",t.gender),a.set("avatarURL",t.profilePictureUrl),a.set("profilePic",t.profilePic),a.set("units",t.unitOfMeasure),a.set("status",t.groupId),a.set("joinDate",t.joinDate),a.set("motivationLevel",t.motivationLevel),a.set("fitStatus",t.fitStatus),a.set("notifications",e.unreadAlertsCount),a.set("goals",e.goals),a.set("socialMediaCategoryList",e.socialMediaCategoryList),a.set("actionItems",e.actionItems),a.set("requests",e.requestCount),a.set("messages",e.unreadMessageCount),a.set("weight",e.weight),a.set("bodyfat",e.bodyFatPercent),e.socialMediaCategoryList&&a.set("socialMediaFacebookAuthorized",e.socialMediaCategoryList.authorizationMap.FACEBOOK),"function"==typeof a.refreshStats)try{a.refreshStats()}catch(e){n.warn("Could not run BB.Data.User.refreshStats")}},o.listen=r,o};return e.service("legacyUserHelper",["currentUserService","$rootScope","$log",t]),t}),define("bb/ui/services/user/package",["./current-user","./legacy-helper","./login-resource"],function(e,t,n){"use strict";return{currentUser:e,legacyHelper:t,loginResource:n}}),define("bb/util/numbers",["./objects"],function(n){"use strict";var e={},i=n.isNumber;function r(e,t,n){return void 0===n||0==+n?Math[e](t):(t=+t,n=+n,isNaN(t)||"number"!=typeof n||n%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+n:n))))}return e.isNumber=i,e.requireNumber=function(e){var t;if(i(e))t=e;else if(n.isDate(e))t=e.getTime();else if(n.isString(e))try{t=parseFloat(e)}catch(e){t=null}else t=null;return t},e.intTruncate=function(e){var t;return t=i(e)||n.isString(e)?parseInt(e,10):t},e.decimalAdjust=r,e.floor=function(e,t){return r("floor",e,t)},e.ceil=function(e,t){return r("ceil",e,t)},e.round=function(e,t){return r("round",e,t)},e}),define("bb/util/units",["./numbers"],function(t){"use strict";var n={CM_PER_INCH:.393701,KG_PER_POUND:.45359237,LBS_PER_KG:2.20462262,IMPERIAL:"imperial",METRIC:"metric",imperial:{},metric:{}};return n.metric.cmToInch=function(e){return t.round(e*n.CM_PER_INCH,-5)},n.imperial.inchToCm=function(e){return t.round(e/n.CM_PER_INCH,-5)},n.metric.kgToPound=function(e){return t.round(e*n.LBS_PER_KG,-5)},n.imperial.poundToKg=function(e){return t.round(e/n.LBS_PER_KG,-5)},n}),define("bb/ui/services/stats/stats-module",["angular","bb/util/units","bb/ui/services/user/current-user","bb/ui/services/zeus-interceptor/package"],function(e,t){"use strict";e=e.module("bb.ui.services.stats",["bb.ui.services.user","bb.ui.services.zeus-interceptor"]);return e.constant("bbStatsServiceConfig",{api:{set:"//api.bodybuilding.com/api-proxy/stats/set",setMotivationLevel:"//api.bodybuilding.com/api-proxy/motivation/set",setMultiple:"//api.bodybuilding.com/api-proxy/stats/setmultiple",get:"//api.bodybuilding.com/api-proxy/stats/get"}}),e.constant("statNames",{HEIGHT:"height",WEIGHT:"weight",BODY_FAT:"bodyfat"}),e.constant("units",t),e}),define("bb/util/preconditions",[],function(){"use strict";var e={requiredArg:function(e,t){if(!e)throw new Error(t||"Missing argument");return this},requiredProp:function(e,t,n){if(!t)throw new Error('Cannot check Object "'+t+'" for property "'+e+"'");if(!t[e])throw new Error(n||"Missing property ["+e+"]!");return this},notNullOrEmpty:function(e,t){if(!e)throw new Error(t||"String value cannot be null or empty!");return this}};return e}),define("lodash/object/has",["../internal/baseGet","../internal/baseSlice","../lang/isArguments","../lang/isArray","../internal/isIndex","../internal/isKey","../internal/isLength","../lang/isString","../array/last","../internal/toPath"],function(i,r,o,a,s,c,l,u,d,p){var m=Object.prototype.hasOwnProperty;return function(e,t){if(null==e)return!1;var n=m.call(e,t);if(!n&&!c(t)){if(null==(e=1==(t=p(t)).length?e:i(e,r(t,0,-1))))return!1;t=d(t),n=m.call(e,t)}return n||l(e.length)&&s(t,e.length)&&(a(e)||o(e)||u(e))}}),define("bb/ui/services/stats/stats-service",["angular","./stats-module","bb/util/preconditions","lodash/object/has","lodash/collection/find"],function(a,e,s,p,m){"use strict";e.service("statsService",["$log","$rootScope","$http","$q","currentUserService","bbStatsServiceConfig","statNames","units",function(o,c,l,u,e,d,i,r){var t={setMotivationLevel:function(e,t){var n=d.api.setMotivationLevel;return l.post(n,{level:e,caption:t,needsuser:1},{zeus:!0})},save:function(t){var n;if(s.requiredProp("userid",t).requiredProp("value",t).requiredProp("stat",t),n=u.defer(),t.unit&&t.unit===r.METRIC)switch(t.stat){case i.WEIGHT:t.value=r.metric.kgToPound(t.value);break;case i.HEIGHT:t.value=r.metric.cmToInch(t.value)}return t.unit=r.IMPERIAL,l.get(d.api.set,{zeus:!0,params:t}).then(function(e){c.$emit("userstats.update",t),n.resolve(e)}).catch(n.reject),n.promise},saveMultiple:function(t,e,n,i){var r=u.defer(),o={},a=[],s=[];return o.unit=e,Object.keys(t).forEach(function(e){t[e].value&&(a.push(e),s.push(t[e].value))}),o.stat=a.join(","),o.value=s.join(","),o.date=n,o.shareonfb=i,o.needsuser=1,l.post(d.api.setMultiple,o,{zeus:!0}).then(function(e){c.$emit("userstats.update",o),r.resolve(e)}).catch(r.reject),r.promise},get:function(e){return e||(o.warn("StatsService#get called with no params"),e={}),e.userid||(e.needsuser=1),l.get(d.api.get,{zeus:!0,params:e})},getGoal:function(t){var n,i,r=u.defer();return e.get().then(function(e){return p(e,"goals.goals")&&a.isArray(e.goals.goals)?(n=m(e.goals.goals,function(e){return e.goalType===t}),l.get(d.api.get,{zeus:!0,params:{needsuser:1}})):r.reject("INVALID_GOAL_DATA")}).then(function(e){return(e=e.data).hasOwnProperty(t)&&e[t].goals?((i=e[t].goals).goalaccomplished=n.goalAccomplished,i.lastupdated=n.lastUpdated,i.percentageCompleted=n.percentageCompleted,i.isvoid=n.isVoid,i.percentagecompleted=n.percentageCompleted,o.debug("StatsService#getGoal",i),void r.resolve(i)):r.reject("GOAL_DOES_NOT_EXIST__"+t.toUpperCase())},o.warn),r.promise}};return t}])}),define("bb/cms/frontend/js/services/sticky-ad-service",[],function(){var t=setInterval(function(){n++;var e=document.getElementById("creeper__bar")||document.getElementById("slideInMsg");(null!==e||100<n)&&(clearInterval(t),null!==e&&((e=document.getElementsByClassName("ad-container--sticky")[0]).classList.remove("ad-container--sticky"),e.classList.add("ad-container--stickyLower")))},500),n=0}),define("bb/cms/frontend/js/package",["angular","bb/cms/frontend/js/views","bb/cms/frontend/js/services/country-codes","bb/cms/frontend/js/article-calculator/article-calculator","bb/cms/frontend/js/product-grid/product-grid","bb/cms/frontend/js/recipes/package","bb/cms/frontend/js/recommended-articles/recommended-articles","bb/cms/frontend/js/toolbars/mobile-toolbar/package","bb/cms/frontend/js/services/cms-service-module","bb/cms/frontend/js/country-aware/package","bb/cms/frontend/js/all-access-marketing-widget/package","bb/ui/util/ua-service","bb/ui/services/user/package","bb/ui/services/stats/stats-service","angular-animate","bb/cms/frontend/js/services/sticky-ad-service"],function(e,t,n,i,r,o,a,s){"use strict";o=e.module("front-app",["bb.ui.util","bb.cms.country-aware","bb.cms.all-access-marketing-widget",s.module.name,o.module.name,"bb.ui.services.user","bb.ui.services.stats","bb.cms.services","ngAnimate"]);return o.value("countryCodeList",n),o.directive("articleCalculator",i),o.directive("cmsProductRotator",r),o.directive("bbProductGrid",r),o.directive("bbRecommendedArticles",a),o.run(["$templateCache",t.init]),o.filter("trust_html",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}]),o}),define("bb/cms/main-frontend",["angular","bb/ui/base-app","bb/social/commenting/package","bb/ui/slider/package","bb/ui/social/package","bb/ui/all-access-subscribe-btn/package","bb/ui/entitlements/package","bb/ui/email-capture/package","bb/ui/gdpr-iframe/package","bb/content/big-picture/package","bb/content/content-carousel/package","bb/content/plan-popup-widget/package","bb/cms/frontend/js/package"],function(e,t){"use strict";function n(){new t,e.module("bb.cmsApp",["bb.ui.base-app","bb.social.commenting","bb.ui.slider","bb.ui.social","bb.ui.all-access-subscribe-btn","bb.ui.entitlements","bb.ui.email-capture","bb.ui.gdpr-iframe","bb.content.big-picture","bb.content.content-carousel","bb.content.plan-popup-widget"])}return n.prototype.init=function(){e.bootstrap("#js-bbcom-app",["bb.cmsApp","front-app"])},n}),require(["bb/cms/main-frontend"],function(e){(new e).init()}),define("bb/cms/app-frontend",function(){})}()}("undefined"==typeof cmsBundle?cmsBundle={}:cmsBundle);