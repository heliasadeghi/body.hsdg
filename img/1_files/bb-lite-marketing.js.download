/* http://artifacts.bbcomcdn.com/dust/2.5.0/dust-full.min.js */
/*! Dust - Asynchronous Templating - v2.5.0
* http://linkedin.github.io/dustjs/
* Copyright (c) 2014 Aleksander Williams; Released under the MIT License */
!function(root){function Context(a,b,c,d){this.stack=a,this.global=b,this.blocks=c,this.templateName=d}function Stack(a,b,c,d){this.tail=b,this.isObject=a&&"object"==typeof a,this.head=a,this.index=c,this.of=d}function Stub(a){this.head=new Chunk(this),this.callback=a,this.out=""}function Stream(){this.head=new Chunk(this)}function Chunk(a,b,c){this.root=a,this.next=b,this.data=[],this.flushable=!1,this.taps=c}function Tap(a,b){this.head=a,this.tail=b}var dust={},NONE="NONE",ERROR="ERROR",WARN="WARN",INFO="INFO",DEBUG="DEBUG",loggingLevels=[DEBUG,INFO,WARN,ERROR,NONE],EMPTY_FUNC=function(){},logger={},originalLog,loggerContext;dust.debugLevel=NONE,dust.config={whitespace:!1},dust._aliases={write:"w",end:"e",map:"m",render:"r",reference:"f",section:"s",exists:"x",notexists:"nx",block:"b",partial:"p",helper:"h"},root&&root.console&&root.console.log&&(loggerContext=root.console,originalLog=root.console.log),logger.log=loggerContext?function(){logger.log="function"==typeof originalLog?function(){originalLog.apply(loggerContext,arguments)}:function(){var a=Array.prototype.slice.apply(arguments).join(" ");originalLog(a)},logger.log.apply(this,arguments)}:function(){},dust.log=function(a,b){b=b||INFO,dust.debugLevel!==NONE&&dust.indexInArray(loggingLevels,b)>=dust.indexInArray(loggingLevels,dust.debugLevel)&&(dust.logQueue||(dust.logQueue=[]),dust.logQueue.push({message:a,type:b}),logger.log("[DUST "+b+"]: "+a))},dust.helpers={},dust.cache={},dust.register=function(a,b){a&&(dust.cache[a]=b)},dust.render=function(a,b,c){var d=new Stub(c).head;try{dust.load(a,d,Context.wrap(b,a)).end()}catch(e){d.setError(e)}},dust.stream=function(a,b){var c=new Stream,d=c.head;return dust.nextTick(function(){try{dust.load(a,c.head,Context.wrap(b,a)).end()}catch(e){d.setError(e)}}),c},dust.renderSource=function(a,b,c){return dust.compileFn(a)(b,c)},dust.compileFn=function(a,b){b=b||null;var c=dust.loadSource(dust.compile(a,b));return function(a,d){var e=d?new Stub(d):new Stream;return dust.nextTick(function(){"function"==typeof c?c(e.head,Context.wrap(a,b)).end():dust.log(new Error("Template ["+b+"] cannot be resolved to a Dust function"),ERROR)}),e}},dust.load=function(a,b,c){var d=dust.cache[a];return d?d(b,c):dust.onLoad?b.map(function(b){dust.onLoad(a,function(d,e){return d?b.setError(d):(dust.cache[a]||dust.loadSource(dust.compile(e,a)),void dust.cache[a](b,c).end())})}):b.setError(new Error("Template Not Found: "+a))},dust.loadSource=function(source,path){return eval(source)},dust.isArray=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},dust.indexInArray=function(a,b,c){if(c=+c||0,Array.prototype.indexOf)return a.indexOf(b,c);if(void 0===a||null===a)throw new TypeError('cannot call method "indexOf" of null');var d=a.length;for(1/0===Math.abs(c)&&(c=0),0>c&&(c+=d,0>c&&(c=0));d>c;c++)if(a[c]===b)return c;return-1},dust.nextTick=function(){return function(a){setTimeout(a,0)}}(),dust.isEmpty=function(a){return dust.isArray(a)&&!a.length?!0:0===a?!1:!a},dust.filter=function(a,b,c){if(c)for(var d=0,e=c.length;e>d;d++){var f=c[d];"s"===f?b=null:"function"==typeof dust.filters[f]?a=dust.filters[f](a):dust.log("Invalid filter ["+f+"]",WARN)}return b&&(a=dust.filters[b](a)),a},dust.filters={h:function(a){return dust.escapeHtml(a)},j:function(a){return dust.escapeJs(a)},u:encodeURI,uc:encodeURIComponent,js:function(a){return JSON?JSON.stringify(a):(dust.log("JSON is undefined.  JSON stringify has not been used on ["+a+"]",WARN),a)},jp:function(a){return JSON?JSON.parse(a):(dust.log("JSON is undefined.  JSON parse has not been used on ["+a+"]",WARN),a)}},dust.makeBase=function(a){return new Context(new Stack,a)},Context.wrap=function(a,b){return a instanceof Context?a:new Context(new Stack(a),{},null,b)},Context.prototype.get=function(a,b){return"string"==typeof a&&("."===a[0]&&(b=!0,a=a.substr(1)),a=a.split(".")),this._get(b,a)},Context.prototype._get=function(a,b){var c,d,e,f,g,h=this.stack,i=1;if(d=b[0],e=b.length,a&&0===e)f=h,h=h.head;else{if(a)h&&(h=h.head?h.head[d]:void 0);else{for(;h&&(!h.isObject||(f=h.head,c=h.head[d],void 0===c));)h=h.tail;h=void 0!==c?c:this.global?this.global[d]:void 0}for(;h&&e>i;)f=h,h=h[b[i]],i++}return"function"==typeof h?(g=function(){try{return h.apply(f,arguments)}catch(a){throw dust.log(a,ERROR),a}},g.__dustBody=!!h.__dustBody,g):(void 0===h&&dust.log("Cannot find the value for reference [{"+b.join(".")+"}] in template ["+this.getTemplateName()+"]"),h)},Context.prototype.getPath=function(a,b){return this._get(a,b)},Context.prototype.push=function(a,b,c){return new Context(new Stack(a,this.stack,b,c),this.global,this.blocks,this.getTemplateName())},Context.prototype.rebase=function(a){return new Context(new Stack(a),this.global,this.blocks,this.getTemplateName())},Context.prototype.current=function(){return this.stack.head},Context.prototype.getBlock=function(a){if("function"==typeof a){var b=new Chunk;a=a(b,this).data.join("")}var c=this.blocks;if(!c)return void dust.log("No blocks for context[{"+a+"}] in template ["+this.getTemplateName()+"]",DEBUG);for(var d,e=c.length;e--;)if(d=c[e][a])return d},Context.prototype.shiftBlocks=function(a){var b,c=this.blocks;return a?(b=c?c.concat([a]):[a],new Context(this.stack,this.global,b,this.getTemplateName())):this},Context.prototype.getTemplateName=function(){return this.templateName},Stub.prototype.flush=function(){for(var a=this.head;a;){if(!a.flushable)return a.error?(this.callback(a.error),dust.log("Chunk error ["+a.error+"] thrown. Ceasing to render this template.",WARN),void(this.flush=EMPTY_FUNC)):void 0;this.out+=a.data.join(""),a=a.next,this.head=a}this.callback(null,this.out)},Stream.prototype.flush=function(){for(var a=this.head;a;){if(!a.flushable)return a.error?(this.emit("error",a.error),dust.log("Chunk error ["+a.error+"] thrown. Ceasing to render this template.",WARN),void(this.flush=EMPTY_FUNC)):void 0;this.emit("data",a.data.join("")),a=a.next,this.head=a}this.emit("end")},Stream.prototype.emit=function(a,b){if(!this.events)return dust.log("No events to emit",INFO),!1;var c=this.events[a];if(!c)return dust.log("Event type ["+a+"] does not exist",WARN),!1;if("function"==typeof c)c(b);else if(dust.isArray(c))for(var d=c.slice(0),e=0,f=d.length;f>e;e++)d[e](b);else dust.log("Event Handler ["+c+"] is not of a type that is handled by emit",WARN)},Stream.prototype.on=function(a,b){return this.events||(this.events={}),this.events[a]?"function"==typeof this.events[a]?this.events[a]=[this.events[a],b]:this.events[a].push(b):b?this.events[a]=b:dust.log("Callback for type ["+a+"] does not exist. Listener not registered.",WARN),this},Stream.prototype.pipe=function(a){return this.on("data",function(b){try{a.write(b,"utf8")}catch(c){dust.log(c,ERROR)}}).on("end",function(){try{return a.end()}catch(b){dust.log(b,ERROR)}}).on("error",function(b){a.error(b)}),this},Chunk.prototype.write=function(a){var b=this.taps;return b&&(a=b.go(a)),this.data.push(a),this},Chunk.prototype.end=function(a){return a&&this.write(a),this.flushable=!0,this.root.flush(),this},Chunk.prototype.map=function(a){var b=new Chunk(this.root,this.next,this.taps),c=new Chunk(this.root,b,this.taps);this.next=c,this.flushable=!0;try{a(c)}catch(d){dust.log(d,ERROR),c.setError(d)}return b},Chunk.prototype.tap=function(a){var b=this.taps;return this.taps=b?b.push(a):new Tap(a),this},Chunk.prototype.untap=function(){return this.taps=this.taps.tail,this},Chunk.prototype.render=function(a,b){return a(this,b)},Chunk.prototype.reference=function(a,b,c,d){return"function"==typeof a&&(a=a.apply(b.current(),[this,b,null,{auto:c,filters:d}]),a instanceof Chunk)?a:dust.isEmpty(a)?this:this.write(dust.filter(a,c,d))},Chunk.prototype.section=function(a,b,c,d){if("function"==typeof a&&!a.__dustBody){try{a=a.apply(b.current(),[this,b,c,d])}catch(e){return dust.log(e,ERROR),this.setError(e)}if(a instanceof Chunk)return a}var f=c.block,g=c["else"];if(d&&(b=b.push(d)),dust.isArray(a)){if(f){var h=a.length,i=this;if(h>0){b.stack.head&&(b.stack.head.$len=h);for(var j=0;h>j;j++)b.stack.head&&(b.stack.head.$idx=j),i=f(i,b.push(a[j],j,h));return b.stack.head&&(b.stack.head.$idx=void 0,b.stack.head.$len=void 0),i}if(g)return g(this,b)}}else if(a===!0){if(f)return f(this,b)}else if(a||0===a){if(f)return f(this,b.push(a))}else if(g)return g(this,b);return dust.log("Not rendering section (#) block in template ["+b.getTemplateName()+"], because above key was not found",DEBUG),this},Chunk.prototype.exists=function(a,b,c){var d=c.block,e=c["else"];if(dust.isEmpty(a)){if(e)return e(this,b)}else if(d)return d(this,b);return dust.log("Not rendering exists (?) block in template ["+b.getTemplateName()+"], because above key was not found",DEBUG),this},Chunk.prototype.notexists=function(a,b,c){var d=c.block,e=c["else"];if(dust.isEmpty(a)){if(d)return d(this,b)}else if(e)return e(this,b);return dust.log("Not rendering not exists (^) block check in template ["+b.getTemplateName()+"], because above key was found",DEBUG),this},Chunk.prototype.block=function(a,b,c){var d=c.block;return a&&(d=a),d?d(this,b):this},Chunk.prototype.partial=function(a,b,c){var d;d=dust.makeBase(b.global),d.blocks=b.blocks,b.stack&&b.stack.tail&&(d.stack=b.stack.tail),c&&(d=d.push(c)),"string"==typeof a&&(d.templateName=a),d=d.push(b.stack.head);var e;return e="function"==typeof a?this.capture(a,d,function(a,b){d.templateName=d.templateName||a,dust.load(a,b,d).end()}):dust.load(a,this,d)},Chunk.prototype.helper=function(a,b,c,d){var e=this;if(!dust.helpers[a])return dust.log("Invalid helper ["+a+"]",WARN),e;try{return dust.helpers[a](e,b,c,d)}catch(f){return dust.log("Error in "+a+" helper: "+f,ERROR),e.setError(f)}},Chunk.prototype.capture=function(a,b,c){return this.map(function(d){var e=new Stub(function(a,b){a?d.setError(a):c(b,d)});a(e.head,b).end()})},Chunk.prototype.setError=function(a){return this.error=a,this.root.flush(),this};for(var f in Chunk.prototype)dust._aliases[f]&&(Chunk.prototype[dust._aliases[f]]=Chunk.prototype[f]);Tap.prototype.push=function(a){return new Tap(a,this)},Tap.prototype.go=function(a){for(var b=this;b;)a=b.head(a),b=b.tail;return a};var HCHARS=/[&<>"']/,AMP=/&/g,LT=/</g,GT=/>/g,QUOT=/\"/g,SQUOT=/\'/g;dust.escapeHtml=function(a){return"string"==typeof a&&HCHARS.test(a)?a.replace(AMP,"&amp;").replace(LT,"&lt;").replace(GT,"&gt;").replace(QUOT,"&quot;").replace(SQUOT,"&#39;"):a};var BS=/\\/g,FS=/\//g,CR=/\r/g,LS=/\u2028/g,PS=/\u2029/g,NL=/\n/g,LF=/\f/g,SQ=/'/g,DQ=/"/g,TB=/\t/g;dust.escapeJs=function(a){return"string"==typeof a?a.replace(BS,"\\\\").replace(FS,"\\/").replace(DQ,'\\"').replace(SQ,"\\'").replace(CR,"\\r").replace(LS,"\\u2028").replace(PS,"\\u2029").replace(NL,"\\n").replace(LF,"\\f").replace(TB,"\\t"):a},"object"==typeof exports?module.exports=dust:root.dust=dust}(function(){return this}()),function(a,b){"object"==typeof exports?module.exports=b(require("./dust")):b(a.dust)}(this,function(dust){var a=function(){function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,b,c,d,e,f){this.message=a,this.expected=b,this.found=c,this.offset=d,this.line=e,this.column=f,this.name="SyntaxError"}function c(a){function c(){return f(nd).line}function d(){return f(nd).column}function e(a){throw h(a,null,nd)}function f(b){function c(b,c,d){var e,f;for(e=c;d>e;e++)f=a.charAt(e),"\n"===f?(b.seenCR||b.line++,b.column=1,b.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(b.line++,b.column=1,b.seenCR=!0):(b.column++,b.seenCR=!1)}return od!==b&&(od>b&&(od=0,pd={line:1,column:1,seenCR:!1}),c(pd,od,b),od=b),pd}function g(a){qd>md||(md>qd&&(qd=md,rd=[]),rd.push(a))}function h(c,d,e){function g(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function h(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}var i=f(e),j=e<a.length?a.charAt(e):null;return null!==d&&g(d),new b(null!==c?c:h(d,j),d,j,e,i.line,i.column)}function i(){var a;return a=j()}function j(){var a,b,c;for(a=md,b=[],c=k();c!==T;)b.push(c),c=k();return b!==T&&(nd=a,b=W(b)),a=b}function k(){var a;return a=I(),a===T&&(a=J(),a===T&&(a=l(),a===T&&(a=s(),a===T&&(a=u(),a===T&&(a=r(),a===T&&(a=F())))))),a}function l(){var b,c,d,e,f,h,i,k;if(sd++,b=md,c=m(),c!==T){for(d=[],e=Q();e!==T;)d.push(e),e=Q();d!==T?(e=M(),e!==T?(f=j(),f!==T?(h=q(),h!==T?(i=n(),i===T&&(i=Z),i!==T?(nd=md,k=$(c,f,h,i),k=k?_:Y,k!==T?(nd=b,c=ab(c,f,h,i),b=c):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y)}else md=b,b=Y;if(b===T)if(b=md,c=m(),c!==T){for(d=[],e=Q();e!==T;)d.push(e),e=Q();d!==T?(47===a.charCodeAt(md)?(e=bb,md++):(e=T,0===sd&&g(cb)),e!==T?(f=M(),f!==T?(nd=b,c=db(c),b=c):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y)}else md=b,b=Y;return sd--,b===T&&(c=T,0===sd&&g(X)),b}function m(){var b,c,d,e,f,h,i;if(b=md,c=L(),c!==T)if(eb.test(a.charAt(md))?(d=a.charAt(md),md++):(d=T,0===sd&&g(fb)),d!==T){for(e=[],f=Q();f!==T;)e.push(f),f=Q();e!==T?(f=v(),f!==T?(h=o(),h!==T?(i=p(),i!==T?(nd=b,c=gb(d,f,h,i),b=c):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y)}else md=b,b=Y;else md=b,b=Y;return b}function n(){var b,c,d,e,f,h,i;if(sd++,b=md,c=L(),c!==T)if(47===a.charCodeAt(md)?(d=bb,md++):(d=T,0===sd&&g(cb)),d!==T){for(e=[],f=Q();f!==T;)e.push(f),f=Q();if(e!==T)if(f=v(),f!==T){for(h=[],i=Q();i!==T;)h.push(i),i=Q();h!==T?(i=M(),i!==T?(nd=b,c=ib(f),b=c):(md=b,b=Y)):(md=b,b=Y)}else md=b,b=Y;else md=b,b=Y}else md=b,b=Y;else md=b,b=Y;return sd--,b===T&&(c=T,0===sd&&g(hb)),b}function o(){var b,c,d,e;return b=md,c=md,58===a.charCodeAt(md)?(d=jb,md++):(d=T,0===sd&&g(kb)),d!==T?(e=v(),e!==T?(nd=c,d=lb(e),c=d):(md=c,c=Y)):(md=c,c=Y),c===T&&(c=Z),c!==T&&(nd=b,c=mb(c)),b=c}function p(){var b,c,d,e,f,h,i;if(sd++,b=md,c=[],d=md,e=[],f=Q(),f!==T)for(;f!==T;)e.push(f),f=Q();else e=Y;for(e!==T?(f=A(),f!==T?(61===a.charCodeAt(md)?(h=ob,md++):(h=T,0===sd&&g(pb)),h!==T?(i=w(),i===T&&(i=v(),i===T&&(i=D())),i!==T?(nd=d,e=qb(f,i),d=e):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y);d!==T;){if(c.push(d),d=md,e=[],f=Q(),f!==T)for(;f!==T;)e.push(f),f=Q();else e=Y;e!==T?(f=A(),f!==T?(61===a.charCodeAt(md)?(h=ob,md++):(h=T,0===sd&&g(pb)),h!==T?(i=w(),i===T&&(i=v(),i===T&&(i=D())),i!==T?(nd=d,e=qb(f,i),d=e):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)}return c!==T&&(nd=b,c=rb(c)),b=c,sd--,b===T&&(c=T,0===sd&&g(nb)),b}function q(){var b,c,d,e,f,h,i,k;for(sd++,b=md,c=[],d=md,e=L(),e!==T?(58===a.charCodeAt(md)?(f=jb,md++):(f=T,0===sd&&g(kb)),f!==T?(h=A(),h!==T?(i=M(),i!==T?(k=j(),k!==T?(nd=d,e=qb(h,k),d=e):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y);d!==T;)c.push(d),d=md,e=L(),e!==T?(58===a.charCodeAt(md)?(f=jb,md++):(f=T,0===sd&&g(kb)),f!==T?(h=A(),h!==T?(i=M(),i!==T?(k=j(),k!==T?(nd=d,e=qb(h,k),d=e):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y);return c!==T&&(nd=b,c=tb(c)),b=c,sd--,b===T&&(c=T,0===sd&&g(sb)),b}function r(){var a,b,c,d,e;return sd++,a=md,b=L(),b!==T?(c=v(),c!==T?(d=t(),d!==T?(e=M(),e!==T?(nd=a,b=vb(c,d),a=b):(md=a,a=Y)):(md=a,a=Y)):(md=a,a=Y)):(md=a,a=Y),sd--,a===T&&(b=T,0===sd&&g(ub)),a}function s(){var b,c,d,e,f,h,i,j,k,l;if(sd++,b=md,c=L(),c!==T)if(62===a.charCodeAt(md)?(d=xb,md++):(d=T,0===sd&&g(yb)),d===T&&(43===a.charCodeAt(md)?(d=zb,md++):(d=T,0===sd&&g(Ab))),d!==T){for(e=[],f=Q();f!==T;)e.push(f),f=Q();if(e!==T)if(f=md,h=A(),h!==T&&(nd=f,h=Bb(h)),f=h,f===T&&(f=D()),f!==T)if(h=o(),h!==T)if(i=p(),i!==T){for(j=[],k=Q();k!==T;)j.push(k),k=Q();j!==T?(47===a.charCodeAt(md)?(k=bb,md++):(k=T,0===sd&&g(cb)),k!==T?(l=M(),l!==T?(nd=b,c=Cb(d,f,h,i),b=c):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y)}else md=b,b=Y;else md=b,b=Y;else md=b,b=Y;else md=b,b=Y}else md=b,b=Y;else md=b,b=Y;return sd--,b===T&&(c=T,0===sd&&g(wb)),b}function t(){var b,c,d,e,f;for(sd++,b=md,c=[],d=md,124===a.charCodeAt(md)?(e=Eb,md++):(e=T,0===sd&&g(Fb)),e!==T?(f=A(),f!==T?(nd=d,e=lb(f),d=e):(md=d,d=Y)):(md=d,d=Y);d!==T;)c.push(d),d=md,124===a.charCodeAt(md)?(e=Eb,md++):(e=T,0===sd&&g(Fb)),e!==T?(f=A(),f!==T?(nd=d,e=lb(f),d=e):(md=d,d=Y)):(md=d,d=Y);return c!==T&&(nd=b,c=Gb(c)),b=c,sd--,b===T&&(c=T,0===sd&&g(Db)),b}function u(){var b,c,d,e,f;return sd++,b=md,c=L(),c!==T?(126===a.charCodeAt(md)?(d=Ib,md++):(d=T,0===sd&&g(Jb)),d!==T?(e=A(),e!==T?(f=M(),f!==T?(nd=b,c=Kb(e),b=c):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y),sd--,b===T&&(c=T,0===sd&&g(Hb)),b}function v(){var a,b;return sd++,a=md,b=z(),b!==T&&(nd=a,b=Mb(b)),a=b,a===T&&(a=md,b=A(),b!==T&&(nd=a,b=Nb(b)),a=b),sd--,a===T&&(b=T,0===sd&&g(Lb)),a}function w(){var a,b;return sd++,a=md,b=x(),b===T&&(b=y()),b!==T&&(nd=a,b=Pb(b)),a=b,sd--,a===T&&(b=T,0===sd&&g(Ob)),a}function x(){var b,c,d,e,f;if(sd++,b=md,c=y(),c!==T)if(46===a.charCodeAt(md)?(d=Rb,md++):(d=T,0===sd&&g(Sb)),d!==T){if(e=[],f=y(),f!==T)for(;f!==T;)e.push(f),f=y();else e=Y;e!==T?(nd=b,c=Tb(c,e),b=c):(md=b,b=Y)}else md=b,b=Y;else md=b,b=Y;return sd--,b===T&&(c=T,0===sd&&g(Qb)),b}function y(){var b,c,d;if(sd++,b=md,c=[],Vb.test(a.charAt(md))?(d=a.charAt(md),md++):(d=T,0===sd&&g(Wb)),d!==T)for(;d!==T;)c.push(d),Vb.test(a.charAt(md))?(d=a.charAt(md),md++):(d=T,0===sd&&g(Wb));else c=Y;return c!==T&&(nd=b,c=Xb(c)),b=c,sd--,b===T&&(c=T,0===sd&&g(Ub)),b}function z(){var b,c,d,e;if(sd++,b=md,c=A(),c===T&&(c=Z),c!==T){if(d=[],e=C(),e===T&&(e=B()),e!==T)for(;e!==T;)d.push(e),e=C(),e===T&&(e=B());else d=Y;d!==T?(nd=b,c=Zb(c,d),b=c):(md=b,b=Y)}else md=b,b=Y;if(b===T)if(b=md,46===a.charCodeAt(md)?(c=Rb,md++):(c=T,0===sd&&g(Sb)),c!==T){for(d=[],e=C(),e===T&&(e=B());e!==T;)d.push(e),e=C(),e===T&&(e=B());d!==T?(nd=b,c=$b(d),b=c):(md=b,b=Y)}else md=b,b=Y;return sd--,b===T&&(c=T,0===sd&&g(Yb)),b}function A(){var b,c,d,e;if(sd++,b=md,ac.test(a.charAt(md))?(c=a.charAt(md),md++):(c=T,0===sd&&g(bc)),c!==T){for(d=[],cc.test(a.charAt(md))?(e=a.charAt(md),md++):(e=T,0===sd&&g(dc));e!==T;)d.push(e),cc.test(a.charAt(md))?(e=a.charAt(md),md++):(e=T,0===sd&&g(dc));d!==T?(nd=b,c=ec(c,d),b=c):(md=b,b=Y)}else md=b,b=Y;return sd--,b===T&&(c=T,0===sd&&g(_b)),b}function B(){var b,c,d,e,f,h;if(sd++,b=md,c=md,d=N(),d!==T){if(e=md,f=[],Vb.test(a.charAt(md))?(h=a.charAt(md),md++):(h=T,0===sd&&g(Wb)),h!==T)for(;h!==T;)f.push(h),Vb.test(a.charAt(md))?(h=a.charAt(md),md++):(h=T,0===sd&&g(Wb));else f=Y;f!==T&&(nd=e,f=gc(f)),e=f,e===T&&(e=v()),e!==T?(f=O(),f!==T?(nd=c,d=hc(e),c=d):(md=c,c=Y)):(md=c,c=Y)}else md=c,c=Y;return c!==T?(d=C(),d===T&&(d=Z),d!==T?(nd=b,c=ic(c,d),b=c):(md=b,b=Y)):(md=b,b=Y),sd--,b===T&&(c=T,0===sd&&g(fc)),b}function C(){var b,c,d,e,f;if(sd++,b=md,c=[],d=md,46===a.charCodeAt(md)?(e=Rb,md++):(e=T,0===sd&&g(Sb)),e!==T?(f=A(),f!==T?(nd=d,e=kc(f),d=e):(md=d,d=Y)):(md=d,d=Y),d!==T)for(;d!==T;)c.push(d),d=md,46===a.charCodeAt(md)?(e=Rb,md++):(e=T,0===sd&&g(Sb)),e!==T?(f=A(),f!==T?(nd=d,e=kc(f),d=e):(md=d,d=Y)):(md=d,d=Y);else c=Y;return c!==T?(d=B(),d===T&&(d=Z),d!==T?(nd=b,c=lc(c,d),b=c):(md=b,b=Y)):(md=b,b=Y),sd--,b===T&&(c=T,0===sd&&g(jc)),b}function D(){var b,c,d,e;if(sd++,b=md,34===a.charCodeAt(md)?(c=nc,md++):(c=T,0===sd&&g(oc)),c!==T?(34===a.charCodeAt(md)?(d=nc,md++):(d=T,0===sd&&g(oc)),d!==T?(nd=b,c=pc(),b=c):(md=b,b=Y)):(md=b,b=Y),b===T&&(b=md,34===a.charCodeAt(md)?(c=nc,md++):(c=T,0===sd&&g(oc)),c!==T?(d=G(),d!==T?(34===a.charCodeAt(md)?(e=nc,md++):(e=T,0===sd&&g(oc)),e!==T?(nd=b,c=qc(d),b=c):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y),b===T))if(b=md,34===a.charCodeAt(md)?(c=nc,md++):(c=T,0===sd&&g(oc)),c!==T){if(d=[],e=E(),e!==T)for(;e!==T;)d.push(e),e=E();else d=Y;d!==T?(34===a.charCodeAt(md)?(e=nc,md++):(e=T,0===sd&&g(oc)),e!==T?(nd=b,c=rc(d),b=c):(md=b,b=Y)):(md=b,b=Y)}else md=b,b=Y;return sd--,b===T&&(c=T,0===sd&&g(mc)),b}function E(){var a,b;return a=u(),a===T&&(a=r(),a===T&&(a=md,b=G(),b!==T&&(nd=a,b=sc(b)),a=b)),a}function F(){var b,c,d,e,f,h,i,j;if(sd++,b=md,c=P(),c!==T){for(d=[],e=Q();e!==T;)d.push(e),e=Q();d!==T?(nd=b,c=uc(c,d),b=c):(md=b,b=Y)}else md=b,b=Y;if(b===T){if(b=md,c=[],d=md,e=md,sd++,f=K(),sd--,f===T?e=_:(md=e,e=Y),e!==T?(f=md,sd++,h=I(),sd--,h===T?f=_:(md=f,f=Y),f!==T?(h=md,sd++,i=J(),sd--,i===T?h=_:(md=h,h=Y),h!==T?(i=md,sd++,j=P(),sd--,j===T?i=_:(md=i,i=Y),i!==T?(a.length>md?(j=a.charAt(md),md++):(j=T,0===sd&&g(vc)),j!==T?(nd=d,e=wc(j),d=e):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y),d!==T)for(;d!==T;)c.push(d),d=md,e=md,sd++,f=K(),sd--,f===T?e=_:(md=e,e=Y),e!==T?(f=md,sd++,h=I(),sd--,h===T?f=_:(md=f,f=Y),f!==T?(h=md,sd++,i=J(),sd--,i===T?h=_:(md=h,h=Y),h!==T?(i=md,sd++,j=P(),sd--,j===T?i=_:(md=i,i=Y),i!==T?(a.length>md?(j=a.charAt(md),md++):(j=T,0===sd&&g(vc)),j!==T?(nd=d,e=wc(j),d=e):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y);else c=Y;c!==T&&(nd=b,c=xc(c)),b=c}return sd--,b===T&&(c=T,0===sd&&g(tc)),b}function G(){var b,c,d,e,f;if(sd++,b=md,c=[],d=md,e=md,sd++,f=K(),sd--,f===T?e=_:(md=e,e=Y),e!==T?(f=H(),f===T&&(zc.test(a.charAt(md))?(f=a.charAt(md),md++):(f=T,0===sd&&g(Ac))),f!==T?(nd=d,e=wc(f),d=e):(md=d,d=Y)):(md=d,d=Y),d!==T)for(;d!==T;)c.push(d),d=md,e=md,sd++,f=K(),sd--,f===T?e=_:(md=e,e=Y),e!==T?(f=H(),f===T&&(zc.test(a.charAt(md))?(f=a.charAt(md),md++):(f=T,0===sd&&g(Ac))),f!==T?(nd=d,e=wc(f),d=e):(md=d,d=Y)):(md=d,d=Y);else c=Y;return c!==T&&(nd=b,c=Bc(c)),b=c,sd--,b===T&&(c=T,0===sd&&g(yc)),b}function H(){var b,c;return b=md,a.substr(md,2)===Cc?(c=Cc,md+=2):(c=T,0===sd&&g(Dc)),c!==T&&(nd=b,c=Ec()),b=c}function I(){var b,c,d,e,f,h;if(sd++,b=md,a.substr(md,2)===Gc?(c=Gc,md+=2):(c=T,0===sd&&g(Hc)),c!==T){for(d=[],e=md,f=md,sd++,a.substr(md,2)===Ic?(h=Ic,md+=2):(h=T,0===sd&&g(Jc)),sd--,h===T?f=_:(md=f,f=Y),f!==T?(a.length>md?(h=a.charAt(md),md++):(h=T,0===sd&&g(vc)),h!==T?(nd=e,f=Kc(h),e=f):(md=e,e=Y)):(md=e,e=Y);e!==T;)d.push(e),e=md,f=md,sd++,a.substr(md,2)===Ic?(h=Ic,md+=2):(h=T,0===sd&&g(Jc)),sd--,h===T?f=_:(md=f,f=Y),f!==T?(a.length>md?(h=a.charAt(md),md++):(h=T,0===sd&&g(vc)),h!==T?(nd=e,f=Kc(h),e=f):(md=e,e=Y)):(md=e,e=Y);d!==T?(a.substr(md,2)===Ic?(e=Ic,md+=2):(e=T,0===sd&&g(Jc)),e!==T?(nd=b,c=Lc(d),b=c):(md=b,b=Y)):(md=b,b=Y)}else md=b,b=Y;return sd--,b===T&&(c=T,0===sd&&g(Fc)),b}function J(){var b,c,d,e,f,h;if(sd++,b=md,a.substr(md,2)===Nc?(c=Nc,md+=2):(c=T,0===sd&&g(Oc)),c!==T){for(d=[],e=md,f=md,sd++,a.substr(md,2)===Pc?(h=Pc,md+=2):(h=T,0===sd&&g(Qc)),sd--,h===T?f=_:(md=f,f=Y),f!==T?(a.length>md?(h=a.charAt(md),md++):(h=T,0===sd&&g(vc)),h!==T?(nd=e,f=wc(h),e=f):(md=e,e=Y)):(md=e,e=Y);e!==T;)d.push(e),e=md,f=md,sd++,a.substr(md,2)===Pc?(h=Pc,md+=2):(h=T,0===sd&&g(Qc)),sd--,h===T?f=_:(md=f,f=Y),f!==T?(a.length>md?(h=a.charAt(md),md++):(h=T,0===sd&&g(vc)),h!==T?(nd=e,f=wc(h),e=f):(md=e,e=Y)):(md=e,e=Y);d!==T?(a.substr(md,2)===Pc?(e=Pc,md+=2):(e=T,0===sd&&g(Qc)),e!==T?(nd=b,c=Rc(d),b=c):(md=b,b=Y)):(md=b,b=Y)}else md=b,b=Y;return sd--,b===T&&(c=T,0===sd&&g(Mc)),b}function K(){var b,c,d,e,f,h,i,j,k,l;if(b=md,c=L(),c!==T){for(d=[],e=Q();e!==T;)d.push(e),e=Q();if(d!==T)if(Sc.test(a.charAt(md))?(e=a.charAt(md),md++):(e=T,0===sd&&g(Tc)),e!==T){for(f=[],h=Q();h!==T;)f.push(h),h=Q();if(f!==T){if(h=[],i=md,j=md,sd++,k=M(),sd--,k===T?j=_:(md=j,j=Y),j!==T?(k=md,sd++,l=P(),sd--,l===T?k=_:(md=k,k=Y),k!==T?(a.length>md?(l=a.charAt(md),md++):(l=T,0===sd&&g(vc)),l!==T?(j=[j,k,l],i=j):(md=i,i=Y)):(md=i,i=Y)):(md=i,i=Y),i!==T)for(;i!==T;)h.push(i),i=md,j=md,sd++,k=M(),sd--,k===T?j=_:(md=j,j=Y),j!==T?(k=md,sd++,l=P(),sd--,l===T?k=_:(md=k,k=Y),k!==T?(a.length>md?(l=a.charAt(md),md++):(l=T,0===sd&&g(vc)),l!==T?(j=[j,k,l],i=j):(md=i,i=Y)):(md=i,i=Y)):(md=i,i=Y);else h=Y;if(h!==T){for(i=[],j=Q();j!==T;)i.push(j),j=Q();i!==T?(j=M(),j!==T?(c=[c,d,e,f,h,i,j],b=c):(md=b,b=Y)):(md=b,b=Y)}else md=b,b=Y}else md=b,b=Y}else md=b,b=Y;else md=b,b=Y}else md=b,b=Y;return b===T&&(b=r()),b}function L(){var b;return 123===a.charCodeAt(md)?(b=Uc,md++):(b=T,0===sd&&g(Vc)),b}function M(){var b;return 125===a.charCodeAt(md)?(b=Wc,md++):(b=T,0===sd&&g(Xc)),b}function N(){var b;return 91===a.charCodeAt(md)?(b=Yc,md++):(b=T,0===sd&&g(Zc)),b}function O(){var b;return 93===a.charCodeAt(md)?(b=$c,md++):(b=T,0===sd&&g(_c)),b}function P(){var b;return 10===a.charCodeAt(md)?(b=ad,md++):(b=T,0===sd&&g(bd)),b===T&&(a.substr(md,2)===cd?(b=cd,md+=2):(b=T,0===sd&&g(dd)),b===T&&(13===a.charCodeAt(md)?(b=ed,md++):(b=T,0===sd&&g(fd)),b===T&&(8232===a.charCodeAt(md)?(b=gd,md++):(b=T,0===sd&&g(hd)),b===T&&(8233===a.charCodeAt(md)?(b=id,md++):(b=T,0===sd&&g(jd)))))),b}function Q(){var b;return kd.test(a.charAt(md))?(b=a.charAt(md),md++):(b=T,0===sd&&g(ld)),b===T&&(b=P()),b}var R,S=arguments.length>1?arguments[1]:{},T={},U={start:i},V=i,W=function(a){return["body"].concat(a).concat([["line",c()],["col",d()]])},X={type:"other",description:"section"},Y=T,Z=null,$=function(a,b,c,d){return d&&a[1].text===d.text||e("Expected end tag for "+a[1].text+" but it was not found."),!0},_=void 0,ab=function(a,b,e){return e.push(["param",["literal","block"],b]),a.push(e),a.concat([["line",c()],["col",d()]])},bb="/",cb={type:"literal",value:"/",description:'"/"'},db=function(a){return a.push(["bodies"]),a.concat([["line",c()],["col",d()]])},eb=/^[#?\^<+@%]/,fb={type:"class",value:"[#?\\^<+@%]",description:"[#?\\^<+@%]"},gb=function(a,b,c,d){return[a,b,c,d]},hb={type:"other",description:"end tag"},ib=function(a){return a},jb=":",kb={type:"literal",value:":",description:'":"'},lb=function(a){return a},mb=function(a){return a?["context",a]:["context"]},nb={type:"other",description:"params"},ob="=",pb={type:"literal",value:"=",description:'"="'},qb=function(a,b){return["param",["literal",a],b]},rb=function(a){return["params"].concat(a)},sb={type:"other",description:"bodies"},tb=function(a){return["bodies"].concat(a)},ub={type:"other",description:"reference"},vb=function(a,b){return["reference",a,b].concat([["line",c()],["col",d()]])},wb={type:"other",description:"partial"},xb=">",yb={type:"literal",value:">",description:'">"'},zb="+",Ab={type:"literal",value:"+",description:'"+"'},Bb=function(a){return["literal",a]},Cb=function(a,b,e,f){var g=">"===a?"partial":a;return[g,b,e,f].concat([["line",c()],["col",d()]])},Db={type:"other",description:"filters"},Eb="|",Fb={type:"literal",value:"|",description:'"|"'},Gb=function(a){return["filters"].concat(a)},Hb={type:"other",description:"special"},Ib="~",Jb={type:"literal",value:"~",description:'"~"'},Kb=function(a){return["special",a].concat([["line",c()],["col",d()]])},Lb={type:"other",description:"identifier"},Mb=function(a){var b=["path"].concat(a);return b.text=a[1].join("."),b},Nb=function(a){var b=["key",a];return b.text=a,b},Ob={type:"other",description:"number"},Pb=function(a){return["literal",a]},Qb={type:"other",description:"float"},Rb=".",Sb={type:"literal",value:".",description:'"."'},Tb=function(a,b){return parseFloat(a+"."+b.join(""))},Ub={type:"other",description:"integer"},Vb=/^[0-9]/,Wb={type:"class",value:"[0-9]",description:"[0-9]"},Xb=function(a){return parseInt(a.join(""),10)},Yb={type:"other",description:"path"},Zb=function(a,b){return b=b[0],a&&b?(b.unshift(a),[!1,b].concat([["line",c()],["col",d()]])):[!0,b].concat([["line",c()],["col",d()]])},$b=function(a){return a.length>0?[!0,a[0]].concat([["line",c()],["col",d()]]):[!0,[]].concat([["line",c()],["col",d()]])},_b={type:"other",description:"key"},ac=/^[a-zA-Z_$]/,bc={type:"class",value:"[a-zA-Z_$]",description:"[a-zA-Z_$]"},cc=/^[0-9a-zA-Z_$\-]/,dc={type:"class",value:"[0-9a-zA-Z_$\\-]",description:"[0-9a-zA-Z_$\\-]"},ec=function(a,b){return a+b.join("")},fc={type:"other",description:"array"},gc=function(a){return a.join("")},hc=function(a){return a},ic=function(a,b){return b?b.unshift(a):b=[a],b},jc={type:"other",description:"array_part"},kc=function(a){return a},lc=function(a,b){return b?a.concat(b):a},mc={type:"other",description:"inline"},nc='"',oc={type:"literal",value:'"',description:'"\\""'},pc=function(){return["literal",""].concat([["line",c()],["col",d()]])},qc=function(a){return["literal",a].concat([["line",c()],["col",d()]])},rc=function(a){return["body"].concat(a).concat([["line",c()],["col",d()]])},sc=function(a){return["buffer",a]},tc={type:"other",description:"buffer"},uc=function(a,b){return["format",a,b.join("")].concat([["line",c()],["col",d()]])},vc={type:"any",description:"any character"},wc=function(a){return a},xc=function(a){return["buffer",a.join("")].concat([["line",c()],["col",d()]])},yc={type:"other",description:"literal"},zc=/^[^"]/,Ac={type:"class",value:'[^"]',description:'[^"]'},Bc=function(a){return a.join("")},Cc='\\"',Dc={type:"literal",value:'\\"',description:'"\\\\\\""'},Ec=function(){return'"'},Fc={type:"other",description:"raw"},Gc="{`",Hc={type:"literal",value:"{`",description:'"{`"'},Ic="`}",Jc={type:"literal",value:"`}",description:'"`}"'},Kc=function(a){return a},Lc=function(a){return["raw",a.join("")].concat([["line",c()],["col",d()]])},Mc={type:"other",description:"comment"},Nc="{!",Oc={type:"literal",value:"{!",description:'"{!"'},Pc="!}",Qc={type:"literal",value:"!}",description:'"!}"'},Rc=function(a){return["comment",a.join("")].concat([["line",c()],["col",d()]])},Sc=/^[#?\^><+%:@\/~%]/,Tc={type:"class",value:"[#?\\^><+%:@\\/~%]",description:"[#?\\^><+%:@\\/~%]"},Uc="{",Vc={type:"literal",value:"{",description:'"{"'},Wc="}",Xc={type:"literal",value:"}",description:'"}"'},Yc="[",Zc={type:"literal",value:"[",description:'"["'},$c="]",_c={type:"literal",value:"]",description:'"]"'},ad="\n",bd={type:"literal",value:"\n",description:'"\\n"'},cd="\r\n",dd={type:"literal",value:"\r\n",description:'"\\r\\n"'},ed="\r",fd={type:"literal",value:"\r",description:'"\\r"'},gd="\u2028",hd={type:"literal",value:"\u2028",description:'"\\u2028"'},id="\u2029",jd={type:"literal",value:"\u2029",description:'"\\u2029"'},kd=/^[\t\x0B\f \xA0\uFEFF]/,ld={type:"class",value:"[\\t\\x0B\\f \\xA0\\uFEFF]",description:"[\\t\\x0B\\f \\xA0\\uFEFF]"},md=0,nd=0,od=0,pd={line:1,column:1,seenCR:!1},qd=0,rd=[],sd=0;if("startRule"in S){if(!(S.startRule in U))throw new Error("Can't start parsing from rule \""+S.startRule+'".');V=U[S.startRule]}if(R=V(),R!==T&&md===a.length)return R;throw R!==T&&md<a.length&&g({type:"end",description:"end of input"}),h(null,rd,qd)}return a(b,Error),{SyntaxError:b,parse:c}}();return dust.parse=a.parse,a}),function(a,b){"object"==typeof exports?module.exports=b(require("./parser").parse,require("./dust")):b(a.dust.parse,a.dust)}(this,function(a,dust){function b(a){var b={};return o.filterNode(b,a)}function c(a,b){var c,d,e,f=[b[0]];for(c=1,d=b.length;d>c;c++)e=o.filterNode(a,b[c]),e&&f.push(e);return f}function d(a,b){var c,d,e,f,g=[b[0]];for(d=1,e=b.length;e>d;d++)f=o.filterNode(a,b[d]),f&&("buffer"===f[0]||"format"===f[0]?c?(c[0]="buffer"===f[0]?"buffer":c[0],c[1]+=f.slice(1,-2).join("")):(c=f,g.push(f)):(c=null,g.push(f)));return g}function e(a,b){return["buffer",q[b[1]],b[2],b[3]]}function f(a,b){return b}function g(){}function h(a,b){return dust.config.whitespace?b:null}function i(a,b){var c={name:b,bodies:[],blocks:{},index:0,auto:"h"};return"(function(){dust.register("+(b?'"'+b+'"':"null")+","+o.compileNode(c,a)+");"+j(c)+k(c)+"return body_0;})();"}function j(a){var b,c=[],d=a.blocks;for(b in d)c.push('"'+b+'":'+d[b]);return c.length?(a.blocks="ctx=ctx.shiftBlocks(blocks);","var blocks={"+c.join(",")+"};"):a.blocks=""}function k(a){var b,c,d=[],e=a.bodies,f=a.blocks;for(b=0,c=e.length;c>b;b++)d[b]="function body_"+b+"(chk,ctx){"+f+"return chk"+e[b]+";}body_"+b+".__dustBody=!0;";return d.join("")}function l(a,b){var c,d,e="";for(c=1,d=b.length;d>c;c++)e+=o.compileNode(a,b[c]);return e}function m(a,b,c){return"."+(dust._aliases[c]||c)+"("+o.compileNode(a,b[1])+","+o.compileNode(a,b[2])+","+o.compileNode(a,b[4])+","+o.compileNode(a,b[3])+")"
}function n(a){return a.replace(r,"\\\\").replace(s,'\\"').replace(t,"\\f").replace(u,"\\n").replace(v,"\\r").replace(w,"\\t")}var o={},p=dust.isArray;o.compile=function(c,d){if(!d&&null!==d)throw new Error("Template name parameter cannot be undefined when calling dust.compile");try{var e=b(a(c));return i(e,d)}catch(f){if(!f.line||!f.column)throw f;throw new SyntaxError(f.message+" At line : "+f.line+", column : "+f.column)}},o.filterNode=function(a,b){return o.optimizers[b[0]](a,b)},o.optimizers={body:d,buffer:f,special:e,format:h,reference:c,"#":c,"?":c,"^":c,"<":c,"+":c,"@":c,"%":c,partial:c,context:c,params:c,bodies:c,param:c,filters:f,key:f,path:f,literal:f,raw:f,comment:g,line:g,col:g},o.pragmas={esc:function(a,b,c){var d,e=a.auto;return b||(b="h"),a.auto="s"===b?"":b,d=l(a,c.block),a.auto=e,d}};var q={s:" ",n:"\n",r:"\r",lb:"{",rb:"}"};o.compileNode=function(a,b){return o.nodes[b[0]](a,b)},o.nodes={body:function(a,b){var c=a.index++,d="body_"+c;return a.bodies[c]=l(a,b),d},buffer:function(a,b){return".w("+x(b[1])+")"},format:function(a,b){return".w("+x(b[1]+b[2])+")"},reference:function(a,b){return".f("+o.compileNode(a,b[1])+",ctx,"+o.compileNode(a,b[2])+")"},"#":function(a,b){return m(a,b,"section")},"?":function(a,b){return m(a,b,"exists")},"^":function(a,b){return m(a,b,"notexists")},"<":function(a,b){for(var c=b[4],d=1,e=c.length;e>d;d++){var f=c[d],g=f[1][1];if("block"===g)return a.blocks[b[1].text]=o.compileNode(a,f[2]),""}return""},"+":function(a,b){return"undefined"==typeof b[1].text&&"undefined"==typeof b[4]?".block(ctx.getBlock("+o.compileNode(a,b[1])+",chk, ctx),"+o.compileNode(a,b[2])+", {},"+o.compileNode(a,b[3])+")":".block(ctx.getBlock("+x(b[1].text)+"),"+o.compileNode(a,b[2])+","+o.compileNode(a,b[4])+","+o.compileNode(a,b[3])+")"},"@":function(a,b){return".h("+x(b[1].text)+","+o.compileNode(a,b[2])+","+o.compileNode(a,b[4])+","+o.compileNode(a,b[3])+")"},"%":function(a,b){var c,d,e,f,g,h,i,j,k,l=b[1][1];if(!o.pragmas[l])return"";for(c=b[4],d={},j=1,k=c.length;k>j;j++)h=c[j],d[h[1][1]]=h[2];for(e=b[3],f={},j=1,k=e.length;k>j;j++)i=e[j],f[i[1][1]]=i[2][1];return g=b[2][1]?b[2][1].text:null,o.pragmas[l](a,g,d,f)},partial:function(a,b){return".p("+o.compileNode(a,b[1])+","+o.compileNode(a,b[2])+","+o.compileNode(a,b[3])+")"},context:function(a,b){return b[1]?"ctx.rebase("+o.compileNode(a,b[1])+")":"ctx"},params:function(a,b){for(var c=[],d=1,e=b.length;e>d;d++)c.push(o.compileNode(a,b[d]));return c.length?"{"+c.join(",")+"}":"{}"},bodies:function(a,b){for(var c=[],d=1,e=b.length;e>d;d++)c.push(o.compileNode(a,b[d]));return"{"+c.join(",")+"}"},param:function(a,b){return o.compileNode(a,b[1])+":"+o.compileNode(a,b[2])},filters:function(a,b){for(var c=[],d=1,e=b.length;e>d;d++){var f=b[d];c.push('"'+f+'"')}return'"'+a.auto+'"'+(c.length?",["+c.join(",")+"]":"")},key:function(a,b){return'ctx.get(["'+b[1]+'"], false)'},path:function(a,b){for(var c=b[1],d=b[2],e=[],f=0,g=d.length;g>f;f++)e.push(p(d[f])?o.compileNode(a,d[f]):'"'+d[f]+'"');return"ctx.getPath("+c+", ["+e.join(",")+"])"},literal:function(a,b){return x(b[1])},raw:function(a,b){return".w("+x(b[1])+")"}};var r=/\\/g,s=/"/g,t=/\f/g,u=/\n/g,v=/\r/g,w=/\t/g,x="undefined"==typeof JSON?function(a){return'"'+n(a)+'"'}:JSON.stringify;return dust.compile=o.compile,dust.filterNode=o.filterNode,dust.optimizers=o.optimizers,dust.pragmas=o.pragmas,dust.compileNode=o.compileNode,dust.nodes=o.nodes,o});

/* http://artifacts.bbcomcdn.com/bbcomcdn-common/2.1.21/bb.min.js */
(function(a){function b(){}function d(a,b){"function"!==typeof e[a]&&(e[a]=b)}var e;a.console||(a.console={});e=a.console;"function"!==typeof e.log&&(e.log=b);a=e.log;d("assert",a);d("count",b);d("debug",a);d("dir",a);d("error",a);d("_exception",a);d("group",b);d("groupCollapsed",b);d("groupEnd",b);d("info",a);d("profile",b);d("profileEnd",b);d("table",a);d("time",a);d("timeEnd",a);d("trace",a);d("warn",a)})(window);
(function(a,b){var d={tolerance:2,delay:100,glyphs:"",success:function(){},error:function(){},timeout:5E3,weight:"400",style:"normal"},e="display:block position:absolute top:-999px left:-999px font-size:48px width:auto height:auto line-height:normal margin:0 padding:0 font-variant:normal white-space:nowrap".split(" "),f=function(){this.fontFamily="";this.appended=!1;this.parent=this.sansSerif=this.serif=void 0;this.options={}};f.prototype.getMeasurements=function(){return{sansSerif:{width:this.sansSerif.offsetWidth,
height:this.sansSerif.offsetHeight},serif:{width:this.serif.offsetWidth,height:this.serif.offsetHeight}}};f.prototype.load=function(){function d(a){return e.concat(["font-weight:"+t.weight,"font-style:"+t.style]).concat("font-family:"+a).join(";")}function f(a,b,d){return Math.abs(a.width-b.offsetWidth)>d||Math.abs(a.height-b.offsetHeight)>d}var h=new Date,m=this,l=m.serif,n=m.sansSerif,r=m.parent,q=m.appended,p,t=m.options,w=t.reference,u='<div style="%s">AxmTYklsjo190QW</div>'.replace(/\%s/,d("sans-serif")),
v='<div style="%s">AxmTYklsjo190QW</div>'.replace(/\%s/,d("serif"));r||(r=m.parent=b.createElement("div"));r.innerHTML=u+v;n=m.sansSerif=r.firstChild;l=m.serif=n.nextSibling;t.glyphs&&(n.innerHTML+=t.glyphs,l.innerHTML+=t.glyphs);(function y(){w||(w=b.body);!q&&w&&(w.appendChild(r),q=m.appended=!0,p=m.getMeasurements(),n.style.fontFamily=m.fontFamily+", sans-serif",l.style.fontFamily=m.fontFamily+", serif");q&&p&&(f(p.sansSerif,n,t.tolerance)||f(p.serif,l,t.tolerance))?t.success():(new Date).getTime()-
h.getTime()>t.timeout?t.error():!q&&"requestAnimationFrame"in window?a.requestAnimationFrame(y):a.setTimeout(y,t.delay)})()};f.prototype.cleanFamilyName=function(a){return a.replace(/[\'\"]/g,"").toLowerCase()};f.prototype.cleanWeight=function(a){return""+({normal:"400",bold:"700"}[a]||a)};f.prototype.checkFontFaces=function(d){var e=this;b.fonts.forEach(function(b){e.cleanFamilyName(b.family)===e.cleanFamilyName(e.fontFamily)&&e.cleanWeight(b.weight)===e.cleanWeight(e.options.weight)&&b.style===
e.options.style&&b.load().then(function(){e.options.success();a.clearTimeout(d)})})};f.prototype.init=function(e,f){var h,m;for(m in d)f.hasOwnProperty(m)||(f[m]=d[m]);this.options=f;this.fontFamily=e;!f.glyphs&&"fonts"in b?(f.timeout&&(h=a.setTimeout(function(){f.error()},f.timeout)),this.checkFontFaces(h)):this.load()};a.FontFaceOnload=function(a,b){var d=new f;d.init(a,b);return d}})(this,this.document);
(function(a){var b;a.Namespace=a.Namespace||"Global";b=a.BB||{};a.BB=b;b.createNamespace=function(a){a=a.split(".");var e,f,g=b,k=[],h;f=a?a.length:0;for(e=0;e<f;e++)h=a[e],k.push(h),"BB"!==h&&(g[h]||(g[h]={}),g=g[h]);return g}})(window);
(function(a){function b(a){a=a.current();return"object"===typeof a&&!0===a.isSelect}function d(a,b){return"function"===typeof b?b.toString():b}function e(d,e,m,l,n){l=l||{};var r=m.block,q,p,t=l.filterOpType||"";if("undefined"!==typeof l.key)q=a.helpers.tap(l.key,d,e);else if(b(e))q=e.current().selectKey,e.current().isResolved&&(n=function(){return!1});else return g.log("No key specified for filter in:"+t+" helper "),d;p=a.helpers.tap(l.value,d,e);if(n(f(p,l.type,e),f(q,l.type,e))){b(e)&&(e.current().isResolved=
!0);if(r)return d.render(r,e);g.log("Missing body block in the "+t+" helper ")}else if(m["else"])return d.render(m["else"],e);return d}function f(a,b,d){if(a)switch(b||typeof a){case "number":return+a;case "string":return String(a);case "boolean":return Boolean("false"===a?!1:a);case "date":return new Date(a);case "context":return d.get(a)}return a}var g="undefined"!==typeof console?console:{log:function(){}};a.helpers={tap:function(a,b,d){var e=a;"function"===typeof a&&(!0===a.isFunction?e=a():(e=
"",b.tap(function(a){e+=a;return""}).render(a,d).untap(),""===e&&(e=!1)));return e},sep:function(a,b,d){return b.stack.index===b.stack.of-1?a:d.block?d.block(a,b):a},idx:function(a,b,d){return d.block?d.block(a,b.push(b.stack.index)):a},contextDump:function(b,e,f,l){l=l||{};f=l.to||"output";l=l.key||"current";f=a.helpers.tap(f,b,e);l=a.helpers.tap(l,b,e);e="full"===l?JSON.stringify(e.stack,d,2):JSON.stringify(e.stack.head,d,2);return"console"===f?(g.log(e),b):b.write(e)},"if":function(b,d,e,f){var n=
e.block,r=e["else"];if(f&&f.cond){f=f.cond;f=a.helpers.tap(f,b,d);if(eval(f)){if(n)return b.render(e.block,d);g.log("Missing body block in the if helper!");return b}if(r)return b.render(e["else"],d)}else g.log("No condition given in the if helper!");return b},math:function(b,d,e,f){if(f&&"undefined"!==typeof f.key&&f.method){var n=f.key,r=f.method,q=f.operand;f=f.round;var p=null,n=a.helpers.tap(n,b,d),q=a.helpers.tap(q,b,d);switch(r){case "mod":0!==q&&-0!==q||g.log("operand for divide operation is 0/-0: expect Nan!");
p=parseFloat(n)%parseFloat(q);break;case "add":p=parseFloat(n)+parseFloat(q);break;case "subtract":p=parseFloat(n)-parseFloat(q);break;case "multiply":p=parseFloat(n)*parseFloat(q);break;case "divide":0!==q&&-0!==q||g.log("operand for divide operation is 0/-0: expect Nan/Infinity!");p=parseFloat(n)/parseFloat(q);break;case "ceil":p=Math.ceil(parseFloat(n));break;case "floor":p=Math.floor(parseFloat(n));break;case "round":p=Math.round(parseFloat(n));break;case "abs":p=Math.abs(parseFloat(n));break;
default:g.log("method passed is not supported")}if(null!==p)return f&&(p=Math.round(p)),e&&e.block?b.render(e.block,d.push({isSelect:!0,isResolved:!1,selectKey:p})):b.write(p)}else g.log("Key is a required parameter for math helper along with method/operand!");return b},select:function(b,d,e,f){var n=e.block;if(f&&"undefined"!==typeof f.key){f=a.helpers.tap(f.key,b,d);if(n)return b.render(e.block,d.push({isSelect:!0,isResolved:!1,selectKey:f}));g.log("Missing body block in the select helper ")}else g.log("No key given in the select helper!");
return b},eq:function(a,b,d,f){f&&(f.filterOpType="eq");return e(a,b,d,f,function(a,b){return b===a})},ne:function(a,b,d,f){return f?(f.filterOpType="ne",e(a,b,d,f,function(a,b){return b!==a})):a},lt:function(a,b,d,f){if(f)return f.filterOpType="lt",e(a,b,d,f,function(a,b){return b<a})},lte:function(a,b,d,f){return f?(f.filterOpType="lte",e(a,b,d,f,function(a,b){return b<=a})):a},gt:function(a,b,d,f){return f?(f.filterOpType="gt",e(a,b,d,f,function(a,b){return b>a})):a},gte:function(a,b,d,f){return f?
(f.filterOpType="gte",e(a,b,d,f,function(a,b){return b>=a})):a},"default":function(a,b,d,f){f&&(f.filterOpType="default");return e(a,b,d,f,function(a,b){return!0})},size:function(b,d,e,f){d=0;var n;f=f||{};if((f=f.key)&&!0!==f)if(a.isArray(f))d=f.length;else if(!isNaN(parseFloat(f))&&isFinite(f))d=f;else if("object"===typeof f)for(n in d=0,f)Object.hasOwnProperty.call(f,n)&&d++;else d=(f+"").length;else d=0;return b.write(d)}}})("undefined"!==typeof exports?module.exports=require("dustjs-linkedin"):
dust);
(function(a,b){function d(a,d){var e=b.createElement(a||"div"),f;for(f in d)e[f]=d[f];return e}function e(a){for(var b=1,d=arguments.length;b<d;b++)a.appendChild(arguments[b]);return a}function f(a,b,d,e){var f=["opacity",b,~~(100*a),d,e].join("-");d=.01+d/e*100;e=Math.max(1-(1-a)/b*(100-d),a);var m=r.substring(0,r.indexOf("Animation")).toLowerCase();n[f]||(q.insertRule("@"+(m&&"-"+m+"-"||"")+"keyframes "+f+"{0%{opacity:"+e+"}"+d+"%{opacity:"+a+"}"+(d+.01)+"%{opacity:1}"+(d+b)%100+"%{opacity:"+a+
"}100%{opacity:"+e+"}}",q.cssRules.length),n[f]=1);return f}function g(a,b){var d=a.style,e,f;if(void 0!==d[b])return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(f=0;f<l.length;f++)if(e=l[f]+b,void 0!==d[e])return e}function k(a,b){for(var d in b)a.style[g(a,d)||d]=b[d];return a}function h(a){for(var b=1;b<arguments.length;b++){var d=arguments[b],e;for(e in d)void 0===a[e]&&(a[e]=d[e])}return a}function m(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;
return b}var l=["webkit","Moz","ms","O"],n={},r,q=function(){var a=d("style",{type:"text/css"});e(b.getElementsByTagName("head")[0],a);return a.sheet||a.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2E9,className:"spinner",top:"auto",left:"auto"},t=function u(a){if(!this.spin)return new u(a);this.opts=h(a||{},u.defaults,p)};t.defaults={};h(t.prototype,{spin:function(a){this.stop();var b=this,e=b.opts,f=b.el=k(d(0,{className:e.className}),
{position:"relative",width:0,zIndex:e.zIndex}),l=e.radius+e.length+e.width,n,g;a&&(a.insertBefore(f,a.firstChild||null),g=m(a),n=m(f),k(f,{left:("auto"==e.left?g.x-n.x+(a.offsetWidth>>1):parseInt(e.left,10)+l)+"px",top:("auto"==e.top?g.y-n.y+(a.offsetHeight>>1):parseInt(e.top,10)+l)+"px"}));f.setAttribute("aria-role","progressbar");b.lines(f,b.opts);if(!r){var h=0,q=e.fps,p=q/e.speed,t=(1-e.opacity)/(p*e.trail/100),A=p/e.lines;(function D(){h++;for(var a=e.lines;a;a--)b.opacity(f,e.lines-a,Math.max(1-
(h+a*A)%p*t,e.opacity),e);b.timeout=b.el&&setTimeout(D,~~(1E3/q))})()}return b},stop:function(){var a=this.el;a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0);return this},lines:function(a,b){function m(a,e){return k(d(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:e,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*l+b.rotate)+"deg) translate("+b.radius+"px,0)",borderRadius:(b.corners*b.width>>1)+"px"})}
for(var l=0,n;l<b.lines;l++)n=k(d(),{position:"absolute",top:1+~(b.width/2)+"px",transform:b.hwaccel?"translate3d(0,0,0)":"",opacity:b.opacity,animation:r&&f(b.opacity,b.trail,l,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&e(n,k(m("#000","0 0 4px #000"),{top:"2px"})),e(a,e(n,m(b.color,"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,b,d){b<a.childNodes.length&&(a.childNodes[b].style.opacity=d)}});(function(){function a(b,e){return d("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',
e)}var b=k(d("group"),{behavior:"url(#default#VML)"});!g(b,"transform")&&b.adj?(q.addRule(".spin-vml","behavior:url(#default#VML)"),t.prototype.lines=function(b,d){function f(){return k(a("group",{coordsize:n+" "+n,coordorigin:-l+" "+-l}),{width:n,height:n})}function m(b,n,g){e(h,e(k(f(),{rotation:360/d.lines*b+"deg",left:~~n}),e(k(a("roundrect",{arcsize:d.corners}),{width:l,height:d.width,left:d.radius,top:-d.width>>1,filter:g}),a("fill",{color:d.color,opacity:d.opacity}),a("stroke",{opacity:0}))))}
var l=d.length+d.width,n=2*l,g=2*-(d.width+d.length)+"px",h=k(f(),{position:"absolute",top:g,left:g});if(d.shadow)for(g=1;g<=d.lines;g++)m(g,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(g=1;g<=d.lines;g++)m(g);return e(b,h)},t.prototype.opacity=function(a,b,d,e){a=a.firstChild;e=e.shadow&&e.lines||0;a&&b+e<a.childNodes.length&&(a=(a=(a=a.childNodes[b+e])&&a.firstChild)&&a.firstChild)&&(a.opacity=d)}):r=g(b,"animation")})();a.Spinner=t})(window,document);
(function(a){a=a.BB.createNamespace;a("BB.App");a("BB.Core");a("BB.Forms");a("BB.Geom");a("BB.Helpers");a("BB.UI");a("BB.Util");a("BB.Const");a("BB.Controller");a("BB.Log");a("BB.Plugins");a("BB.Instances")})(window);
BB.TemplateCore=function(){var a={},b;return b=function(d,e){var f=/\W/.test(d)?new Function("obj","try{var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+d.replace(/[\r\t\n]/g," ").split("<?").join("\t").replace(/((^|\?>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)\?>/g,"',$1,'").split("\t").join("');").split("?>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');}catch(e){BB.Log.error(\"Template Render Error!\");BB.Log.error(e);}"):a[d]=a[d]||b(d);return e?f(e):f}};
(function(a){a.extend(a,{clearwatermarks:function(){a("[wmwrap='true']").find("input,textarea").watermark({remove:!0})},addwatermarks:function(){a("[data-watermark]").each(function(b,d){a(d).watermark(a(d).attr("data-watermark"))})},watermark:function(b){var d,e,f,g,k;b.el=a(b.el);if(b.remove)"true"===b.el.parent().attr("wmwrap")&&b.el.parent().replaceWith(b.el);else if("true"!==b.el.parent().attr("wmwrap")){b.el=b.el.wrap("<span class='wmwrap' wmwrap='true' style='position:relative;display:block;'/>");
k=a("<label class='watermark' />");b.html&&k.html(b.html);b.cls&&k.addClass(b.cls);b.css&&k.css(b.css);k.css({position:"absolute",left:"3px",top:parseInt(b.el.css("paddingTop"),10),display:"inline",cursor:"text"});b.el.is("TEXTAREA")&&(a.browser.msie&&k.css("width",b.el.width()),(a.browser.mozilla||a.browser.safari)&&k.css("top",""));b.cls||b.css||k.css("color","#bbb");d=function(){b.el.attr("disabled")||k.hide()};e=function(){b.el.val()?k.hide():k.show()};f=function(){b.el.focus()};if(b.inherit)if("string"===
typeof b.inherit)k.css(b.inherit,b.el.css(b.inherit));else for(g=0;g<b.inherit.length;g++)k.css(b.inherit[g],b.el.css(b.inherit[g]));b.el.focus(d).blur(e);k.click(f);b.el.before(k);b.el.val()&&k.hide()}return b.el}});a.fn.watermark=function(b){return this.each(function(){if("string"===typeof b)try{b=eval("("+b+")")}catch(d){b={html:b}}b.el=this;return a.watermark(b)})}})(jQuery);
(function(a){a.ui&&a.widget("ui.selectmenu",{getter:"value",version:"1.8",eventPrefix:"selectmenu",options:{transferClasses:!0,style:"dropdown",positionOptions:{my:"left top",at:"left bottom",offset:null},width:null,menuWidth:null,handleWidth:26,maxHeight:null,icons:null,format:null,bgImage:function(){},wrapperElement:""},_create:function(){var b=this,d=this.options,e=this.element.attr("id")||"ui-selectmenu-"+Math.random().toString(16).slice(2,10);this.ids=[e+"-button",e+"-menu"];this._safemouseup=
!0;this.newelement=a('<a class="'+this.widgetBaseClass+' ui-widget ui-state-default ui-corner-all" id="'+this.ids[0]+'" role="button" href="#" tabindex="0" aria-haspopup="true" aria-owns="'+this.ids[1]+'"></a>').insertAfter(this.element);this.newelement.wrap(d.wrapperElement);(e=this.element.attr("tabindex"))&&this.newelement.attr("tabindex",e);this.newelement.data("selectelement",this.element);this.selectmenuIcon=a('<span class="'+this.widgetBaseClass+'-icon ui-icon"></span>').prependTo(this.newelement).addClass("popup"==
d.style?"ui-icon-triangle-2-n-s":"ui-icon-triangle-1-s");a("label[for="+this.element.attr("id")+"]").attr("for",this.ids[0]).bind("click",function(){b.newelement[0].focus();return!1});this.newelement.bind("mousedown",function(a){b._toggle(a,!0);"popup"==d.style&&(b._safemouseup=!1,setTimeout(function(){b._safemouseup=!0},300));return!1}).bind("click",function(){return!1}).keydown(function(d){var e=!0;switch(d.keyCode){case a.ui.keyCode.ENTER:e=!0;break;case a.ui.keyCode.SPACE:e=!1;b._toggle(d);break;
case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1;b._moveSelection(-1);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.RIGHT:e=!1;b._moveSelection(1);break;case a.ui.keyCode.TAB:e=!0;break;default:e=!0,b._typeAhead(d.keyCode,"mouseup")}return e}).bind("mouseover focus",function(){d.disabled||a(this).addClass(b.widgetBaseClass+"-focus ui-state-hover")}).bind("mouseout blur",function(){d.disabled||a(this).removeClass(b.widgetBaseClass+"-focus ui-state-hover")});a(document).mousedown(function(a){b.close(a)});
this.element.click(function(){this._refreshValue()}).focus(function(){this.newelement&&this.newelement[0].focus()});this.list=a('<ul class="'+b.widgetBaseClass+"-menu ui-widget ui-widget-content"+("dropdown"==d.style?" ui-corner-bottom":" ui-corner-all")+'" aria-hidden="true" role="listbox" aria-labelledby="'+this.ids[0]+'" id="'+this.ids[1]+'"></ul>').appendTo("body");this.list.wrap(d.wrapperElement);var f=[];this.element.find("option").each(function(){f.push({value:a(this).attr("value"),text:b._formatText(jQuery(this).text()),
selected:a(this).attr("selected"),classes:a(this).attr("class"),parentOptGroup:a(this).parent("optgroup").attr("label"),bgImage:d.bgImage.call(a(this))})});for(var g="popup"==b.options.style?" ui-state-active":"",e=0;e<f.length;e++){var k=a('<li role="presentation"><a href="#" tabindex="-1" role="option" aria-selected="false">'+f[e].text+"</a></li>").data("index",e).addClass(f[e].classes).data("optionClasses",f[e].classes||"").mouseup(function(d){if(b._safemouseup){var e=a(this).data("index")!=b._selectedIndex();
b.index(a(this).data("index"));b.select(d);e&&b.change(d);b.close(d,!0)}return!1}).click(function(){return!1}).bind("mouseover focus",function(){b._selectedOptionLi().addClass(g);b._focusedOptionLi().removeClass(b.widgetBaseClass+"-item-focus ui-state-hover");a(this).removeClass("ui-state-active").addClass(b.widgetBaseClass+"-item-focus ui-state-hover")}).bind("mouseout blur",function(){a(this).is(b._selectedOptionLi().selector)&&a(this).addClass(g);a(this).removeClass(b.widgetBaseClass+"-item-focus ui-state-hover")});
if(f[e].parentOptGroup){var h=b.widgetBaseClass+"-group-"+f[e].parentOptGroup.replace(/[^a-zA-Z0-9]/g,"");this.list.find("li."+h).size()?this.list.find("li."+h+":last ul").append(k):a('<li role="presentation" class="'+b.widgetBaseClass+"-group "+h+'"><span class="'+b.widgetBaseClass+'-group-label">'+f[e].parentOptGroup+"</span><ul></ul></li>").appendTo(this.list).find("ul").append(k)}else k.appendTo(this.list);this.list.bind("mousedown mouseup",function(){return!1});if(d.icons)for(var m in d.icons)k.is(d.icons[m].find)&&
(k.data("optionClasses",f[e].classes+" "+b.widgetBaseClass+"-hasIcon").addClass(b.widgetBaseClass+"-hasIcon"),h=d.icons[m].icon||"",k.find("a:eq(0)").prepend('<span class="'+b.widgetBaseClass+"-item-icon ui-icon "+h+'"></span>'),f[e].bgImage&&k.find("span").css("background-image",f[e].bgImage))}this.list.find("li:last").addClass("ui-corner-bottom");"popup"==d.style&&this.list.find("li:first").addClass("ui-corner-top");d.transferClasses&&(m=this.element.attr("class")||"",this.newelement.add(this.list).addClass(m));
m=this.element.width();this.newelement.width(d.width?d.width:m);"dropdown"==d.style?this.list.width(d.menuWidth?d.menuWidth:d.width?d.width:m):this.list.width(d.menuWidth?d.menuWidth:d.width?d.width-d.handleWidth:m-d.handleWidth);d.maxHeight?d.maxHeight<this.list.height()&&this.list.height(d.maxHeight):!d.format&&a(window).height()/3<this.list.height()&&(d.maxHeight=a(window).height()/3,this.list.height(d.maxHeight));this._optionLis=this.list.find("li:not(."+b.widgetBaseClass+"-group)");this.list.keydown(function(d){var e=
!0;switch(d.keyCode){case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1;b._moveFocus(-1);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.RIGHT:e=!1;b._moveFocus(1);break;case a.ui.keyCode.HOME:e=!1;b._moveFocus(":first");break;case a.ui.keyCode.PAGE_UP:e=!1;b._scrollPage("up");break;case a.ui.keyCode.PAGE_DOWN:e=!1;b._scrollPage("down");break;case a.ui.keyCode.END:e=!1;b._moveFocus(":last");break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:e=!1;b.close(d,!0);a(d.target).parents("li:eq(0)").trigger("mouseup");
break;case a.ui.keyCode.TAB:e=!0;b.close(d,!0);break;case a.ui.keyCode.ESCAPE:e=!1,b.close(d,!0)}return e});"dropdown"==d.style?(this.newelement.addClass(b.widgetBaseClass+"-dropdown"),this.list.addClass(b.widgetBaseClass+"-menu-dropdown")):(this.newelement.addClass(b.widgetBaseClass+"-popup"),this.list.addClass(b.widgetBaseClass+"-menu-popup"));this.element.hide();1==this.element.attr("disabled")&&this.disable();this.index(this._selectedIndex());d.waterMark?this.newelement.prepend('<span class="'+
b.widgetBaseClass+'-status">'+d.waterMark+"</span>"):this.newelement.prepend('<span class="'+b.widgetBaseClass+'-status">'+f[this._selectedIndex()].text+"</span>");window.setTimeout(function(){b._refreshPosition()},200);a(window).resize(function(){b._refreshPosition()})},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled").unbind("click");a("label[for="+this.newelement.attr("id")+"]").attr("for",
this.element.attr("id")).unbind("click");this.newelement.remove();this.list.remove();this.element.show();a.Widget.prototype.destroy.apply(this,arguments)},_typeAhead:function(b,d){var e=this;e._prevChar||(e._prevChar=["",0]);var f=String.fromCharCode(b);c=f.toLowerCase();var g=!1;this.list.find("li a").each(function(b){if(!g){var h=a(this).text();if(0==h.indexOf(f)||0==h.indexOf(c))e._prevChar[0]==f?e._prevChar[1]<b&&(g=!0,a(this).trigger(d),e._prevChar[1]=b):(g=!0,a(this).trigger(d),e._prevChar[1]=
b)}});this._prevChar[0]=f},_uiHash:function(){var b=this.index();return{index:b,option:a("option",this.element).get(b),value:this.element[0].value}},open:function(a){"true"!=this.newelement.attr("aria-disabled")&&(this._refreshPosition(),this._closeOthers(a),this.newelement.addClass("ui-state-active"),this.options.wrapperElement?this.list.parent().appendTo("body"):this.list.appendTo("body"),this.list.addClass(this.widgetBaseClass+"-open").attr("aria-hidden",!1).find("li:not(."+this.widgetBaseClass+
"-group):eq("+this._selectedIndex()+") a")[0].focus(),"dropdown"==this.options.style&&this.newelement.removeClass("ui-corner-all").addClass("ui-corner-top"),this._refreshPosition(),this._trigger("open",a,this._uiHash()))},close:function(a,d){this.newelement.is(".ui-state-active")&&(this.newelement.removeClass("ui-state-active"),this.list.attr("aria-hidden",!0).removeClass(this.widgetBaseClass+"-open"),"dropdown"==this.options.style&&this.newelement.removeClass("ui-corner-top").addClass("ui-corner-all"),
d&&this.newelement.focus(),this._trigger("close",a,this._uiHash()))},change:function(a){this.element.trigger("change");this._trigger("change",a,this._uiHash())},select:function(a){this._trigger("select",a,this._uiHash())},_closeOthers:function(b){a("."+this.widgetBaseClass+".ui-state-active").not(this.newelement).each(function(){a(this).data("selectelement").selectmenu("close",b)});a("."+this.widgetBaseClass+".ui-state-hover").trigger("mouseout")},_toggle:function(a,d){this.list.is("."+this.widgetBaseClass+
"-open")?this.close(a,d):this.open(a)},_formatText:function(a){return this.options.format?this.options.format(a):a},_selectedIndex:function(){return this.element[0].selectedIndex},_selectedOptionLi:function(){return this._optionLis.eq(this._selectedIndex())},_focusedOptionLi:function(){return this.list.find("."+this.widgetBaseClass+"-item-focus")},_moveSelection:function(a){a=parseInt(this._selectedOptionLi().data("index"),10)+a;return this._optionLis.eq(a).trigger("mouseup")},_moveFocus:function(a){a=
isNaN(a)?parseInt(this._optionLis.filter(a).data("index"),10):parseInt(this._focusedOptionLi().data("index")||0,10)+a;0>a&&(a=0);a>this._optionLis.size()-1&&(a=this._optionLis.size()-1);var d=this.widgetBaseClass+"-item-"+Math.round(1E3*Math.random());this._focusedOptionLi().find("a:eq(0)").attr("id","");this._optionLis.eq(a).find("a:eq(0)").attr("id",d).focus();this.list.attr("aria-activedescendant",d)},_scrollPage:function(a){var d=Math.floor(this.list.outerHeight()/this.list.find("li:first").outerHeight());
this._moveFocus("up"==a?-d:d)},_setOption:function(a,d){this.options[a]=d;"disabled"==a&&(this.close(),this.element.add(this.newelement).add(this.list)[d?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",d))},index:function(a){if(arguments.length)this.element[0].selectedIndex=a,this._refreshValue();else return this._selectedIndex()},value:function(a){if(arguments.length)"number"==typeof a?this.index(a):"string"==typeof a&&(this.element[0].value=
a,this._refreshValue());else return this.element[0].value},_refreshValue:function(){var a="popup"==this.options.style?" ui-state-active":"",d=this.widgetBaseClass+"-item-"+Math.round(1E3*Math.random());this.list.find("."+this.widgetBaseClass+"-item-selected").removeClass(this.widgetBaseClass+"-item-selected"+a).find("a").attr("aria-selected","false").attr("id","");this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-selected"+a).find("a").attr("aria-selected","true").attr("id",d);var a=this.newelement.data("optionClasses")?
this.newelement.data("optionClasses"):"",e=this._selectedOptionLi().data("optionClasses")?this._selectedOptionLi().data("optionClasses"):"";this.newelement.removeClass(a).data("optionClasses",e).addClass(e).find("."+this.widgetBaseClass+"-status").html(this._selectedOptionLi().find("a:eq(0)").html());this.list.attr("aria-activedescendant",d)},_refreshPosition:function(){var a=this.options;if("popup"==a.style&&!a.positionOptions.offset)var d=this.list.find("li:not(.ui-selectmenu-group):eq("+this._selectedIndex()+
")"),d="0 -"+(d.outerHeight()+d.offset().top-this.list.offset().top);this.list.css({zIndex:this.element.zIndex()}).position({of:a.positionOptions.of||this.newelement,my:a.positionOptions.my,at:a.positionOptions.at,offset:a.positionOptions.offset||d})}});a.ui||setTimeout(function(){a("div#searchCon").css("overflow","visible")},1E3)})(jQuery);
(function(a){var b={initialize:function(){try{return this.each(function(){if(a(this).data("child-id"))a(this).data("fixed-height")||a(this).data("fixed-height",!1),a(this).data("state",a("#"+a(this).data("child-id")).css("display")),a(this).data("height",a("#"+a(this).data("child-id")).height()),a("#"+a(this).data("child-id")).height(0);else return!1;a(this).bind("click",b.handleClick.bind(this))})}catch(d){return!1}},handleClick:function(d){(d?d:window.event).preventDefault();d="#"+a(this).data("child-id");
"none"!==a(this).data("state")?(a(this).data("height",a("#"+a(this).data("child-id")).height()),a(this).showHide("doAnimation",{height:0},d)):(a(d).css("display","block"),a(this).showHide("doAnimation",{height:a(this).data("height")},d));return!1},doAnimation:function(d,b){a(b).stop(!0).animate(d,"fast",function(){0===d.height?a(b).css("display","none"):!1===a(this).data("fixed-height")&&a(b).height("auto");a(this).data("state",a(b).css("display"));a(this).showHide("updateState",a(this).data("state"))}.bind(this))},
updateState:function(b){"block"!==b||a(this).hasClass("opened")?a(this).removeClass("opened"):a(this).addClass("opened")}};a.fn.showHide=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof d&&d)a.error("Method "+d+" does not exist on BBCOM jQuery.showHide");else return b.initialize.apply(this,arguments)}})(jQuery);
(function(a){a.fn.eventTrigger=function(){return this.each(function(){var b=this;this.initialize=function(){a(b).data("link")&&a(b).data("message")&&a(b).bind("click",this.sendMessage.bind(this));return b};this.sendMessage=function(d){(d||window.event).preventDefault();BB.Controller.Messenger.sendMessage(a(b).data("link"),a(b).data("message"));return!1};return this.initialize()})}})(jQuery);
function checkform(a){if(""===a.username.value)return alert("Please enter your Username or Email Address."),!1;if(""===a.password.value)return alert("Please enter your Password."),!1;BB.Util.md5.md5hashAuto(a.password,a.password_md5,void 0,0);return!0}
(function(a){a.fn.imageViewer=function(b){return this.each(function(){var d=this,e="IE"===BB.Util.currentBrowser.substring(0,2)?0:1;this.initialize=function(){a(this).unbind("click").bind("click",this.viewImage.bind(this))};this.viewImage=function(b){BB.Helpers.hideInputModal.hideControls(["embed","object"]);(b?b:window.event).preventDefault();var g=a(this).attr("href")||a(this).attr("src");if("undefined"!==typeof g&&g){TINY.box.show('<img src="http://assets.bodybuilding.com/common/images/loading-icon-transparent.gif" />',
0,0,0,e);try{var k=new Image;k.onload=function(){try{TINY.box.show(d.buildTemplate(g,this.width,this.height),0,0,0,e)}catch(a){TINY.box.hide()}};k.onerror=function(){TINY.box.hide()};k.src=g}catch(h){TINY.box.hide()}}};TINY.box.onClosed=function(){BB.Helpers.hideInputModal.showControls()};this.buildTemplate=function(a,d,e){d='<div class="bb-image-modal" style="width: '+d+"; height: "+(e+20)+';">';if(!b||b.showClose)d+='<div class="modal-close"><a class="font-red event-trigger" onclick="javascript: TINY.box.hide(); return false;"><span class="close-text">Close</span> <span class="close-button">X</span></a></div>';
d=d+'<div class="clearFloatNoHeight"></div>'+('<img src="'+a+'" /><br />');return d+="</div>"};this.initialize()})}})(jQuery);
(function(a){a.fn.bbVideoModal=function(){return this.each(function(){this.buildScript=function(a,d){var e=a.getElementsByTagName("head")[0],f=a.createElement("script");f.src="http://videos.bodybuilding.com/bbcomUtil/ajax.php?action=getVideoInfoForEmbedWidget&vKey="+d;f.type="text/javascript";e.appendChild(f)};this.appendEmbedScript=function(a){var d=a.getElementsByTagName("div")[0];a=a.createElement("script");a.src="http://assets.bodybuilding.com/videos/javascript/min/external-video-embed.js";a.type=
"text/javascript";d.appendChild(a)};this.TINYCallBack=function(b,d){var e=document.getElementById("video-frame"),e=e.contentWindow?e.contentWindow:e.contentDocument.document?e.contentDocument.document:e.contentDocument;e.document.open();e.document.write(b);e.document.close();this.appendEmbedScript(e.document);a.browser.mozilla&&this.buildScript(e.document,a(this).data("vid-key"))};this.handleClick=function(b){(b?b:window.event).preventDefault();var d='<div style="clear:both;float:right;margin:-5px 0 5px;width:100px;"><a style="float:right;font-size:11px;font-family:Arial,sans-serif;line-height:1;margin-right:5px;width:45px;color:#A71930;text-decoration:none;" onclick="parent.window.TINY.box.hide();" onmouseover="this.style.textDecoration=\'underline\';this.style.cursor=\'pointer\'" onmouseout="this.style.textDecoration=\'none\'"><span style="float:left;width:33px;">Close</span><span style="background-image:url(http://assets.bodybuilding.com/store/images/common/store-sprite.png);background-position:0 0;display:block;float:right;height:12px;text-indent:-9999px;width:12px;">X</span></a></div><div style="clear:both;display:block;font-size:0;height:0;line-height:0;overflow:hidden;width:0;"></div><div class="BBCOMVideoEmbed" style="width:452px;height:361px;margin:0 0 0 6px;" data-video-key="'+
a(this).data("vid-key")+'" data-autoplay="true" data-thumbnail-url="'+a(this).data("vid-thumb")+'"></div>';TINY.box.onShown=function(){this.TINYCallBack.call(this,d,'<script type="text/javascript" src="http://assets.bodybuilding.com/videos/javascript/min/external-video-embed.js">\x3c/script>')}.bind(this);a("#tinymask").live("click",function(){a("#video-frame").contents().find("html").html("")});TINY.box.show('<iframe id="video-frame" style="width: 480px; height: 400px;" scrolling="no" frameborder="0" border="0" src="about:blank"></iframe>',
0,0,0,1)};this.initialize=function(){if("undefined"===typeof TINY)return!1;a(this).bind("click",this.handleClick.bind(this));a(this).data("vid-key",a(this).attr("data-vid-key"));a(this).data("vid-thumb",a(this).attr("data-vid-thumb"));return this};return this.initialize()})}})(jQuery);
(function(a){a.fn.bbRotator=function(b){var d=a.extend({},{horizontal:!0,delay:5,speed:"fast",width:null,controls:!0,controlsLocation:"inside",forwardBtn:!0,reverseBtn:!0,playBtn:!0,tabs:[]},b||{});return this.each(function(){var b=this,f=0,g=a(b).find("> ul > li").length,k=!1,h=!1,m=0;this.init=function(){b.buildStyles();b.beginTimer();d.controls&&b.addControls();b.handleEvents()};this.addControls=function(){var f=a("<div />",{id:"bb-rotator-controls",html:function(){var a;a="<ul>"+(d.reverseBtn?
'<li class="default"><span id="bb-rotator-reverse"></span></li>':"");a+=d.playBtn?'<li class="default"><span id="bb-rotator-pause"></span></li>':"";a+=d.forwardBtn?'<li class="default"><span id="bb-rotator-forward"></span></li>':"";return a+"</ul>"},css:{"-moz-user-select":"none"},onselectstart:function(){return!1}});0<d.tabs.length&&b.addTabs();"outside"===d.controlsLocation?(f.addClass("bb-controls-outside"),a(b).after(f)):a(b).append(f)};this.addTabs=function(){var f=a("<div />",{id:"bb-rotator-tabs",
html:function(){var b="<ul>",e="default";a.each(d.tabs,function(a,d){e=0===a?"active":"default";b+='<li class="'+e+'" data-tab="'+a+'"><span>'+d+"</span></li>"});return b+="</ul>"}});a(b).after(f)};this.handleEvents=function(){a("div#bb-rotator-wrap").bind("mouseenter",function(){k||b.pauseTimer()}).bind("mouseleave",function(){k||b.beginTimer()});a("div#bb-rotator-wrap").find("div#bb-rotator-controls ul li").live("mouseenter",function(){a(this).removeClass("default").addClass("hover")}).live("mouseleave",
function(){a(this).removeClass("hover").addClass("default")}).end().find('div#bb-rotator-controls ul li:has("span#bb-rotator-pause")').live("click",function(){b.pauseTimer();k=!0;a("span",this).attr("id","bb-rotator-play");a("div#bb-rotator-wrap").find("div#bb-rotator-tabs ul li").removeClass("hover").addClass("default")}).end().find('div#bb-rotator-controls ul li:has("span#bb-rotator-play")').live("click",function(){k=!1;a("span",this).attr("id","bb-rotator-pause");a("div#bb-rotator-wrap").find("div#bb-rotator-tabs ul li").removeClass("hover").addClass("default")}).end().find('div#bb-rotator-controls ul li:has("span#bb-rotator-forward")').live("click",
function(){a.fn.bbRotator.forward();a("div#bb-rotator-wrap").find("div#bb-rotator-tabs ul li").removeClass("hover").addClass("default")}).end().find('div#bb-rotator-controls ul li:has("span#bb-rotator-reverse")').live("click",function(){a.fn.bbRotator.reverse();a("div#bb-rotator-wrap").find("div#bb-rotator-tabs ul li").removeClass("hover").addClass("default")}).end().find("div#bb-rotator-tabs ul li:not(.active)").live("mouseenter",function(){a(this).removeClass("default").addClass("hover")}).live("mouseleave",
function(){a(this).removeClass("hover").addClass("default")}).live("click",function(){var d=a(this).attr("data-tab");a(this).addClass("active").siblings().removeClass("active hover").addClass("default");b.slideTo(d)})};this.pauseTimer=function(){clearInterval(f)};this.beginTimer=function(){f=setInterval(a.fn.bbRotator.forward,1E3*d.delay)};a.fn.bbRotator.forward=function(f){if(!h){h=!0;f=f||1;if(a(b).find(" > ul > li:last").offset().left<=a(b).offset().left)if(0<d.tabs.length)a(b).find(" > ul").stop().animate({"margin-left":"0"},
d.speed,function(){h=!1});else{var n=a(b).find(" > ul > li:first");n.appendTo(a(" > ul",b));a(" > ul",b).css({width:a(" > ul",b).width()+n.width(),"margin-left":-((g-2)*n.width())});a(b).find(" > ul").stop().animate({"margin-left":"-="+a(b).width()*f},d.speed,function(){h=!1})}else a(b).find(" > ul").stop().animate({"margin-left":"-="+a(b).width()*f},d.speed,function(){h=!1});2<=m&&(m=-1);m=parseFloat(m)+parseFloat(f);b.switchTab()}};a.fn.bbRotator.reverse=function(f){if(!h){h=!0;f=f||1;if(a(b).find(" > ul > li:first").offset().left>=
a(b).offset().left)if(0<d.tabs.length)a(b).find(" > ul").stop().animate({"margin-left":-(a(b).width()*(a(b).find(" > ul > li").length-1))},d.speed,function(){h=!1});else{if(a(b).find(" > ul > li:first").offset().left>=a(b).offset().left){var g=a(b).find(" > ul > li:last");g.prependTo(a(" > ul",b));a(" > ul",b).css({"margin-left":-g.width()});a(b).find(" > ul").stop().animate({"margin-left":"+="+a(b).width()*f},d.speed,function(){h=!1})}}else a(b).find(" > ul").stop().animate({"margin-left":"+="+a(b).width()*
f},d.speed,function(){h=!1});0>=m&&(m=3);m=parseFloat(m)-parseFloat(f);b.switchTab()}};this.slideTo=function(b){if(m!=b){var d=Math.abs(1*(b-m));b>m?a.fn.bbRotator.forward(d):b<m&&a.fn.bbRotator.reverse(d)}m=b};this.switchTab=function(){0<d.tabs.length&&a("div#bb-rotator-wrap").find("div#bb-rotator-tabs ul li:nth-child("+(m+1)+")").addClass("active").siblings().removeClass("active")};this.buildStyles=function(){var f=d.width||a(b).width(),m=a(b).find("> ul > li").length,m=f*m,g=d.horizontal?"left":
"none";a(" > ul",b).css({width:m});a(" > ul > li",b).css({width:f,"float":g}).each(function(b,d){a(this).attr("data-slide",b)});a(b).wrap('<div id="bb-rotator-wrap" />').after('<div class="clearFloatNoHeight"></div>');(0<d.tabs.length||"outside"===d.controlsLocation)&&a("div#bb-rotator-wrap").css({"margin-bottom":"40px"})};this.init()})}})(jQuery);
(function(a){a.fn.maxCharacters=function(b){var d={maxChar:2500,overflow:!1,countdown:void 0};a.extend(d,b);return this.each(function(){var b=!1,f=!1;a(this).bind("keypress",function(a){if(!b&&!this.checkIfSelection()&&!f&&!1===d.overflow)return this.value.length<d.maxChar}.bind(this));a(this).bind("keyup paste",function(a){this.value.length>d.maxChar&&!1===d.overflow&&(this.value=this.value.substring(0,d.maxChar));void 0!==d.countdown&&"function"===typeof d.countdown&&d.countdown(d.maxChar-this.value.length)}.bind(this));
a(this).bind("keydown",function(a){var d=a.charCode||a.keyCode;b=8===d||46===d;f=a.ctrlKey}.bind(this));void 0!==d.countdown&&"function"===typeof d.countdown&&d.countdown(d.maxChar-this.value.length);this.checkIfSelection=function(){try{return-1!==BB.Util.currentBrowser.indexOf("IE")?"Text"===document.selection.type:this.selectionStart!==this.selectionEnd}catch(a){return!1}}})}})(jQuery);
(function(a){a.fn.faspWizard=function(){return this.each(function(b,d){$this=this;this.nextSlide=function(b){a(b).closest("li").animate({width:"30"},250).removeAttr("id");a(b).closest("li").next().animate({width:"340"},245).attr("id","wizard-open-handle");a(b).closest("li").addClass("clicked-wizard");a(b).closest("li").next().find("div.fap-hidden-content").css("display","none")};this.previous=function(b){b=b?b:window.event;b.preventDefault();b=b.target?b.target:b.srcElement;var d=a("ul.wizard-steps-holder").index(a("#wizard-open-handle"));
a(b).closest("li").hasClass("clicked-wizard")&&(a("#wizard-open-handle").closest("li").animate({width:"30"},250).removeAttr("id"),a(b).closest("li").animate({width:"340"},245).attr("id","wizard-open-handle"),a(b).closest("ul").find(a("li").slice(d)).find(".fap-hidden-content").css("display","none"),a(b).closest("li").removeClass("clicked-wizard"),a("ul.wizard-steps-holder").index(a(b).closest("li")),a("ul.wizard-steps-holder").find(a("li").slice(d-1)).removeClass("clicked-wizard"))};this.handleMouseOver=
function(){a(this).closest("li").hasClass("clicked-wizard")?a(this).closest("li").css("cursor","pointer"):a(this).closest("li").css("cursor","default")};this.forward=function(b){b=b?b:window.event;b.preventDefault();b=b.target?b.target:b.srcElement;var d=a(b).data("category")?a(b).data("category"):a(b).attr("href");this.nextSlide(b);a("div[id*="+d+"]").css("display","block")};this.setCookieAndGo=function(b){b=b?b:window.event;b=a(b.target?b.target:b.srcElement).attr("data-profile");document.cookie=
"FAP="+b+";"};a(".wizard-steps-link a[class!=fap-plan-link]",this).bind("click",this.forward.bind(this));a(".wizard-steps-link a[class=fap-plan-link]",this).bind("click",this.setCookieAndGo.bind(this));a(".wizard-steps-handle-title",this).bind("click",this.previous.bind(this)).bind("mouseover",this.handleMouseOver.bind(this))})}})(jQuery);
(function(a){a.fn.bodyspaceComment=function(b){var d=a.extend({focusWidth:407,focusHeight:0,elementsToHide:""},b);return this.each(function(){var b=this,f=a(this),g=0;this.init=function(){g=f.width();origHeight=f.height();b.removeDisplay();f.bind("focus.bodyspaceComment",b.addDisplay).bind("blur.bodyspaceComment",b.removeDisplay)};this.removeDisplay=function(){""===f.val()&&f.css("width",g+"px").css("height",origHeight+"px").parents("div.user-feed-comment").find("div.bodyspace-comment-submit-button, div.feed-comment-image"+
d.elementsToHide).css("display","none")};this.addDisplay=function(){f.css("width",d.focusWidth+"px").css("height",(0===d.focusHeight?origHeight:d.focusHeight)+"px").parents("div.user-feed-comment").find("div.bodyspace-comment-submit-button, div.feed-comment-image"+d.elementsToHide).css("display","block")};b.init()})}})(jQuery);
(function(a){a.fn.bbVideoReplacement=function(){return this.each(function(a,d){var e=document.createElement("script");e.setAttribute("type","text/javascript");e.setAttribute("src","//assets.bodybuilding.com/videos/javascript/min/external-video-embed.js");d.appendChild(e)})}})(jQuery);
(function(a){a.fn.jamesBrownDropdown=function(b){var d=a.extend({subclass:"",easing:"linear",speed:"fast",onGetDown:a.noop,onGetOnUp:a.noop,onSelect:a.noop},b);return this.each(function(){var b=this,f=a(this),g=!1;this.sequinCape=this.JamesBDDHead=this.JamesBDD="";this.init=function(){this.hideSelect();this.createJamesBDD();this.setEvents()};this.hideSelect=function(){f.hide()};this.createJamesBDD=function(){b.sequinCape=a("<ul>").addClass("sequin-cape").css({display:"none"});b.JamesBDD=a("<div>").addClass("JamesBDD").css({visibility:"hidden",
display:"inline-block"});b.JamesBDDHead=a("<div>").addClass("james-head").css("display","block");b.JamesBDD.attr("tabindex","0");""!==d.subclass&&b.JamesBDD.addClass(d.subclass);f.children("option").each(function(d,f){b.sequinCape.append('<li class="capeLi'+d+'"><a href="'+a(f).val()+'">'+a(f).text()+"</a></li>")});b.JamesBDDHead.html(f.children("option:selected").text());b.JamesBDD.append(b.JamesBDDHead);b.JamesBDD.append(b.sequinCape);f.after(b.JamesBDD);b.JamesBDD.css({visibility:"visible"})};
this.setEvents=function(){this.JamesBDDHead.click(function(a){a.stopPropagation();!1===g?b.showSequinCape():b.hideSequinCape()});b.JamesBDD.keydown(function(d){var g=b.sequinCape.children("li").find("a");38===d.which&&(d.preventDefault(),f.children("option").each(function(d,f){if(b.JamesBDDHead.html()===a(f).text())return 0!==d&&b.catchClick.call(g[d-1]),!1}));40===d.which&&(d.preventDefault(),f.children("option").each(function(d,f){if(b.JamesBDDHead.html()===a(f).text())return d!==g.length-1&&b.catchClick.call(g[d+
1]),!1}))});f.bind("onChange",function(){b.JamesBDDHead.html(f.val())});a(document).bind("click.jamesbrown",function(d){a(this)!==b.JamesBDDHead&&b.hideSequinCape()});this.sequinCape.children("li").find("a").bind("click",function(a){a.preventDefault();b.catchClick.call(this)})};this.catchClick=function(f){f=a(this).text();var g=a(this).attr("href"),m=a(this).parent("li").index(),l=this;b.JamesBDDHead.html(f);b.hideSequinCape();d.onSelect({selText:f,selValue:g,selIndex:m});a(b).find("option").removeAttr("selected");
a(b).children("option").each(function(){a(this).attr("value")===a(l).attr("href")&&a(this).attr("selected","selected")})};this.showSequinCape=function(){b.sequinCape.slideDown(d.speed,d.easing,d.onGetDown);g=!0};this.hideSequinCape=function(){b.sequinCape.slideUp(d.speed,d.easing,d.onGetOnUp);g=!1};this.init()})};a(function(){a.widget||a("div#searchCon").css("overflow","visible")})})(jQuery);
(function(a){a(document).ready(function(a){BB.Instances.tooltipData||(BB.Instances.tooltipData={});a.extend(BB.Instances.tooltipData,{REF_GOALS:"Narrow your choices by clicking a goal.  Only products that support the selected goal will be displayed.",REF_CATEGORY:"Narrow your choices by clicking a category.  Only products within the selected category will be displayed.",REF_BRAND:"Narrow your choices by selecting a brand.  Click View All Brands to see more choices.  Only products within the selected brand will be displayed.",
REF_RATING:"Narrow your choices by clicking a rating.  Only products with the selected rating or higher will be displayed.",REF_PRICE:"Drag either end of the slider to view only those products that are within the selected price range.",REF_SERVINGS:"Drag either end of the slider to view only those products that are within the selected servings range.",REF_DAYS_SUPPLY:"Drag either end of the slider to view only those products that are within the day's supply range.",REF_PRICE_PER_GRAM:"Drag either end of the slider to view only those products that are within the selected price per gram range.",
REF_CALORIES:"Drag either end of the slider to view only those products that are within the selected calorie range.",REF_PROTEIN:"Drag either end of the slider to view only those products that are within the selected range.",REF_CARBS:"Drag either end of the slider to view only those products that are within the selected range.",REF_FAT:"Drag either end of the slider to view only those products that are within the selected range.",REF_TYPE:"Select either Pure or Blend to view products that contain only one ingredient (pure) or a combination of ingredients (blend).",
REF_INGREDIENTS:"Narrow your choices by selecting an ingredient that the products must contain.  You can drag either end of the slider to view only those products that contain ingredient amounts within the selected range.",REF_INGREDIENTS_NOT:"Narrow your choices by selecting an ingredient(s) that the products must not contain.",REF_UNIQ_OPTS:"Narrow your choices by clicking a unique option.  Only products that have that option will be displayed.",REF_FLAVOR:"Narrow your choices by clicking a flavor.  Only products that have that flavor will be displayed.",
REF_FORM_FACTOR:"Narrow your choices by clicking a product form.  Only products that have the selected product form will be displayed.",REF_PURE_BLEND:"Select either Pure or Blend to view products that contain only one ingredient (pure) or a combination of ingredients (blend).",REF_BLEND:"This product contains a combination of ingredients (blend). Information about the quantity of ingredient present per serving is unavailable.",REF_COLOR:"Narrow your choices by clicking a color.  Only products that are that color will be displayed.",
"availability-in-stock":"Product is in stock and ready to ship to you!","availability-low-stock":"Our supply of this product is getting low.","availability-backordered":"Product is out of stock and we are waiting on shipments from the supplier.","availability-pre-sale":"We will be offering this product very soon.  You can order the product early and we will ship it to you as soon as we receive it.","availability-shipped-by-supplier":"Product is shipped directly from the supplier and not by BodyBuilding.com.  Please note that there may be locations the supplier cannot ship to.",
"availability-discontinued":"Product is or soon will be no longer carried by BodyBuilding.com.","ORDER-HISTORY-SHIPPED":"Your order has been shipped and should arrive shortly! You are on your way to achieving your health, fitness, and appearance goals.","ORDER-HISTORY-ONHOLD":"For your protection, additional verification is required before we can ship your order. Please check your e-mail or <a href=http://www.bodybuilding.com/store/email.htm>contact us</a> at your earliest convenience.","ORDER-HISTORY-PARTIAL":"Partial Shipment - One or more items on your order are out of stock. We have shipped the in-stock items, and will ship the remaining products the moment we receive them from the manufacturer.",
"ORDER-HISTORY-CANCELLED":"Notice: Your order has been cancelled. If you believe this is an error, please <a href=http://www.bodybuilding.com/store/email.htm>contact us</a>.","ORDER-HISTORY-SUBMITTED":"Your order is successful! We will work on this end to ensure it is delivered as quickly as possible.","ORDER-HISTORY-SPLIT":"To get your order to you as quickly as possible, your items were sent from more than one warehouse. Please review your tracking information. Some boxes may arrive earlier than others.",
"ORDER-HISTORY-BACK":"We were unable to ship your order due to out-of-stock items. We apologize for the delay! We will send you an e-mail and ship your order out as soon as we have your products from the manufacturer.","ORDER-HISTORY-WAITING":"Order not shipped - awaiting payment. Please send a check or money order to 2026 Silverstone Way, Meridian, ID. 83642. To process immediately, pay with an <a href=http://www.bodybuilding.com/store/help/onlinecheck.htm>on-line check</a>.","ORDER-HISTORY-NOTFOUND":"Status Not Found",
"ORDER-HISTORY-MULTIPLETRACKING":"Your order was split into multiple shipments. The packages could have been shipped from multiple warehouses or were too large to ship in one package.","ORDER-HISTORY-RESHIP":"Part of order REFNUMBER has been reshipped and is on its way to you. We will continue to work on this end to ensure it arrives as quickly as possible!","ORDER-HISTORY-ITEMCANCELLED":"Upon request, this item has been cancelled from your order. If you believe this is an error, please <a href=http://www.bodybuilding.com/store/email.htm>contact us</a>.",
NO_PRODUCTS_PRESENT_COMPARISON_MSG:"One or more products must be selected before viewing comparisons.",CANNOT_ADD_MORE_COMPARISON_MSG:"Only 3 products can be compared at a time. To compare this product, you must remove one from the boxes in the sort bar."});"undefined"!==typeof BB.Messages&&"undefined"!==typeof BB.Messages.Strings&&a.extend(BB.Instances.tooltipData,{REF_GOALS:BB.Messages.Strings.tooltipData_REF_GOALS,REF_CATEGORY:BB.Messages.Strings.tooltipData_REF_CATEGORY,REF_BRAND:BB.Messages.Strings.tooltipData_REF_BRAND,
REF_RATING:BB.Messages.Strings.tooltipData_REF_RATING,REF_PRICE:BB.Messages.Strings.tooltipData_REF_PRICE,REF_SERVINGS:BB.Messages.Strings.tooltipData_REF_SERVINGS,REF_DAYS_SUPPLY:BB.Messages.Strings.tooltipData_REF_DAYS_SUPPLY,REF_PRICE_PER_GRAM:BB.Messages.Strings.tooltipData_REF_PRICE_PER_GRAM,REF_CALORIES:BB.Messages.Strings.tooltipData_REF_CALORIES,REF_PROTEIN:BB.Messages.Strings.tooltipData_REF_PROTEIN,REF_CARBS:BB.Messages.Strings.tooltipData_REF_CARBS,REF_FAT:BB.Messages.Strings.tooltipData_REF_FAT,
REF_TYPE:BB.Messages.Strings.tooltipData_REF_TYPE,REF_INGREDIENTS:BB.Messages.Strings.tooltipData_REF_INGREDIENTS,REF_INGREDIENTS_NOT:BB.Messages.Strings.tooltipData_REF_INGREDIENTS_NOT,REF_UNIQ_OPTS:BB.Messages.Strings.tooltipData_REF_UNIQ_OPTS,REF_FLAVOR:BB.Messages.Strings.tooltipData_REF_FLAVOR,REF_FORM_FACTOR:BB.Messages.Strings.tooltipData_REF_FORM_FACTOR,REF_PURE_BLEND:BB.Messages.Strings.tooltipData_REF_PURE_BLEND,REF_BLEND:BB.Messages.Strings.tooltipData_REF_BLEND,REF_COLOR:BB.Messages.Strings.tooltipData_REF_COLOR,
"availability-in-stock":BB.Messages.Strings.tooltipData_availability_in_stock,"availability-low-stock":BB.Messages.Strings.tooltipData_availability_low_stock,"availability-backordered":BB.Messages.Strings.tooltipData_availability_backordered,"availability-pre-sale":BB.Messages.Strings.tooltipData_availability_pre_sale,"availability-shipped-by-supplier":BB.Messages.Strings.tooltipData_availability_shipped_by_supplier,"availability-discontinued":BB.Messages.Strings.tooltipData_availability_discontinued,
"ORDER-HISTORY-SHIPPED":BB.Messages.Strings.tooltipData_ORDER_HISTORY_SHIPPED,"ORDER-HISTORY-ONHOLD":BB.Messages.Strings.tooltipData_ORDER_HISTORY_ONHOLD,"ORDER-HISTORY-PARTIAL":BB.Messages.Strings.tooltipData_ORDER_HISTORY_PARTIAL,"ORDER-HISTORY-CANCELLED":BB.Messages.Strings.tooltipData_ORDER_HISTORY_CANCELLED,"ORDER-HISTORY-SUBMITTED":BB.Messages.Strings.tooltipData_ORDER_HISTORY_SUBMITTED,"ORDER-HISTORY-SPLIT":BB.Messages.Strings.tooltipData_ORDER_HISTORY_SPLIT,"ORDER-HISTORY-BACK":BB.Messages.Strings.tooltipData_ORDER_HISTORY_BACK,
"ORDER-HISTORY-WAITING":BB.Messages.Strings.tooltipData_ORDER_HISTORY_WAITING,"ORDER-HISTORY-NOTFOUND":BB.Messages.Strings.tooltipData_ORDER_HISTORY_NOTFOUND,"ORDER-HISTORY-MULTIPLETRACKING":BB.Messages.Strings.tooltipData_ORDER_HISTORY_MULTIPLETRACKING,"ORDER-HISTORY-RESHIP":BB.Messages.Strings.tooltipData_ORDER_HISTORY_RESHIP,"ORDER-HISTORY-ITEMCANCELLED":BB.Messages.Strings.tooltipData_ORDER_HISTORY_ITEMCANCELLED,NO_PRODUCTS_PRESENT_COMPARISON_MSG:BB.Messages.Strings.tooltipData_NO_PRODUCTS_PRESENT_COMPARISON_MSG,
CANNOT_ADD_MORE_COMPARISON_MSG:BB.Messages.Strings.tooltipData_CANNOT_ADD_MORE_COMPARISON_MSG})})})(jQuery);
(function(){"undefined"===typeof BB&&(BB={});"undefined"===typeof BB.Util&&(BB.Util={});BB.Util.md5=function(){return new function(){var a=function(a){var l=[],n;for(n=0;n<8*a.length;n+=8)l[n>>5]|=(a.charCodeAt(n/8)&255)<<n%32;a=8*a.length;l[a>>5]|=128<<a%32;l[(a+64>>>9<<4)+14]=a;a=1732584193;n=-271733879;var h=-1732584194,k=271733878,p;for(p=0;p<l.length;p+=16){var t=a,w=n,u=h,v=k;a=d(a,n,h,k,l[p],7,-680876936);k=d(k,a,n,h,l[p+1],12,-389564586);h=d(h,k,a,n,l[p+2],17,606105819);n=d(n,h,k,a,l[p+3],
22,-1044525330);a=d(a,n,h,k,l[p+4],7,-176418897);k=d(k,a,n,h,l[p+5],12,1200080426);h=d(h,k,a,n,l[p+6],17,-1473231341);n=d(n,h,k,a,l[p+7],22,-45705983);a=d(a,n,h,k,l[p+8],7,1770035416);k=d(k,a,n,h,l[p+9],12,-1958414417);h=d(h,k,a,n,l[p+10],17,-42063);n=d(n,h,k,a,l[p+11],22,-1990404162);a=d(a,n,h,k,l[p+12],7,1804603682);k=d(k,a,n,h,l[p+13],12,-40341101);h=d(h,k,a,n,l[p+14],17,-1502002290);n=d(n,h,k,a,l[p+15],22,1236535329);a=e(a,n,h,k,l[p+1],5,-165796510);k=e(k,a,n,h,l[p+6],9,-1069501632);h=e(h,k,a,
n,l[p+11],14,643717713);n=e(n,h,k,a,l[p],20,-373897302);a=e(a,n,h,k,l[p+5],5,-701558691);k=e(k,a,n,h,l[p+10],9,38016083);h=e(h,k,a,n,l[p+15],14,-660478335);n=e(n,h,k,a,l[p+4],20,-405537848);a=e(a,n,h,k,l[p+9],5,568446438);k=e(k,a,n,h,l[p+14],9,-1019803690);h=e(h,k,a,n,l[p+3],14,-187363961);n=e(n,h,k,a,l[p+8],20,1163531501);a=e(a,n,h,k,l[p+13],5,-1444681467);k=e(k,a,n,h,l[p+2],9,-51403784);h=e(h,k,a,n,l[p+7],14,1735328473);n=e(n,h,k,a,l[p+12],20,-1926607734);a=b(n^h^k,a,n,l[p+5],4,-378558);k=b(a^n^
h,k,a,l[p+8],11,-2022574463);h=b(k^a^n,h,k,l[p+11],16,1839030562);n=b(h^k^a,n,h,l[p+14],23,-35309556);a=b(n^h^k,a,n,l[p+1],4,-1530992060);k=b(a^n^h,k,a,l[p+4],11,1272893353);h=b(k^a^n,h,k,l[p+7],16,-155497632);n=b(h^k^a,n,h,l[p+10],23,-1094730640);a=b(n^h^k,a,n,l[p+13],4,681279174);k=b(a^n^h,k,a,l[p],11,-358537222);h=b(k^a^n,h,k,l[p+3],16,-722521979);n=b(h^k^a,n,h,l[p+6],23,76029189);a=b(n^h^k,a,n,l[p+9],4,-640364487);k=b(a^n^h,k,a,l[p+12],11,-421815835);h=b(k^a^n,h,k,l[p+15],16,530742520);n=b(h^
k^a,n,h,l[p+2],23,-995338651);a=f(a,n,h,k,l[p],6,-198630844);k=f(k,a,n,h,l[p+7],10,1126891415);h=f(h,k,a,n,l[p+14],15,-1416354905);n=f(n,h,k,a,l[p+5],21,-57434055);a=f(a,n,h,k,l[p+12],6,1700485571);k=f(k,a,n,h,l[p+3],10,-1894986606);h=f(h,k,a,n,l[p+10],15,-1051523);n=f(n,h,k,a,l[p+1],21,-2054922799);a=f(a,n,h,k,l[p+8],6,1873313359);k=f(k,a,n,h,l[p+15],10,-30611744);h=f(h,k,a,n,l[p+6],15,-1560198380);n=f(n,h,k,a,l[p+13],21,1309151649);a=f(a,n,h,k,l[p+4],6,-145523070);k=f(k,a,n,h,l[p+11],10,-1120210379);
h=f(h,k,a,n,l[p+2],15,718787259);n=f(n,h,k,a,l[p+9],21,-343485551);a=g(a,t);n=g(n,w);h=g(h,u);k=g(k,v)}l=[a,n,h,k];a="";for(n=0;n<4*l.length;n++)a+="0123456789abcdef".charAt(l[n>>2]>>n%4*8+4&15)+"0123456789abcdef".charAt(l[n>>2]>>n%4*8&15);return a},b=function(a,b,d,f,e,h){a=g(g(b,a),g(f,h));return g(a<<e|a>>>32-e,d)},d=function(a,d,f,e,h,g,k){return b(d&f|~d&e,a,d,h,g,k)},e=function(a,d,f,e,h,g,k){return b(d&e|f&~e,a,d,h,g,k)},f=function(a,d,f,e,h,g,k){return b(f^(d|~e),a,d,h,g,k)},g=function(a,
b){var d=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(d>>16)<<16|d&65535},k=function(a){var b="",d;for(d=0;d<a.length;d++){var f=a.charCodeAt(d),e="";if(255<f){for(;1<=f;)e="0123456789".charAt(f%10)+e,f/=10;""===e&&(e="0");e="#"+e;e="&"+e;e+=";";b+=e}else b+=a.charAt(d)}return b},h=function(a){for(;" "===a.substring(0,1);)a=a.substring(1,a.length);for(;" "===a.substring(a.length-1,a.length);)a=a.substring(0,a.length-1);return a};this.md5hashAuto=function(b,d,e,f){if(4<=parseInt(navigator.appVersion,
10)){var g=a(k(h(b.value)));d.value=g;e&&(g=a(h(b.value)),e.value=g);f||(b.value="")}return!0};this.md5hash=function(b,d){"undefined"===typeof d&&(d=!1);var e="";4<=parseInt(navigator.appVersion,10)&&(d?(e=a(h(b.value)),output_utf.value=md5string):e=a(k(h(b))));return e}}}()})();var BB=BB||{};"undefined"===typeof BB.Languages&&(BB.Languages={});"undefined"===typeof BB.Languages.EN&&(BB.Languages.EN={});BB.Languages.EN.passwordValid="Password is valid.";BB.Languages.EN.passwordInvalidShort="Password must be 6 characters or more.";
BB.Languages.EN.passwordInValidAlphaNum="Password must contain both letters and numbers.";BB.Validation=BB.createNamespace("BB.Validation");BB.Validation.validatorBase=function(){this.validate=function(a){throw Error("Please define a validate method");}};BB.Validation.isAlpha=function(){var a=function(){};a.prototype=new BB.Validation.validatorBase;a.prototype.validate=function(a){return/^[a-zA-Z]+$/.test(a)};return new a}();
BB.Validation.isNumeric=function(){var a=function(){};a.prototype=new BB.Validation.validatorBase;a.prototype.validate=function(a){return/^[0-9]+$/.test(a)};return new a}();BB.Validation.isAlphaOrNumeric=function(){var a=function(){};a.prototype=new BB.Validation.validatorBase;a.prototype.validate=function(a){return/^[0-9a-zA-Z]*$/.test(a)};return new a}();
BB.Validation.isAnything=function(){var a=function(){};a.prototype=new BB.Validation.validatorBase;a.prototype.validate=function(a){return/^.*$/.test(a)};return new a}();BB.Validation.isAlphaAndNumeric=function(){var a=function(){};a.prototype=new BB.Validation.validatorBase;a.prototype.validate=function(a){return/^((?=.*[a-zA-Z])(?=.*[0-9]).*)*$/.test(a)};return new a}();
BB.Validation.isFullName=function(){var a=function(){};a.prototype=new BB.Validation.validatorBase;a.prototype.validate=function(a){return/^([a-zA-Z'\-\.]+\s*)*$/.test(a)};return new a}();BB.Validation.isRequired=function(){var a=function(){};a.prototype=new BB.Validation.validatorBase;a.prototype.validate=function(a){return""!==a?!0:!1};return new a}();
BB.Validation.isEmail=function(){var a=function(){};a.prototype=new BB.Validation.validatorBase;a.prototype.validate=function(a){return/^[a-zA-Z0-9\._%+-]+@[a-zA-Z0-9\.-]+\.[a-zA-Z]{2,4}$/.test(a)};return new a}();BB.Validation.isZipCode=function(){var a=function(){};a.prototype=new BB.Validation.validatorBase;a.prototype.validate=function(a){return/^[0-9\-]*$/.test(a)};return new a}();
BB.Validation.isPositiveFloat=function(){var a=function(){};a.prototype=new BB.Validation.validatorBase;a.prototype.validate=function(a){return!isNaN(a)&&0<=a?!0:!1};return new a}();BB.Validation.isRequired=function(){var a=function(){};a.prototype=new BB.Validation.validatorBase;a.prototype.validate=function(a){return""!==a?!0:!1};return new a}();
BB.Validation.isOccupationCityState=function(){var a=function(){};a.prototype=new BB.Validation.validatorBase;a.prototype.validate=function(a){return/^[a-zA-Z\-\.\s]*$/.test(a)};return new a}();
BB.Validation.dates={convert:function(a){return a.constructor===Date?a:a.constructor===Array?new Date(a[0],a[1],a[2]):a.constructor===Number?new Date(a):a.constructor===String?new Date(a):"object"===typeof a?new Date(a.year,a.month,a.date):NaN},compare:function(a,b){return isFinite(a=this.convert(a).valueOf())&&isFinite(b=this.convert(b).valueOf())?(a>b)-(a<b):NaN},inRange:function(a,b,d){return isFinite(a=this.convert(a).valueOf())&&isFinite(b=this.convert(b).valueOf())&&isFinite(d=this.convert(d).valueOf())?
b<=a&&a<=d:NaN}};BB.Validation.isPrintingChars=function(){var a=function(){};a.prototype=new BB.Validation.validatorBase;a.prototype.validate=function(a){return/[a-zA-Z0-9\~\!\@\#\$\%\^\&\*\(\)\-\s_=\]\[\'\"\;\:<>\.\,\\\/\}\{]+/.test(a)};return new a}();
BB.Validation.validPassword=function(){var a=function(){};a.prototype=new BB.Validation.validatorBase;a.prototype.validate=function(a,d,e){if(a&&5<a.length){if(/\d/.test(a)&&/[a-z]/i.test(a))return"function"===typeof d&&d(BB.Languages.EN.passwordValid),!0;"function"===typeof e&&e(BB.Languages.EN.passwordInValidAlphaNum)}else"function"===typeof e&&e(BB.Languages.EN.passwordInvalidShort);return!1};return new a}();
BB.Validation.validPersonalWeight=function(){var a=function(){};a.prototype=new BB.Validation.validatorBase;a.prototype.validate=function(a,d,e){return/^\d{1,4}(?:\.|(?:\.\d+)){0,1}$/.test(a)&&(a=parseFloat(a),Math.inRange(e,d,a))?!0:!1};return new a}();BB.Validation.decimalNumeric=function(){var a=function(){},b=/^((?:\d)*(?:\.|(?:\.\d+)){0,1})*$/;a.prototype=new BB.Validation.validatorBase;a.prototype.validate=function(a){return b.test(a)};return new a}();
(function(){var a=function(){__flash__removeCallback&&(document.body.onbeforeunload=function(){__flash__removeCallback=function(a,b){a&&null!==a&&(a[b]=null)}})};if(document){var b=document.onload?document.onload:function(){};document.onload=function(){b();a()}}})();
(function(a){a.fn.FDAWarning=function(){};var b={site_from:"Reviews",site_from_long:"Bodybuilding.com Reviews",site_to:"the Store",site_to_long:"the Bodybuilding.com Store",extra_line:""},d={site_from:"the SuperSite",site_from_long:"the Bodybuilding.com Supersite",site_to:"the Store",site_to_long:"the Bodybuilding.com Store",extra_line:"The information provided on the SuperSite is intended for educational purposes only. "},e={site_from:"the Store",site_from_long:"the Bodybuilding.com Store",site_to:"Reviews",
site_to_long:"BodyBuilding.com Reviews",extra_line:""};BB.Util.FDADisclaimer=function(){function f(){this.t=new BB.TemplateCore;this.messageContent={}}f.prototype.hideSelectBoxes=function(){this.selectBoxes=a("select:visible");a("select:visible").css("visibility","hidden")};f.prototype.showSelectBoxes=function(){a(this.selectBoxes).css("display","block");this.selectBoxes=[]};f.prototype.getCookieDomain=function(){var a=window.location.href.match(/^http:\/\/([^\/]+)\//i)[1],b;try{b=1<(b=a.split(".")).length?
b.slice(-2).join("."):"bodybuilding.com"}catch(d){b="bodybuilding.com"}return b};f.prototype.getAgreeCookies=function(){BB.Log.debug("getting cookie");var a=this._readCookie("bbfdawarning");try{return a.split(",")}catch(b){BB.Log.error(b)}return[]};f.prototype.getOriginCookie=function(){BB.Log.debug("getting cookie");return this._readCookie("bbfdaorigin")};f.prototype._readCookie=function(a){a+="=";for(var b=document.cookie.split(";"),d=0,d=0;d<b.length;d++){for(var e=b[d];" "===e.charAt(0);)e=e.substring(1,
e.length);if(0===e.indexOf(a))return e.substring(a.length,e.length)}return""};f.prototype.saveCookie=function(a,b,d){d=d||1;a=b instanceof Array?a+"="+b.join(","):a+"="+b.toString();b=new Date;b.setTime(b.getTime()+864E5*d);document.cookie=a+"; domain=."+this.getCookieDomain()+"; path=/; expires="+b.toGMTString()};f.prototype.shouldShowWarning=function(){var a=this.getAgreeCookies(),f=this.getOriginCookie(),h=this.getLocation(document.referrer),m=this.getLocation(document.location.href);if(""===f||
""===m||"referrer"===h||f===m||-1!==a.indexOf(h))return this.saveCookie("bbfdaorigin",m),!1;var l;switch(h){case "store":l=e;break;case "content":l=d;break;case "reviews":l=b}if(void 0===l)return!1;this.displayWarning(l,h,a);return!0};f.prototype.getLocation=function(a){site="";-1!==a.indexOf("reviews.bodybuilding.com/")?site="reviews":-1!==a.indexOf("bodybuilding.com/fun/")?site="content":-1!==a.indexOf("bodybuilding.com/store/")&&(site="store");return site};f.prototype.displayWarning=function(b,
d,e){b=this.t('<div id="fda-warning"><div class="fda-warning-content"><div class="fda-warning-header"><span>FDA Disclaimer</span></div><div class="fda-warning-message">You are now leaving <?=site_from_long?> and entering <?=site_to_long?>. Products sold in the Store are not intended to diagnose, treat, cure, or prevent any disease. <?=extra_line?>To return to <?=site_from?>, please click NO below.  Click YES below to show your agreement and to enter <?=site_to_long?>.</div><div class="fda-buttons"><div class="fda-accept-message">Accept and continue?</div><button class="fda-continue">Yes</button><button class="fda-remain">No</button></div></div></div>',
b);var f=this.getLocation(document.location.href);TINY.box.onShown=function(){a("#tinycontent .fda-continue").live("click",function(a){e.push(d);this.saveCookie("bbfdaorigin",f);this.saveCookie("bbfdawarning",e,365);TINY.box.hide();this.showSelectBoxes()}.bind(this));a("#tinycontent .fda-remain").live("click",function(a){window.location.href=document.referrer}.bind(this))}.bind(this);this.hideSelectBoxes();TINY.box.show(b,0,0,0,1,!1)};f.prototype.doCheck=function(){this.shouldShowWarning()};return new f}()})(jQuery);
BB.Helpers.hideInputModal=function(){var a="",b=[],d;d=this||{};this||console.warn('BB.Helpers.hideInputModal "this" is %o',this);d.hideControls=function(d){a=$.merge(["select:visible"],$.map(d,function(a,b){return a+":visible"})).join(", ");b=$(a).css("display","none")};d.showControls=function(){$.each(b,function(a,b){$(b).css("display","block")})};return d}();
(function(){var a;(a=window.BB)||(window.BB={UI:{Wicket:{}}},a=window.BB);var b=a;b.UI?b.UI.Wicket={}:b.UI={Wicket:{}};b.UI.Wicket.params={formMonitorFirstRun:!0,tinyBoxCloseTip:{}};b.UI.Wicket.getModalContents=function(a){var b=$("#"+a).wrap("<div>").parent().html();$("#"+a).remove();return b};b.UI.Wicket.setupFormMonitoring=function(a,e){var f;b.Log.debug("Setting up for monitoring");f=$("#tbox-close").attr("onclick")||function(){TINY.box.hide()};$("#tbox-close").attr("onclick","");b.UI.Wicket.params.formMonitorFirstRun&&
(b.UI.Wicket.params.formMonitorFirstRun=!1,$("#tbox-close").bbcomTipDialog({text:e,trigger:function(a){b.UI.Wicket.params.tinyBoxCloseTip=a},buttons:{yes:{label:"Yes",action:function(a){void 0!==f&&null!==f&&f()}},no:{label:"No"}}}));TINY.box.closed=function(){b.UI.Wicket.params.tinyBoxCloseTip(!1)};$("#tbox-close").formChangedMonitor({formSelector:a,failure:function(a){a.preventDefault();b.Log.debug("Setting up for monitoring");b.UI.Wicket.params.tinyBoxCloseTip(!0)},success:function(){b.UI.Wicket.params.tinyBoxCloseTip(!1);
void 0!==f&&null!==f&&f()}});b.Log.debug("Finished setting up form monitoring")};b.UI.Wicket.preCondition=function(a){if("OK"!==a.event.extraData)return!1}})();BB=window.BB||{};BB.Util=BB.Util||{};
BB.Util.cookie=function(){var a=function(a){try{if(void 0===a||"string"!==typeof a)throw"You must define a name as a string when searching for a cookie";}catch(b){return BB.Log.debug(b),null}var e=document.cookie.split(";"),f,g=e.length,k={},h,m;for(f=0;f<g;f++)if(h=e[f].split("="),m=h[0].replace(/^\s+|\s+$/g,""),m===a){k.name=m;k.value=h[1].replace(/^\s+|\s+$/g,"");break}return k},b=function(b){b=b||{};try{if(void 0===b.name||void 0===b.value)throw"You must define an object when setting a cookie with at least a name and value parameter";
}catch(k){return BB.Log.debug(k),null}var e=new Date,e=void 0!==b.expires?e.setTime(e.getTime())+864E5*parseFloat(b.expires):"",f=void 0!==b.expires?"; expires="+(new Date(e)).toGMTString():"",e=b.name+"="+b.value,f=f+(void 0!==b.path?"; path="+b.path:"")+(void 0!==b.domain?"; domain="+b.domain:"")+(void 0!==b.secure?"; secure="+b.secure:"")+";",g=!1===b.overwrite?!1:!0;b=a(b.name);return null===b||!0===g?(document.cookie=e+f,e+f):b};return{set:function(a){return b(a)},get:function(b){return a(b)},
remove:function(a){a:{try{if(void 0===a||"string"!==typeof a)throw"You must define a name as a string when removing a cookie";}catch(e){BB.Log.debug(e);a=null;break a}a=b({name:a,value:"",expires:-1})}return a}}}();BB=window.BB||{};BB.Util=BB.Util||{};
BB.Util.cookie=function(){var a=function(a){try{if(void 0===a||"string"!==typeof a)throw"You must define a name as a string when searching for a cookie";}catch(b){return BB.Core.Log.debug(b),null}var e=document.cookie.split(";"),f,g=e.length,k={},h,m;for(f=0;f<g;f++)h=e[f].split("="),m=h[0].trim(),m===a&&(k.name=m,k.value=h[1].trim());return k},b=function(b){b=b||{};try{if(void 0===b.name||void 0===b.value)throw"You must define an object when setting a cookie with at least a name and value parameter";
}catch(k){return BB.Core.Log.debug(k),null}var e=new Date,e=void 0!==b.expires?e.setTime(e.getTime())+864E5*parseFloat(b.expires):"",f=void 0!==b.expires?"; expires="+(new Date(e)).toGMTString():"",e=b.name+"="+b.value,f=f+(void 0!==b.path?"; path="+b.path:"")+(void 0!==b.domain?"; domain="+b.domain:"")+(void 0!==b.secure?"; secure="+b.secure:"")+";",g=!1===b.overwrite?!1:!0;b=a(b.name);return null===b||!0===g?(document.cookie=e+f,e+f):b};return{set:function(a){return b(a)},get:function(b){return a(b)},
remove:function(a){a:{try{if(void 0===a||"string"!==typeof a)throw"You must define a name as a string when removing a cookie";}catch(e){BB.Core.Log.debug(e);a=null;break a}a=b({name:a,value:"",expires:-1})}return a}}}();
(function(){BB=window.BB||{};BB.Util=BB.Util||{};var a=BB.Util.cookie,b,d;try{b=function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=[],d=0,k,h;for(h=0;36>h;h++)8===h||13===h||18===h||23===h?b[h]="-":14===h?b[h]="4":(2>=d&&(d=33554432+16777216*Math.random()|0),k=d&15,d>>=4,b[h]=a[19===h?k&3|8:k]);return b.join("")},d=void 0===a.get("m").value||""===a.get("m").value?b():a.get("m").value,void 0!==a.get("m").value&&""!==a.get("m").value||a.set({name:"m",value:d,
expires:"1825",domain:"bodybuilding.com",path:"/"}),BB.Util.uuid=BB.Util.cookieMonster=function(){return d}}catch(e){BB.Log.debug(e.message)}})();BB.createNamespace("BB.Core");BB.createNamespace("BB.UI");BB.createNamespace("BB.Action");BB.createNamespace("BB.Data");BB.createNamespace("BB.Util");
BB.Core.Util=BB.Core.Util||function(){var a=function(a,b){var d,e;if("object"===typeof b&&null!==b)for(e in b)b.hasOwnProperty(e)&&(d=new RegExp("{"+e+"}","g"),a=a.replace(d,b[e]));return a},b=function(b,d,e){var f=window,g,k;if("string"===typeof b){b=a(b,e);b=b.split(".");k=b.length;for(e=0;e<k;e++){g=b[e];if(void 0===f[g])if(d)f[g]={};else return;f=f[g]}"function"===typeof f&&(f=new f);return f}"function"===typeof b&&(b=new b);return b},d=function(a){if(a instanceof Date)return a.getFullYear()+
"/"+(a.getMonth()+1)},e=function(a){var b=!1;"string"===typeof a&&(b=a.replace(/[\- ]([a-z])/g,function(a){a.toUpperCase()}));return b},f=function(a){var b=!1;"string"===typeof a&&(b=a.charAt(0).toUpperCase()+a.slice(1));return b},g=function(a,b){var d=new Date(0),e,f;if("number"===typeof a)d.setUTCSeconds(a);else if("string"===typeof a)if("today"===a)d=new Date;else if(/^today/.test(a)&&(a=a.replace(/^today/,""),b=new Date),/^[\+\-]/.test(a)){e=a.toLowerCase().split(".");f=parseInt(e[0],10);d=g(b);
switch(e[1]){case "year":case "years":e=365;break;case "week":case "weeks":e=7;break;default:e=1}d.setDate(d.getDate()+f*e)}else d=new Date(a);else d=a;return d},k=window.navigator.userAgent.match(/MSIE [0-9]\.0/);return{validateInterface:function(a,b){switch(b){case "nsTemplate":return"object"===typeof a&&null!==a&&"function"===typeof a.setup&&"function"===typeof a.create&&"function"===typeof a.finish;default:return!1}},format:a,formatFloat:function(a,b){return void 0===a||null===a||isNaN(a)?void 0===
b||null===b?"0":b:parseFloat(a,10).toString().replace(/\.([0-9]).*/,".$1").replace(/\.0/,"")},formatTime:function(a,b){var d,e;if(void 0===a||null===a||isNaN(a))return void 0===b||null===b?"00:00":b;d=parseInt(a/3600,10);e=parseInt(a%3600/60,10);return(10>d?"0":"")+d.toString()+":"+(10>e?"0":"")+e.toString()},formatInt:function(a,b){a=parseInt(a,10);if(isNaN(a))return"0";a=parseInt(a,10);return void 0!==b&&0<b?a>b?b.toString(10)+"+":a.toString(10):a.toString(10)},formatDate:function(a,b){var d=a.getMinutes().toString(),
e=a.getHours(),f=BB.Loc.get("AM"),g="";b||(1===d.length&&(d="0"+d),12<=e?(12!==e&&(e-=12),f=BB.Loc.get("PM")):0===e&&(e=12),g=" "+e+":"+d+" "+f);return BB.Loc.get("MONTH_"+a.getMonth())+" "+a.getDate()+", "+a.getFullYear()+g},formatMonth:function(a){return BB.Loc.get("MONTH_"+a.getMonth())+", "+a.getFullYear()},formatImageURLProfile:function(a,b){var d,e;d=BB.Data.Env.get("defaultAvatarURLPrefix");b=b||"70x70";if(BB.Data.User.get("isAvatarURLSet"))return d=BB.Data.User.get("avatarURL"),e=document.createElement("a"),
e.href=d,e.hostname.match(/imagecdn\..*/)&&!e.pathname.match(/(\d+x\d+)\.\w+$/)?(e=d.lastIndexOf("."),d.substr(0,e)+"-"+b+d.substr(e)):a;switch(BB.Data.User.get("gender")){case "his":case "male":return d+"Avatar-Male-Default_"+b+".jpg";case "her":case "female":return d+"Avatar-Female-Default_"+b+".jpg";default:return d+"Avatar-Unisex-Default_"+b+".jpg"}},toKg:function(a){return a/2.20462262},toLbs:function(a){return 2.20462262*a},toCm:function(a){return 2.54*a},toInch:function(a){return a/2.54},toHeightSequence:function(a,
b){var d=b?100:12;return[a%d,parseInt(a/d,10)]},toHeightValue:function(a,b){var d=b?100:12;return parseFloat(a[1])*d+parseFloat(a[0])},toDate:g,createNamespace:function(a,d){return b(a,!0,d)},getNamespace:function(a,d){return b(a,!1,d)},createRandomId:function(){return Math.floor(Math.random()*(new Date).getTime())},createMessageController:function(a,b){a(new BB.Core.MessageController(b));BB.Core.Messenger.sendMessage("messageControllerCreated",{name:b.name})},monthStamp:d,dayStamp:function(a){if(a instanceof
Date)return d(a)+"/"+a.getDate()},escapeHTML:function(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return a.replace(/[&<>"'\/]/g,function(a){return b[a]}).replace(/\n/g,"<br/>")},toCamelCase:e,toSentenceCase:f,toSentenceCamelCase:function(a){return f(e(a))},browserShouldUseJSONPWithAPI:function(){return k}}}();
(function(a){["Arguments","String","Number","Date","RegExp"].forEach(function(b){a["is"+b]=function(a){return Object.prototype.toString.call(a)=="[object "+b+"]"}});a.isFunction=function(a){return"function"===typeof a};a.isNaN=function(b){return a.isNumber(b)&&b!=+b};a.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==toString.call(a)};a.isNull=function(a){return null===a};a.isUndefined=function(a){return void 0===a};a.isUndefinedOrNull=function(b){return a.isUndefined(b)||a.isNull(b)};
a.isObject=function(a){return a===Object(a)};a.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)};a.isEmpty=function(b){if(null==b)return!0;if(a.isArray(b)||a.isString(b))return 0===b.length;for(var d in b)if(b.hasOwnProperty(d))return!1;return!0};a.isNonEmptyString=function(b){return a.isString(b)&&!a.isEmpty(b)};a.isEmptyString=function(b){return a.isString(b)&&a.isEmpty(b)}})(BB.Core.Util);
BB.Core.Util.cookie=function(){var a=function(a){try{if(void 0===a||"string"!==typeof a)throw"name?";}catch(b){return null}var e=document.cookie.split(";"),f,g=e.length,k={},h,m;for(f=0;f<g;f++)if(h=e[f].split("="),m=h[0].replace(/^\s+|\s+$/g,""),m===a){k.name=m;k.value=null===h[1]||"string"!==typeof h[1]?"":h[1].replace(/^\s+|\s+$/g,"");break}return k},b=function(b){b=b||{};try{if(void 0===b.name||void 0===b.value)throw"defineObject!";}catch(k){return null}var e=new Date,e=void 0!==b.expires?e.setTime(e.getTime())+
864E5*parseFloat(b.expires):"",f=void 0!==b.expires?"; expires="+(new Date(e)).toGMTString():"",e=b.name+"="+b.value,f=f+(void 0!==b.path?"; path="+b.path:"")+(void 0!==b.domain?"; domain="+b.domain:"")+(void 0!==b.secure?"; secure="+b.secure:"")+";",g=!1===b.overwrite?!1:!0;b=a(b.name);return null===b||!0===g?(document.cookie=e+f,e+f):b};return{set:function(a){return b(a)},get:function(b){return a(b)},remove:function(a){a:{try{if(void 0===a||"string"!==typeof a)throw"name?";}catch(e){a=null;break a}a=
b({name:a,value:"",expires:-1})}return a}}}();
BB.Core.Util.Base64=function(){return{encode:function(a){var b="",d=0,e,f,g,k,h,m;f="";g=0;a=a.replace(/\r\n/g,"\n");for(g=0;g<a.length;g++)k=a.charCodeAt(g),f=128>k?f+String.fromCharCode(k):127<k&&2048>k?f+(String.fromCharCode(k>>6|192)+String.fromCharCode(k&63|128)):f+(String.fromCharCode(k>>12|224)+String.fromCharCode(k>>6&63|128)+String.fromCharCode(k&63|128));for(a=f;d<a.length;)e=a.charCodeAt(d++),f=a.charCodeAt(d++),g=a.charCodeAt(d++),k=e>>2,e=(e&3)<<4|f>>4,h=(f&15)<<2|g>>6,m=g&63,isNaN(f)?
h=m=64:isNaN(g)&&(m=64),b=b+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(m);return b},decode:function(a){var b="",d,e,f,g,k,h=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<a.length;)d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),
e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),d=d<<2|e>>4,e=(e&15)<<4|g>>2,f=(g&3)<<6|k,b+=String.fromCharCode(d),64!==g&&(b+=String.fromCharCode(e)),64!==k&&(b+=String.fromCharCode(f));a=b;b="";for(d=h=k=g=0;g<a.length;)k=a.charCodeAt(g),128>k?(b+=String.fromCharCode(k),
g++):191<k&&224>k?(h=a.charCodeAt(g+1),b+=String.fromCharCode((k&31)<<6|h&63),g+=2):(h=a.charCodeAt(g+1),d=a.charCodeAt(g+2),b+=String.fromCharCode((k&15)<<12|(h&63)<<6|d&63),g+=3);return b}}}();
BB.Core.Util.md5=function(){var a=function(a,b){var d=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(d>>16)<<16|d&65535},b=function(b,d,e,f,g,h){b=a(a(d,b),a(f,h));return a(b<<g|b>>>32-g,e)},d=function(a,d,e,f,g,h,k){return b(d&e|~d&f,a,d,g,h,k)},e=function(a,d,e,f,g,h,k){return b(e^(d|~f),a,d,g,h,k)},f=function(a,d,e,f,g,h,k){return b(d&f|e&~f,a,d,g,h,k)},g=function(a){var b="",d,e,f;for(d=0;d<a.length;d++)if(e=a.charCodeAt(d),f="",255<e){for(;1<=e;)f="0123456789".charAt(e%10)+f,e/=10;""===f&&(f="0");
f="#"+f;f="&"+f;f+=";";b+=f}else b+=a.charAt(d);return b},k=function(g){var h=[],k;for(k=0;k<8*g.length;k+=8)h[k>>5]|=(g.charCodeAt(k/8)&255)<<k%32;var r=8*g.length;g=1732584193;k=-271733879;var q=-1732584194,p=271733878,t,w,u,v;h[r>>5]|=128<<r%32;h[(r+64>>>9<<4)+14]=r;for(r=0;r<h.length;r+=16)t=g,w=k,u=q,v=p,g=d(g,k,q,p,h[r],7,-680876936),p=d(p,g,k,q,h[r+1],12,-389564586),q=d(q,p,g,k,h[r+2],17,606105819),k=d(k,q,p,g,h[r+3],22,-1044525330),g=d(g,k,q,p,h[r+4],7,-176418897),p=d(p,g,k,q,h[r+5],12,1200080426),
q=d(q,p,g,k,h[r+6],17,-1473231341),k=d(k,q,p,g,h[r+7],22,-45705983),g=d(g,k,q,p,h[r+8],7,1770035416),p=d(p,g,k,q,h[r+9],12,-1958414417),q=d(q,p,g,k,h[r+10],17,-42063),k=d(k,q,p,g,h[r+11],22,-1990404162),g=d(g,k,q,p,h[r+12],7,1804603682),p=d(p,g,k,q,h[r+13],12,-40341101),q=d(q,p,g,k,h[r+14],17,-1502002290),k=d(k,q,p,g,h[r+15],22,1236535329),g=f(g,k,q,p,h[r+1],5,-165796510),p=f(p,g,k,q,h[r+6],9,-1069501632),q=f(q,p,g,k,h[r+11],14,643717713),k=f(k,q,p,g,h[r],20,-373897302),g=f(g,k,q,p,h[r+5],5,-701558691),
p=f(p,g,k,q,h[r+10],9,38016083),q=f(q,p,g,k,h[r+15],14,-660478335),k=f(k,q,p,g,h[r+4],20,-405537848),g=f(g,k,q,p,h[r+9],5,568446438),p=f(p,g,k,q,h[r+14],9,-1019803690),q=f(q,p,g,k,h[r+3],14,-187363961),k=f(k,q,p,g,h[r+8],20,1163531501),g=f(g,k,q,p,h[r+13],5,-1444681467),p=f(p,g,k,q,h[r+2],9,-51403784),q=f(q,p,g,k,h[r+7],14,1735328473),k=f(k,q,p,g,h[r+12],20,-1926607734),g=b(k^q^p,g,k,h[r+5],4,-378558),p=b(g^k^q,p,g,h[r+8],11,-2022574463),q=b(p^g^k,q,p,h[r+11],16,1839030562),k=b(q^p^g,k,q,h[r+14],
23,-35309556),g=b(k^q^p,g,k,h[r+1],4,-1530992060),p=b(g^k^q,p,g,h[r+4],11,1272893353),q=b(p^g^k,q,p,h[r+7],16,-155497632),k=b(q^p^g,k,q,h[r+10],23,-1094730640),g=b(k^q^p,g,k,h[r+13],4,681279174),p=b(g^k^q,p,g,h[r],11,-358537222),q=b(p^g^k,q,p,h[r+3],16,-722521979),k=b(q^p^g,k,q,h[r+6],23,76029189),g=b(k^q^p,g,k,h[r+9],4,-640364487),p=b(g^k^q,p,g,h[r+12],11,-421815835),q=b(p^g^k,q,p,h[r+15],16,530742520),k=b(q^p^g,k,q,h[r+2],23,-995338651),g=e(g,k,q,p,h[r],6,-198630844),p=e(p,g,k,q,h[r+7],10,1126891415),
q=e(q,p,g,k,h[r+14],15,-1416354905),k=e(k,q,p,g,h[r+5],21,-57434055),g=e(g,k,q,p,h[r+12],6,1700485571),p=e(p,g,k,q,h[r+3],10,-1894986606),q=e(q,p,g,k,h[r+10],15,-1051523),k=e(k,q,p,g,h[r+1],21,-2054922799),g=e(g,k,q,p,h[r+8],6,1873313359),p=e(p,g,k,q,h[r+15],10,-30611744),q=e(q,p,g,k,h[r+6],15,-1560198380),k=e(k,q,p,g,h[r+13],21,1309151649),g=e(g,k,q,p,h[r+4],6,-145523070),p=e(p,g,k,q,h[r+11],10,-1120210379),q=e(q,p,g,k,h[r+2],15,718787259),k=e(k,q,p,g,h[r+9],21,-343485551),g=a(g,t),k=a(k,w),q=a(q,
u),p=a(p,v);h=[g,k,q,p];g="";for(k=0;k<4*h.length;k++)g+="0123456789abcdef".charAt(h[k>>2]>>k%4*8+4&15)+"0123456789abcdef".charAt(h[k>>2]>>k%4*8&15);return g},h=function(a){for(;" "===a.substring(0,1);)a=a.substring(1,a.length);for(;" "===a.substring(a.length-1,a.length);)a=a.substring(0,a.length-1);return a};return{md5hashAuto:function(a,b,d,e){if(4<=parseInt(navigator.appVersion,10)){var f=k(g(h(a.value)));b.value=f;d&&(f=k(h(a.value)),d.value=f);e||(a.value="")}return!0},md5hash:function(a){return k(g(h(a)))}}}();
BB.Util=BB.Util||{};BB.Util.md5=BB.Core.Util.md5;BB.createNamespace("BB.Data");
BB.Data.Env=BB.Data.Env||function(a,b){var d={},e=window.location,f=e.pathname.replace(/\/+$/,"").replace(/.*\//,"");d.isMobile=!1;d.isPrivate=function(){return 4>e.pathname.replace(/\/+$/,"").split("/").length};d.isOwnPage=function(){return d.pageOwner&&d.pageOwner.slug?d.pageOwner.slug===BB.Data.User.get("slug"):f===BB.Data.User.get("slug")};d.defaultAvatarURLPrefix="http://common.bbcomcdn.com/images/default-avatar/";d.currentLanguage="en-us";d.pageOwner={};d.isFacebookLoginEnabled=!1;d.isFacebookSignupEnabled=
!1;d.pageId="";d.protocol=e.protocol;d.isHTTPS="https:"===d.protocol;d.isHTTP="http:"===d.protocol;d.isQuirksMode="CSS1Compat"!==document.compatMode&&/MSIE/.test(navigator.userAgent)&&!/MSIE 10\.0/.test(navigator.userAgent);d.isLocalStorageAvailable=function(){var a,b,d;try{d=new Date,(a=window.localStorage).setItem(d,d),b=a.getItem(d)!==d,a.removeItem(d),b&&(a=!1)}catch(e){}return a}();d.urlCallback=function(){var a=/[\?&]callback=([^&#]*)/.exec(e.search);return null===a?null:decodeURIComponent(a[1].replace(/\+/g,
" "))};d.strikes=function(){var a=e.search.substring(1).split("&"),b,d=a.length,f,l=0;for(b=0;b<d;b++)f=a[b].split("="),"s"===f[0]&&f[1]>l&&(l=parseInt(f[1],10));return 5<l?5:l};d.url=function(){var a=e.href.split("?"),b="",d,f,l,n;if(1<a.length&&0<a[1].length)for(d=a[1].split("&"),f=d.length,n=0;n<f;n++)l=d[n].split("="),"s"!==l[0]&&(b=""===b?"?"+d[n]:b+"&"+d[n]);return a[0]+b};d.browser=function(){if(b.browser.msie){try{if("undefined"===typeof window.XMLHttpRequest)return"IE6"}catch(a){}try{if("8.0"==
b.browser.version)return"IE8"}catch(a){}if(document.all&&!window.opera&&window.XMLHttpRequest)return"IE7"}if(window.opera)return"OPERA";if(window.chrome)return"CHROME";if(b.browser.mozilla){if(window.globalStorage&&window.postMessage)return"FF3";if(window.globalStorage)return"FF2";if(window.getComputedStyle)return"FF1"}if(b.browser.safari)return"SAFARI";if(navigator.userAgent.match(/(iPod|iPhone|iPad)/))return"MobileSafari"};return{get:function(b){return a.isFunction(d[b])?d[b]():d[b]},set:function(a,
b){d[a]=b},keys:{pageId:"pageId",currentLanguage:"currentLanguage",strikes:"strikes",isHTTPS:"isHTTPS",isHTTP:"isHTTP",isQuirksMode:"isQuirksMode",isLocalStorageAvailable:"isLocalStorageAvailable",protocol:"protocol",url:"url",urlCallback:"urlCallback",defaultAvatarURLPrefix:"defaultAvatarURLPrefix",isNativeApp:function(){return BB.Core.Util.cookie.get("goneNative").hasOwnProperty("name")?!0:!1},isFacebookSignupEnabled:"isFacebookSignupEnabled",isFacebookLoginEnabled:"isFacebookLoginEnabled",browser:"browser"}}}(BB.Core.Util,
jQuery);BB.createNamespace("BB.Core");BB.Core.MessageController=BB.Core.MessageController||function(a){this.messageQueue={};a&&(this.messageControllerName=a.name||"Unamed message controller",this.parentMessageController=a.parentMessageController||!1)};BB.Core.MessageController.prototype.registerListener=function(a,b,d){this.messageQueue[a]||(this.messageQueue[a]={});this.messageQueue[a][b]=d};
BB.Core.MessageController.prototype.sendMessage=function(a,b,d){var e,f;try{e=this.messageQueue[a],f=""}catch(g){return!1}for(f in e)if(e.hasOwnProperty(f))try{e[f](b)}catch(g){}if(this.parentMessageController&&!d)try{this.parentMessageController.sendMessage(a,b)}catch(g){}};BB.Core.MessageController.prototype.unregisterListener=function(a,b){try{delete this.messageQueue[a][b]}catch(d){}};BB.Core.Messenger=new BB.Core.MessageController({name:"Global Message Controller"});
BB.Controller=BB.Controller||{};BB.Controller.MessageController=BB.Core.MessageController;BB.Controller.Messenger=BB.Core.Messenger;
(function(a){BB.Core.IrisCache={requestCache:{},pendingRequests:{},waitingRequests:{},getCacheKeyForRequest:function(b,d){var e;if(!b)return console.warn("IrisCache#getCacheKeyForRequest: invalid ajaxSettings configuration"),!1;if(b.type&&"POST"!==b.type.toUpperCase())return console.warn("IrisCache#getCacheKeyForRequest: Not caching b/c request is not a POST"),!1;if(b.dataType&&"JSON"!==b.dataType.toUpperCase())return console.warn("IrisCache#getCacheKeyForRequest: Not caching b/c request dataType is not JSON"),
!1;try{e="[",e+=encodeURI(b.url),e+="::",e=d?e+b.data:e+a.param(b.data),e+="]"}catch(f){return console.warn("IrisCache#getCacheKeyForRequest: Could not serialize ajaxSettings.data",f),!1}return e},isRequestCached:function(a){var d=this.getCacheKeyForRequest(a);if(!this.requestCache[d])return!1;d=new Date-this.requestCache[d].cachedAt;return 2E3<d?(console.warn("IrisCache#isRequestInCache: Cannot use cached response",d),this.removeCachedResponse(a),!1):!0},removeCachedResponse:function(a){a=this.getCacheKeyForRequest(a);
delete this.requestCache[a]},getCachedResponse:function(a){a=this.getCacheKeyForRequest(a);return this.requestCache[a]},setCachedResponse:function(a,d,e,f){f=this.getCacheKeyForRequest(f);this.requestCache[f]={data:a,status:d,xhr:e,cachedAt:new Date}},setPendingRequest:function(a){a=this.getCacheKeyForRequest(a);this.pendingRequests[a]=!0},isRequestPending:function(a){a=this.getCacheKeyForRequest(a);return this.pendingRequests[a]},addWaitingRequest:function(a){var d=this.getCacheKeyForRequest(a);
this.waitingRequests[d]||(this.waitingRequests[d]=[]);this.waitingRequests[d].push(a)},handleWaitingRequests:function(a,d,e){a=this.getCacheKeyForRequest(e,!0);var f,g;for(g in this.waitingRequests)a===g&&(f=this.requestCache[a],this.waitingRequests[g].forEach(function(a,b){BB.Core.IrisCache.waitingRequests[g][b].handled||(BB.Core.IrisCache.waitingRequests[g][b].success(f.data,f.status,f.xhr),BB.Core.IrisCache.waitingRequests[g].handled=!0)}),BB.Core.IrisCache.waitingRequests[g]=[]);delete this.pendingRequests[a]}};
a(document.documentElement).ajaxComplete(a.proxy(BB.Core.IrisCache.handleWaitingRequests,BB.Core.IrisCache))})(jQuery);
(function(a,b){BB.Core.Iris={callAPI:function(d,e,f,g,k){function h(a,d,k){a.err_msg?(console.error("BB.Core.Iris: API returned an error: "+a.err_msg),f(a,d,k)):(b.isRequestCached(g)||b.setCachedResponse(a,d,k,g),e(a,d,k))}g=a.extend({url:d,data:k,dataType:"json",success:h,error:f,timeout:3E4,type:"POST",xhrFields:{withCredentials:!0}},g);e||(e=a.noop);f||(f=a.noop);BB.Core.Util.browserShouldUseJSONPWithAPI()&&(g.dataType="jsonp");b.isRequestCached(g)?(d=b.getCachedResponse(g),h(d.data,d.status,d.xhr)):
b.isRequestPending(g)?b.addWaitingRequest(g):(b.setPendingRequest(g),a.ajax(g))}}})(jQuery,BB.Core.IrisCache);
BB.Core.Valid=function(){var a=function(a){var d=a.match(/\./g);return/[^0-9^\.]/.test(a)||d&&1<d.length};return{positiveFloat:function(b,d){return a(b)?BB.Loc.get("INVALID_CHARACTERS",{stat:d}):!0},email:function(a){return 254<a.length?!1:/^[a-zA-Z0-9\._%+-]+@[a-zA-Z0-9\.-]+\.[a-zA-Z]{2,4}$/.test(a)},weight:function(b){var d=parseFloat(b),e;if(a(b))return BB.Loc.get("INVALID_CHARACTERS",{stat:BB.Loc.get("BODY_WEIGHT")});BB.Data.User.get("isMetric")?(b=20,e=449.9):(b=50,e=999.9);return d>=b&&d<=e?
!0:BB.Loc.get("INVALID_VALUE_WEIGHT",{MIN:b.toFixed(1),MAX:e.toFixed(1),UNIT:BB.Data.User.get("unitsOfWeight")})},bodyfat:function(b){var d=parseFloat(b);return a(b)?BB.Loc.get("INVALID_CHARACTERS",{stat:BB.Loc.get("BODY_FAT")}):4<=d&&75>=d?!0:BB.Loc.get("INVALID_VALUE_FAT")},height:function(a){var d=BB.Data.User.get("isMetric");return a>=(d?100:36)&&a<=(d?305:120)?!0:BB.Loc.get("INVALID_VALUE_HEIGHT",{MIN_STATEMENT:d?"1.0 m":"3.0 ft",MAX_STATEMENT:d?"3.0 m":"10.0 ft",UNIT:BB.Data.User.get("unitsOfLength")})},
measure:function(b){var d=parseFloat(b),e;if(a(b))return BB.Loc.get("INVALID_CHARACTERS",{stat:"Body Measurements"});BB.Data.User.get("isMetric")?(b=50,e=254):(b=20,e=100);return d>=b&&d<=e?!0:BB.Loc.get("INVALID_VALUE_RANGE",{stat:"Measurements",MIN:b.toFixed(1),MAX:e.toFixed(1),UNIT:BB.Data.User.get("unitsOfLength")})}}}();BB.createNamespace("BB.Core.Util.Date");
BB.Core.Util.Date.Utils=function(){return{daysInMonth:function(a,b){var d;isNaN(a)&&(d=new Date,a=d.getMonth());isNaN(b)&&(b=(d?d:new Date).getFullYear());return Math.round((new Date(b,a+1,1)-new Date(b,a,1))/864E5)},bbcomDateFormat:function(a){var b=new Date(a);a="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[b.getMonth()];var d=b.getDate(),b=b.getFullYear();return a+" "+d+", "+b}}}();BB.Tool=BB.Tool||{};BB.Tool.Debug={log:function(a){}};BB.Log={debug:function(){}};
BB.Data.Setup=function(){var a=function(a){var b,f,g=0;if(void 0!==a&&null!==a)for(b in a){if(a.hasOwnProperty(b)){if(void 0===BB.Data[b]||null===BB.Data[b])return!1;for(f in a[b])if(a[b].hasOwnProperty(f)){if(void 0===BB.Data[b].get(f))return!1;g++}}}else return!1;return 0!==g},b=function(b){if(a(b)){var e,f,g=0;for(e in b)if(b.hasOwnProperty(e))for(f in b[e])b[e].hasOwnProperty(f)&&(BB.Data[e].set(f,b[e][f]),g++);return g}return 0};return{"import":b,metaImport:function(a){return b(a.data("target"))}}}();
BB.Data.User=function(a,b){var d={},e={},f=new BB.Core.MessageController({name:"userObjectNotification"}),g=!1,k={isAvatarURLSet:!0,isSuperModerator:!0,isAdministrator:!0,isModerator:!0,isIFBB:!0,isVideoAdmin:!0,isActive:!0,isInactive:!0,isCOPPA:!0,isBanned:!0,isMetric:!0,isImperial:!0,unitsOfWeight:!0,unitsOfLength:!0,isFitStatusSet:!0,isMotivationLevelSet:!0},h=function(a,b){setTimeout(function(){f.sendMessage("userObjectNotification",{key:a,newValue:b})},50)},m=function(a,b,d,e,g){setTimeout(function(){f.sendMessage("userObjectNotification",
{key:a,currValue:b,goalValue:d,goalDate:e,type:g})},50)},l=function(a,b){setTimeout(function(){f.sendMessage("userObjectNotification",{statsObj:a,type:b})},50)},n=function(a,e){h(a,e);switch(a){case "avatarURL":if(void 0===e||null===e||!b.isString(e)||25>e.length)return d.isAvatarURLSet=!1;d.isAvatarURLSet=!0;break;case "units":switch(e){case "metric":d.isMetric=!0;d.isImperial=!1;d.unitsOfWeight="kg.";d.unitsOfLength="cm.";break;default:d.isMetric=!1,d.isImperial=!0,d.unitsOfWeight="Lbs.",d.unitsOfLength=
"in."}break;case "status":d.userGroup=e;switch(e){case 5:d.isSuperModerator=!0;d.isActive=!0;break;case 6:d.isAdministrator=!0;d.isActive=!0;break;case 7:d.isModerator=!0;d.isActive=!0;break;case 9:d.isIFBB=!0;d.isActive=!0;break;case 11:d.isVideoAdmin=!0;d.isActive=!0;break;case 2:d.isActive=!0;break;case 3:case 10:d.isInactive=!0;break;case 4:d.isCOPPA=!0;break;case 8:d.isBanned=!0;break;default:d.isActive=!0}break;case "fitStatus":d.isFitStatusSet=!0;break;case "motivationLevel":d.isMotivationLevelSet=
!0}d[a]=e;return!0},r=function(a,b){return{success:function(){n(a,b)},error:function(){}}};e.weight={suffixSet:"stats/set",suffixGet:"stats/get",params:function(b){return{value:b,stat:"weight",unit:d.units,shareonfb:a("#shareonfbcheck").is(":checked")}},callbacks:r};e.waist={suffixSet:"stats/set",suffixGet:"stats/get",params:function(a){return{value:a,stat:"waist"}},callbacks:r};e.bodyfat={suffixSet:"stats/set",suffixGet:"stats/get",params:function(b){return{value:b,stat:"bodyfat",unit:d.units,shareonfb:a("#shareonfbcheck").is(":checked")}},
callbacks:r};e.overallGoal={suffixSet:"profile/goals/set",suffixGet:"profile/goals/get",params:function(a){return{overallgoal:a}},callbacks:r};e.height={suffixSet:"stats/set",suffixGet:"stats/get",params:function(a){return{value:a,stat:"height",unit:d.units}},callbacks:r};e.fitStatus={suffixSet:"fitstatus/set",suffixGet:"fitstatus/get",params:function(a){return{content:a.value}},callbacks:r};e.motivationLevel={suffixSet:"motivation/set",suffixGet:"motivation/get",params:function(a){return{level:a}},
callbacks:function(a,b){return{success:function(){n(a,{value:b,timeStamp:Math.round((new Date).getTime()/1E3)})},error:function(){}}}};d.id=d.slug=d.userName=d.realName=d.status=d.motivationLevel=d.userGroup=d.fitStatus=d.actionItems=d.messages=d.notifications=d.requests=d.weight=d.waist=d.bodyfat=d.overallGoal=d.mainGoal=d.height=d.avatarURL=d.joinDate=d.goals=d.socialMediaCategoryList=d.socialMediaFacebookAuthorized=d.sharedBodyStatUpdatesOnFb=d.sharedBodyFatUpdatesOnFb=d.sharedBodyWeightUpdatesOnFb=
d.profilePic=d.MVPrograms=d.gender=null;d.isLoggedIn=function(){var a=b.isNonEmptyString(d.slug),e=b.isNonEmptyString(d.userName),f=void 0!==b.cookie.get("lgn").name;return(!b.isEmpty(b.cookie.get("v1guid"))||f)&&e&&a};d.isFitStatusSet=d.isMotivationLevelSet=d.isSuperModerator=d.isAdministrator=d.isModerator=d.isIFBB=d.isVideoAdmin=d.isActive=d.isInactive=d.isCOPPA=d.isBanned=d.isAvatarURLSet=d.isMetric=!1;d.units="imperial";d.isImperial=!0;d.unitsOfLengthSequence=function(){return d.isMetric?["LENGHT_CM",
"LENGTH_M","LENGTH_KM"]:["LENGHT_IN","LENGTH_FT"]};d.unitsOfWeight="Lbs.";d.unitsOfLength="in.";return{refreshStats:function(a){BB.API.send("stats/get",{},{success:function(a){d.statsObject=a.data;a=d.statsObject.height.stats.value;a=d.isMetric?b.toCm(a):a;n("height",a);n("waist",d.statsObject.waist.stats.value)}})},get:function(a){return b.isFunction(d[a])?d[a]():d[a]},clear:function(a){if(void 0===d[a]||k[a])return!1;d[a]=null},setGoal:function(a,b,e,f,g){var k=d.goals?d.goals:d.goals={};if(void 0!==
k.goals)for(var h=0;h<k.goals.length;h++)for(var l=0;l<a.length;l++)k.goals[h].goalType==a[l]&&(k.goals[h].goalType=a[l],k.goals[h].currValue=b[l],k.goals[h].goalDate=f,0==e.length&&e||(k.goals[h].goalValue=e[l]));else for(k.goals=[],h=0;h<a.length;h++)k.goals[h]={goalType:a[h],currValue:b[h],goalValue:e[h],goalDate:f};m(a,b,e,f,g)},trackStats:function(a,b){l(a,b)},set:function(f,g,h,l){if(void 0===g||void 0===d[f]||k[f])return!1;if(h)return e[f]&&b.isFunction(e[f].params)?(h=e[f].params(g),l&&b.isObject(l)&&
(h=a.extend(h,l)),BB.API.send(e[f].suffixSet,h,e[f].callbacks(f,g)),!0):!1;"motivationLevel"!==f||isNaN(g)?n(f,g):n(f,{value:g,timeStamp:Math.round((new Date).getTime()/1E3)});return!0},registerForUpdates:function(a){var d=b.createRandomId();f.registerListener("userObjectNotification",d,a);return d},unregisterUpdates:function(a){f.unregisterListener("userObjectNotification",a)},notifyUserLoaded:function(){g=!0;f.sendMessage("userObjectNotification",{key:"userLoaded",newValue:!0})},isReady:function(){return g},
prod:h,keys:{id:"id",isLoggedIn:"isLoggedIn",slug:"slug",userName:"userName",realName:"realName",userGroup:"userGroup",gender:"gender",status:"status",units:"units",unitsOfWeight:"unitsOfWeight",unitsOfLength:"unitsOfLength",fitStatus:"fitStatus",motivationLevel:"motivationLevel",notifications:"notifications",actionItems:"actionItems",requests:"requests",messages:"messages",weight:"weight",bodyfat:"bodyfat",height:"height",avatarURL:"avatarURL",isAvatarURLSet:"isAvatarURLSet",isSuperModerator:"isSuperModerator",
isAdministrator:"isAdministrator",isModerator:"isModerator",isIFBB:"isIFBB",isVideoAdmin:"isVideoAdmin",isActive:"isActive",isInactive:"isInactive",isCOPPA:"isCOPPA",isBanned:"isBanned",isFitStatusSet:"isFitStatusSet",isMotivationLevelSet:"isMotivationLevelSet",isMetric:"isMetric",isImperial:"isImperial",joinDate:"joinDate"}}}(jQuery,BB.Core.Util);
BB.Data.Cache=function(a){var b=!1,d=!1,e=function(a,b){var d="["+a+"]";void 0!==b&&(d+=b);return d},f=function(a,b){if(d){var f=void 0!==a?e(a,b):b,g=localStorage.getItem(f),n,r,q,p=(new Date).getTime();try{n=JSON.parse(g),r=n.ttl,q=n.now,q+r<p&&localStorage.removeItem(f)}catch(t){}}},g=function(a,b){var d,f,g=e(a),r=g.length;for(d=b.length;0<=d;d--)f=b.key(d),null!==f&&f.substring(0,r)===g&&b.removeItem(f)};try{b=a.isObject(window.sessionStorage)}catch(k){window.console&&window.console.log&&console.log("window.sessionStorage security constraint")}try{d=
a.isObject(window.localStorage)}catch(k){window.console&&window.console.log&&console.log("window.localStorage security constraint")}return $.extend(BB.Data.Cache,{keys:{session:"session",local:"local"},get:function(g,h,m){var l=null;if(void 0!==m&&"session"!==m&&"local"!==m)return l;if("session"===m||void 0===m)a:{if(b){g=sessionStorage.getItem(e(g,h));try{l=JSON.parse(g);break a}catch(n){l=g;break a}}l=null}else if("local"===m)a:{f(g,h);if(d){m=null;try{m=JSON.parse(localStorage.getItem(e(g,h)))}catch(n){console.warn("Error parsing JSON: "+
localStorage.getItem(e(g,h)))}if(null!==m&&a.isObject(m))try{l=JSON.parse(m.value);break a}catch(n){l=m.value;break a}}l=null}return l},set:function(g,h,m,l,n){"local"===l&&void 0===n&&(l="session");if("local"===l){for(l=localStorage.length;0<=l;l--)try{f(void 0,localStorage.key(l))}catch(r){}d&&localStorage.setItem(e(g,h),JSON.stringify({ttl:n||0,now:(new Date).getTime(),value:a.isObject(m)?JSON.stringify(m):m}))}else b&&(a.isObject(m)&&(m=JSON.stringify(m)),sessionStorage.setItem(e(g,h),m))},remove:function(a,
f,m){void 0===m&&(m="session");void 0===f?"session"===m?g(a,sessionStorage):g(a,localStorage):"session"===m&&b?sessionStorage.removeItem(e(a,f)):d&&localStorage.removeItem(e(a,f))},cleanup:function(){},createKey:function(a,b){var d=[a],e=[],f,g=0,q;for(f in b)e.push(f);q=e.length;for(e.sort();g<q;g++)f=e[g],d.push(b[f]);return d.join("-")}})}(BB.Core.Util);BB.createNamespace("BB.Data.Cache");
(function(a){var b={},d=function(b,d){var e=b.endpoint;if(a.isObject(b.params)){var h,m=b.params.length,l;b.params.sort();for(h=0;h<m;h++){l=d[b.params[h]];if(void 0===l||null===l)return null;e+="-"+d[b.params[h]]}}return e},e=function(a,d,e,h,m){this.cacheArea=a;this.endpoint=d;this.ttl=e;this.params=h;this.cache=m&&m.cache?m.cache:void 0;this.getData=m&&m.getData?m.getData:void 0;b[this.endpoint]=this;return this};BB.Data.Cache.Listener={registerListener:function(a,b,d,h,m){return new e(a,b,d,h,
m)},getListeners:function(){return b},getListener:function(a){return this.getListeners()[a]},parseResponse:function(e,g,k){e=b[e];if(void 0!==e&&k&&k.data&&200===k.ret_code){var h=d(e,g);if(a.isFunction(e.cache))e.cache(g,k,e.ttl);else{if(a.isObject(k))try{k=k.data}catch(m){}if(h)try{BB.Data.Cache.set(e.cacheArea,h,k,BB.Data.Cache.keys.local,e.ttl)}catch(m){}}}},parseRequest:function(e,g){var k;k=b[e];if(void 0===k)k=null;else{var h=d(k,g);a.isFunction(k.getData)?k=(k=k.getData(g))?{err_msg:"",ret_code:200,
data:k}:null:(k=BB.Data.Cache.get(k.cacheArea,h,BB.Data.Cache.keys.local),k=void 0===k||null===k?null:{err_msg:"",ret_code:200,data:k})}return k}}})(BB.Core.Util);
(function(a){a(function(){BB.createNamespace("BB.Data.Cache.Services");BB.Data.Cache.Services.Helpful=function(){var a=BB.Data.Cache.Listener;a.registerListener("Helpful","helpful/getcounts",3E5,["ids"],{cache:function(a,b){var f=a.ids.split(","),g,k=f.length,h;for(g=0;g<k;g++)h=b.data.counts[f[g]],void 0!==h&&BB.Data.Cache.set("Helpful",this.endpoint+"-"+f[g],h,"local",this.ttl)},getData:function(a){a=a.ids.split(",");var b,f=a.length,g={};for(b=0;b<f;b++)if(g[a[b]]=BB.Data.Cache.get("Helpful",this.endpoint+
"-"+a[b],"local"),null===g[a[b]])return;return{counts:g}}});a.registerListener("Helpful","helpful/getbyuser",3E5,["userid","entityids"],{cache:function(a,b){var f=a.entityids.split(","),g,k=f.length,h;if(b.data.helpfuls){var m={};for(g in b.data.helpfuls)b.data.helpfuls.hasOwnProperty(g)&&(m[b.data.helpfuls[g].entityId]=b.data.helpfuls[g]);for(g=0;g<k;g++)(h=m[f[g]])||(h={userId:a.userid,entityId:f[g]}),BB.Data.Cache.set("Helpful",this.endpoint+"-"+a.userid+"-"+h.entityId,h,"local",this.ttl)}},getData:function(a){var b=
a.entityids.split(","),f,g=b.length,k=[],h;for(f=0;f<g;f++){h=BB.Data.Cache.get("Helpful",this.endpoint+"-"+a.userid+"-"+b[f],"local");if(null===h)return;k.push(h)}return{helpfuls:k}}});a.registerListener("Helpful","helpful/add",3E5,["userid","entityid"],{cache:function(d,e,f){e=a.getListener("helpful/getcounts");var g=a.getListener("helpful/getbyuser");f=e.getData({ids:d.entityid});g.cache({userid:d.userid,entityids:d.entityid},{err_msg:"",ret_code:200,data:{helpfuls:[{isHelpful:d.helpful,userId:d.userid,
entityId:d.entityid}]}});f&&(g=f.counts[d.entityid])&&(g.total+=1,!0===d.helpful&&(g.helpful+=1),f.counts[d.entityid]=g,e.cache({ids:d.entityid},{data:f}))}});a.registerListener("Helpful","helpful/remove",3E5,["userid","entityid"],{cache:function(d,e,f){e=a.getListener("helpful/getcounts");f=e.getData({ids:d.entityid});var g=a.getListener("helpful/getbyuser"),k=g.getData({userid:d.userid,entityids:d.entityid});if(f){var h=f.counts[d.entityid];h&&(--h.total,h.helpful-=!0===k.helpfuls[0].isHelpful?
1:0,f.counts[d.entityid]=h,e.cache({ids:d.entityid},{data:f}))}k&&"object"===typeof k.helpfuls&&(k.helpfuls[0].isHelpful=void 0,g.cache({userid:d.userid,entityids:d.entityid},{data:k}))}})}()})})(jQuery);
(function(a,b){a(function(){BB.createNamespace("BB.Data.Cache.Services");BB.Data.Cache.Services.Comments=function(){var d=BB.Data.Cache.Listener,e=[1,2,20,50];d.registerListener("Comment","comments-api/entity/bind",144E5,["type","externalRef"],{cache:function(a,b,e){BB.Data.Cache.set("Comment",this.endpoint+"-"+a.type+"-"+a.externalRef,b.data,"local",e);d.getListener("comments-api/entity/bound").cache({entity:b.data},a.externalRef)}});d.registerListener("Comment","comments-api/entity/bound",144E5,
["type","entity"],{cache:function(a,b,d){BB.Data.Cache.set("Comment",this.endpoint+"-"+a.entity,b,"local",this.ttl)},getData:function(a){return BB.Data.Cache.get("Comment",this.endpoint+"-"+a.entity,"local")}});d.registerListener("Comment","comments-api/get",3E5,["entityId","start","orderByNewest"],{cache:function(a,b){BB.Data.Cache.set("Comment",this.endpoint+"-"+a.entityId+"-"+a.start+"-"+a.orderByNewest,b.data,"local",this.ttl)},getData:function(a){a=BB.Data.Cache.get("Comment",this.endpoint+"-"+
a.entityId+"-"+a.start+"-"+a.orderByNewest,"local");return null===a?null:a}});d.registerListener("Comment","comments-api/add",3E5,["text","entityId","ownerId","userId"],{cache:function(a,g,k){var h=d.getListener("comments-api/entity/bound");k=d.getListener("comments-api/get");var m=d.getListener("comments-api/getcommentsbyrefids"),l=h.getData({entity:a.entityId}),h=k.getData({entityId:a.entityId,start:0,orderByNewest:!0});if(null!==l){var n=d.getListener("comments-api/get/countbyref"),r=n.getData({entityIds:l});
null!==r&&void 0!==r&&(r[l]+=1,n.cache({entityIds:l},{data:r}))}n=e.length;for(l=0;l<n;l++)if(r=m.getData({types:a.type,externalrefs:a.externalRef,total:e[l]}))r.commentsList[0].comments.push(g.data),r.commentsList[0].comments.length>e[l]&&r.commentsList[0].comments.shift(),r.commentsList[0].commentsCount+=1,r.commentsList[0].totalRows+=1,m.cache({types:a.type,externalrefs:a.externalRef,total:e[l]},{data:r});!b.isNull(h)&&null!==h.data.comments&&null!==g&&b.isObject(g.data)&&(h.data.comments.unshift(g.data),
h.data.commentsCount+=1,10<h.data.comments.length&&h.data.comments.pop(),k.cache({entityId:a.entityId,start:0,orderByNewest:!0},h))}});d.registerListener("Comment","comments-api/delete",3E5,["commentId","entityId","ownerId","userId"],{cache:function(a,b,d){BB.Data.Cache.remove("Comment",void 0,"local")}});d.registerListener("Comment","comments-api/get/countbyref",3E5,["entityIds"],{cache:function(a,b,d){a=a.entityIds.toString().split(",");var e=a.length,m;for(d=0;d<e;d++)(m=b.data[a[d]])||(m=0),BB.Data.Cache.set("Comment",
this.endpoint+"-"+a[d],m,"local",this.ttl)},getData:function(a){a=a.entityIds.toString().split(",");var b,d=a.length,e={};for(b=0;b<d;b++)if(e[a[b]]=BB.Data.Cache.get("Comment",this.endpoint+"-"+a[b],"local"),null===e[a[b]])return;return e}});d.registerListener("Comment","comments-api/getcommentsbyrefids",3E5,["types","externalrefs","total"],{cache:function(d,e,k){b.isString(d.externalrefs)||(d.externalrefs=d.externalrefs.toString());k={comments:[],commentsCount:0,externalRef:"",rows:0,startRow:0,
totalRows:0,type:""};var h,m=e.data.commentsList.length,l={},n,r=d.externalrefs.split(","),q=d.types.split(",");for(h=0;h<m;h++)n=e.data.commentsList[h],l[n.externalRef+n.type]=n;m=r.length;for(h=0;h<m;h++)(n=l[r[h]+q[h]])||(n=a.extend({},k,{externalRef:r[h],type:q[h]})),BB.Data.Cache.set("Comment",this.endpoint+"-"+r[h]+"-"+q[h]+"-"+d.total,n,"local",this.ttl)},getData:function(a){var d=b.isString(a.externalrefs)&&null!==a.externalrefs.match(",")?a.externalrefs.split(","):[a.externalrefs],e,h=d.length,
m=[],l,n=b.isString(a.types)&&null!==a.types.match(",")?a.types.split(","):[a.types];for(e=0;e<h;e++){l=BB.Data.Cache.get("Comment",this.endpoint+"-"+d[e]+"-"+n[e]+"-"+a.total,"local");if(!l)return;m.push(l)}return{commentsList:m}}})}()})})(jQuery,BB.Core.Util);
(function(a,b){a(function(){BB.createNamespace("BB.Data.Cache.Services");BB.Data.Cache.Services.Liking=function(){var a=BB.Data.Cache.Listener,e=function(){return BB.Data.User.get("id")};a.registerListener("Like","liking/getcountsbyentities",3E5,["entityid","type"],{cache:function(a,d){if(a.entityid){b.isString(a.entityid)||(a.entityid=a.entityid.toString());var e=a.entityid.split(","),h,m=e.length,l;for(h=0;h<m;h++)l=d.data[e[h]]||0,BB.Data.Cache.set("Like",this.endpoint+"-"+e[h],l,"local",this.ttl)}},
getData:function(a){if(!a.entityid)return null;b.isString(a.entityid)||(a.entityid=a.entityid.toString());a=a.entityid.split(",");var d,e=a.length,h={};for(d=0;d<e;d++)if(h[a[d]]=BB.Data.Cache.get("Like",this.endpoint+"-"+a[d],"local"),null===h[a[d]])return;return h}});a.registerListener("Like","liking/getlikesbyentities",3E5,["entityid","type","userid"],{cache:function(a,d){if(a.entityid){b.isString(a.entityid)||(a.entityid=a.entityid.toString());var k=a.entityid.split(","),h,m=k.length,l;a.userid=
a.userid||e();for(h=0;h<m;h++)l=-1!==d.data.indexOf(k[h]),BB.Data.Cache.set("Like",this.endpoint+"-"+a.userid+"-"+k[h],l,"local",this.ttl)}},getData:function(a){if(!a.entityid)return null;b.isString(a.entityid)||(a.entityid=a.entityid.toString());var d=a.entityid.split(","),k,h=d.length,m=[],l;a.userid=a.userid||e();for(k=0;k<h;k++){l=BB.Data.Cache.get("Like",this.endpoint+"-"+a.userid+"-"+d[k],"local");if(null===l)return null;!0===l&&m.push(d[k])}return m}});a.registerListener("Like","liking/set",
3E5,["entityid","type","userid"],{cache:function(b,g){b.userid=b.userid||e();var k=a.getListener("liking/getcountsbyentities"),h=a.getListener("liking/getlikesbyentities"),m=a.getListener("liking/getstatsforentitiesanduser"),l=k.getData({entityid:b.entityid,type:b.type}),n=h.getData({entityid:b.entityid,type:b.type,userid:b.userid}),r=m.getData({entityids:b.entityid,type:b.type,userid:b.userid});l&&(l[b.entityid]+=1,k.cache({entityid:b.entityid,type:b.type},{data:l}));n&&(n.push(b.entityid),h.cache({entityid:b.entityid,
type:b.type,userid:b.userid},{data:n}));r||(r=[{entityId:b.entityid,isLiked:!1,recentLikeUsers:[],recentLikes:[],total:0,type:b.type}]);r&&0<r.length&&(r[0].total+=1,r[0].isLiked=!0,m.cache({entityids:b.entityid,type:b.type,userid:b.userid},{data:r}))}});a.registerListener("Like","liking/delete",3E5,["entityid","type","userid"],{cache:function(b,g){b.userid=b.userid||e();var k=a.getListener("liking/getcountsbyentities"),h=a.getListener("liking/getlikesbyentities"),m=a.getListener("liking/getstatsforentitiesanduser"),
l=k.getData({entityid:b.entityid,type:b.type}),n=h.getData({entityid:b.entityid,type:b.type,userid:b.userid}),r=m.getData({entityids:b.entityid,type:b.type,userid:b.userid});l&&(--l[b.entityid],k.cache({entityid:b.entityid,type:b.type},{data:l}));n&&(n=[],h.cache({entityid:b.entityid,type:b.type,userid:b.userid},{data:n}));r&&0<r.length&&(--r[0].total,r[0].isLiked=!1,m.cache({entityids:b.entityid,type:b.type,userid:b.userid},{data:r}))}});a.registerListener("Like","liking/getstatsforentitiesanduser",
3E5,["entityids","type","userid"],{cache:function(a,d){b.isString(a.entityids)||(a.entityids=a.entityids.toString());var e=a.entityids.split(","),h,m=e.length,l,n={};l=d.data.length;for(h=0;h<l;h++)n[d.data[h].entityId]=d.data[h];for(h=0;h<m;h++)l=n[e[h]]||{entityId:e[h],total:0,type:a.type,isLiked:!1,recentLikeUsers:[],recentLikes:[]},BB.Data.Cache.set("Like",this.endpoint+"-"+a.userid+"-"+a.type+"-"+e[h],l,"local",this.ttl)},getData:function(a){b.isString(a.entityids)||(a.entityids=a.entityids.toString());
var d=a.entityids.split(","),e,h=d.length,m=[],l;for(e=0;e<h;e++){l=BB.Data.Cache.get("Like",this.endpoint+"-"+a.userid+"-"+a.type+"-"+d[e],"local");if(!l)return null;m.push(l)}return m}})}()})})(jQuery,BB.Core.Util);
BB.Data.DB=function(){var a={CoreSetIds:{mainGoalStringIds:[{value:1,stringId:"BUILD_MUSCLE"},{value:2,stringId:"LOSE_FAT"},{value:4,stringId:"TRANSFORM"},{value:16,stringId:"IMPROVE_SPORT"},{value:128,stringId:"ENDURANCE"},{value:256,stringId:"FLEXIBILITY"},{value:64,stringId:"OTHER"}],demographics:" EVERYONE MEN_ONLY MEN_TEEN MEN_20_39 MEN_40 WOMEN_ONLY WOMEN_TEEN WOMEN_20_39 WOMEN_40".split(" "),levels:["ALL_LEVELS","BEGINNER","INTERMEDIATE","EXPERT"],goalPhysique:{male:[{value:1,stringId:"SKINNY_RIPPED"},
{value:2,stringId:"MALE_MODEL"},{value:3,stringId:"ATHLETE"},{value:4,stringId:"BODYBUILDER"},{value:5,stringId:"STRONGMAN"},{value:12,stringId:"PRO_BODYBUILDER"},{value:15,stringId:"Custom"}],female:[{value:6,stringId:"FASHION_MODEL"},{value:8,stringId:"SWIMSUIT"},{value:7,stringId:"FIT_WOMAN"},{value:9,stringId:"FITNESS_MODEL"},{value:11,stringId:"BODYBUILDER"},{value:16,stringId:"Custom"}]},bodySamples:{female:[{value:10,stringId:"LEAN"},{value:15,stringId:"BEACH_READY"},{value:20,stringId:"FIT"},
{value:25,stringId:"AVERAGE"},{value:30,stringId:"OVERWEIGHT"},{value:35,stringId:"OBESE"}],male:[{value:5,stringId:"LEAN"},{value:10,stringId:"ATHLETIC"},{value:15,stringId:"FIT"},{value:20,stringId:"AVERAGE"},{value:25,stringId:"OVERWEIGHT"},{value:30,stringId:"SLIGHTLY_OBESE"},{value:35,stringId:"OBESE"},{value:40,stringId:"MORBIDLY_OBESE"}]}}},b=new BB.Core.MessageController({name:"DBMessenger"});return{get:function(b,e){if(a[b])return a[b][e]},clear:function(b,e){if(void 0===a[b]||void 0===a[b][e])return!1;
a[b][e]=null},set:function(d,e,f){if(void 0===f)return!1;a[d]=a[d]||{};a[d][e]=f;b.sendMessage(d,{key:e,value:f});return!0},registerListener:function(a,e){var f=BB.Core.Util.createRandomId();b.registerListener(a,f,e);return f}}}();
(function(a){BB.createNamespace("BB.Data.Queue");BB.Data.Queue=function(){var b,d=0,e=this,f=function(){b&&clearTimeout(b);b=setTimeout(function(){e.commitBatch()},e.callDelay)};this.entityQueue={};this.batchSize=20;this.callDelay=500;this.commitBatch=function(){var b=a.extend({},e.entityQueue);d=0;e.entityQueue={};a.isEmptyObject(b)||e.batchCommitted(b)};this.batchCommitted=function(a){};this.addEntityToQueue=function(a,b){this.entityQueue[a]=b;d++;d>=e.batchSize?e.commitBatch():f()};return this}})(jQuery);
(function(a){BB.createNamespace("BB.Data.LikeData");BB.Data.LikeData=function(){var b={},d=this,e,f=new BB.Data.Queue,g={entityId:"",total:0,ownerId:"",type:"",stat:0,isLiked:!1,recentLikes:[],recentLikeUsers:[]},k=function(){var f;!e&&BB.Data.User.get("isLoggedIn")&&(e=BB.Data.User.get("id"));for(f in b)b.hasOwnProperty(f)&&(e?BB.Action.Like.getStatsForEntitiesAndUser(e,b[f],f,{success:h,error:d.onStatsError}):BB.Action.Like.getCountsForEntities(b[f],f,0,999,{success:function(b){var d=f,e=[],k;for(k in b.data)b.data.hasOwnProperty(k)&&
e.push(a.extend({},g,{entityId:k,total:b.data[k],type:d}));h({data:e,ret_code:200})},error:d.onStatsError}))},h=function(a){if("object"===typeof a&&200===a.ret_code)d.onStatsSuccess(a.data);else d.onStatsError()};f.batchCommitted=function(a){b={};for(var d in a)a.hasOwnProperty(d)&&(b[a[d].likeType]=b[a[d].likeType]||[],b[a[d].likeType].push(a[d].entityId));k()};this.onStatsSuccess=function(a){};this.onStatsError=function(){};this.addToQueue=function(a){!e&&a.loggedInUserId&&(e=a.loggedInUserId);
f.addEntityToQueue(a.entityId+a.likeType,a)};return this}})(jQuery);
(function(a){BB.createNamespace("BB.Data");BB.Data.CommentData=BB.Data.CommentData||function(){var b,d={},e=this,f=new BB.Data.Queue,g={comments:[],commentsCount:0,externalRef:"",rows:0,startRow:0,totalRows:0,type:""},k=function(){for(var a in d)if(d.hasOwnProperty(a)){var b=a,f=d[a],g=f.commentsCount-f.comments.length,h=f.parameters.commentsPerPage,k=void 0,m=BB.Data.User.get("isLoggedIn")&&BB.Data.User.get("isActive"),u=f.comments.length,v=void 0;f.commentsLeft=g>h?h-1:g;f.loggedInUser=e.loggedInUserId();
f.loggedInUserAvatar=BB.Data.User.get("avatarURL");f.showBottomTextfield=3<f.commentsCount||!f.parameters.showTopTextfield;f.commentsDisabled=!0===f.parameters.commentsDisabled?!0:!1;for(k=0;k<u;k++){v=f.comments[k];h=f.comments[k].thumbPath;if(!h)v.thumbPath="//common.bbcomcdn.com/images/default-avatar/Avatar-Unisex-Default_35x35.jpg";else if(h.match(/.*\/\/imagecdn\..*/)&&!h.match(/(\d+x\d+)\.\w+$/)){g=v;if("undefined"===typeof h)h="";else var x=h.lastIndexOf("."),h=h.substr(0,x)+"-35x35"+h.substr(x);
g.thumbPath=h}v.entityId=f.id;v.canReport=v.userId!==e.loggedInUserId()&&m;v.canRemove=v.userId===e.loggedInUserId()||f.parameters.ownerId===e.loggedInUserId()?!0:BB.Data.User.get("isModerator")||BB.Data.User.get("isAdministrator")}d[b]=f}e.dataRetrieved(d)},h=function(){var e,f=[],h=[],m,p,t;for(e in b)b.hasOwnProperty(e)&&(m||(m=b[e].initialNumberOfComments),p=b[e].commentType,t=b[e].entityId,f.push(p),h.push(t),d[t+p]=a.extend(!0,{},g),d[t+p].externalRef=b[e].entityId,d[t+p].type=b[e].commentType,
d[t+p].parameters=b[e]);BB.Action.Comment.getCommentsByEntities(f,h,m,{success:function(a){if(a&&200===a.ret_code&&a.data&&a.data.commentsList){var b,e=a.data.commentsList.length,f,g=[],h,n;for(b=0;b<e;b++){f=a.data.commentsList[b];n=f.comments.length;for(h=0;h<n;h++)g.push(f.comments[h].id);h=f.externalRef+f.type;!d[h]||d[h].comments&&0!==d[h].comments.length||(f.parameters=d[h].parameters,d[h]=f)}}k()},error:function(a){k()}})},m=function(a,b){BB.Action.Comment.addComment(a,b.id,b.externalRef,b.type,
b.parameters.ownerId,{success:function(a){if(a&&a.data){var f=d[b.externalRef+b.type];f&&f.comments.push(a.data);k();e.postCommentResponse(e.responseKeys.SUCCESS)}else e.postCommentResponse(e.responseKeys.ERROR_GENERAL)},error:function(a){switch(a.ret_code){case 900:e.postCommentResponse(e.responseKeys.ERROR_FLOOD_CONTROL);break;case 702:e.postCommentResponse(e.responseKeys.ERROR_SPAM);break;default:e.postCommentResponse(e.responseKeys.ERROR_GENERAL)}}})};f.batchCommitted=function(a){b=a;h()};this.postComment=
function(a,b){2<a.length?b.id?m(a,b):BB.Action.Comment.bindEntity(b.type,b.externalRef,{success:function(d){d&&200===d.ret_code?(b.id=d.data,m(a,b)):e.postCommentResponse(e.responseKeys.ERROR_GENERAL)},error:function(a){e.postCommentResponse(e.responseKeys.ERROR_GENERAL)}}):e.postCommentResponse(e.responseKeys.ERROR_MIN_LENGTH)};this.removeComment=function(a){var b,e,f,g,h;for(b in d)if(d.hasOwnProperty(b))for(f=d[b].comments.length,e=0;e<f;e++)if(d[b].comments[e].id===a){g=d[b].id;h=d[b].comments[e].userId;
break}g&&BB.Action.Comment.deleteComment(a,g,h)};this.responseKeys={SUCCESS:0,ERROR_GENERAL:1,ERROR_MIN_LENGTH:2,ERROR_FLOOD_CONTROL:3,ERROR_SPAM:4};this.loggedInUserId=function(){return BB.Data.User.get("id")};this.dataRetrieved=function(a){};this.postCommentResponse=function(a){};this.getMoreComments=function(b){BB.Action.Comment.getComments(b.id,b.comments.length+1,b.parameters.commentsPerPage,!0,{success:function(e){if(e&&200===e.ret_code&&e.data){var f=e.data.externalRef,g=e.data.type;e.data.comments=
e.data.comments.reverse();e.data.comments=e.data.comments.concat(d[f+g].comments);d[f+g]=a.extend(b,e.data)}k()},error:function(a){k()}})};this.addToQueue=function(a,b){f.addEntityToQueue(a.entityId+a.commentType,a)};return this};if("function"===typeof window.dispatchEvent){try{loadedEvent=new Event("BB:Data:CommentData.defined")}catch(b){loadedEvent=document.createEvent("Event"),loadedEvent.initEvent("BB:Data:CommentData.defined",!0,!0)}window.dispatchEvent(loadedEvent)}})(jQuery);BB.createNamespace("BB.Action");
BB.Action.Delegate=BB.Action.Delegate||function(){var a={},b={};return{init:function(b){a=b},parseMacro:function(d){if(d in a)return a[d];b["parseMacro_"+d]||(console.warn('BB.Action.Delegate#parseMacro: failed to find action "',d,'" in',a),b["parseMacro_"+d]=!0)},registerMacro:function(d,e){"object"===typeof e&&e.ns&&e.method?a[d]=e:b["registerMacro_"+d]||(console.warn('BB.Action.Delegate#registerMacro failed to register macro "'+d+'". Incorrect params.'),b["registerMacro_"+d]=!0)}}}();
BB.Action.Delegate.init({bbAd:{ns:"BB.UI.Ad.Google",method:"create"},addThis:{ns:"BB.UI.AddThis",method:"create"},workflow:{ns:"BB.Action.Workflow",method:"trigger",on:"click"},loginRequired:{ns:"BB.Action.Modal",method:"trigger",on:"click",p:{nsTemplate:"BB.UI.Login"}},toggle:{ns:"BB.Action.Jquery",method:"toggle",on:"click"},report:{ns:"BB.Action.Modal",method:"trigger",on:"click",p:{nsTemplate:"BB.UI.Report"}},modalFromPageContent:{ns:"BB.Action.Modal",method:"trigger",on:"click",p:{nsTemplate:"BB.UI.FromPageContent"}},
tooltipMessage:{ns:"BB.Action.Tooltip",method:"createMessage",on:"click"},bbc:{ns:"BB.Action.BBC",method:"trigger",on:"mouseenter"},dropdown:{ns:"BB.UI.DropDown",method:"create"},muscleMap:{ns:"BB.UI.MuscleMap",method:"create"},input:{ns:"BB.UI.Input.Base",method:"create"},activeRequired:{ns:"BB.Action.ActiveRequired",method:"trigger",on:"click"},"activeRequired activeRequired":{ns:"BB.Action.ActiveRequired",method:"trigger",on:"click"},gearMenu:{ns:"BB.Action.GearMenu",method:"create"},signup:{ns:"BB.UI.Signup.BootStrap",
method:"create",on:"click"},updateModal:{ns:"BB.Action.UpdateModal",method:"trigger",on:"click"},datePicker:{ns:"BB.UI.Input.DatePicker",method:"create"},triggerClickableChildInput:{ns:"BB.Action.ClickableChildInput",method:"trigger",on:"click"},filmStrip:{ns:"BB.UI.FilmStrip",method:"create"},coreInput:{ns:"BB.UI.Input.CoreInput",method:"create"},caption:{ns:"BB.UI.Input.Caption",method:"create"},profileComment:{ns:"BB.UI.Comment.ProfileComment",method:"create"},dataBinding:{ns:"BB.Action.DataUpdater",
method:"listen"},dataImport:{ns:"BB.Data.Setup",method:"metaImport",synchPaint:!0},module:{ns:"BB.UI.Module.Base",method:"metaCreate"},videoModal:{ns:"BB.Action.Modal",method:"trigger",on:"click",p:{nsTemplate:"BB.UI.Video.Modal"}},heightInput:{ns:"BB.UI.Input.Height",method:"create"},lineTruncation2:{ns:"BB.UI.Text.LineTruncation2",method:"create"},feedCardGearMenu:{ns:"BB.UI.FeedCardGearMenu",method:"create"},bbMention:{ns:"BB.App.Mentions",method:"initialize"},bbAtMention:{ns:"BB.App.Mentions",
method:"transform"},achievedBFWeightGoal:{ns:"BB.UI.AchievedBFWeightGoal",method:"create"}});BB.createNamespace("BB.Core.Util");BB.createNamespace("BB.Action");
BB.Action.Binder=BB.Action.Binder||function(a,b){var d=function(d,e){var f=a(this),m,l;if(null===d||void 0===d||"number"===typeof d)d=f.data("action");void 0!==d&&null!==d&&"undefined"!==d&&("forced_login"===d.behavior&&(d="loginRequired"),"string"===typeof d&&(l=BB.Action.Delegate.parseMacro(d),"undefined"!==typeof l&&(d=l)),"object"===typeof d&&("string"===typeof d.ns&&0<d.ns.length||"object"===typeof d.ns)&&(d.synchPaint=d.synchPaint||!1,"string"===typeof d.on&&0<d.on.length?(m=b.getNamespace(d.ns),
"object"===typeof m&&"function"===typeof m[d.method]&&(d.directP?f.bind(d.on,d.p,function(){try{m[d.method](d.directP)}catch(a){}}):f.bind(d.on,d.p,function(a){try{m[d.method].call(f,a)}catch(b){}}),f&&f.data("bbBinder",!0))):(l=function(){m=b.getNamespace(d.ns);if("object"===typeof m&&"function"===typeof m[d.method]&&!0!==f.data().bbBinder)try{m[d.method](f,d.p),f&&f.data("bbBinder",!0)}catch(a){}},e||d.synchPaint?l():"complete"===document.readyState||"interactive"===document.readyState?l():a(l))))},
e=/^(http:)*\/\/bodyspace.bodybuilding.com\/[0-9a-zA-Z_]+\/*$/,f=function(b){BB.Action.BBC&&(b=b||a(document.body),b.find("a").each(function(){var b=a(this),f=b.attr("href"),g;!b.data("bbBinder")&&f&&e.test(f)&&!b.hasClass("noBBC")&&"bbc"!==b.data("action")&&(f=f.replace("//bodyspace.bodybuilding.com/","").replace("http:","").replace("/",""),"workouts"!==f&&"fitboard"!==f&&"photos"!==f&&"community"!==f&&"bodyspace"!==f&&((g=b.find("img"))&&0<g.length&&(b=a(g[0])),b.data("slug",f).data("action","bbc"),
d.call(b)))}))};a(function(){var e=b.getNamespace("Wicket.Event");e&&"function"===typeof e.subscribe&&e.subscribe("/dom/node/added",function(b,e){var g=a(e),l=g.find(".bbBinder");l&&0<l.length&&l.each(function(){d.call(this)});f(g)})});return{wire:function(b,e,h){"string"===typeof b&&(b=a(b));"object"===typeof b&&null!==b&&0<b.length&&(void 0!==e?b.each(function(){d.call(a(this),e,h)}):b.each(function(){var b=a(this);b.data("bbBinder")||d.call(b,void 0,h)}),f(b))},trigger:function(d,e){var f=a(this),
m="string"===typeof e?BB.Action.Delegate.parseMacro(e):e,l=b.getNamespace(m.ns);if(m.directP)l[m.method](m.directP);else d.data=m.p,l[m.method].call(a(f),d)},bindBBCSmart:f}}(jQuery,BB.Core.Util);
BB.Loc=BB.Loc||function(a){var b=new BB.Core.MessageController({name:"locLoadedNotification"}),d={"en-us":{MONTH_0:"Jan",MONTH_1:"Feb",MONTH_2:"Mar",MONTH_3:"Apr",MONTH_4:"May",MONTH_5:"Jun",MONTH_6:"Jul",MONTH_7:"Aug",MONTH_8:"Sep",MONTH_9:"Oct",MONTH_10:"Nov",MONTH_11:"Dec",AM:"am",PM:"pm",LAST_UPDATE:"Last Update",LAST_UPDATE_MOTIVATION_LEVEL:"Last updated to {motivation_level} on",ADV_1:"Free",ADV_2:"Join Now",ADV_3:"Customized Content",ADV_4:"Massive Online Community",ADV_5:"Track Your Progress",
ADV_6:"",YES:"Yes",NO:"No",CLOSE:"Close",CANCEL:"Cancel",ADD:"Add",SAVE:"Save",SIGN_UP:"Sign Up",MEMBER_LOGIN:"Member Login",LOGIN:"Login",LOGIN_INSTRUCTIONS1:"Login using your BodySpace account. If you do not yet have a BodySpace account, click",LOGIN_INSTRUCTIONS_LINK:"New Account",LOGIN_INSTRUCTIONS2:"and we will get you all set up!",USERNAME_PLACEHOLDER:"Username / Email",PASSWORD_PLACEHOLDER:"Password",REMEMBER_ME:"Remember Me",LOG_IN:"Log In",FORGOT_LOG_IN:"Forgot Login Info?",FAIL_LOGIN_NAME_AND_PASSWORD:"Please enter your Username / Email and Password.",
FAIL_LOGIN_NAME:"Please enter your Username / Email.",FAIL_LOGIN_PASSWORD:"Please enter your Password.",FAIL_LOGIN_STRIKES:"Login incorrect, you have {STRIKES} tries remaining.",BODYSPACE_ACTIVITY:"BodySpace Activity",VIEW_ALL:"View All",EDIT:"Edit",NO_PHOTO:"No Photo",MY_BODYSPACE:"Dashboard",ORDERS:"Orders",SETTINGS:"Settings",QUICK_REORDER:"Quick Reorder",WISH_LIST:"Wish List",CART:"Cart",LOG_OUT:"Log Out",NOTIFICATIONS:"Notifications",ACTION_ITEMS:"Action Items",REQUESTS:"Requests",MESSAGES:"Messages",
BODY_WEIGHT:"Body Weight",HEIGHT:"Height",UPDATE_FIT_STATUS:"Post a Fit Status",CONFIRM_CLOSE_UNSAVED_CHANGES:"You have unsaved changes. Are you sure you want to close this form?",UPDATE_BODY_WEIGHT:"Update Your Body Weight",UPDATE_BODY_FAT:"Update Your Body Fat Percentage",UPDATE_HEIGHT:"Update Your Height",UPDATE_FIT_STATUS_AND_MOTIVATION:"Update Your Fit Status & Motivation Level",BODY_FAT:"Body Fat",BF:"BF",MOTIVATION_LEVEL:"Motivation Level",FIT_STATUS:"Fit Status",NO_FIT_STATUS:"You have not entered a Fit Status.",
NO_MOTIVATION_LEVEL_00:"You have not entered a",NO_MOTIVATION_LEVEL_01:"Motivation Level.",PREVIOUS_MOTIVATION_LEVEL_SET:"Previous motivation level set",INVALID_VALUE_RANGE:"{stat} may not be less than {MIN} {UNIT} or greater than {MAX} {UNIT}",INVALID_VALUE_WEIGHT:"Weight may not be less than {MIN} {UNIT} or greater than {MAX} {UNIT}",INVALID_VALUE_HEIGHT:"Height may not be less than {MIN_STATEMENT} or greater than {MAX_STATEMENT}",INVALID_VALUE_FAT:"Body fat must be between 4% and 75%",INVALID_VALUE:"The entered value must be between {MIN} and {MAX}",
CHARACTERS_REMAINING:"<span>{VALUE}</span> characters remaining",LBS:"Lbs.",KG:"kg",LENGHT_IN:"in.",LENGTH_FT:"ft.",LENGHT_CM:"cm",LENGTH_M:"m",LENGTH_KM:"km.",LENGHT_IN_ALT:'"',LENGTH_FT_ALT:"'",LENGHT_CM_ALT:"cm",LENGTH_M_ALT:"m",LENGTH_KM_ALT:"km.",HOURS_ABBR:"Hrs",CHOOSE:"Choose...",UPLOAD_NEW:"Upload New",EDIT_INFO:"Edit Info",CROP_ROTATE:"Crop & Rotate",ACCOUNT_BANNED:"Your account is banned",ACCOUNT_NOT_ACTIVE:"Your account is not activated",INVALID_CHARACTERS:'{stat} can only be numbers or "."',
NO_UPDATES:"No Updates",LOGIN_TO_BODYSPACE:"Log In to Bodyspace",LOGIN_REQUEST_REASON_GENERIC:"You must be a member to continue.",LOGIN_REQUEST_REASON_REVIEW:"You must be a member in order to review a product.",LOGIN_REQUEST_REASON_LIKE:"You must be a member in order to submit commenting and liking.",DONT_HAVE_AN_ACCOUNT:"DON'T HAVE AN ACCOUNT?",JOIN_NOT_ITS_FREE:"JOIN NOW, IT'S FREE!",LOGIN_WITH_BODYSPACE_ACCOUNT:"LOG IN WITH YOUR<br />BODYSPACE ACCOUNT",SIGNUP_BRIEF:"Signing up for a free BodySpace account gives you unlimited access to:",
USER_LIST_TITLE:"{AMOUNT} Member Who {LIST_TARGET} This",USERS_LIST_TITLE:"{AMOUNT} Members Who {LIST_TARGET} This",COMMENT:"Comment",COMMENTS:"Comments",LEAVE_COMMENT:"Leave a comment&hellip;",CANCEL_COMMENT:"By clicking cancel, changes will not be saved. Would you like to continue?",ERROR_ADDING_COMMENT:"There was an error posting your comment, please try again later.",COMMENT_MARKED_AS_SPAM:"Due to our spam filter, your comment has not yet been posted. If not spam, your comment will be posted within 48 hours.",
COMMENT_THROTTLED:"You can only post a comment every 20 seconds. Please wait and try again.",COMMENT_REMOVE_CONFIRM:"Are you sure you want to remove this comment?",PROFILE_COMMENT_REMOVE_CONFIRM:"Are you sure you want to remove this comment and any replies?",COMMENT_MIN_LENGTH:"Comment text must be at least 2 characters long.",EDIT_REVIEW:"Edit Review",DELETE_REVIEW:"Delete Review",DELETE_REVIEW_CONFIRM:"Are you sure you want to delete this review?",OVERALL_RATING:"overall rating:",ALL_FIELDS_ARE_REQUIRED:"All Fields Are Required",
YOUR_NAME:"Your Name",YOUR_EMAIL:"Your Email",YOUR_EMAIL_ADDRESS_WONT_BE_PUBLISHED:"(Your email address will not be published)",REASON_FOR_REPORTING:"Reason For Reporting",INAPPROPIATE_CONTENT:"Inappropiate Content",ADVERTISING_SPAM:"Advertising/Spam",PLEASE_PROVIDE_MORE_DETAILS_FOR_REPORTING:"Please Provide More Details Why You Are Reporting This",NOTE:"NOTE",PLEASE_USE_THIS_FORM_ONLY_TO_REPORT:"Please use this form only to report questionable content.",CHARACTERS_LIMITS_DIRECTIONS:"({MIN} characters minimum. {MAX} characters maximum)",
SUBMIT:"Submit",PRODUCT_DISCLAIMER_TITLE:"Product Review Disclaimer",PRODUCT_DISCLAIMER_MESSAGE:"The views and opinions expressed by contributors of the product reviews are their own and not necessarily those of Bodybuilding.com. These reviews should not be taken as recommendations but rather customer opinions of the products that they may or may not have used. Furthermore, Bodybuilding.com makes no warranty or representation, expressed or implied, as to the accuracy or sufficiency of the information contributed by outside sources, and assumes no responsibility or liability regarding the use of such information. Bodybuilding.com does not warrant the performance, effectiveness or applicability of any materials listed or linked to on Bodybuilding.com. Products sold on Bodybuilding.com are not intended to diagnose, treat, cure, or prevent any disease. The information provided in the reviews is intended for educational purposes only.",
BUILD_MUSCLE:"Build Muscle",LOSE_FAT:"Lose Fat",TRANSFORM:"Transform",IMPROVE_SPORT:"Improve Sport",ENDURANCE:"Endurance",FLEXIBILITY:"Flexibility",OTHER:"Other",EVERYONE:"Everyone",MEN_ONLY:"Men Only",MEN_TEEN:"Men: Teen",MEN_20_39:"Men: 20-39",MEN_40:"Men: 40+",WOMEN_ONLY:"Women Only",WOMEN_TEEN:"Women: Teen",WOMEN_20_39:"Women: 20-39",WOMEN_40:"Women: 40+",ALL_LEVELS:"All Levels",BEGINNER:"Beginner",INTERMEDIATE:"Intermediate",EXPERT:"Expert",GOAL_ACHIEVED:"Goal Achieved",GOAL_NOT_ACHIEVED:"Goal Not Achieved",
CURRENT_GOAL:"Current Goal",TRACKED:"Tracked",NOT_ENOUGH_INFO_CHART:"Not enough information is available to display a chart.",NOT_ENOUGH_WEIGHT_INFO:'To see a chart, you must track two or more weight entries.<a href="#" class="bbBinder" data-action="updateModal" data-target="Weight">Track your weight</a>.',NOT_ENOUGH_BODYFAT_INFO:'To see a chart, you must track two or more body fat entries. <a href="#" class="bbBinder" data-action="updateModal" data-target="BodyFat">Track your body fat</a>.',NOT_ENOUGH_WORKOUT_INFO:'To see a chart, you must track at least one workout entry. <a href="http://my.bodybuilding.com/workouts/track-workout">Track a workout</a>.',
GOAL_HISTORY:"Goal History",GOAL_DATES:"Goal Dates: {START_DATE} - {END_DATE}",GOAL_MODAL_ERROR:"There was an error getting your goal progress. Please try again later.",LEAN_BODY_MASS:"Lean Body Mass",PROGRESS:"Progress",START:"Start",END:"End",GOAL:"Goal",WANTED_TO:"Wanted to",ACTUALLY:"Actually",LOSE:"Lose",LOST:"Lost",GAIN:"Gain",GAINED:"Gained",ACHIEVED:"Achieved",WEIGHT:"Weight",OF:"of",WORKOUTS_TRACKED:"Workouts Tracked",WORKOUT_TRACKED:"Workout Tracked",HOUR_OF_CARDIO:"Hour of Cardio",HOURS_OF_CARDIO:"Hours of Cardio",
LIFTED:"Lifted",ACTION_ITEMS_DESC:"Action Items are tasks that you need to complete to stay on track. By completing these tasks, you will be more likely to reach your goals, stay motivated, and hold yourself accountable to others. Here you can adjust the frequency that you are reminded to complete action items as well as the location you receive it.",WEIGHT_BODY_FAT:"Weight / Body Fat",REMIND_ME:"Remind Me",EVERY_DAY:"Every Day",EVERY_DAYS:"Every {DAY} Days",NEVER:"Never",SET_UP_ALERTS:"Set Your Alerts",
HOW_LONG_HAVE_YOU_LIFTING:"How long have you been consistently lifting weights? This will determine how fast you can realistically put on muscle.",LESS_THAN_TWO_YEARS:"LESS THAN 2 YEARS",BETWEEN_TWO_AND_THREE_YEARS:"2-3 YEARS",MORE_THAN_FOUR_YEARS:"4+ YEARS",LIFTING_FOR_LESS_THAN_TWO_YEARS:"I have been lifting consistently for less than 2 years",LIFTING_BETWEEN_TWO_AND_THREE_YEARS:"I have been lifting consistently for 2-3 years",LIFTING_MORE_THAN_FOUR_YEARS:"I have been lifting consistently for 4 or more years",
SKINNY_RIPPED:"Skinny Ripped",MALE_MODEL:"Male Model",ATHLETE:"Athlete",BODYBUILDER:"Bodybuilder",STRONGMAN:"Strongman",PRO_BODYBUILDER:"Pro Bodybuilder",FASHION_MODEL:"Fashion Model",SWIMSUIT:"Swimsuit",FIT_WOMAN:"Fit Woman",FITNESS_MODEL:"Fitness Model",GOAL_DATE:"Goal Date:",GOAL_DATE_ON_DATE:"On <span></span> you could be:",GOAL_DATE_COMP_CHANGE:"With a total change of:",ADJUST_INTENSITY:"Adjust Intensity",LESS_AGGRESSIVE:"Less<br />Aggressive",RECOMMENDED:"Recommended",MORE_AGGRESSIVE:"More<br />Aggressive",
DELETE_GOAL_CONFIRM:"Are you sure you want to delete this goal?",LEAN:"Lean",BEACH_READY:"Beach-ready",FIT:"Fit",AVERAGE:"Average",OBESE:"Obese",ATHLETIC:"Athletic",OVERWEIGHT:"Overweight",SLIGHTLY_OBESE:"Slightly Obese",MORBIDLY_OBESE:"Morbidly Obese",FOLLOW:"Follow",UNFOLLOW:"Unfollow",FOLLOWING:"Following",COMMENT_POSTED:"Your comment was posted successfully!",CONNECT_TO_FACEBOOK:"Connect with Facebook",LOGIN_WITH_FACEBOOK:"Log in with Facebook",SIGNUP_WITH_FACEBOOK:"Sign up with Facebook",FACEBOOK_SETTING_SAVED:"Your Facebook preferences have been saved!",
FACEBOOK_SETTINGS_NOT_SAVED:"There was an error saving your Facebook preferences. Please try again.",FACEBOOK_DISCONNECT:"Are you sure you want to unlink your account from Facebook?",HIS:"his",HER:"her",THEIR:"their",ARM:"Arm",MEASUREMENT:"Measurement",FACEBOOK_TIMESTAMP_EX:"About an hour ago",FACEBOOK_WEIGHT_EX:"{name} updated {pronoun} weight from 200 Lbs. to 190 Lbs., a 10 Lb. loss in 30 days.",FACEBOOK_BODYFAT_EX:"{name} updated {pronoun} body fat from 20% to 15%, a 5% loss in the past 30 days.",
FACEBOOK_BODYSTAT_EX:"{name} updated {pronoun} arm measurement from 20 in. to 22 in., a 2 in. gain in 60 days.",FACEBOOK_SETGOAL_EX:"Goal Weight: 115 Lbs.<br />Goal Body Fat: 12% Body Fat<br />Goal Expires: Oct 3, 2014",FACEBOOK_ACHIEVEDGOAL_EX:"Weight Change: 14 Lbs. Lost<br />Body Fat Change: 9% Body Fat Lost",FACEBOOK_OVERALLGOAL_EX:"My goal is to improve my physique and energy level, while continuing to better myself daily.",FACEBOOK_MOTIVATION_EX:"I feel great today!",FACEBOOK_MOTIVATION_EX2:"to 10/10",
FACEBOOK_FITSTATUS_EX:"I had an amazing workout today. Let's see what tomorrow brings!",FACEBOOK_ADDEDPROGRAM_EX:"{name} added a new program to {pronoun} calendar: Total Body Transformation.",FACEBOOK_ADDEDPROGRAM_EX2:"Total Body Transformation",FACEBOOK_CREATEDPROGRAM_EX:"{name} created the program: Total Body Transformation.",FACEBOOK_CREATEDTEMPLATE_EX:"{name} created the workout template: Upper Body Workout for Beginners.",FACEBOOK_TRACKEDWORKOUT_EX:"Jamie Eason LiveFit - Legs",FACEBOOK_TRACKEDWORKOUT_EX2:"Total Weight Lifted: 10,000 Lbs.<br /># of Workouts Completed in Last 7 Days: 5<br />1 Rep Max Achieved: Squat - 150 Lbs.",
FACEBOOK_RATEDTEMPLATE_EX:"{name} rated the workout template: Upper Body Workout for Beginners a 10/10",FACEBOOK_RATEDTEMPLATE_EX2:"Upper Body Workout for Beginners",FACEBOOK_JOINEDGYM_EX:"Date Joined: Jan 31, 2014<br />Location: New York, New York (United States)",FACEBOOK_JOINEDGYM_EX2:"United Fitness",FACEBOOK_FITBOARDPOST_EX:"Category: Motivation<br />Sub Category: Inspiration<br />Reposts: 1",FACEBOOK_FITBOARDPOST_EX2:"This really motivates me!",FACEBOOK_BODYGROUP_EX:"We Can Do It!",FACEBOOK_BODYGROUP_EX2:"Members: 50<br />Created: Nov 18, 2013",
FACEBOOK_WORKOUTTEMPLATE_EX:"Upper Body Workout for Beginners",FACEBOOK_WORKOUTTEMPLATE_EX2:"{name} added the workout template: Upper Body Workout for Beginners.",FACEBOOK_INSPIREDBY_EX:"Jamie has an amazing physique and is very committed to her fitness lifestyle",FACEBOOK_BODYBLOG_EX:"Week 1",FACEBOOK_BODYBLOG_EX2:"Today is the first day of the rest of my life. After months of a less than perfect diet, I have decided to commit to a 12 week trainer. In addition to following the daily exercises, I have committed to cleaning up my nutrition and taking supplements. With the help of...",
FACEBOOK_PROFILEPHOTO_EX:"Pose: Front<br />Weight: 190 Lbs.<br />Body Fat: 15%<br />Date Taken: Dec 31, 2013",FACEBOOK_PROFILEPHOTO_EX2:"Working hard every day.",FACEBOOK_GALLERYPHOTO_EX:"These weights aren't going to lift themselves!",FACEBOOK_GALLERYPHOTO_EX2:"Pose: Front<br />Weight: 190 Lbs.<br />Body Fat: 15%<br />Date Taken: Dec 31, 2013",FACEBOOK_RATEDPROGRAM_EX:"{name} rated the program: Total Body Transformation.",FACEBOOK_RATEDPROGRAM_EX2:"a 10/10",UPDATED:"updated",SET_A:"set a",ACHIEVED_A:"achieved a",
ADDED_A:"added a",ADDED_THE:"added the",CREATED_A:"created a",CREATED_THE:"created the",JOINED_THE:"joined the",IS_INSPIRED_BY:"is inspired by",TRACKED_THE:"tracked the",POSTED_A:"posted a",NEW:"new",GYM:"Gym",TRACKED_A_WORKOUT:"tracked a workout",TRACKED_THE_WORKOUT:"tracked the workout",RATED_A_TEMPLATE:"rated a workout template",RATED_THE:"rated the",JOINED_THE_GYM:"joined the gym",WEIGHT_BF_GOAL:"Weight & Body Fat Goal",OVERALL_GOAL:"Overall Goal",WORKOUT:"Workout",WORKOUT_PROGRAM:"Workout Program",
WORKOUT_TEMPLATE:"Workout Template",NEW_FITBOARD_POST:"Fitboard Post",BODY_GROUP:"BodyGroup",BODYBLOG_ENTRY:"BodyBlog Entry",PROFILE_PHOTO:"Profile Photo",GALLERY_PHOTO:"Gallery Photo",FOOD_JOURNAL_ENTRY:"Food Journal entry",SHARE_ALL:"Share All",DONT_SHARE_ALL:"Don't Share All",NO_FB_BS_USER:"A BodySpace account has not been found for this Facebook user. <a href='http://my.bodybuilding.com/community/my-bodyspace-login' id='facebook-connect-link'>Log in to an existing account</a> or create a new BodySpace account below.",
FACEBOOK_DISCLAIMER:"We will never post to Facebook without permission",PROFILE_COMMENT_ERROR_MSG:"Our servers are recovering from a killer workout. Please try again later.",PROFILE_COMMENT_SPAM_MSG:"Due to our spam filter, your comment has not yet been posted. If not spam, your comment will be posted within 48 hours!",PROFILE_COMMENT_SUCCESS_MSG:"COMMENT POSTED!",PROFILE_COMMENT_PENDING_REVIEW_MSG:"<strong>COMMENT SUBMITTED!</strong> Your comment will appear when it becomes approved.",PROFILE_COMMENT_THROTTLE_MSG:"Hey fast fingers! Comments can only be posted every 20 seconds. Please wait and try again later.",
SUCCESS:"Success!"}};return{get:function(a,b,g){g=g||BB.Data.Env.get("currentLanguage");g=d[g]?g:"en-us";a=d[g][a]?d[g][a]:a;return a=BB.Core.Util.format(a,b)},setLanguage:function(e){var f,g=BB.Data.Env.get("currentLanguage"),k=!0,h=BB.Data.Env.get("isLocalStorageAvailable");if("string"!==typeof e||0===e.length)e="en-us";if("en-us"===e||e===g)b.sendMessage("locLoadedNotification",e);else{BB.Data.Env.set("currentLanguage",e);if(h)try{(f=JSON.parse(window.localStorage.getItem("BB.Loc"+e)))&&1350588632516===
f.timeStamp&&(d[e]=f,BB.Loc.keys=d[e],k=!1,b.sendMessage("locLoadedNotification",e)),BB.Data.Env.set("currentLanguage",e)}catch(m){BB.Tool.Debug.log(m.message)}k&&a.ajax({url:"//common.bbcomcdn.com/BB/Loc/jsonp/"+e+".js",async:!1,dataType:"jsonp",success:a.noop})}},registerOnLoad:function(a){b.registerListener("locLoadedNotification",BB.Core.Util.createRandomId(),a)},load:function(a,f){d[a]=f;BB.Loc.keys=d[a];b.sendMessage("locLoadedNotification",a)},keys:d["en-us"]}}(jQuery);
BB.API=function(a,b){function d(d,e,k,h){b.parseResponse(e,k,h);d&&a.isFunction(d.success)&&d.success(h)}function e(e,g,k,h,m){var l={};a.isString(e)?(l.suffix=e,l.params=g,l.callbacks=k,l.forceSSL=m||!1):l=e;a.isNonEmptyString(l.params)?l.params.match("&needsuser=")||(l.params+="&needsuser=1"):(l.params||(l.params={}),0===l.params.needsuser||!1===l.params.needsuser?delete l.params.needsuser:l.params.needsuser=1);(e=b.parseRequest(l.suffix,l.params))&&l.callbacks&&a.isFunction(l.callbacks.success)?
l.callbacks.success(e):BB.Core.Iris.callAPI((m?"https:":BB.Data.Env.get("protocol"))+"//api.bodybuilding.com/api-proxy/"+l.suffix,function(a){d(l.callbacks,l.suffix,l.params,a)},l.callbacks?l.callbacks.error:void 0,{type:"POST"},l.params)}return{setCachedData:d,call:function(a,b,d,h,m){console.warn("BB.API.call: This method is deprecated. Use BB.API.send instead.");e(a,b,d,h,m)},send:e,forcePost:function(a){(new Image).src=a}}}(BB.Core.Util,BB.Data.Cache.Listener);BB.createNamespace("BB.Action.Event");
BB.Action.Event=function(){var a=function(){(function(a,d,e,f,g,k,h){a.GoogleAnalyticsObject=g;a[g]=a[g]||function(){(a[g].q=a[g].q||[]).push(arguments)};a[g].l=1*new Date;k=d.createElement(e);h=d.getElementsByTagName(e)[0];k.async=1;k.src=f;h.parentNode.insertBefore(k,h)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create","UA-30385920-1");ga("set","forceSSL",!0)};return{track:function(b){window.ga||a();b.hasOwnProperty("userId")&&b.userId&&ga("set","userId",b.userId);
ga("send","event",b)}}}();BB.createNamespace("BB.Action.Event");BB.Action.Event.AccountCreateEvent=function(a,b,d){return{userId:a,eventCategory:!0===b?"AccountCreationWithFacebookConnect":"AccountCreationNoFacebookConnect",eventAction:d}};BB.createNamespace("BB.Action.Event");
BB.Action.Event.GoalWizardProgressEvent=function(a,b,d,e){var f="";!0===b?(f="goalSettingComplete",!0===d&&(f="goalCompleteAndUserContinued")):f="goalSettingDroppedOut";return{userId:a,eventCategory:"GoalWizardProgress",eventAction:f,eventValue:e}};BB.createNamespace("BB.Action.Event");BB.Action.Event.LoginFacebookEvent=function(a,b){return{userId:a,eventCategory:"LoginFacebook",eventAction:b}};BB.createNamespace("BB.Action.Event");
BB.Action.Event.LoginRightSideBarEvent=function(a,b,d){return{userId:a,eventCategory:"LoginRightSideBar",eventAction:b,eventValue:d}};BB.createNamespace("BB.Action.Event");BB.Action.Event.LoginTopNavBarEvent=function(a,b,d){return{userId:a,eventCategory:"LoginTopNavBar",eventAction:b,eventValue:d}};BB.createNamespace("BB.Action.Event");BB.Action.Event.PostSignupContinueEvent=function(a){return{userId:a,eventCategory:"PostSignupAction",eventAction:"continueClick"}};BB.createNamespace("BB.Action.Event");
BB.Action.Event.PostSignupDoneEvent=function(a){return{userId:a,eventCategory:"PostSignupAction",eventAction:"doneClick"}};BB.createNamespace("BB.Action.Event");BB.Action.Event.SignupClickEvent=function(a){return{eventCategory:"SignupClick",eventAction:a}};
(function(a){a(function(){BB.createNamespace("BB.UI.AchievedModal");BB.UI.AchievedModal=function(){var a,d;a=function(){if(BB.Data.User.get("goals")){d=function(){var a=BB.Data.User.get("goals").goals,b,d={};for(b=0;b<a.length;b++)d[a[b].goalType]={accomplishDate:a[b].accomplishedDate,startVal:a[b].startValue,currVal:a[b].currentValue};return d};var a=d().weight,b=d().bodyfat,g=BB.Core.Util.cookie.get("wgtBfGoalAchieved").value,k=BB.Data.User.get("id"),h=BB.Core.Util.Date.Utils.bbcomDateFormat(a.accomplishDate),
m=BB.Core.Util.Date.Utils.bbcomDateFormat(b.accomplishDate),l=BB.Core.Util.Date.Utils.bbcomDateFormat((new Date).getTime());b&&a&&g!=k&&h==l&&m==l&&BB.UI.Modal.Base.create(void 0,{nsTemplate:"BB.UI.AchievedBFWeightGoal",p:{type:"Weight & Body fat goal achieved!",name:"Goal Achieved Modal",weight:{accomplishDate:a.accomplishDate,startVal:a.startVal,currVal:a.currVal},bodyfat:{accomplishDate:b.accomplishDate,startVal:b.startVal,currVal:b.currVal}}})}};return{trigger:function(d){if(BB.Data.User.get("goals"))switch(d){case "weight":return new a}}}}()})})(jQuery);
(function(a){a(function(){BB.UI.AchievedBFWeightGoal=function(){return{setup:function(a,d){d.plugableContainers=[{nsTemplate:BB.UI.AchievedBFWeightGoal.footer,targetContainer:"footer"}];d.title=d.p.type;return d},create:function(b,d,e){"function"===typeof e&&e();return function(){var e=BB.Data.User.get("goals").mainGoal.text,g=BB.Data.User.get("goals").goalPhysique.goalphysique,k="imperial"==BB.Data.User.get("units")?d.p.weight.startVal:Math.round(BB.Core.Util.toKg(d.p.weight.startVal)),h="imperial"==
BB.Data.User.get("units")?d.p.weight.currVal:Math.round(BB.Core.Util.toKg(d.p.weight.currVal)),m=d.p.bodyfat.startVal,l=d.p.bodyfat.currVal,n=BB.Core.Util.Date.Utils.bbcomDateFormat((new Date).getTime()),r="imperial"==BB.Data.User.get("units")?"LBS":"KG",q=function(a,b,d){a=Math.round(10*BB.Core.Util.format(b-a))/10;return Math.abs(a)+" "+("weight"==d?r:"% BF")+" "+(0>a?"Lost":"Gained")},k=q(k,h,"weight"),m=q(m,l,"bodyfat");a("<div class='feedCardUserPost'><div class='feedCardContentUpdate'><div class='goalsFeeds bbPtDiagonalStripeWhite'><div class='photoContainer '><img class='goalAchieved' src='http://common.bbcomcdn.com/Min/themes/graphyte/weightnBfgoalAchievedToken.png'></div><div class='labelsContainer'><div class='lineSperator'><span class='lineFade gray'></span><span class='lineFade white'></span></div><div class='goalStats'><div class='subContainer'><div class='goalText'><div class='title'>Goal Physique:</div><div class='stat'>"+
g+"</div></div><div class='goalText'><div class='title'>Main Goal:</div><div class='stat'>"+e+"</div></div><div class='goalText'><div class='title'>Goal Weight & BodyFat:</div><div class='stat'>"+h+" "+r+" & "+l+"% BF</div></div></div><div class='subContainer'><div class='goalText'><div class='title'>Total Body Composition Change Of:</div><div class='stat'>"+k+" & "+m+"</div></div><div class='goalText'><div class='title'>Goal Achieved On:</div><div class='stat'>"+n+"</div></div></div></div></div><div class='ribbon-outer'><div class='ribbon-inner blue'>Achieved</div></div></div></div></div>").appendTo(b)}()},
finish:function(){BB.Core.Util.cookie.set({name:"wgtBfGoalAchieved",value:BB.Data.User.get("id"),expires:1,domain:".bodybuilding.com",path:"/"})},footer:{setup:function(a,d){return d},create:function(b,d){var e=a('<div class="footerModalInnerContainer"><div class="bbButton primaryAction"><span>Enter New Goal</span></div></div>'),f=a('<div class="footerModalInnerContainer"><div class="bbButton primaryAction"><span>Close</span></div></div>');"store"!=window.location.pathname.split("/")[1]?(e.appendTo(b),
e.on("click",function(){require(["http://common.bbcomcdn.com/Min/UI/Workflow/Goal.min.js","http://common.bbcomcdn.com/BB/APP/Goals/UI/SetGoal/min/goalWizard.js"],function(){BB.UI.Modal.Base.finish();(new BB.App.Goals.UI.SetGoal.Modal).create()})})):(f.appendTo(b),f.on("click",function(){BB.UI.Modal.Base.finish()}))},finish:function(){}}}}()})})(jQuery);BB.Action.BatchTrigger={trigger:function(a,b){if(b instanceof Array){var d,e=b.length;for(d=0;d<e;d++)BB.Action.Binder.wire(a,b[d])}}};
(function(a){BB.Action.Feed={prepareFeed:function(b){var d,e,f,g,k;try{if(a.isUndefined(b)||a.isNull(b)||!a.isNonEmptyString(b.eventType))return!1;b.amount=0;switch(b.eventType){case "ACHIEVED_GOAL":break;case "GOAL_SET":break;case "WORKOUT_TRACKED":break;case "TEMPLATE_CREATED":break;case "PROGRAM_BUILT":break;case "PROGRAM_APPLIED":b.linkURL="http://bodyspace.bodybuilding.com/workouts/workout-programs-overview/"+b.userProgram.programid+"?context=PAST_LIST&slug="+b.slug+"&userprogramid="+b.userProgramId;
break;case "FITSTATUS":break;case "BODYFAT":void 0!==b.oldBodyFat&&null!==b.oldBodyFat?(e=BB.Core.Util.formatFloat(b.oldBodyFat-b.newBodyFat),b.deltaVerb=0>e?"a gain of "+-1*e+"%":0<e?"a loss of "+e+"%":"no change",b.deltaDays=Math.abs(Math.floor((BB.Core.Util.toDate(b.newMeasurementDate)-BB.Core.Util.toDate(b.oldMeasurementDate))/864E5).toString(10)),b.deltaDays=1===b.deltaDays?b.deltaDays+" day":b.deltaDays+" days",b.oldBodyFat=BB.Core.Util.formatFloat(b.oldBodyFat)):(b.oldBodyFat=0,b.deltaVerb=
"");b.newBodyFat=BB.Core.Util.formatFloat(b.newBodyFat);a.isNonEmptyString(b.permalink)?b.linkURL=b.permalink:b.linkURL="http://bodyspace.bodybuilding.com/"+b.slug+"/more.php?section=progress";break;case "PROGRESS_PHOTO":"com.bodybuilding.api.entity.feed.RollupEntity"===b.clazz?(b.amount=b.events.length,b.plural=!0,b.linkURL="http://bodyspace.bodybuilding.com/"+b.slug+"/more.php?section=progresspics"):(b.amount="1",b.plural=!1,a.isNonEmptyString(b.permalink)?b.linkURL=b.permalink:b.linkURL="http://bodyspace.bodybuilding.com/"+
b.slug+"/more.php?section=progresspics");break;case "PROFILE_PHOTO":break;case "WEIGHT_CHANGED":b.unit=BB.Data.User.get("unitsOfWeight");void 0!==b.oldWeight&&null!==b.oldWeight&&0<b.oldWeight&&void 0!==b.oldMeasurementDate&&null!==b.oldMeasurementDate&&0<b.oldMeasurementDate?(e=BB.Core.Util.formatFloat(b.oldWeight-b.newWeight),0>e?(e*=-1,d="Kg."===b.unit?BB.Core.Util.formatFloat(BB.Core.Util.toKg(e))+" kg.":e+("1"===e||"1.0"===e?" Lb.":" Lbs."),b.deltaVerb="a gain of "+d):0<e?(d="Kg."===b.unit?BB.Core.Util.formatFloat(BB.Core.Util.toKg(e))+
" kg.":e+("1"===e||"1.0"===e?" Lb.":" Lbs."),b.deltaVerb="a loss of "+d):b.deltaVerb="no change",b.deltaDays=Math.abs(Math.floor((BB.Core.Util.toDate(b.newMeasurementDate)-BB.Core.Util.toDate(b.oldMeasurementDate))/864E5).toString(10)),b.deltaDays=1===b.deltaDays?b.deltaDays+" day":b.deltaDays+" days","Kg."===b.unit&&(b.oldWeight=BB.Core.Util.toKg(b.oldWeight)),b.oldWeight=BB.Core.Util.formatFloat(b.oldWeight)):(b.oldWeight=0,b.deltaVerb="");"Kg."===b.unit&&(b.newWeight=BB.Core.Util.toKg(b.newWeight));
b.newWeight=BB.Core.Util.formatFloat(b.newWeight);a.isNonEmptyString(b.permalink)?b.linkURL=b.permalink:b.linkURL="http://bodyspace.bodybuilding.com/"+b.slug+"/more.php?section=progress";break;case "FRIEND":b.spellout=[];b.amount=0;if("com.bodybuilding.api.entity.feed.RollupEntity"===b.clazz)for(g=b.events.length,2<g&&(b.amount=g-2,b.plural=1<b.amount?"s":""),k=0;k<g&&2>k;k++)b.spellout.push(b.events[k].friendUser),b.events[k].friendUser.separator=2<g?1!==k?", ":"":2===g&&1!==k?" and ":"";else b.friendUser.separator=
"",b.spellout.push(b.friendUser);break;case "INSPIREDBY":break;case "BLOG":break;case "MOTIVATION_PROGRAM":case "PROGRAM_UPDATED":switch(b.programType){case "SUPPLEMENTS":b.eventType="SUPPLEMENTS_PROGRAM";break;case "NUTRITION":b.eventType="NUTRITION_PROGRAM";break;case "WORKOUT":b.eventType="WORKOUT_PROGRAM"}break;case "NUTRITION_PROGRAM":case "SUPPLEMENTS_PROGRAM":case "WORKOUT_PROGRAM":break;case "BODYSTAT":b.spellout=[];b.amount=0;b.plural="";b.unit=b.unit=BB.Data.User.get("unitsOfLength");"com.bodybuilding.api.entity.feed.RollupEntity"===
b.clazz?(g=b.events.length,1<g&&(b.amount=g-1),1<b.amount&&(b.plural="s"),b.spellout.push(b.events[0])):b.spellout.push(b);"cm"===b.unit&&(b.spellout[0].value=BB.Core.Util.toCm(b.spellout[0].value));b.spellout[0].value=BB.Core.Util.formatFloat(b.spellout[0].value);b.spellout[0].oldValue&&0<b.spellout[0].oldValue&&b.spellout[0].oldMeasurementDate&&0<b.spellout[0].oldMeasurementDate&&("cm"===b.unit&&(b.spellout[0].oldValue=BB.Core.Util.toCm(b.spellout[0].oldValue)),d=b.spellout[0].oldValue-b.spellout[0].value,
e=BB.Core.Util.formatFloat(d),0>e?(e*=-1,b.spellout[0].deltaVerb=", a gain of "+e+" "+b.unit):b.spellout[0].deltaVerb=0<e?", a loss of "+e+" "+b.unit:" no change",a.isNonEmptyString(b.spellout[0].permalink)?b.spellout[0].linkURL=b.spellout[0].permalink:b.spellout[0].linkURL="http://bodyspace.bodybuilding.com/"+b.spellout[0].slug+"/more.php?section=progress",b.spellout[0].deltaDays=Math.abs(Math.floor((BB.Core.Util.toDate(b.spellout[0].measurementDate)-BB.Core.Util.toDate(b.spellout[0].oldMeasurementDate))/
864E5)).toString(10),b.spellout[0].deltaDays=b.spellout[0].deltaDays+" day"+("1"===b.spellout[0].deltaDays?"":"s"),b.spellout[0].deltaVerb=b.spellout[0].deltaVerb+" in "+b.spellout[0].deltaDays);break;case "GROUP_JOIN":a.isNonEmptyString(b.permalink)&&(b.groupUrl=b.permalink);break;case "FITBOARD_POST":b.plural="";b.amount=1;b.permalinkUrl="";"com.bodybuilding.api.entity.feed.RollupEntity"===b.clazz&&(g=b.events.length,b.amount=g,1<g&&(b.plural="s",b.permalinkUrl="http://bodyspace.bodybuilding.com/fitboard/board/user/"+
b.slug));""===b.permalinkUrl&&(a.isString(b.permalink)&&0!==b.permalink.length?b.permalinkUrl=b.permalink:b.permalinkUrl="http://bodyspace.bodybuilding.com/fitboard/item/id/"+b.postId);break;case "GALLERY_PHOTO":b.plural="";b.amount=1;b.photosAddedLink="";"com.bodybuilding.api.entity.feed.RollupEntity"===b.clazz&&(g=b.events.length,b.amount=g,1<g?(b.plural="s",b.photosAddedLink="http://bodyspace.bodybuilding.com/photos/view-user-photos/s/"+b.slug):1===g&&(b=b.events[0],b.plural="",b.amount=1,b.photosAddedLink=
""));""===b.photosAddedLink&&(a.isNonEmptyString(b.permalink)?b.photosAddedLink=b.permalink:b.photosAddedLink="http://bodyspace.bodybuilding.com/photos/view-user-photo/"+b.photoId);break;case "GYM_JOIN":a.isNonEmptyString(b.permalink)?b.linkURL=b.permalink:b.linkURL="http://bodyspace.bodybuilding.com/networks/view/gym/"+b.gymId+"/name/"+b.gymName.toLowerCase().replace(/ /g,"-")+b.gymCity.toLowerCase().replace(/ /g,"-")+b.gymState.toLowerCase().replace(/ /g,"-")+b.gymCountry.toLowerCase().replace(/ /g,
"-");break;case "GOAL_CHANGED":a.isNonEmptyString(b.permalink)?b.linkURL=b.permalink:b.linkURL="http://bodyspace.bodybuilding.com/"+b.slug;break;case "CURRENT_SUPPLEMENT":case "REVIEWED_SUPPLEMENT":b.spellout=[];b.amount=0;"com.bodybuilding.api.entity.feed.RollupEntity"===b.clazz?(g=b.events.length,1<g&&(b.amount=g-1),b.plural=1<b.amount?"s":"",b.spellout.push(b.events[0]),f=b.events[0]):(b.spellout.push(b),f=b);a.isNonEmptyString(f.permalink)&&(f.reviewUrl=f.permalink+f.slug+"/"+f.id.toString()+
"/");break;case "BODYGROUP":a.isNonEmptyString(b.permalink)&&(b.groupUrl=b.permalink);break;case "PERSONAL_VIDEO":a.isNonEmptyString(b.permalink)?b.videoUrlBodySpace=b.permalink:b.videoUrlBodySpace=b.profileUrl+"/more.php?section=videos&type=you&i="+b.videoId+"#"+b.videoId;break;case "MOTIVATION_LEVEL":a.isNonEmptyString(b.permalink)?b.linkURL=b.permalink:b.linkURL="http://bodyspace.bodybuilding.com/"+b.slug+"/motivationlevel.php";break;case "RATING":if(b&&b.ratedEntity&&b.ratedEntity.eventType)switch(b.ratedEntity.eventType){case "TEMPLATE_CREATED":b.eventType=
"RATED_TEMPLATE";8===b.ratingValue&&(b.is8=!0);break;case "PROGRAM_BUILT":b.eventType="RATED_PROGRAM";8===b.ratingValue&&(b.is8=!0);break;default:return!1}else return!1;break;case "FOOD_JOURNAL_TRACK":b.amount=1;b.permalinkUrl="";"com.bodybuilding.api.entity.feed.RollupEntity"===b.clazz&&(g=b.events.length,b.amount=g,1<g&&(b.permalink="http://bodyspace.bodybuilding.com/foodjournal/"+b.slug));break;default:b.eventType="DEFAULT"}}catch(h){return!1}return!0}}})(BB.Core.Util);
BB.Action.Like=function(a){var b=function(a,b,f){BB.API.send("liking/"+a,b,f,0)};return{call:function(a,e,f,g,k,h){b(a?"set":"delete",{ownerid:f,entityid:g,type:k,stats:!0},h)},getStats:function(d,e,f,g,k){d=a.extend(k||{},{ownerid:d,entityids:a.isArray(e)?e.join(","):e,type:f});b("getstats",d,g)},getStatsForEntities:function(d,e,f){b("getstatsforentities",{entityids:a.isArray(d)?d.join(","):d,type:e},f)},getLikesByEntities:function(d,e,f,g,k,h){b("getlikesbyentities",{userid:d,entityid:a.isArray(e)?
e.join(","):e,type:f,numrows:k,startrow:g},h)},getCountsForEntities:function(d,e,f,g,k){b("getcountsbyentities",{entityid:a.isArray(d)?d.join(","):d,type:e,startrow:f,numrows:g},k)},getUsers:function(a,e,f,g,k){b("getuserswholikeentity",{type:a,entityid:e,startrow:f||0,numrows:g||25},{success:function(a){BB.API.send("bbc/get",{user:a.data.userIds.join(",")},k)},error:k.error})},getStatsForEntitiesAndUser:function(d,e,f,g){d={entityids:a.isArray(e)?e.join(","):e,type:f,userid:d||BB.Data.User.get("id")};
b("getstatsforentitiesanduser",d,g)}}}(jQuery);
(function(a,b){BB.Action.Modal={trigger:function(d){var e=a(this);BB.UI.Modal.Base.finish();d&&d.data&&"BB.UI.Login"===d.data.nsTemplate?BB.Data.User.get("isLoggedIn")||(b.isFunction(d.preventDefault)&&d.stopPropagation(),BB.UI.Modal.Base.create(e,d.data)):BB.UI.Modal.Base.create(e,d.data)},close:function(a,e,f){void 0!==e?BB.UI.Animation.Fade.down(a,e,function(){e.remove();e=void 0;b.isFunction(f)&&f()}):b.isFunction(f)&&f()},open:function(a,b,f){b.removeClass("hide").fadeIn()},bind:function(a){a.bind("click",
BB.UI.Modal.createCallback({key:a.attr("data-update-key"),defaultValue:a.data("current-value-seed")}))}}})(jQuery,BB.Core.Util);
(function(a){BB.Action.Drawer=function(){return{close:function(b,d,e){e&&"function"===typeof e&&e(b,d);d.removeClass("bbDrawerShow");a(".utility-nav .progress").removeClass("bbDrawerShow")},open:function(b,d,e){e&&"function"===typeof e&&e(b,d);d.addClass("bbDrawerShow");a(".utility-nav .progress").addClass("bbDrawerShow")},bind:function(a){}}};BB.Action.Drawer.trigger=function(b){return BB.UI.Base.Drawer.create(a(this),b.data)}})(jQuery);
BB.Action.Login={submit:function(a){var b=a.find("input[name=password]")[0],d=a.find("input[name=password_md5]")[0];BB.Core.Util.md5.md5hashAuto(b,d);a.submit()}};
BB.Action.BBC=function(a,b){var d,e,f,g=!0,k=function(){d&&window.clearTimeout(d)},h=function(){g=!1;k()},m={ns:"BB.Action.BBC",method:"close",on:"mouseleave.bbc"},l=function(a){var b,d;g&&(f.unbind("mouseleave.bbc"),BB.Action.Binder.wire(f,m),e=BB.UI.Tooltip.Base.create(f,a),!BB.Data.User.get("isActive")&&BB.Data.User.get("isLoggedIn")&&(b=e.find(".bbcActions"),d=b.find(".bbButton"),d.off("click").on("click",function(){d.remove();b.addClass("activeRequired");BB.UI.Feedback.Error.create(b,{message:BB.Action.ActiveRequired.getInactiveMessage()});
BB.UI.Tooltip.Base.reposition(e)})),f.bind("mouseover.bbcHold",k),e.bind("mouseover.bbcHold",k))},n=function(a,d){var e,f=BB.Data.User.get("unitsOfLengthSequence");a.nsTemplate=BB.UI.BBC;a.name=a.realname||a.username;a.customWiring=m;a.isFriendRelated=a.isFriend||a.pendingFriendship;if(e=a.weight)BB.Data.User.get("isMetric")&&(e=b.toKg(a.weight)),a.weightLabel=BB.Data.User.get("unitsOfWeight");a.weight=b.formatFloat(e,"--");isNaN(a.height)?b.isString(a.height)&&a.height.length||(a.height="--"):(BB.Data.User.get("isMetric")&&
(a.height=b.toCm(a.height)),e=b.toHeightSequence(a.height,BB.Data.User.get("isMetric")),a.height=b.formatInt(e[1])+BB.Loc.get(f[1]+"_ALT")+b.formatInt(e[0])+BB.Loc.get(f[0]+"_ALT"));a.bodyfat=b.formatFloat(parseFloat(a.bodyfat),"--");a.age=b.formatFloat(a.age,"--");a.notSelf=BB.Data.User.get("id")!==a.userId;d&&(d.recommendation&&(d.recommendation.ignorePresent&&(a.ignorePresent=!0),d.recommendation.hideFollow&&(a.hideFollow=!0)),d.imageResize&&(0<=a.profilePic.indexOf("50x50")?a.profilePic=a.profilePic.replace("50x50",
d.imageResize):a.profilePic=a.profilePic.replace("t.jpg","-"+d.imageResize+".jpg")));return a},r=function(){try{f.unbind("mouseleave.bbc").unbind("mouseover.bbcHold"),e.unbind("mouseover.bbcHold").remove(),e=void 0}catch(b){}a(".bbTooltip.bbc").remove()};return{trigger:function(){var e,m;r();f=a(this);g=!0;m=f.data("slug");b.isString(m)&&m.length?e={slug:m}:(m=parseInt(f.data("user"),10),e={user:m});k();e&&(d=window.setTimeout(function(){var a=BB.Data.DB.get("BBC",m);a?l(a):BB.API.send("bbc/get",
e,{success:function(a){a=a.data.cards[0];n(a);l(a);BB.Data.DB.set("BBC",m,a)}})},300),f.bind("mouseleave.bbc",h))},close:function(){d=window.setTimeout(r,50)},adaptBBC:n}}(jQuery,BB.Core.Util);
(function(){var a=function(a,d,e){BB.API.send("comments-api/"+a,d,e)};BB.createNamespace("BB.Action").Comment={getCounts:function(b,d,e){a("get/countbyref",{entityIds:$.isArray(b)?b.join(","):b,type:d},e)},bindEntity:function(b,d,e){a("entity/bind",{type:b,externalRef:d,ts:(new Date).getTime()},e)},addComment:function(b,d,e,f,g,k){a("add",{text:b,entityId:d,ownerId:g,userId:BB.Data.User.get("id"),externalRef:e,type:f,ts:(new Date).getTime()},k)},getComments:function(b,d,e,f,g){a("get",{entityId:b,
start:d,pageSize:e,orderByNewest:f},g)},getCommentsByEntities:function(b,d,e,f){a("getcommentsbyrefids",{types:$.isArray(b)?b.join(","):b,externalrefs:$.isArray(d)?d.join(","):d,total:e},f)},deleteComment:function(b,d,e,f){a("delete",{entityId:d,commentId:b,userId:e||BB.Data.User.get("id"),groupId:BB.Data.User.get("userGroup"),needsuser:!1},f)}}})();
BB.Action.DataUpdater=function(){this.listen=function(a){var b=a.data("target"),d=b.method,e=a.data("customHandler"),f=BB.Core.Util.getNamespace(b.ns);f&&"function"===typeof f.registerForUpdates&&(void 0===BB.Data.Env.get("pageOwner").slug||BB.Data.Env.get("isOwnPage"))&&(null!==e&&void 0!==e?f.registerForUpdates(e):f.registerForUpdates(function(e){var f=BB.Data.User.get("unitsOfLengthSequence");if(d===e.key)if(b.withUnits)switch(d){case "height":e=BB.Core.Util.toHeightSequence(e.newValue,BB.Data.User.get("isMetric"));
a.html(BB.Core.Util.formatInt(e[1])+BB.Loc.get(f[1]+"_ALT")+BB.Core.Util.formatInt(e[0])+BB.Loc.get(f[0]+"_ALT"));break;case "weight":a.html(BB.Core.Util.formatFloat(e.newValue,"--")+" "+BB.Data.User.get("unitsOfWeight"));break;case "bodyfat":a.html(BB.Core.Util.formatFloat(e.newValue,"--")+"%");break;default:a.html(e.newValue)}else a.html(e.newValue)}))}};
BB.Action.Jquery=function(a){return{toggle:function(b){b=a(this);b.parents().find(b.data("target")).toggle()},animatedToggle:function(b,d){var e=a(d.targetSelector);b.bind("click.AnimatedToggle",function(b){b.preventDefault();e.is(":visible")?(a(this).removeClass("open").addClass("closed"),e.slideUp("fast")):(a(this).removeClass("closed").addClass("open"),e.slideDown("fast"))})}}}(jQuery);
BB.Action.Tooltip=function(a){var b=function(b){var e=a(this);if(b&&b.data&&"BB.UI.Login"===b.data.nsTemplate){if(!BB.Data.User.get("isLoggedIn"))return"function"===typeof b.preventDefault&&(b.preventDefault(),b.stopPropagation()),BB.UI.Tooltip.Base.create(e,b.data)}else return BB.UI.Tooltip.Base.create(e,b.data)};return{trigger:b,triggerError:function(a,e,f,g){return b.call(a,{data:{nsTemplate:BB.UI.Feedback.Error,closeIcon:!0,closeOnBodyClick:void 0===g?!0:g,additionalClass:f?"onModal":"",message:e}})},
triggerSuccess:function(a,e,f){return b.call(a,{data:{nsTemplate:BB.UI.Feedback.Success,closeIcon:!0,closeOnBodyClick:!0,additionalClass:f?"onModal":"",message:e}})},triggerPromptConfirm:function(a,e,f,g){return b.call(a,{data:{nsTemplate:BB.UI.Prompt.Confirm,closeIcon:!0,closeOnBodyClick:!0,additionalClass:g?"onModal":"",message:e,onConfirm:f}})},triggerMessage:function(a,e,f){return b.call(a,{data:{nsTemplate:"BB.UI.Feedback.Message",closeIcon:!1,closeOnBodyClick:!0,message:e,disableArrow:null===
f?!1:f}})},createMessage:function(d){var e=a(d.currentTarget);d.stopPropagation();return b.call(e,{data:{nsTemplate:BB.UI.Feedback.Message,closeIcon:!0,closeOnBodyClick:!0,message:a(e).data("message")}})},reposition:function(a,b){BB.UI.Tooltip.Base.reposition(a,b)}}}(jQuery);
BB.Action.ActiveRequired=function(a){var b=BB.Data.User,d=function(){switch(b.get("status")){case 3:return"In order to use some features, you must validate your BodySpace account from the email that has been sent to you. If you no longer have this email, <a href='http://my.bodybuilding.com/register.php?do=requestemail'>request a new activation code</a>.";case 4:return"In order to use some features, you must have your parent or guardian fill out a permission form and submit it to Bodybuilding.com. <a href='http://my.bodybuilding.com/register.php?do=coppaform'>Print the form here</a>.";
case 8:return"Your account has been banned. Contact an admin at forum_admin@bodybuilding.com if you have questions about this ban."}};return{setup:function(){},trigger:function(e){if(b.get("isLoggedIn"))return b.get("isActive")?!0:(e&&(e.stopPropagation(),e.preventDefault()),a(".bbTooltip.feedbackError").remove(),BB.Action.Tooltip.triggerError(a(this),d),!1);e&&(e.stopPropagation(),e.preventDefault());try{var f=new Event("loginShow")}catch(g){document.createEvent?f=document.createEvent("loginShow"):
document.createEventObject?f=document.createEventObject("loginShow"):console.error("Can't create loginShow event object.")}f.headerTitle="LOG IN TO BODYSPACE";f.headerSubtitle="You must be a member to continue.";window.dispatchEvent(f);return!1},getInactiveMessage:d}}(jQuery);BB.Action.Container=BB.Action.Container||{};
BB.Action.Container.Persist=function(a){var b,d=null,e=null,f=function(){return b.find("#collapsable-content-show")},g=function(a,d){b.removeClass("hide");"contracted"===a?0===b.find(".collapsed").find(".content").length?b.hide(d):b.find(".collapsed").show(d).end().find(".expanded").hide(d).end().show(d):b.find(".expanded").show(d).end().find(".collapsed").hide(d).end().show(d)},k=function(a){BB.API.send("profile/setpreference",{userid:e,preferenceId:d,preferenceValue:"contracted"===a?"true":"false"},
{error:function(a){BB.Tool.Debug.log(a)}})},h=function(){f().add(b.find("#collapsable-content-close")).on("click.PersistentDrawer",function(a){a.preventDefault();this===f().get(0)?(a="expanded",k("expanded")):(a="contracted",k("contracted"));g(a,300)})};return{init:function(a,f){b=a;e=f.userId;d=f.prefId;var k="expanded";"contracted"===(f.isClosed?"contracted":"expanded")&&(k="contracted");g(k,0);h()}}}(jQuery);
BB.Action.UpdateModal=function(a){var b=function(a,b,f){BB.Action.ActiveRequired.trigger.call(f,a)&&(a=BB.UI.Modal.Base,a.finish(),a.create(f,{additionalClass:"updateModal",nsTemplate:b}))};return{trigger:function(d){var e=a(this),f;d.preventDefault();f=BB.Core.Util.toSentenceCase(e.data("target"));b(d,"BB.UI.Update."+("Bodyfat"===f?"BodyFat":f),e)},triggerBodyFat:function(d){b(d,BB.UI.Update.BodyFat,a(this))},triggerWeight:function(d){b(d,BB.UI.Update.Weight,a(this))},triggerFitStatus:function(d){b(d,
BB.UI.Update.FitStatus,a(this))},triggerMotivationLevel:function(d){b(d,new BB.UI.Update.MotivationLevel,a(this))}}}(jQuery);(function(a){BB.Action.ClickableChildInput={trigger:function(b){a(this).find("input[type='radio']").attr("checked","checked")}}})(jQuery);
(function(a){BB.Action.Workflow=function(){return{trigger:function(b){var d=a(this),e=d.data("target");b.preventDefault();BB.Action.ActiveRequired.trigger.call(d,b)&&(a('<link rel="stylesheet" type="text/css" href="//common.bbcomcdn.com/Min/UI/Workflow/'+e+'.min.css">').appendTo(a("head")),require(["//common.bbcomcdn.com/Min/UI/Workflow/"+e+".min.js"],function(){"Goal"===e&&(new BB.App.Goals.UI.SetGoal.Modal).create.call(a(this),b)}))}}}})(jQuery);
BB.Action.Omniture={post:function(a){try{s.referrer=s.pageURL;myValueArray=["inValue Channel PageName Breadcrumb URL ModalName".split(" "),"pageReviewModal help help:feedback: Help:Feedback: http://www.bodybuilding.com/help/ pageReviewModal".split(" "),"cartPromoModal atg atg:cart: Store:Cart: http://www.bodybuilding.com/store/ cartPromoModal".split(" "),"ClothingSizeModal-;atg;atg:categories and goals:clothingsizemodal:;Store:Shop By Brand:ClothingSizeModal:;http://www.bodybuilding.com/store/ClothingSizeModal/;clothingSizeModal".split(";"),
["signup",s.channel,s.channel+":other:",s.channel+":Other:","http://bodyspace.bodybuilding.com/community/","signupModal"],"wtbfgoalwizard;bodyspace;bodyspace:dashboard:;Bodyspace:My Dashaboard:;http://bodyspace.bodybuilding.com/dashboard/;wtbfgoalModal".split(";"),"fbinvite;bodyspace;bodyspace:member overview:;Bodyspace:Profile:;http://www.bodybuilding.com/;fbinviteModal".split(";"),"googlead atg atg:campaign: Store:Campaign: http://www.bodybuilding.com/store/campaign/ googleadModal".split(" "),"size atg atg:product: Store:Product: http://www.bodybuilding.com/store/product/ sizeModal".split(" "),
"flavor atg atg:product: Store:Product: http://www.bodybuilding.com/store/product/ flavorModal".split(" "),"color atg atg:product: Store:Product: http://www.bodybuilding.com/store/product/ colorModal".split(" "),"quickAddToCartModal atg atg:product:addToCart: Store:Product: http://www.bodybuilding.com/store/product/ quickAddToCartModal".split(" ")];for(var b=0;b<myValueArray.length;b++)if(myVal=myValueArray[b][0],j=a.indexOf(myVal),-1!=j){s.channel=myValueArray[b][1];s.pageName=s_omni.pageName=myValueArray[b][2]+
a;s.eVar55=myValueArray[b][3]+a;s.pageURL=myValueArray[b][4]+a;s.eVar10=myValueArray[b][5];s.events+=",scAdd";break}(s_code=s.t())&&document.write(s_code)}catch(d){}}};BB.Action.RequireEduction=function(){return{init:function(a,b){require(["//common.bbcomcdn.com/BB/Action/Education/src/education.js","//common.bbcomcdn.com/BB/Lib/intro.js/intro.js","//common.bbcomcdn.com/BB/UI/Education/Tooltip/src/full/Education.js"],function(){BB.UI.Education.Tooltip.init(a,b)})}}}();
(function(a){BB.Action.Banner=function(){return{"delete":function(b){var d=a(this);b.preventDefault();b.stopPropagation();BB.Action.Tooltip.triggerPromptConfirm(d,"Are you sure you want to delete the current BodyBanner?",function(){BB.API.send("photos/moderatebanner",{userid:BB.Data.Env.get("pageOwner").userId,needsuser:!1},{success:function(){a(".body-large-banner img").attr("src","http://assets.bodybuilding.com/bodyspace/images/sections/profile/BodyBanner_Default.jpg")},error:function(){}})})}}}})(jQuery);
BB.Action.Follow=function(a){var b=function(b,e){var f=e.isFollowing||!1,g=!0,k=BB.Loc.get("FOLLOWING"),h=BB.Loc.get("FOLLOW"),m=BB.Loc.get("UNFOLLOW");f?b.text(k):b.text(h);b.bind("click.Follow",function(a){a.preventDefault();BB.Action.ActiveRequired.trigger.call(b)&&g&&(g=!1,f?(b.text(h),f=!1,BB.Action.Follow.unfollow(e.userId,"",{success:function(a){g=!0},error:function(a){g=!0}})):(b.text(k),f=!0,BB.Action.Follow.follow(e.userId,"",{success:function(a){g=!0},error:function(a){g=!0}})))}).bind("mouseenter.Follow",
function(b){a(this).text()===k&&a(this).text(m)}).bind("mouseleave.Follow",function(b){a(this).text()===m&&a(this).text(k)})};return{addFriend:function(a,b,f){BB.Action.Follow.addFriendWithReference(a,b,1,f)},addFriendWithReference:function(a,b,f,g){a={userId:BB.Data.User.get("id"),friendId:a,message:b||"",ref:f};BB.API.send("friends/addfriend",a,g)},follow:function(a,b,f){a={userId:BB.Data.User.get("id"),friendId:a,message:b||""};BB.API.send("friends/follow",a,f)},unfollow:function(a,b,f){a={userId:BB.Data.User.get("id"),
friendId:a,message:b||""};BB.API.send("friends/removefollower",a,f)},init:function(a,e){return new b(a,e)}}}(jQuery);
BB.Action.OwnerSocial=function(a){var b,d,e=a(".BodyBanner__avatar"),f=function(b){var e=BB.Core.Util.createRandomId(),g=a.extend({},d);b.data("bbBinder")?(b.unbind("click"),b.data("bbBinder",!1)):(BB.Core.Messenger.registerListener("BB.UI.Friend.Add",e,function(a){return function(b){f(a)}}(b)),BB.Core.Messenger.registerListener("BB.UI.Friend.Remove",e,function(a){return function(b){f(a)}}(b)));d.isFriendRelated?(d.isFriend&&(g.nsTemplate="BB.UI.Friend.Remove",b.html("Remove As Friend"),b.bind("click",
g,BB.Action.Modal.trigger)),d.pendingFriendship&&(b.addClass("noLink"),b.html("Request Sent"))):(g.nsTemplate="BB.UI.Friend.Add",b.html("Add As Friend"),b.bind("click",function(){BB.Action.ActiveRequired.trigger()&&BB.Action.Modal.trigger({data:g})}))},g=function(a){BB.Action.Follow.init(a,{userId:d.userId,isFollowing:d.isFollowing})},k=function(){f(a(".bbBinderOwnerFriend").parents("button"));g(a(".bbBinderOwnerFollow").parents("button"));a(".bbBinderOwnerInspirational")};e&&0<e.length&&(b=BB.Data.Env.get("pageOwner"),
void 0===b.slug&&(b.slug=e.attr("href").replace(/^.*\//,"")),d=BB.Data.DB.get("BBC",b.slug),void 0===d?BB.API.send("bbc/get",{slug:b.slug},{success:function(e){e&&e.data&&a.isArray(e.data.cards)&&0<e.data.cards.length&&((e=e.data.cards[0])&&"string"===typeof e.username&&0<e.username.length?BB.Action.BBC.adaptBBC(e):e=null,BB.Data.DB.set("BBC",b.slug,e),b.userId=e.userId,d=e,k())}}):k());return{friend:f,follow:g,inspirational:function(a){}}}(jQuery);
(function(a,b,d){function e(a,b){if(a.innerText)a.innerText=b;else if(a.nodeValue)a.nodeValue=b;else if(a.textContent)a.textContent=b;else return!1}function f(a,d,g,h){for(var k=a[0],p=a.text(),t="",w,u,v=0,x=p.length;v<=x;)w=v+(x-v>>1),u=b.trim(p.substr(0,w+1))+h.ellipsis,e(k,u),d.height()>h.maxHeight?x=w-1:(v=w+1,t=t.length>u.length?t:u);if(0<t.length)return e(k,t),!0;k=a.parent();a.remove();a=g?g.length:0;k.contents().length>a?(a=k.contents().eq(-1-a),g=f(a,d,g,h)):(d=k.prev(),a=d.contents().eq(-1),
a.length?(e(a[0],a.text()+h.ellipsis),k.remove(),g.length&&d.append(g),g=!0):g=!1);return g}function g(a,d,e,k){var q=a[0],p=a.contents(),t,w,u=0,v=p.length,x=!1;for(a.empty();u<v&&!x;u++)t=p.eq(u),w=t[0],8!==w.nodeType&&(q.appendChild(w),e.length&&(0<=b.inArray(q.tagName.toLowerCase(),h)?a.after(e):a.append(e)),d.height()>k.maxHeight&&(x=3===w.nodeType?f(t,d,e,k):g(t,d,e,k)),!x&&e.length&&e.remove());return x}function k(a,d){this.element=a;this.$element=b(a);this._name="truncate";this._defaults=
{lines:1,ellipsis:"\u2026",showMore:"",showLess:""};this.options=b.extend({},this._defaults,d);this.options.lineHeight||(this.options.lineHeight=window.getComputedStyle(a).lineHeight);this.options.maxHeight=parseInt(this.options.lines,10)*parseInt(this.options.lineHeight,10);this.$clipNode=b(b.parseHTML(this.options.showMore),this.$element);this.original=this.cached=a.innerHTML;this.isTruncated=!1;this.isCollapsed=!0;this.update()}var h="table a thead tbody tfoot tr col colgroup object embed param ol ul dl blockquote select optgroup option textarea script style".split(" ");
k.prototype={update:function(a){var b=!this.isCollapsed;a?this.original=this.element.innerHTML=a:this.isCollapsed&&this.element.innerHTML===this.cached&&(this.element.innerHTML=this.original);a=this.$element.wrapInner("<div/>").children();a.css({border:"none",margin:0,padding:0,width:"auto",height:"auto"});this.isTruncated=!1;a.height()>this.options.maxHeight?this.isTruncated=g(a,a,this.$clipNode,this.options):this.isCollapsed=!1;a.replaceWith(a.contents());this.cached=this.element.innerHTML;b&&(this.element.innerHTML=
this.original)},expand:function(){this.isCollapsed&&(this.isCollapsed=!1,this.element.innerHTML=this.isTruncated?this.original+this.options.showLess:this.original)},collapse:function(a){this.isCollapsed||(this.isCollapsed=!0,a?this.update():this.element.innerHTML=this.cached)}};b.fn.truncate=function(a){var d=b.makeArray(arguments).slice(1);return this.each(function(){var e=b.data(this,"jquery-truncate");e?"function"===typeof e[a]&&e[a].apply(e,d):b.data(this,"jquery-truncate",new k(this,a))})};a.Truncate=
k})(this,jQuery);BB.createNamespace("BB.UI.Text");
BB.UI.Text.LineTruncation2=function(a){return{create:function(b){function d(a){function d(){f+=1;0<f&&(b.hasClass("bbAtMentionDone")||!b.hasClass("bbAtMention"))&&e()}window.FontFaceOnload(a,{success:d,error:d})}function e(){var a=new Truncate(b.get(0),g);b.on("click",".show-more",function(d){d.preventDefault();b.data("max-height",b.css("max-height")).css({"max-height":"none",overflow:"visible"});a.expand();BB.Action.Binder.wire(b.find(".bbBinder"))}).on("click",".show-less",function(d){d.preventDefault();
a.collapse();b.css({"max-height":b.data("max-height"),overflow:"hidden"});BB.Action.Binder.wire(b.find(".bbBinder"))})}var f=0,g={lines:2},k;k=-1!==b.css("font-family").toLowerCase().indexOf("proxima");g=a.extend({},g,b.data());b.css("overflow","hidden");g.enableShowMore&&(g.showMore=' <a class="toggleTruncation show-more" href="#">View More</a>',g.showLess=' <a class="toggleTruncation show-less" href="#">View Less</a>');if(k){k=getComputedStyle(b.get(0)).fontFamily.split(",")[0];var h="normal"===
getComputedStyle(b.get(0)).fontWeight?"n4":"n7";d(k+":"+h)}else e()}}}(jQuery);BB.createNamespace("BB.UI.Comment.CommentModal");BB.UI.Comment.CommentModal.ProfileAction=function(){this.trigger=function(a){BB.Action.ActiveRequired.trigger.call(a&&a.target?a.target:this,a)&&("function"===typeof a.preventDefault&&a.preventDefault(),a.data=a.data||{},a.data.nsTemplate=new BB.UI.Comment.CommentModal.Profile,BB.Action.Modal.trigger.call(this,a))}};
(function(a){BB.createNamespace("BB.UI.Comment.CommentModal");BB.UI.Comment.CommentModal.Profile=function(){var b,d,e,f,g,k=function(a,b){return!0},h=function(f){1>d.length&&(d=a(".bbProfileComment.bbCaption .bbTextArea textarea"));var h=d.val();k(a(this),h)?(g=BB.UI.Spinner.create(a(f.currentTarget),BB.UI.Spinner.BUTTON),a.ajax({type:"POST",url:"http://bodyspace.bodybuilding.com/"+e+"/comment.php",data:{"do":"submit",comment:h,ajax:!0}}).done(function(e){BB.APP&&BB.APP.Profile&&BB.APP.Profile.VisitorComments.addComment(h);
g.stop();d.val("");a(f.currentTarget).attr("disabled","disabled");d.trigger("blur");"function"===typeof b&&setTimeout(function(){BB.UI.Modal.Base.setPreConditionToClose(null);BB.Action.Tooltip.triggerSuccess(a(f.currentTarget),BB.Loc.get("COMMENT_POSTED"),!0);b(f)},1E3)}).fail(function(b){g.stop();BB.Action.Tooltip.triggerError(a(f.currentTarget),BB.Loc.get("ERROR_ADDING_COMMENT"),!0)})):f.stopPropagation()};this.setup=function(b,d){return a.extend({},d,{title:d.headerText||"Leave a comment",plugableContainers:[{nsTemplate:new BB.UI.Update.BaseFooter("POST"),
targetContainer:"footer"}]})};this.create=function(g,k,n){var r=new BB.UI.Input.Caption;e=k.slug;"function"===typeof n&&(b=n());g.addClass("coreInputActiveSignal");r.create(a('<div class="postFitStatusYeah bbProfileComment" data-max-height="200" data-max-character-count="250" data-max-string-id="true"/>').appendTo(g));"function"===typeof k.wireUpdate?k.wireUpdate(h):a('<div class="post-button"><button class="bbButton primaryAction" disabled="disabled"><span>Post</span></button></div>').appendTo(g).find(".bbButton").bind("click",
h);BB.Action.Binder.wire(g.find(".bbBinder"));d=a(".bbProfileComment.bbCaption .bbTextArea textarea");f=g.find(".post-button > .bbButton");1>f.length&&(f=a(".bbFooterContent").find(".bbButton"),f.attr("disabled","disabled"));d.live("keydown keyup",function(){""===a(this).val()?f.attr("disabled","disabled"):f.removeAttr("disabled")})};this.finish=function(){};this.preConditionToClose=function(a,b){if(0===d.val().length)return!0;BB.Action.Tooltip.triggerPromptConfirm(b,"Your data will be lost, Are you sure you want to close?",
function(){BB.UI.Modal.Base.setPreConditionToClose(null);BB.UI.Modal.Base.finish()},!0);return!1}}})(jQuery);BB.createNamespace("BB.UI.Ad");
BB.UI.Ad.Google=function(a){window.googletag=window.googletag||{};googletag.cmd=googletag.cmd||[];a("<script/>",{async:!0,type:"text/javascript",src:"https://www.googletagservices.com/tag/js/gpt.js"}).appendTo("body");googletag.cmd.push(function(){googletag.pubads().set("adsense_background_color","FFFFFF")});return{create:function(b){var d=a(b),e=d.data("sec"),f=[],g=d.data("zone");googletag.cmd.push(function(){var a=d.data("size").split("x"),b=parseInt(a[0],10),a=parseInt(a[1],10);"string"===typeof e?
f=e.split("="):f[0]=e;1===f.length&&(f[1]=f[0],f[0]="sec");googletag.defineSlot("/9217486/BB/"+g,[b,a],d.attr("id")).addService(googletag.pubads()).setTargeting(f[0],f[1]);googletag.pubads().enableSingleRequest();googletag.enableServices()});googletag.cmd.push(function(){googletag.display(d.attr("id"));var b=setInterval(function(){a(".bbBinder[data-action=bbAd]").each(function(){var d=a(this),e;0<d.find("iframe").length&&(clearInterval(b),e=a(".bbBinder[data-action=bbAd]").find("iframe").contents().find("a"),
e.each(function(){var b=a(this);void 0===b.data("omnitureset")&&(b.bind("click",function(a){return function(b){BB.Action.Omniture.post("googlead-"+a.attr("id"))}}(d)),b.data("omnitureset",!0))}))})},1E3)})}}}(jQuery);BB.createNamespace("BB.UI.Animation");BB.UI.Animation.Fade={up:function(a,b,d,e){b.fadeIn(d)},down:function(a,b,d,e){b.fadeOut(d)},centerModal:function(){}};
BB.UI.TemplateCatalog=function(){var a={},b={},d=function(b){return"string"===typeof a[b]&&0<a[b].length},e=function(e,g){d(e)&&(dust.loadSource(dust.compile(a[e],e,g)),b[e]=!0)};return{set:function(b,d){a[b]=d},load:e,render:function(a,g,k){void 0===b[a]&&e(a);d(a)&&dust.render(a,g,k)},keys:{}}}();
(function(){BB.UI.TemplateCatalog.keys.Goal_Modal_Error="Goal_Modal_Error";BB.UI.TemplateCatalog.keys.Goal_Modal="Goal_Modal";BB.UI.TemplateCatalog.keys.Measure_Layout="Measure_Layout";BB.UI.TemplateCatalog.keys.Measure_All="Measure_All";BB.UI.TemplateCatalog.keys.Track_All="Track_All";BB.UI.TemplateCatalog.keys.Strength_Layout="Strength_Layout";BB.UI.TemplateCatalog.keys.Modal_Input_Units="Modal_Input_Units";BB.UI.TemplateCatalog.keys.Modal_input_Reg="Modal_input_Reg";BB.UI.TemplateCatalog.keys.Modal_Select=
"Modal_Select";BB.UI.TemplateCatalog.keys.Modal_Date_Picker="Modal_Date_Picker";BB.UI.TemplateCatalog.keys.Track_Measure_Layout="Track_Measure_Layout";BB.UI.TemplateCatalog.keys.Track_Strength_Layout="Track_Strength_Layout";BB.UI.TemplateCatalog.keys.How_To_Vid_Chest="How_To_Vid_Chest";BB.UI.TemplateCatalog.keys.How_To_Vid_UpperArms="How_To_Vid_UpperArms";BB.UI.TemplateCatalog.keys.How_To_Vid_Hips="How_To_Vid_Hips";BB.UI.TemplateCatalog.keys.How_To_Vid_Waist="How_To_Vid_Waist";BB.UI.TemplateCatalog.keys.How_To_Vid_Thighs=
"How_To_Vid_Thighs";BB.UI.TemplateCatalog.keys.How_To_Vid_Calves="How_To_Vid_Calves";BB.UI.TemplateCatalog.keys.How_To_Vid_ForeArms="How_To_Vid_ForeArms";BB.UI.TemplateCatalog.keys.How_To_Vid_Shoulders="How_To_Vid_Shoulders";BB.UI.TemplateCatalog.keys.How_To_Vid_Neck="How_To_Vid_Neck";BB.UI.TemplateCatalog.keys.How_To_Vid_Empty="How_To_Vid_Empty";BB.UI.TemplateCatalog.set("Goal_Modal_Error",'<div class="goal-modal-container">{message} </div>');BB.UI.TemplateCatalog.set("Goal_Modal",'<div class="goal-modal-container">{#items}<div class="goal-modal-row"><div class="title-container"><div class="{iconClass} goal-icon"></div><div class="goal-title">{label} {#lang}{PROGRESS}{/lang}</div></div><div class="goal-row-info">{#lang}{START}{/lang} {label}: <span class="value">{start}</span><span class="sep">|</span>{#lang}{END}{/lang} {label}: <span class="value">{end}</span><span class="sep">|</span>{#lang}{GOAL}{/lang} {label}: <span class="value">{goal}</span><br />{#lang}{WANTED_TO}{/lang} {loseOrGain}: <span class="value">{wantedTo}</span><span class="sep">|</span>{#lang}{ACTUALLY}{/lang} {lostOrGained}: <span class="value">{actually}</span></div><div class="goal-progress-bar {extraClass}"><div class="progress-display element-container"><span class="bbProgressBar fluid {extraClass}"><span class="percentage-bar" style="width:{percentage}%"><span class="eye-candy"></span><span class="percentage-info">{actually} {#lang}{OF}{/lang} {wantedTo} {lostOrGained} - {percentage}% {#lang}{ACHIEVED}{/lang}</span></span></span><div class="trophy-icon-container"><div class="trophyIconNormal"></div></div></div></div></div>{@sep}<div class="row-separator"></div>{/sep}{/items}</div>');
BB.UI.TemplateCatalog.set("Measure_Layout",'<div class="bodystatGoal labels inputs row noMargin"><div class="col-sm-4"><span class="statLabel">Current Measurement</span><div class="currMeasure"></div></div><div class="col-sm-4"><span class="statLabel">Goal Measurement</span><div class="goalMeasure"></div></div><div class="col-sm-4"><span class="statLabel">Goal Date</span><div class="goalDate"></div></div></div>');BB.UI.TemplateCatalog.set("Measure_All",'<div class="bodystatGoal labels inputs row noMargin {name}"><div class="col-sm-4 statName"><span class="">{type}</span></div><div class="col-sm-4"><span class="statLabel">Current</span><div class="currMeasure {name}" id="{stat}"></div></div><div class="col-sm-4"><span class="statLabel">Goal</span><div class="goalMeasure {name}"></div></div></div>');
BB.UI.TemplateCatalog.set("Track_All",'<div class="bodystatGoal labels inputs row noMargin {name}"><div class="col-sm-4 statName"><span class="">{type}</span></div><div class="col-sm-8 statValue"><span class="measure">Measurement</span><div class="currMeasure {name}" id="{stat}"></div></div></div>');BB.UI.TemplateCatalog.set("Strength_Layout",'<div class="liftingstatGoal"><div class="currlabels currInputs row noMargin"><div class="col-sm-4 pad"><span class="weightLiftedLabel">Current Max Weight Lifted</span><div class="currMax"></div></div><div class="col-sm-2"><div class="repsContainer"><span class="currentRepsLabel"># of Reps</span><div class="noReps"></div></div></div><div class="col-sm-6 calc">1 Rep Max: <span>0</span></div></div><div class="goallabels goalInputs row noMargin"><div class="col-sm-4 pad"><span class="weightLiftedLabel">Goal Max Weight</span><div class="goalMax"></div></div><div class="col-sm-2"><div class="repsContainer"><span class="currentRepsLabel"># of Reps</span><div class="noReps"></div></div></div><div class="col-sm-2 calc">1 Rep Max: <span>0</span></div><div class="col-sm-4 goalDate"></div></div></div>');
BB.UI.TemplateCatalog.set("Modal_Input_Units",'<div class="bbTextBox"><input type="number" class="input"><span class="unitOfMeasure">{unit}</span></div>');BB.UI.TemplateCatalog.set("Modal_input_Reg",'<input type="text" class="bbTextBox bbBlueBoldy input">');BB.UI.TemplateCatalog.set("Modal_Select",'<select class="bbBinder bbLarge" data-action="dropdown"></select>');BB.UI.TemplateCatalog.set("Modal_Date_Picker",'<div class="bbBinder goalDatePicker" data-additional-class="onModal" data-action="datePicker" data-constraints=\'{"min":"{minDay}", "max": "{maxDay}"}\'><input name="goalDate" type="text"></div>');
BB.UI.TemplateCatalog.set("Track_Measure_Layout",'<div class="labels inputs row noMargin"><div class="col-sm-4">Measurement<div class="currMeasure bodystatGoal"></div></div><div class="col-sm-4">Select a Date<div class="goalDate"></div></div></div>');BB.UI.TemplateCatalog.set("Track_Strength_Layout",'<div class="currlabels trackStrengthModal currInputs row noMargin"><div class="col-sm-3 pad"><span class="weightLiftedLabel">Weight Lifted</span><div class="currMax"></div></div><div class="col-sm-2"><span class="currentRepsLabel"># of Reps</span><div class="noReps"></div></div><div class="col-sm-3 calc">1 Rep Max: <span>0</span></div><div class="col-sm-4"><span class="selectDateLabel">Select A Date</span><div class="goalDate"></div></div></div>');
BB.UI.TemplateCatalog.set("How_To_Vid_Chest",'<embed type="application/x-shockwave-flash" src="http://www.bodybuilding.com/fun/docs/2006/player.swf" width="350" height="300" style="undefined" id="chest" name="chest" bgcolor="FFFFFFF" quality="high" flashvars="myVideo=http://webcast.bodybuilding.com/fitshow/liftrite/bdyspce_chest.flv&amp;mySkin=http://www.bodybuilding.com/fun/docs/2006/control_external.swf&amp;myWidth=350&amp;myHeight=300&amp;myBGcolor=0x000000&amp;myPlaybutton=http://www.bodybuilding.com/fun/docs/2006/play.png&amp;myPlaybuttonSize=70&amp;myPlaybuttonAlpha=80&amp;myCapturetime=00:01">');
BB.UI.TemplateCatalog.set("How_To_Vid_UpperArms",'<embed type="application/x-shockwave-flash" src="http://www.bodybuilding.com/fun/docs/2006/player.swf" width="350" height="300" style="undefined" id="upperarms" name="upperarms" bgcolor="FFFFFFF" quality="high" flashvars="myVideo=http://webcast.bodybuilding.com/fitshow/liftrite/bdyspce_upperarm.flv&amp;mySkin=http://www.bodybuilding.com/fun/docs/2006/control_external.swf&amp;myWidth=350&amp;myHeight=300&amp;myBGcolor=0x000000&amp;myPlaybutton=http://www.bodybuilding.com/fun/docs/2006/play.png&amp;myPlaybuttonSize=70&amp;myPlaybuttonAlpha=80&amp;myCapturetime=00:01">');
BB.UI.TemplateCatalog.set("How_To_Vid_Hips",'<embed type="application/x-shockwave-flash" src="http://www.bodybuilding.com/fun/docs/2006/player.swf" width="350" height="300" style="undefined" id="hips" name="hips" bgcolor="FFFFFFF" quality="high" flashvars="myVideo=http://webcast.bodybuilding.com/fitshow/liftrite/bdyspce_hip.flv&amp;mySkin=http://www.bodybuilding.com/fun/docs/2006/control_external.swf&amp;myWidth=350&amp;myHeight=300&amp;myBGcolor=0x000000&amp;myPlaybutton=http://www.bodybuilding.com/fun/docs/2006/play.png&amp;myPlaybuttonSize=70&amp;myPlaybuttonAlpha=80&amp;myCapturetime=00:01">');
BB.UI.TemplateCatalog.set("How_To_Vid_Waist",'<embed type="application/x-shockwave-flash" src="http://www.bodybuilding.com/fun/docs/2006/player.swf" width="350" height="300" style="undefined" id="waist" name="waist" bgcolor="FFFFFFF" quality="high" flashvars="myVideo=http://webcast.bodybuilding.com/fitshow/liftrite/bdyspce_waist.flv&amp;mySkin=http://www.bodybuilding.com/fun/docs/2006/control_external.swf&amp;myWidth=350&amp;myHeight=300&amp;myBGcolor=0x000000&amp;myPlaybutton=http://www.bodybuilding.com/fun/docs/2006/play.png&amp;myPlaybuttonSize=70&amp;myPlaybuttonAlpha=80&amp;myCapturetime=00:01">');
BB.UI.TemplateCatalog.set("How_To_Vid_Thighs",'<embed type="application/x-shockwave-flash" src="http://www.bodybuilding.com/fun/docs/2006/player.swf" width="350" height="300" style="undefined" id="thighs" name="thighs" bgcolor="FFFFFFF" quality="high" flashvars="myVideo=http://webcast.bodybuilding.com/fitshow/liftrite/bdyspce_thighs.flv&amp;mySkin=http://www.bodybuilding.com/fun/docs/2006/control_external.swf&amp;myWidth=350&amp;myHeight=300&amp;myBGcolor=0x000000&amp;myPlaybutton=http://www.bodybuilding.com/fun/docs/2006/play.png&amp;myPlaybuttonSize=70&amp;myPlaybuttonAlpha=80&amp;myCapturetime=00:01">');
BB.UI.TemplateCatalog.set("How_To_Vid_Calves",'<embed type="application/x-shockwave-flash" src="http://www.bodybuilding.com/fun/docs/2006/player.swf" width="350" height="300" style="undefined" id="calves" name="calves" bgcolor="FFFFFFF" quality="high" flashvars="myVideo=http://webcast.bodybuilding.com/fitshow/liftrite/bdyspce_calves.flv&amp;mySkin=http://www.bodybuilding.com/fun/docs/2006/control_external.swf&amp;myWidth=350&amp;myHeight=300&amp;myBGcolor=0x000000&amp;myPlaybutton=http://www.bodybuilding.com/fun/docs/2006/play.png&amp;myPlaybuttonSize=70&amp;myPlaybuttonAlpha=80&amp;myCapturetime=00:01">');
BB.UI.TemplateCatalog.set("How_To_Vid_ForeArms",'<embed type="application/x-shockwave-flash" src="http://www.bodybuilding.com/fun/docs/2006/player.swf" width="350" height="300" style="undefined" id="forearms" name="forearms" bgcolor="FFFFFFF" quality="high" flashvars="myVideo=http://webcast.bodybuilding.com/fitshow/liftrite/bdyspce_forearms.flv&amp;mySkin=http://www.bodybuilding.com/fun/docs/2006/control_external.swf&amp;myWidth=350&amp;myHeight=300&amp;myBGcolor=0x000000&amp;myPlaybutton=http://www.bodybuilding.com/fun/docs/2006/play.png&amp;myPlaybuttonSize=70&amp;myPlaybuttonAlpha=80&amp;myCapturetime=00:01">');
BB.UI.TemplateCatalog.set("How_To_Vid_Shoulders",'<embed type="application/x-shockwave-flash" src="http://www.bodybuilding.com/fun/docs/2006/player.swf" width="350" height="300" style="undefined" id="shoulders" name="shoulders" bgcolor="FFFFFFF" quality="high" flashvars="myVideo=http://webcast.bodybuilding.com/fitshow/liftrite/bdyspce_shoulders.flv&amp;mySkin=http://www.bodybuilding.com/fun/docs/2006/control_external.swf&amp;myWidth=350&amp;myHeight=300&amp;myBGcolor=0x000000&amp;myPlaybutton=http://www.bodybuilding.com/fun/docs/2006/play.png&amp;myPlaybuttonSize=70&amp;myPlaybuttonAlpha=80&amp;myCapturetime=00:01">');
BB.UI.TemplateCatalog.set("How_To_Vid_Neck",'<embed type="application/x-shockwave-flash" src="http://www.bodybuilding.com/fun/docs/2006/player.swf" width="350" height="300" style="undefined" id="neck" name="neck" bgcolor="FFFFFFF" quality="high" flashvars="myVideo=http://webcast.bodybuilding.com/fitshow/liftrite/bdyspce_neck.flv&amp;mySkin=http://www.bodybuilding.com/fun/docs/2006/control_external.swf&amp;myWidth=350&amp;myHeight=300&amp;myBGcolor=0x000000&amp;myPlaybutton=http://www.bodybuilding.com/fun/docs/2006/play.png&amp;myPlaybuttonSize=70&amp;myPlaybuttonAlpha=80&amp;myCapturetime=00:01">');
BB.UI.TemplateCatalog.set("How_To_Vid_Empty",'<div class="emptyVideo">This Type of Measurement does not have a Video.</div> ')})();
(function(a){BB.createNamespace("BB.App.Goals.UI.TrackStats");var b,d,e,f={},g=function(){var a=window.location.pathname;return a.substring(a.lastIndexOf("/")+1)};d=function(a,b){return"liftingstattype"==a?b?"EDIT ".concat("Enter Your Strength Stat"):"Enter Your Strength Stat":b?"EDIT ".concat("Enter Your Measurement"):"Enter Your Measurement"};b=function(b,d,m){a("<div />",{"class":"setGoalsModalBodyTitle"}).appendTo(b);a("<div />",{"class":"setGoalsModalBody updateRow bbListItemBox track"}).appendTo(b);
var l=b.find(".setGoalsModalBodyTitle"),n=b.find(".updateRow"),r=d.p.type,q=d.p.name;m=d.p.target;var p={liftingstattype:[{bench:"Barbell Bench Press",squat:"Barbell Squat",deadlift:"Barbell Deadlift",bicepcurl:"Barbell Curl",barbellrows:"Bent Over Barbell Rows",overheadpress:"Barbell Shoulder Press"}],bodystattype:[{arms:"Arms",bodyfat:"Body Fat",calves:"Calves",chest:"Chest",forearms:"Forearms",height:"Height",hips:"Hips",neck:"Neck",shoulders:"Shoulders",thighs:"Thighs",waist:"Waist",weight:"Weight"}]},
t=function(){var b=a(".currInputs .currMax input").val(),d=a(".currInputs .noReps select").val(),e=a(".goalInputs .goalMax input").val(),g=a(".goalInputs .noReps select").val(),h=(new Date(a(".goalDatePicker input").data("date-stamp"))).getTime(),k=new Date,n=k.getSeconds(),l=k.getMinutes(),k=k.getHours(),h=new Date(h);h.setHours(k);h.setMinutes(l);h.setSeconds(n);h=Math.round(h/1E3);"liftingstattype"==r?(b/=1.0278-.0278*d,e/=1.0278-.0278*g):(b=a(".inputs .currMeasure input").val(),e=a(".inputs .goalMeasure input").val());
return f={currVal:b,goalVal:e,goalDate:h}},w=function(d){BB.UI.TemplateCatalog.render(BB.UI.TemplateCatalog.keys.Modal_Date_Picker,{minDay:"today-10.years",maxDay:"today"},function(a,d){b.find(".goalDate").append(d)});d||BB.Action.Binder.wire(a(".goalDatePicker"))},u=function(a){var b;b="liftingstattype"==r?"imperial"==BB.Data.User.get("units")?"LBS.":"KG":"imperial"==BB.Data.User.get("units")?"IN.":"CM";if("imperial"==BB.Data.User.get("units"))switch(a){case "weight":return"LBS.";case "bodyfat":return"%";
default:return b}else switch(a){case "weight":return"KG";case "bodyfat":return"%";default:return b}},v,x=function(a,b){if("metric"==BB.Data.User.get("units"))switch(b){case "weight":return BB.Core.Util.toLbs(a);case "bodyfat":return a;default:return"liftingstattype"==r?BB.Core.Util.toLbs(a):BB.Core.Util.toInch(a)}else return a};l.text(p[r][0][q]);a("div.submitGoal").bind("click",function(b){var d=[],h=[];void 0===a("div.submitGoal").attr("disabled")&&(b.preventDefault(),f=t(),d.push(q),h.push(x(f.currVal,
q)),a(".setGoalsModalBody.listAll .bodystatGoal").each(function(b){b=a(this).find(".currMeasure").attr("class").split(" ");var e=a(this).find(".currMeasure input");""!=e.val()&&(d.push(b[1]),h.push(x(e.val(),b[1])))}),e=BB.UI.Spinner.create(a(this),BB.UI.Spinner.BUTTON),BB.API.send("stats/setmultiple",{userid:BB.Data.User.get(BB.Data.User.keys.id),stat:d.join(","),value:h.join(","),date:f.goalDate,unit:"imperial",shareonfb:a("#shareonfbcheck").is(":checked")},{success:function(a){BB.Tool.Debug.log(a);
BB.Data.User.trackStats(a,"track");e.stop();BB.UI.Modal.Base.finish();"profilecp.php"==g()&&window.location.reload()},error:function(b){BB.Tool.Debug.log(b);e.stop();BB.Action.Tooltip.triggerError(a(".submitGoal"),"There was a problem submitting your data at this time",!0)}}))});if("liftingstattype"==r){BB.UI.TemplateCatalog.render(BB.UI.TemplateCatalog.keys.Track_Strength_Layout,{},function(a,d){b.find(".setGoalsModalBody").append(d)});w(d.p.id);BB.UI.TemplateCatalog.render(BB.UI.TemplateCatalog.keys.Modal_Input_Units,
{unit:u(q)},function(a,d){b.find(".currMax, .goalMax").append(d)});BB.UI.TemplateCatalog.render(BB.UI.TemplateCatalog.keys.Modal_Select,{},function(a,d){b.find(".currInputs .noReps, .goalInputs .noReps").append(d)});for(p=1;12>=p;p++)d=a("<option></option>"),d.attr("value",p),d.text(p),d.appendTo(n.find("select"));BB.Action.Binder.wire(n.find("select"))}else{BB.UI.TemplateCatalog.render(BB.UI.TemplateCatalog.keys.Track_Measure_Layout,{},function(a,d){b.find(".setGoalsModalBody").append(d)});n=a("<div />",
{"class":"drawerLink"});a("<a />",{href:"#"}).text("View All Measurements").appendTo(n);n.appendTo(b);a("<div />",{"class":"setGoalsModalBody updateRow bbListItemBox listAll"}).appendTo(b);for(var y in p[r][0])y!=q&&"weight"!=y&&"bodyfat"!=y&&(BB.UI.TemplateCatalog.render(BB.UI.TemplateCatalog.keys.Track_All,{type:p[r][0][y],name:y},function(a,d){b.find(".listAll").append(d)}),BB.UI.TemplateCatalog.render(BB.UI.TemplateCatalog.keys.Modal_Input_Units,{unit:u(y)},function(a,d){b.find(".currMeasure."+
y+", .goalMeasure."+y).append(d)}));w();BB.UI.TemplateCatalog.render(BB.UI.TemplateCatalog.keys.Modal_Input_Units,{unit:u(q)},function(a,d){b.find(".track .currMeasure, .track .goalMeasure").append(d)});BB.UI.TemplateCatalog.render(BB.UI.TemplateCatalog.keys.Modal_Input_Units,{unit:u("weight")},function(a,d){b.find(".currMeasure.weight, .goalMeasure.weight").append(d)});BB.UI.TemplateCatalog.render(BB.UI.TemplateCatalog.keys.Modal_Input_Units,{unit:u("bodyfat")},function(a,d){b.find(".currMeasure.bodyfat, .goalMeasure.bodyfat").append(d)})}var B=
a(".setGoalsModalBody.track").find("input");B.each(function(d){var e=function(a,d){if("number"==a.attr("type"))if(0<=d&&9999>=d&&""!==d.trim())BB.UI.Tooltip.Base.close(v),v="",f=t(),0<b.find(".noReps").length&&(0<a.parents(".currInputs").length?a.parents(".currInputs").find(".calc span").text(f.currVal.toFixed(2)):a.parents(".goalInputs").find(".calc span").text(f.goalVal.toFixed(2)));else return v||(v=BB.Action.Tooltip.triggerError(a,BB.Loc.get("INVALID_VALUE",{MIN:(0).toFixed(1),MAX:(9999).toFixed(1)}),
!0)),!1;return!0},g=function(){var b=0;B.each(function(){a(this).val()||b++});return 0<b?!0:!1},h=function(){a("div.submitGoal").removeAttr("disabled")},n=function(){a("div.submitGoal").attr("disabled","disabled")};a(this).bind("keyup",function(b){!e(a(this),a(this).val())||g()?n():h()});b.find("input[name='goalDate']").bind("change",function(){!e(a(this),a(this).val())||g()?n():h()})});b.find("select").bind("change",function(b){f=t();0<a(this).parents(".currInputs").length?a(this).parents(".currInputs").find(".calc span").text(f.currVal.toFixed(2)):
a(this).parents(".goalInputs").find(".calc span").text(f.goalVal.toFixed(2))});a(".drawerLink a").bind("click",function(b){b.preventDefault();b=a("<div class='horLineSperator measure'><div class='hor lineFade gray'></div><div class='hor lineFade white'></div></div>");var d=a(this).parent();a(this).remove();b.appendTo(d);a(".setGoalsModalBody.listAll").slideDown("slow")});"profilecp.php"==g()&&(n=a(m).parents(".goal-tracking-box-section").find(".historical-values-lower-field-outer .real_value").val(),
m=a(m).parents(".goal-tracking-box-section").find(".historical-values-lower-field-outer-fl .historical-values-lower-field-fl").text().trim(),d=(new Date(m)).getFullYear()+"/"+((new Date(m)).getMonth()+1)+"/"+(new Date(m)).getDate(),a(b).find(".setGoalsModalBody.updateRow.track .currMax input, .setGoalsModalBody.updateRow.track .currMeasure input").val(parseInt(n).toFixed(1)),a(b).find(".setGoalsModalBody.updateRow.track input[name=goalDate], .setGoalsModalBody.updateRow input[name=goalDate]").val(m).data("date-stamp",
d));a(".bbCloseIcon").on("click",function(){a("a.bbBinder").data("bbBinder",!1)})};BB.App.Goals.UI.TrackStats=function(){return{setup:function(a,b){b.plugableContainers=[{nsTemplate:BB.App.Goals.UI.TrackStats.footer,targetContainer:"footer"}];b.title=d(b.p.type,b.p.id);return b},create:function(a,d,e){"function"===typeof e&&e();return new b(a,d,e)},finish:function(){},footer:{setup:function(a,b){return b},create:function(b,d){var e=a('<div class="footerModalInnerContainer"/>').appendTo(b);a('<div class="bbButton primaryAction bb-btn bb-btn--primary submitGoal" disabled="disabled"><span>Save</span></div>').appendTo(e);
if("liftingstattype"!==d.p.type&&"profilecp.php"!=g()&&BB.Data.User.get("socialMediaFacebookAuthorized")){var e=a("<div id='shareOnFbDiv' class='bbCheckbox shareOnFbCheck'><input type='checkbox' id='shareonfbcheck' value='false'><label class='shareToFbLabel' for='shareonfbcheck'><span class='shareFaceBookCheck'></span>Share on Facebook</label></div>"),f=a(".footerModalInnerContainer"),n=a("<div class='facebookOptions'></div>");e.appendTo(n);a("<span> | </span><a class='settingsLink' target='_blank' href=\"http://my.bodybuilding.com/contactprefs/editfacebook/\">Settings</a>").appendTo(n);
n.appendTo(f);e=d.p.name;f=!1;f="bodyfat"===e?BB.Data.User.get("sharedBodyFatUpdatesOnFb"):"weight"===e?BB.Data.User.get("sharedBodyWeightUpdatesOnFb"):BB.Data.User.get("sharedBodyStatUpdatesOnFb");a("#shareonfbcheck").prop("checked",f).on("change",function(){a(this).prop("checked")&&BB.Action.SocialMedia.isPublishPermissionSet(function(a){!1===a&&BB.Action.SocialMedia.authenticateFacebookUserExtended()})})}},finish:function(){}}}}()})(jQuery);
(function(a){BB.UI.AddThis=function(){var b=b||{};b.data_track_addressbar=!1;this.create=function(b,e){var f=a(b),g=a("<div/>",{"class":"bbShareContainer"}).appendTo(f),k=f.data("bss"),h='<a href="#" addthis:url="'+(f.data("url")||BB.Data.Env.get("url"))+'" addthis:description="'+f.data("description")+'" class="addthis_button_';f.addClass("bbAddThisContainer");k&&(k=a('<span class="bbShare"><a href="http://bodyspace.bodybuilding.com/fitboard/post?'+a.param(k)+'" class="bbButton primaryAction bbShareButton bbBinder" data-action="activeRequired"><span><img src="http://assets.bodybuilding.com/bodyspace/images/common/bodyspace_logo_small.png">SHARE</span></a></span>').appendTo(g),
BB.Action.Binder.wire(k.find(".bbBinder")));a('<span class="bbAddThis"><div class="addthis_toolbox addthis_default_style '+(f.hasClass("bbMedium")?"addthis_32x32_style":"")+'">'+h+'facebook"></a>'+h+'twitter"></a>'+h+'google_plusone_share"></a>'+h+'pinterest_share"></a>').appendTo(g);a("<script/>",{type:"text/javascript",src:"https://s7.addthis.com/js/300/addthis_widget.js#pubid=bodybuilding"}).appendTo(a(document));void 0!==window.addthis&&addthis.toolbox(".addthis_toolbox")}}})(jQuery);
BB.UI.TemplateCatalog.set("Modal_Base",'<div class="bbExclusiveModalMask"><div class="modalContainerGlobal bbGraphyte"><div class="bbModalContainer bbGraphyte"><div class="bbContent"><div class="bbHeader bbPtDiagonalStripeDark"><div class="bbClose"><div class="bbCloseIcon"></div></div><div class="bbTitle bbSection_title">{title|s}</div><div class="description bbSection_description"{?description} {:else} style="display: none;"{/description}>{description}</div></div><div class="bbSubHeader"{?subHeader} {:else} style="display: none;"{/subHeader}><div class="bbSubHeaderContent bbSection_subHeader"></div><div class="bbSubHeaderLine"></div></div><div class="bbBody"></div><div class="bbFooter"{?footer} {:else} style="display: none;"{/footer}><div class="bbFoooterLine"></div><div class="bbFooterContent bbSection_footer"></div></div></div></div></div></div>');
BB.createNamespace("BB.UI.Modal");
BB.UI.Modal.Base=function(a,b){var d,e=a(window),f=a("body"),g,k,h,m,l,n=[],r=function(){return!0},q=r,p=function(a,m){var p,w,v,u;if(m||!b.isFunction(q)||q(a,l))q=r;else return!1;f.removeClass("lockScroll");g&&g.length&&(g.show(),e.scrollTop(k));e.unbind("resize.modalMask");f.unbind("keydown",t);v=n.length;for(w=0;w<v;w++)u=n[w],u.hasOwnProperty("input")?u.input.removeAttr("disabled",""):b.isUndefined(u.tabindex)?u.anchor.removeAttr("tabindex"):u.anchor.attr("tabindex",u.tabindex);h&&b.isFunction(h.finish)&&
h.finish();a&&(p=a.customCallback);h=void 0;BB.Action.Modal.close(void 0,d,p);return!0},t=function(a){switch(a.which){case 27:a.preventDefault(),p(a)}},w=function(){d.height(window.innerHeight||e.height()).width(e.width());f.removeClass("lockScroll");setTimeout(function(){f.addClass("lockScroll")},100)},u=["title","footer","subHeader"],v={},x=function(d,e){var f="bb"+b.toSentenceCamelCase(d);if(0<=a.inArray(d,u)){f=v[d].hasClass(f)?v[d]:v[d].parent("."+f);if(b.isFunction(e))v[d].html(""),e(v[d]);
else if(e&&0<e.length)v[d].html(e);else{f.hide();v[d].html("");return}f.show();return!0}return!1},y=function(){var a=3,b;for(u=["title","footer","subHeader"];a--;)(b=d.find(".bbSection_"+u[a]))&&b.length?v[u[a]]=b:u.splice(a,1)};0===f.length&&a("document").ready(function(){f=a("body")});return{setPreConditionToClose:function(a){q=a},create:function(r,q){var z,H={},E,I=this,F,A,G=!1;h=q.nsTemplate;b.isNonEmptyString(q.nsTemplate)&&(h=b.getNamespace(q.nsTemplate));if(null===h||void 0===h)return console.error("BB.UI.Modal.Base: Cannot create modal. Most likely "+
q.nsTemplate+" is not available.");if(!b.validateInterface(h,"nsTemplate"))return console.error("BB.UI.Modal.Base: Cannot create modal. `_staticInstance` interface is not valid",h);q.containerContext={updatePlugs:x};z=h.setup(r,q);r&&r.data("modaltitle")&&(z.title=r.data("modaltitle"));if(z.plugableContainers)for(F=z.plugableContainers.length;F--;)A=b.getNamespace(z.plugableContainers[F].nsTemplate,{container:"Modal"}),b.validateInterface(A,"nsTemplate")&&(E=z.plugableContainers[F].targetContainer,
0<=a.inArray(E,u)&&(z[E]=!0,z=A.setup(r,z),H[E]=A,A=void 0));g=a("#mobile-viewport");k=e.scrollTop();BB.UI.TemplateCatalog.render("Modal_Base",z,function(k,u){var x;if(!G){G=!0;d=a(u);q.additionalClass=q.additionalClass||"";d.addClass("hide").addClass(q.additionalClass);d.appendTo(f);m=a(".bbExclusiveModalMask");y();for(x in H)H.hasOwnProperty(x)&&H[x].create(v[x],z,q);h&&b.isFunction(h.preConditionToClose)&&I.setPreConditionToClose(h.preConditionToClose);h.create(d.find(".bbBody"),z,function(){f.addClass("lockScroll");
w();e.bind("resize.modalMask",w);BB.Action.Modal.open(r,d);f.bind("keydown",t);l=a(".modalContainerGlobal .bbModalContainer .bbHeader .bbClose").bind("click",p).find(".bbCloseIcon");a("#bgCon input:enabled, #bgCon select:enabled, #bgCon textarea:enabled, #bgCon button:enabled").each(function(b,d){d=a(d);n.push({input:d});d.attr("disabled","disabled")});a("#bgCon a").each(function(b,d){d=a(d);n.push({anchor:d,tabindex:d.attr("tabindex")});d.attr("tabindex","-1")});m.removeClass("hide").bind("click",
function(b){a(b.target).hasClass("bbExclusiveModalMask")&&(b.stopPropagation(),p(b))});g&&0<g.length&&g.hide();return p})}})},finish:p}}(jQuery,BB.Core.Util);(function(){BB.UI.TemplateCatalog.keys.Drawer_Base="Drawer_Base";BB.UI.TemplateCatalog.set(BB.UI.TemplateCatalog.keys.Drawer_Base,'<div class="bbDrawer"><div class="bbDrawerContent"></div></div>')})();BB.createNamespace("BB.UI.Base");BB.createNamespace("BB.UI.Drawer");
BB.UI.Base.Drawer=function(a){return{create:function(b,d){var e,f;if("string"===typeof d.nsTemplate&&0<d.nsTemplate.length&&(e=BB.Core.Util.getNamespace(d.nsTemplate),BB.Core.Util.validateInterface(e,"nsTemplate")))return f=e.setup(b,d),BB.UI.TemplateCatalog.render(BB.UI.TemplateCatalog.keys.Drawer_Base,f,function(b,f){var h=a(f),m=a(d.openElmSelector),l=a(d.closeElmSelector),n=new BB.Action.Drawer,r,q,p;d.additionalClass=d.additionalClass||"";h.appendTo(a(d.targetElmSelector||"body"));if(e.create(h,
d,n))if(function(){var a=!1;r=function(b){b.preventDefault();a?n.close(b,h,e.onClose):n.open(b,h,e.onOpen);a=!a};q=function(b){n.open(b,h,e.onOpen);a=!0;b.preventDefault()};e.open=q;p=function(b){n.close(b,h,e.onClose);a=!1;b.preventDefault()};e.close=p}(),a("body").off("click.drawer"),m[0]===l[0])a("body").on("click.drawer",d.openElmSelector,r);else a("body").on("click.drawer",d.openElmSelector,r),a("body").on("click.drawer",d.closeElmSelector,p)}),e}}}(jQuery);
(function(a){a(function(){BB.UI.TemplateCatalog.set("Login",'<div class="modalLoginBodyContainer">   <div class="bbSubHeader">       <div class="bbSubHeaderLeft">       <div class="bbNormalShort">{lang.LOGIN_WITH_BODYSPACE_ACCOUNT|s}</div>   </div>   <div class="bbSubHeaderRight gte-tablet--inline-block">       <div class="bbNormal">{lang.DONT_HAVE_AN_ACCOUNT}</div>       <div class="bbBold">{lang.JOIN_NOT_ITS_FREE}</div>   </div>   </div><div class="bbForms">   <div class="bbFormSignIn">       <div class="facebook-button-container">           <div class="login-with-facebook-button"></div>           <div class="seperator"><span>or</span></div>       </div>       <div class="bbBold bbDescription">{lang.MEMBER_LOGIN}:</div>       <div class="bb-form-msg--error bb-legacy-login-failed-login" style="display:none">            Invalid username or password       </div>       <form action="http://bodyspace.bodybuilding.com/login/login.php" method="post">           <input name="callback" value="{callback}" type="hidden" />           <div class="login-inputs">               <span class="wmwrap" style="position:relative;display:block;">                   <label class="watermark">Username / Email</label>                   <input type="text" class="bbTextBox bbName" name="username" placeholder="Username / Email" tabindex="1" />               </span>               <span class="wmwrap" style="position:relative;display:block;">                   <label class="watermark">Password</label>                   <input class="bbTextBox bbPassword" type="password" name="password" placeholder="Password" tabindex="2" />               </span>           </div>           <div class="checkbox">               <div class="input-checkbox-container">                   <input type="checkbox" name="rememberme" tabindex="3" />               </div>               <label for="rememberme" class="remember-me">{lang.REMEMBER_ME}</label>               <a class="forgot-login-info-link" href="http://my.bodybuilding.com/login.php?do=lostpw">{lang.FORGOT_LOG_IN}</a>               <div class="loginContainer">               <button class="bb-btn bb-btn--primary login-button" tabindex="4">Log In</button>           </div>           </div>           <input name="do" value="login" type="hidden" />           <input name="password_md5" type="hidden" />       </form>   </div>   <div class="bbFormSignUp gte-tablet--inline-block">      <div class="bbDescription">{lang.SIGNUP_BRIEF}</div>          <div class="bbItems">              <div class="bbItem"><span></span>{lang.ADV_3}</div>              <div class="bbItem"><span></span>{lang.ADV_4}</div>              <div class="bbItem"><span></span>{lang.ADV_5}</div>          </div>          <button class="bb-btn bb-btn--primary login-button bbBinder" data-action="signup" tabindex="5">{lang.SIGN_UP}</button>       </div>   </div>   <hr />   <div class="bb-well ProfileMenu__well only-mobile">New to Bodybuilding.com? <button class="bbBinder bb-btn--plain bb-link js-signup" data-action="signup">Sign up now</button></div></div>')})})(jQuery);
(function(a){a(function(){BB.UI.Login=function(){var b,d="placeholder"in document.createElement("input"),e,f,g,k=!1,h=function(a,b){var d=window[e];BB.API.send("profile/get",{userid:a,token:b},{success:function(a){"function"===typeof d&&d(a.data.slug,a.data.emailAddress)},error:function(a){}})},m=function(d){d=parseInt(BB.Data.Cache.get("signup","loginAttemptCount","local")||l("s")||0);BB.Data.Cache.set("signup","loginWithTopNavModal",k?"buttonClick":"enterPress","local",864E5);BB.Data.Cache.set("signup",
"loginAttemptCount",d+1,"local",864E5);b&&0<b.length&&(g=BB.UI.Spinner.create(b,BB.UI.Spinner.BUTTON));f||e?BB.API.send("index/login",{username:a(".modalLoginBodyContainer input[name=username]").val(),password:BB.Util.md5.md5hash(a(".modalLoginBodyContainer input[name=password]").val()),rememberme:a(".modalLoginBodyContainer input[name=rememberme]").is(":checked")},{success:function(b){var d=BB.Action.SocialMedia.getFacebookAccessToken(),f=parseInt(l("s")||BB.Data.Cache.get("signup","loginAttemptCount",
"local")||0)+1,g=b.data.token;b=b.data.userId;a(".bb-legacy-login-failed-login").hide();BB.Data.User.set("id",b);BB.Data.Cache.remove("signup","loginWithTopNavModal","local");BB.Data.Cache.remove("signup","userIsInLoginState","local");BB.Data.Cache.remove("signup","loginAttemptCount","local");BB.Action.Event&&(console.log("tracking a loginTopNavBarEvent on successful return from login call."),BB.Action.Event.track(BB.Action.Event.LoginTopNavBarEvent(b,k?"buttonClick":"enterPress",f)));d&&!e&&BB.Action.SocialMedia.getFacebookLoggedInUser(function(a){BB.Core.Util.cookie.set({name:"v1guid",
value:g,domain:".bodybuilding.com",path:"/"});BB.Action.SocialMedia.saveFacebookAccessToken(d,a.id,{success:function(a){a=window.location;var b;b=window.location.href;var d=RegExp("([?&])welcome=.*?(&|#|$)(.*)","gi");if(d.test(b))b=b.replace(d,"$1welcome=true$2$3");else{var e=-1!==b.indexOf("?")?"&":"?",d=b.split("#");b=d[0]+e+"welcome=true";"undefined"!==typeof d[1]&&null!==d[1]&&(b+="#"+d[1])}a.href=b},error:function(a){window.location.reload(!0)}})});e&&(BB.Core.Util.cookie.set({name:"v1guid",
value:g,domain:".bodybuilding.com",path:"/"}),h(b,g),BB.UI.Modal.Base.finish())},error:function(b){var d=l("s")||0;BB.Data.Cache.set("signup","loginAttemptCount",parseInt(d)+1,"local",864E6);0===b.status?alert("Logging in failed because your network connection is offline. Check your network connection and then try again."):a(".bb-legacy-login-failed-login").show();g.stop()}}):BB.Action.Login.submit(a(".modalLoginBodyContainer .bbFormSignIn form"))},l=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,
"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(location.search);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))},n=function(f,g,n,l){var w=a(f),u,v,x,y=function(){x=!1;b.removeAttr("disabled").bind("click",function(){k=!0;m(n)})},B=function(){x=!0;b.attr("disabled","disabled").unbind("click",function(){k=!0;m(n)})};e&&(f=w.find("form"),f.attr("method","").attr("action",""),f.submit(function(a){a.preventDefault()}));w.appendTo(g);for(f=a(".modalLoginBodyContainer .bbFormSignIn form");1<
f.length;)a(f[0]).parents(".bbExclusiveModalMask").remove(),f.splice(0,1);g=f.find("span.wmwrap input");u=f.find("span.wmwrap input.bbPassword");v=f.find("span.wmwrap input.bbName");f.find("span.wmwrap label").bind("click",function(){var b=a(this);b.hide();b.parent().find("input").focus()});d&&a(".modalLoginBodyContainer .bbFormSignIn form span.wmwrap label").remove();g.bind("blur",function(){var b=a(this),d=b.val();"string"===typeof d&&0!==d.length||b.parent().find("label").show()});g.bind("keydown",
function(b){var e=a(this);d||null!==b["char"]&&e.parent().find("label").hide()});g.bind("keyup",function(b){if(!d){var e=a(this);0===e.val().length&&e.parent().find("label").show()}0<u.val().length&&0<v.val().length?(x&&y(),13===b.which&&(m(),b.preventDefault())):B()});b=w.find(".bbFormSignIn .login-button");0===b.length&&(b=a("div.footerModalInnerContainer > .bb-btn"));B();"function"===typeof l&&l();a('input[name="username"]').focus();BB.UI.Social.FacebookButton&&(new BB.UI.Social.FacebookButton({size:"small",
text:BB.Loc.get("LOGIN_WITH_FACEBOOK"),disclaimerText:BB.Loc.get("FACEBOOK_DISCLAIMER"),click:function(){e?BB.UI.Social.FacebookButton.LoginAction.call(w.find("div.login-with-facebook-button a.social-button"),h):BB.UI.Social.FacebookButton.LoginAction.call(w.find("div.login-with-facebook-button a.social-button"))}})).renderTo(w.find("div.login-with-facebook-button"));a("[data-action='signup']").filter(function(){a(this).hasClass("login-button")&&a(this).bind("click",function(){BB.Data.Cache.set("signup",
"topNavBarSignupClick",!0,"local",864E5);BB.Action.Event&&BB.Action.Event.track(BB.Action.Event.SignupClickEvent("topNavBarSignupClick"))})});BB.Action.Binder.wire(w.find(".bbBinder"))};return{setup:function(b,d){var g=BB.Data.Env.get("url"),h=[{nsTemplate:new BB.UI.Update.BaseFooter("Log In"),targetContainer:"footer"}];void 0!=a(b).data("quicksignup")&&(e=a(b).data("quicksignup"));f=d&&!0===d.facebookConnect;-1!==g.indexOf("/",g.length-1)&&(g=g+"?t"+(new Date).getTime());return{title:f?BB.Loc.get("MEMBER_LOGIN"):
BB.Loc.get("LOGIN_TO_BODYSPACE"),description:f?void 0:BB.Loc.get("LOGIN_REQUEST_REASON_GENERIC"),quirksMode:BB.Data.Env.get("isQuirksMode"),lang:BB.Loc.keys,callback:BB.Core.Util.Base64.encode(g),isFacebookLoginEnabled:BB.Data.Env.get("isFacebookLoginEnabled"),facebookConnect:f,plugableContainers:f?h:void 0}},create:function(a,b,d){b.facebookConnect?require(["//common.bbcomcdn.com/BB/UI/Login/src/full/graphyte/template.minimal.js"],function(){BB.UI.TemplateCatalog.render("LoginMinimal",b,function(e,
f){n(f,a,b,d)})}):BB.UI.TemplateCatalog.render("Login",b,function(e,f){n(f,a,b,d)})},finish:function(){}}}()})})(jQuery);BB.createNamespace("BB.UI.Signup");
BB.UI.Signup.BootStrap=function(a){return{setup:function(){var a=BB.Data.Env.get("url");return{title:BB.Loc.get("SIGNUP_IN_BODYSPACE"),description:BB.Loc.get("LOGIN_REQUEST_REASON_GENERIC"),quirksMode:BB.Data.Env.get("isQuirksMode"),lang:BB.Loc.keys,callback:BB.Core.Util.Base64.encode(a)}},create:function(b,d,e){b&&"function"===typeof b.preventDefault&&b.preventDefault();require(["//common.bbcomcdn.com/BB/UI/Signup/min/signup.min.js"],function(){require(["signup"],function(){BB.Action.Modal.trigger({data:{nsTemplate:"BB.UI.Signup.SignUpModal",
p:d,additionalClass:"legacy-signup"}});a(".modular-sign-up #passwordMD5-placeholder").removeClass("invalid")})})},finish:function(){}}}(jQuery);(function(){BB.UI.TemplateCatalog.keys.Comment_BBCProfile="Comment_BBCProfile";BB.UI.TemplateCatalog.set("Comment_BBCProfile",'<div class="comment-modal-container"><textarea class="bbTextArea" data-placeholder="{watermarkText}" data-action=\'{"ns":"BB.UI.Input.Base","method":"create"}\' data-max-length="2500"></textarea></div>')})();BB.createNamespace("BB.UI.Comment");
BB.UI.Comment.BBCProfile=function(a){var b,d,e,f,g,k={onCommentPost:a.noop},h=function(a){BB.Action.Tooltip.triggerError(d,a||BB.Loc.get("ERROR_ADDING_COMMENT"),!0)},m=function(){a(".bbTooltip.onModal").remove()},l=function(){BB.UI.Modal.Base.setPreConditionToClose(null);m();BB.UI.Modal.Base.finish()},n=function(a,b,e,n,m){g=BB.UI.Spinner.create(d,BB.UI.Spinner.BUTTON);var u=BB.Loc.get("PROFILE_COMMENT_SPAM_MSG"),v=BB.Loc.get("PROFILE_COMMENT_ERROR_MSG"),x=BB.Loc.get("PROFILE_COMMENT_THROTTLE_MSG");
BB.Action.Comment.addComment(a,b,e,n,m,{success:function(a){BB.UI.Spinner.Instance(d,g).stop();f.val("").trigger("keyup").trigger("blur");l();k.onCommentPost(a)},error:function(a,b,e){BB.UI.Spinner.Instance(d,g).stop();if(a.err_msg)switch(a.err_msg){case "COMMENT_FLAGGED_AS_SPAM":h(u);break;case "SERVICE_THROTTLE":h(x);break;default:h(v)}else h(v)}})};return{setup:function(b,d){d.p=d.p||{};d.p.plugableContainers=[{nsTemplate:BB.UI.Comment.BBCProfile.footer,targetContainer:"footer"}];k=a.extend(k,
d.p);return a.extend({title:"New Profile Comment",description:"Write a new comment on their public profile.",watermarkText:BB.Loc.get("LEAVE_COMMENT"),cancelText:BB.Loc.get("CANCEL"),addText:"POST COMMENT"},d.p)},create:function(e,g,h){BB.UI.TemplateCatalog.render(BB.UI.TemplateCatalog.keys.Comment_BBCProfile,g,function(g,k){a(k).appendTo(e);"function"===typeof a.clearwatermarks&&(a.clearwatermarks(),a.addwatermarks());b=a(".comment-modal-container");f=b.find("textarea");BB.Action.Binder.wire(f);
f.bind("keyup.CommentModal keydown.CommentModal paste.CommentModal",function(){1>a.trim(a(this).val()).length?d.attr("disabled","disabled"):d.removeAttr("disabled");m()});BB.UI.Modal.Base.setPreConditionToClose(function(a,b){return f.val()?(m(),BB.Action.Tooltip.trigger.call(b,{data:{nsTemplate:"BB.UI.Prompt.Confirm",closeIcon:!0,closeOnBodyClick:!0,additionalClass:"promptConfirm onModal",message:BB.Loc.get("CANCEL_COMMENT"),onConfirm:l}}),!1):!0});"function"===typeof h&&h()})},finish:function(){m()},
footer:{setup:function(a,b){return b},create:function(b,g,h){a('<div class="comment-modal-footer"><div disabled="disabled" class="bbButton primaryAction bb-btn bb-btn--primary add-comment-button"><span>Post Comment</span></div><span class="cancel-comment-button bb-btn">Cancel</span></div>').appendTo(b);d=b.find(".add-comment-button");e=b.find(".cancel-comment-button");e.bind("click.CommentModal",BB.UI.Modal.Base.finish);d.bind("click.CommentModal",function(b){var d=a.trim(f.val());b.preventDefault();
m();1<d.length&&n(d,h.profileCommentEntityId,"pagecomment-profile-"+h.userId,"pagecomment",h.userId)})},finish:function(){}}}}(jQuery);
(function(){function a(a,l){return a.w('<div class="').f(l.get(["username"],!1),l,"h").w(" bbcContainer").x(l.get(["notSelf"],!1),l,{"else":b,block:d},{}).w('"><div class=bbcBody><a href="').f(l.get(["profileUrl"],!1),l,"h").w('" class="bbcAvatar noBBC"><img src=').f(l.get(["profilePic"],!1),l,"h").w("></a><div class=bbcHeader>").x(l.get(["realname"],!1),l,{block:e},{}).w("<a class=noBBC href=").f(l.get(["profileUrl"],!1),l,"h").w(">").f(l.get(["username"],!1),l,"h").w("</a></div><div class=bbcDetails><div class=bbcHeadMetrics><span class=bbcField>age:</span><span class=bbcValue>").f(l.get(["age"],
!1),l,"h").w('</span><span class=bbcField>ht:</span><span class="bbcValue no-sep-on-mobile">').f(l.get(["height"],!1),l,"h").w('</span><br class="break-on-mobile"><span class=bbcField>wt:</span><span class=bbcValue>').f(l.get(["weight"],!1),l,"h").w(" ").f(l.get(["weightLabel"],!1),l,"h").w("</span><span class=bbcField>bf:</span><span class=bbcValue>").f(l.get(["bodyfat"],!1),l,"h").w("%</span></div>").x(l.get(["gender"],!1),l,{block:f},{}).x(l.get(["location"],!1),l,{block:g},{}).x(l.get(["goal"],
!1),l,{block:k},{}).x(l.get(["reason"],!1),l,{block:h},{}).w("</div></div><div class=bbcActions>").x(l.get(["notSelf"],!1),l,{block:n},{}).w("\x3c!-- ").x(l.get(["pendingFriendship"],!1),l,{"else":B,block:z},{}).w(" --\x3e</div></div>")}function b(a,b){return a.w(" bbcSelf")}function d(a,b){return a}function e(a,b){return a.w("<div class=bbcRealName>").f(b.get(["realname"],!1),b,"h").w("</div>")}function f(a,b){return a.w("<div class=bbcMetric><span class=bbcField>gender:</span><span class=bbcValue>").f(b.get(["gender"],
!1),b,"h").w("</span></div>")}function g(a,b){return a.w("<div class=bbcMetric><span class=bbcField>location:</span><span class=bbcValue>").f(b.get(["location"],!1),b,"h").w("</span></div>")}function k(a,b){return a.w("<div class=bbcMetric><span class=bbcField>overall goal:</span><span class=bbcValue>").f(b.get(["goal"],!1),b,"h").w("</span></div>")}function h(a,b){return a.w('<a href="').f(b.get(["fbProfile"],!1),b,"h").w('" target=_blank class=socialReason>').h("if",b,{block:m},{cond:l}).w("</a>")}
function m(a,b){return a.w("<span class=facebookLogo></span><span>from Facebook</span>")}function l(a,b){return a.w(" \\'").f(b.get(["reason"],!1),b,"h").w("\\' == \\'facebook-friends\\'")}function n(a,b){return a.x(b.get(["profileCommentEntityId"],!1),b,{block:r},{}).x(b.get(["isFriendRelated"],!1),b,{"else":q,block:p},{}).x(b.get(["hideFollow"],!1),b,{"else":u,block:y},{})}function r(a,b){return a.w('<div class="bbButton bbSmall bb-btn bb-btn--primary bb-btn--small bbcProfileCommentBtn" data-action=activeRequired>Comment</div>')}
function q(a,b){return a.w('<div class="bbcFriend bbBinder bbButton bbSmall bb-btn bb-btn--small bb-btn--primary" data-action=activeRequired>add friend</div>')}function p(a,b){return a.w('<div class="bbcFriend bbButton bbSmall bb-btn bb-btn--small">').x(b.get(["isFriend"],!1),b,{block:t},{}).x(b.get(["pendingFriendship"],!1),b,{block:w},{}).w("</div>")}function t(a,b){return a.w('<span class=bbcStatus><div class="bbButtonIcon bbCheck isFriend"></div>friends</span><span class=bbcUnplugAction style="display:none">unfriend</span>')}
function w(a,b){return a.w("requested")}function u(a,b){return a.x(b.get(["isFollowing"],!1),b,{"else":v,block:x},{})}function v(a,b){return a.w('<div class="bbcFollowing bbBinder bbButton bbSmall bb-btn bb-btn--small bb-btn--primary" data-action=activeRequired>follow</div>')}function x(a,b){return a.w('<div class="bbButton bbSmall bbcFollowing bb-btn bb-btn--small"><span class=bbcStatus><div class="bbButtonIcon bbCheck isFollowing"></div>following</span><span class=bbcUnplugAction style="display:none">unfollow</span></div>')}
function y(a,b){return a.w("\x3c!-- Nothing to do here --\x3e")}function B(a,b){return a.x(b.get(["ignorePresent"],!1),b,{block:C},{})}function C(a,b){return a.w("<a class=ignore>Ignore</a>")}function z(a,b){return a}dust.register("BBC-template",a);a.__dustBody=!0;b.__dustBody=!0;d.__dustBody=!0;e.__dustBody=!0;f.__dustBody=!0;g.__dustBody=!0;k.__dustBody=!0;h.__dustBody=!0;m.__dustBody=!0;l.__dustBody=!0;n.__dustBody=!0;r.__dustBody=!0;q.__dustBody=!0;p.__dustBody=!0;t.__dustBody=!0;w.__dustBody=
!0;u.__dustBody=!0;v.__dustBody=!0;x.__dustBody=!0;y.__dustBody=!0;B.__dustBody=!0;C.__dustBody=!0;z.__dustBody=!0;return a})();
BB.UI.BBC=function(a,b){function d(a,b){a.click(function(){BB.API.send("recommendation/add",{slug:BB.Data.User.get("slug"),recommendation:'{"externalReference":"'+b.userId+'","provider":"'+b.reason+'","status":"IGNORED","originDate":'+(new Date).getTime()+"}"},{success:function(){},error:function(){}})})}function e(b,d){b.click(function(){var b=a.extend({},d);b.nsTemplate="BB.UI.Comment.BBCProfile";BB.Action.BBC.close();BB.UI.Modal.Base.finish({customCallback:function(){BB.Action.Modal.trigger({data:b})}})})}
function f(b,d){if(d.isFriend){var e=b.find("span.bbcStatus"),f=b.find("span.bbcUnplugAction");b.mouseenter(function(){e.hide();f.show()}).mouseleave(function(){e.show();f.hide()}).click(function(b){var e=a.extend({},d);b.stopPropagation();e.nsTemplate="BB.UI.Friend.Remove";a(".bbTooltip").remove();BB.UI.Modal.Base.finish({customCallback:function(){BB.Action.Modal.trigger({data:e})}})})}else d.pendingFriendship||b.click(function(b){b.stopPropagation();var e=a.extend({},d);e.nsTemplate="BB.UI.Friend.Add";
a(".bbTooltip").remove();BB.UI.Modal.Base.finish({customCallback:function(){BB.Action.Modal.trigger({data:e})}})})}function g(b,d){var e,f;d.isFollowing?(e=b.find("span.bbcStatus"),f=b.find("span.bbcUnplugAction"),b.mouseenter(function(){e.hide();f.show()}).mouseleave(function(){e.show();f.hide()}).click(function(b){var e=a(this);b.stopPropagation();BB.API.send("friends/removefollower",{userId:BB.Data.User.get("id"),friendId:d.userId,message:""},{success:function(){d.isFollowing=!1;e.unbind("click");
k(e,d)},error:function(a){console.error(a)}})})):b.bind("click",function(b){var e=a(this);b.stopPropagation();BB.API.send("friends/follow",{userId:BB.Data.User.get("id"),friendId:d.userId,message:""},{success:function(){d.isFollowing=!0;e.unbind("click");k(e,d)},error:function(a){console.error(a)}})})}function k(a,b){b.isFollowing?a.html('<span class=bbcStatus><div class="bbButtonIcon bbCheck isFollowing"></div>following</span><span class="bbcUnplugAction">unfollow</span>').removeClass("bb-btn--primary").addClass("secondaryAction").find(".bbcUnplugAction").hide():
a.html("follow").addClass("bb-btn--primary");g(a,b)}return{setup:function(a,b){b.additionalClass="bbc";return b},create:function(h,k,l){var n,r,q,p,t,w;dust.render("BBC-template",k,function(u,v){function x(){BB.Data.User.get("isActive")?(f(q,k),g(r,k),e(w,k),t&&d(t,k)):(BB.Action.Binder.wire(q),BB.Action.Binder.wire(r),BB.Action.Binder.wire(w),(p=a(".bbTooltip.bbc"))&&p.length&&(q.click(function(){p.remove()}),r.click(function(){p.remove()})))}n=a(v).appendTo(h);q=n.find(".bbcFriend");r=n.find(".bbcFollowing");
t=n.find(".bbcActions .ignore");w=n.find(".bbcProfileCommentBtn");BB.Data.User.isReady()?x():BB.Data.User.registerForUpdates(function(a){"userLoaded"===a.key&&!0===a.newValue&&x()});b.isFunction(l)&&l()})},finish:function(){}}}(jQuery,BB.Core.Util);(function(a){a(function(){BB.UI.TemplateCatalog.set("Friend_Add",'<div class="bbAddAsFriendContainer"><div class="addFriendHead"><a href="{profileUrl}" class="bbcAvatar"><img src="{profilePic}"/></a><div class="addFriendName">{name}</div><div class="addFriendDecsription">will have to confirm you as a friend.</div></div><div class="bbBinder" data-action="caption" data-placeholder="(optional) add a note..." data-max-height="250" data-max-character-count="500" data-max-string-id="true"></div>')})})(jQuery);
(function(a,b){a(function(){BB.createNamespace("BB.UI.Friend");BB.UI.Friend.Add={setup:function(a,b){b.title="add as friend";b.plugableContainers=[{nsTemplate:new BB.UI.Update.BaseFooter("add"),targetContainer:"footer"}];return b},create:function(d,e,f){BB.UI.TemplateCatalog.render("Friend_Add",e,function(g,k){a(k).appendTo(d);BB.Action.Binder.wire(a(".bbBinder"));e.wireUpdate(function(){BB.API.send("friends/addfriend",{userId:BB.Data.User.get("id"),friendId:e.userId,message:a(".bbAddAsFriendContainer .bbTextArea textarea").val()},
{success:function(a){(a=BB.Data.DB.get("BBC",e.userId))||(a=BB.Data.DB.get("BBC",e.slug));a&&(a.isFriendRelated=!0,a.pendingFriendship=!0);BB.Core.Messenger.sendMessage("BB.UI.Friend.Add",e)},error:function(a){}});b.setPreConditionToClose(null);b.finish()});"function"===typeof f&&f()})},finish:function(){},preConditionToClose:function(a,b){return!0}}})})(jQuery,BB.UI.Modal.Base);(function(){BB.UI.TemplateCatalog.keys.Friend_Remove="Friend_Remove";BB.UI.TemplateCatalog.set("Friend_Remove",'<div class="bbRemoveFriendContainer"><p>Are you sure? You will no longer be able to interact with {username}.</p><div class="removeFriendFooter"><span class="closeModal">Cancel</span><a class="removeFriendRemoveBtn bb-btn bb-btn--primary">remove</a></div></div>')})();
BB.createNamespace("BB.UI.Friend");
BB.UI.Friend.Remove=function(a){return{setup:function(a,d){d.title="remove friend";return d},create:function(b,d,e){BB.UI.TemplateCatalog.render(BB.UI.TemplateCatalog.keys.Friend_Remove,d,function(f,g){a(g).appendTo(b);a(".removeFriendFooter .closeModal").bind("click",BB.UI.Modal.Base.finish);a(".removeFriendFooter .removeFriendRemoveBtn").bind("click",function(a){BB.API.send("friends/removefriend",{userId:BB.Data.User.get("id"),friendId:d.userId},{success:function(a){var b=BB.Data.DB.get("BBC",d.userId);
b||(b=BB.Data.DB.get("BBC",d.slug));b?(b.isFriendRelated=!1,b.isFriend=!1,b.pendingFriendship=!1):BB.Tool.Debug.log(a);BB.Core.Messenger.sendMessage("BB.UI.Friend.Remove",d)},error:function(a){BB.Tool.Debug.log(a)}});BB.UI.Modal.Base.finish()});"function"===typeof e&&e()})},finish:function(){}}}(jQuery);BB.createNamespace("BB.UI.Pagination");
BB.UI.Pagination=function(a){var b,d,e=function(a){void 0===d&&(d=BB.UI.Container.ActivityIndicator.start(a,void 0))},f=function(){d&&(BB.UI.Container.ActivityIndicator.stop(d),d=void 0)},g=function(b){b.hasClass("bottom")&&a("html, body").animate({scrollTop:a("div.bbPagination").offset().top},300)};return{setup:function(d,h,m){h=BB.Core.Util.getNamespace("Wicket.Event");b=d;h&&"function"===typeof h.subscribe?(h.subscribe("/ajax/call/before",function(d,f,h,k,m){f=a(f.event.currentTarget);d=f.parents(".masterPaginatorNode");
b=f.parents(".pagination-container");0<b.length&&(f=b.siblings(".pagination-results-container"),(!f||0===f.length)&&d&&0<d.length&&(f=d.find(".pagination-results-container")),f&&0<f.length&&e(f),g(b))}),h.subscribe("/dom/node/added",function(a,b){f()})):(h=BB.Core.Util.getNamespace("Wicket.Ajax"))&&"function"===typeof h.registerPostCallHandler&&"function"===typeof h.registerPreCallHandler&&(h.registerPreCallHandler(function(){b&&0<b.length&&(e(a(".results-container")),g(b))}),h.registerPostCallHandler(function(){f();
BB.Action.Binder.wire(a("body"))}))}}}(jQuery);BB.createNamespace("BB.UI.SortBarPanel");
BB.UI.SortBarPanel=function(a){var b,d,e,f;return{setup:function(g,k,h){h=BB.Core.Util.getNamespace("Wicket.Event");var m;b=g;e=k;h&&"function"===typeof h.subscribe&&(h.subscribe("/ajax/call/before",function(g,h,k,q,p){g=a(e.updatedComponent);m=a(h.event.currentTarget);b=m.parents(".bbSortBar");0<b.length&&0<g.length&&(f=!0,null===d||void 0===d)&&(d=BB.UI.Container.ActivityIndicator.start(g,void 0))}),h.subscribe("/dom/node/added",function(a,b){f&&(f=!1,null!==d&&void 0!==d&&(BB.UI.Container.ActivityIndicator.stop(d),
d=null))}))}}}(jQuery);BB.createNamespace("BB.UI.Container");BB.UI.Container.ActivityIndicator=function(a){var b,d,e=function(){return{}};return{start:function(f,g){d=new e;b=f;b.addClass("bbProgressShow");var k=a("<div />",{"class":"bbProgressOverlay",css:{left:b.offset().left,top:b.offset().top,width:b.width(),height:b.height()}}).appendTo(a("body"));BB.UI.Spinner.create(k,{top:"30px"});d.overlay=k;d.container=b;return d},stop:function(a){void 0!==a&&(a.container.removeClass("bbProgressShow"),a.overlay.remove())}}}(jQuery);
BB.createNamespace("BB.UI.Update");
(function(a){BB.UI.Update.BaseFooter=function(b){var d,e=b||"UPDATE",f=function(a){d.removeAttr("disabled");"function"===typeof a&&d.bind("click",a)},g=function(){d.attr("disabled","disabled")};this.setup=function(a,b){return b};this.create=function(b,h,m){b=a('<div class="footerModalInnerContainer"/>').appendTo(b);d=a('<button class="primaryAction bbButton bb-btn bb-btn--primary">'+e+"</button>").appendTo(b);h.wireUpdate=f;h.unwireUpdate=g;b=h.enableFacebook;"undefined"!==typeof b&&b&&BB.Data.User.get("socialMediaFacebookAuthorized")&&
(b=a(".footerModalInnerContainer"),b.parent().addClass("mobile2Buttons"),m=a("<div class='facebookOptions'></div>"),a("<div id='shareOnFbDiv' class='bbCheckbox shareOnFbCheck'><input type='checkbox' id='shareonfbcheck' value='false'><label class='shareToFbLabel' for='shareonfbcheck'><span class='shareFaceBookCheck'></span>Share on Facebook</label></div>").appendTo(m),a("<span> | </span><a class='settingsLink' target='_blank' href=\"http://my.bodybuilding.com/contactprefs/editfacebook/\">Settings</a>").appendTo(m),
m.appendTo(b),h=h.statName,b=!1,b="bodyfat"===h?BB.Data.User.get("sharedBodyFatUpdatesOnFb"):"weight"===h?BB.Data.User.get("sharedBodyWeightUpdatesOnFb"):BB.Data.User.get("sharedBodyStatUpdatesOnFb"),a("#shareonfbcheck").prop("checked",b).on("change",function(){a(this).prop("checked")&&BB.Action.SocialMedia.isPublishPermissionSet(function(a){!1===a&&BB.Action.SocialMedia.authenticateFacebookUserExtended()})}))};this.finish=function(){}};BB.UI.Update.getImpactHTML=function(a){return'<div class="impactUpdate"><div class="impactIcon"></div><div class="impactAssesment"><div class="impactDeltaStatement">no change</div><div class="amount"><span class="delta">0</span><span class="impactUnit">'+
a+'</span></div><div class="impactDeltaTime">in 33 days</div></div></div>'}})(jQuery);BB.createNamespace("BB.UI.Update");
BB.UI.Update.BodyFat=function(a){var b=BB.Data.User.get,d,e,f,g,k=function(b,d,e){d=BB.Core.Valid.bodyfat(d);a(".bbTooltip.onModal.feedbackError").remove();if(!0===d)return f(),!0;e&&BB.Action.Tooltip.triggerError(b,d,!0);return!1},h=function(b){var f=d.val();k(a(this),f,!0)?(BB.Data.User.set("bodyfat",f,!0,{caption:e.val()}),"undefined"!=typeof a("span[data-target*='bodyfat']").html()&&a("span[data-target*='bodyfat']").add("span[data-target-id='bodyfat']").html(f+"%"),BB.UI.Modal.Base.finish()):
b.stopPropagation()};return{setup:function(){return{title:"update your body fat",plugableContainers:[{nsTemplate:new BB.UI.Update.BaseFooter,targetContainer:"footer"}],enableFacebook:!0,statName:"bodyfat"}},create:function(m,l,n){var r,q=null,p=b("bodyfat"),t,w=new Date,u=b("statsObject"),v=a('<div class="bodyfatUpdate"><div class="updateRow bbListItemBox"><div class="iconUpdateContainer"><div class="iconUpdate"></div><div class="timestampUpdate">'+BB.Core.Util.formatDate(new Date,!0)+'</div></div><div class="inputUpdate"><div class="bbTextBox"><input type="number"><span class="unitOfMeasure">PERCENT</span></div></div>'+
BB.UI.Update.getImpactHTML(" %")+'</div><div class="updateRow captionBucket" data-max-character-count="1000" data-max-string-id="true" data-counter-displays-at="800"></div></div>').appendTo(m),x=new BB.UI.Input.Caption,y=v.find("span.delta"),B=v.find(".impactDeltaStatement"),C=v.find(".impactDeltaTime");f=l.wireUpdate;u&&u.bodyfat&&(u.bodyfat.stats&&(r=w-new Date(u.bodyfat.stats.entrydate),r=1<=r?(new Date(r)).getDate():0),u.bodyfat.goals&&(q=u.bodyfat.goals.goalvalue<p));C.html("in "+r+" day"+(1<
r||0===r?"s":""));"function"===typeof n&&n();x.create(v.find(".updateRow.captionBucket"));BB.Action.Binder.wire(m.find(".bbBinder"));d=m.find("input");g=BB.Core.Util.formatFloat(p,"--");d.val(g);BB.Data.Env.get("isMobile")||d.focus().select();d.bind("keyup",function(b){var d=a(this),e=d.val();switch(b.which){case 13:h();break;default:k(d.parent(".bbTextBox"),e,!1)&&(t=e-p,0<t?(B.html("a gain of:"),null!==q&&(q?v.addClass("negativeImpact").removeClass("positiveImpact"):v.removeClass("negativeImpact").addClass("positiveImpact")),
v.addClass("aGain").removeClass("aLoss")):0===t?(B.html("no change"),v.removeClass("negativeImpact").removeClass("positiveImpact").removeClass("aGain").removeClass("aLoss")):(B.html("a loss of:"),null!==q&&(q?v.removeClass("negativeImpact").addClass("positiveImpact"):v.addClass("negativeImpact").removeClass("positiveImpact")),v.removeClass("aGain").addClass("aLoss")),y.html(BB.Core.Util.formatFloat(Math.abs(t),"--")))}});f(h);e=m.find("textarea.bbCoreInputInputLayer")},finish:function(){}}}(jQuery);
BB.createNamespace("BB.UI.Update");
BB.UI.Update.Weight=function(a){var b,d,e,f,g=function(b,d,f){d=BB.Core.Valid.weight(d);a(".bbTooltip.onModal.feedbackError").remove();if(!0===d)return e(),!0;f&&BB.Action.Tooltip.triggerError(b,d,!0);return!1},k=function(d){var e=b.val();if(g(a(this),e,!0)){BB.Data.User.set("weight",e,!0,{caption:f.val()});BB.UI.Modal.Base.setPreConditionToClose(null);d=a("span[data-target*='weight']");if("undefined"!=typeof d.html()){var k=d.html().split(" ")[1];d.text(e+" "+k)}BB.UI.Modal.Base.finish()}else d.stopPropagation()};return{setup:function(a,
b,d){return{title:"update your weight",plugableContainers:[{nsTemplate:new BB.UI.Update.BaseFooter,targetContainer:"footer"}],enableFacebook:!0,statName:"weight"}},create:function(h,m,l){var n=BB.Data.User.get,r,q=null,p=n("unitsOfWeight"),t=n("weight"),w,u=new Date,v=n("statsObject"),x=a('<div class="weightUpdate"><div class="updateRow bbListItemBox"><div class="iconUpdateContainer"><div class="iconUpdate"></div><div class="timestampUpdate">'+BB.Core.Util.formatDate(u,!0)+'</div></div><div class="inputUpdate"><div class="bbTextBox"><input type="number"><span class="unitOfMeasure">'+
p+"</span></div></div>"+BB.UI.Update.getImpactHTML(" "+p)+'</div><div class="updateRow captionBucket" data-max-character-count="1000" data-max-string-id="true" data-counter-displays-at="800"></div></div>').appendTo(h),y=x.find("span.delta"),p=x.find(".impactDeltaTime"),B=x.find(".impactDeltaStatement"),C=new BB.UI.Input.Caption;e=m.wireUpdate;v&&v.weight&&(v.weight.stats&&(r=u-new Date(v.weight.stats.entrydate),r=1<=r?(new Date(r)).getDate():0),v.weight.goals&&(m=v.weight.goals.goalvalue,m=n("isMetric")?
BB.Core.Util.toKg(m):m,q=m<t));p.html("in "+r+" day"+(1<r||0===r?"s":""));"function"===typeof l&&l();C.create(x.find(".updateRow.captionBucket"));BB.Action.Binder.wire(h.find(".bbBinder"));b=h.find("input");d=BB.Core.Util.formatFloat(t,"--");b.val(d);BB.Data.Env.get("isMobile")||b.focus().select();b.bind("keyup",function(b){var d=a(this),e=d.val();switch(b.which){case 13:k();break;case 27:break;default:g(d.parent(".bbTextBox"),e,!1)&&(w=e-t,0<w?(B.html("a gain of:"),null!==q&&(q?x.addClass("negativeImpact").removeClass("positiveImpact"):
x.removeClass("negativeImpact").addClass("positiveImpact")),x.addClass("aGain").removeClass("aLoss")):0===w?(B.html("no change"),x.removeClass("negativeImpact").removeClass("positiveImpact").removeClass("aGain").removeClass("aLoss")):(B.html("a loss of:"),null!==q&&(q?x.removeClass("negativeImpact").addClass("positiveImpact"):x.addClass("negativeImpact").removeClass("positiveImpact")),x.removeClass("aGain").addClass("aLoss")),y.html(BB.Core.Util.formatFloat(Math.abs(w),"--")))}});e(k);f=h.find("textarea.bbCoreInputInputLayer")},
finish:function(){}}}(jQuery);BB.createNamespace("BB.UI.Update");
(function(a){BB.UI.Update.FitStatus=function(){var b,d,e,f=function(d){var f=e.val(),h;h=a(this);0<e.val().length?h=!0:(BB.Action.Tooltip.triggerError(h,BB.Loc.get("Please, enter your fit status."),!0),h=!1);h?(BB.UI.Spinner.create(a(this),BB.UI.Spinner.BUTTON),BB.Data.User.set("fitStatus",{value:f,timeStamp:new Date},!0),BB.UI.Modal.Base.setPreConditionToClose(null),"function"===typeof b&&b(d)):d.stopPropagation()};this.setup=function(){return{title:"post a fit status",plugableContainers:[{nsTemplate:new BB.UI.Update.BaseFooter("POST"),
targetContainer:"footer"}]}};this.create=function(g,k,h){var m=new BB.UI.Input.Caption,l=BB.Data.User.get("fitStatus"),n=l?BB.Core.Util.formatDate(BB.Core.Util.toDate(l.timeStamp)):"",l=l?(l.value||l.content).replace(/"/g,"&quot;")+"<br/>"+n:BB.Loc.get("NO_FIT_STATUS");d=k.wireUpdate;"function"===typeof h&&(b=h());m.create(a('<div class="postFitStatusYeah" data-placeholder="'+l+'" data-max-height="200" data-max-character-count="1000" data-max-string-id="true"/>').appendTo(g));BB.Action.Binder.wire(g.find(".bbBinder"));
try{BB.App.Mentions.initialize(g.find("textarea"))}catch(r){console.warn("Error wiring mentions: "+r)}d(f);e=a(".modalContainerGlobal .bbBody .mentionMessage");0===e.size()&&(e=a(".modalContainerGlobal .bbBody .bbCoreInputInputLayer"));0===e.size()&&console.error("Could not find modal input")};this.finish=function(){};this.preConditionToClose=function(a,b){if(0===e.val().length)return!0;BB.Action.Tooltip.triggerPromptConfirm(b,BB.Loc.get("CONFIRM_CLOSE_UNSAVED_CHANGES"),function(){BB.UI.Modal.Base.setPreConditionToClose(null);
BB.UI.Modal.Base.finish()},!0);return!1}}})(jQuery);BB.createNamespace("BB.UI.Update");
(function(a){BB.UI.Update.MotivationLevel=function(){var b,d,e,f,g,k=function(a){g.removeAttr("disabled");"function"===typeof a&&(g.unbind("click.motivationLevel"),g.bind("click.motivationLevel",a))},h=function(){g.attr("disabled","disabled")},m=function(a,b){if(!isNaN(f)&&0<f&&10>=f)return k(),!0;h();BB.Action.Tooltip.triggerError(a,"Please select a motivation level.",!0);return!1},l=function(b){if(void 0===b)b=0;else if(isNaN(parseInt(b,10)))return;a(".motivation-level-update-modal .motivation-level-bar").each(function(d,
e){d<b?a(e).addClass("active"):a(e).removeClass("active")})},n=function(){var b=a(".impactDeltaStatement"),g=a(".amount .delta"),h=a(".impactDeltaTime"),k=a(".delta"),l=a(".impactUnit"),n=null,m="undefined"!==typeof f,r="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");null!==d&&void 0!==d&&14<n&&(n=null);m?f===e?b.text("NO CHANGE"):null===e?b.text("MOTIVATION LEVEL SET TO:"):b.text("CHANGED FROM "+e+"/10:"):b.text("MOTIVATION LEVEL NOT SET");m?(g.html(f),k.removeClass("na"),l.css("display",
"inline")):(g.text("--"),k.addClass("na"),l.css("display","none"));null!==n?(b=r[d.getMonth()]+" "+d.getDate()+", "+d.getFullYear(),h.text("Previously set to "+e+"/10 on "+b)):h.html("&nbsp")},r=function(d){m(a(this),f)?(BB.Data.User.set("motivationLevel",f,!0,{caption:a(".modalContainerGlobal .bbContent .bbBody .mentionMessage").val()}),"function"===typeof b&&b(d)):d.stopPropagation()};this.setup=function(){return{title:"Update Your Motivation Level",plugableContainers:[{nsTemplate:new BB.UI.Update.BaseFooter,
targetContainer:"footer"}]}};this.create=function(q,p,t){var w=BB.Data.User.get("motivationLevel"),u=new BB.UI.Input.Caption;p=0<a("#mobile-central-frame").length?"isMobile":"";var v;v=a('<div class="motivation-level-update-modal '+p+'"><div class="updateRow bbListItemBox"><div class="inputUpdate motivation-level-bars"><div class="motivation-level-container"><div class="bar-container"><div class="todaysDate">Oct 25, 2005</div><span class="motivation-level-bar motivation-level-bar-1" ><span class="color-bar"  data-level="1"></span><span class="number">1</span></span><span class="motivation-level-bar motivation-level-bar-2" ><span class="color-bar"  data-level="2"></span><span class="number">2</span></span><span class="motivation-level-bar motivation-level-bar-3" ><span class="color-bar"  data-level="3"></span><span class="number">3</span></span><span class="motivation-level-bar motivation-level-bar-4" ><span class="color-bar"  data-level="4"></span><span class="number">4</span></span><span class="motivation-level-bar motivation-level-bar-5" ><span class="color-bar"  data-level="5"></span><span class="number">5</span></span><span class="motivation-level-bar motivation-level-bar-6" ><span class="color-bar"  data-level="6"></span><span class="number">6</span></span><span class="motivation-level-bar motivation-level-bar-7" ><span class="color-bar"  data-level="7"></span><span class="number">7</span></span><span class="motivation-level-bar motivation-level-bar-8" ><span class="color-bar"  data-level="8"></span><span class="number">8</span></span><span class="motivation-level-bar motivation-level-bar-9" ><span class="color-bar"  data-level="9"></span><span class="number">9</span></span><span class="motivation-level-bar motivation-level-bar-10"><span class="color-bar" data-level="10"></span><span class="number">10</span></span></div><div class="instructions">Select your motivation level above.</div></div></div><div class="impactContainer">'+
BB.UI.Update.getImpactHTML('<span class="spacing">/</span>10')+'</div></div><div class="updateRow captionBucket"></div></div>').appendTo(q);g=a(".bbModalContainer .footerModalInnerContainer .primaryAction");null!==w&&void 0!==w?(e=w.value,d=new Date(1E3*w.timeStamp)):d=e=null;v.find(".color-bar").each(function(b,d){a(d).bind("click.motivationLevel",function(b){f=parseInt(a(this).data("level"),10);n();m()}).bind("mouseenter.motivationLevel",function(b){b=parseInt(a(this).data("level"),10);l(b)}).bind("mouseleave.motivationLevel",
function(b){parseInt(a(this).data("level"),10);l(f)})});n();"function"===typeof t&&(b=t());u.create(v.find(".updateRow.captionBucket"));BB.Action.Binder.wire(q.find(".bbBinder"));q=q.find("textarea");try{BB.App.Mentions.initialize(q)}catch(x){console.warn("Could not initialize @mentions.")}0<p.length&&(q.focus(function(){a(this).parents(".bbCaption").find(".bbThumbnail").css("display","none");a(this).css("width",a(this).parents(".bbTextArea").width());a(this).parents(".bbMentionComment").find(".mentionsDraw").css("width",
a(this).parents(".bbTextArea").width())}),q.blur(function(){a(this).parents(".bbCaption").find(".bbThumbnail").css("display","");a(this).css("width",a(this).parents(".bbTextArea").width());a(this).parents(".bbMentionComment").find(".mentionsDraw").css("width",a(this).parents(".bbTextArea").width())}));k(r);h()};this.finish=function(){}}})(jQuery);BB.createNamespace("BB.UI.Update");
BB.UI.Update.Height=function(a){var b,d,e,f=null,g,k,h=function(e){var f,g,h,q;d.validate(e)&&(f=d.get(),BB.Data.User.set("height",f,!0,{caption:k.val()}),f=a("input[name*='heightBig']"),"undefined"!=typeof f&&(f=a("input[name*='heightBig']").val(),g=a("input[name*='heightSmall']").val(),BB.Data.User.get("isMetric")?(h="M",q="CM"):(h="\u2019",q="\u201d"),a("span[data-target*='height']").text(f+h+" "+g+q)),BB.UI.Modal.Base.setPreConditionToClose(null),"function"===typeof b&&b(e,!0))};return{setup:function(){return{title:"update your height",
plugableContainers:[{nsTemplate:new BB.UI.Update.BaseFooter,targetContainer:"footer"}]}},create:function(m,l,n){var r=BB.Data.User.get,q=new Date,p=r("statsObject"),t=a('<div class="heightUpdate"><div class="updateRow bbListItemBox"><div class="iconUpdateContainer"><div class="iconUpdate"></div><div class="timestampUpdate">'+BB.Core.Util.formatDate(q,!0)+'</div></div><div class="inputUpdate"><div class="heightField bbBinder" data-action="heightInput"></div></div>'+BB.UI.Update.getImpactHTML(r("unitsOfLength"))+
'</div><div class="updateRow captionBucket hide"></div></div>').appendTo(m),w=t.find("span.delta"),r=t.find(".impactDeltaTime"),u=t.find(".impactDeltaStatement"),v=new BB.UI.Input.Caption;g=l.wireUpdate;p&&p.height&&p.height.stats&&(f=q-new Date(p.height.stats.entrydate),f=1<=f?(new Date(f)).getDate():0);r.html("in "+f+" day"+(1<f||0===f?"s":""));"function"===typeof n&&(b=n());v.create(t.find(".updateRow.captionBucket"));BB.Action.Binder.wire(m.find(".bbBinder"),void 0,!0);d=m.find(".heightField").data("controller");
e=BB.Data.User.get("height");d.set(e);m.find(".heightField input").bind("keyup",function(b){a(this);var f=d.get();switch(b.which){case 13:h();break;default:b=Math.round(f-e),0<b?(u.html("a gain of:"),t.addClass("aGain").removeClass("aLoss")):0===b?(u.html("no change"),t.removeClass("aGain").removeClass("aLoss")):(u.html("a loss of:"),t.removeClass("aGain").addClass("aLoss")),w.html(BB.Core.Util.formatFloat(Math.abs(b),"--"))}});g(h);k=m.find("textarea.bbCoreInputInputLayer")},finish:function(){},
preConditionToClose:function(a,f){if(.1>Math.abs(e-d.get())&&0===k.val().length)return!0;BB.Action.Tooltip.triggerPromptConfirm(f,BB.Loc.get("CONFIRM_CLOSE_UNSAVED_CHANGES"),function(){"function"===typeof b&&b(a,!0)},!0);return!1}}}(jQuery);BB.createNamespace("BB.UI.Update");
(function(a){BB.UI.Update.OverallGoal=function(){var b,d,e,f,g=function(a,b){return!0},k=function(d){var k=e.find(":selected").val(),l=e.find(":selected").text(),n=""!==f.val()?f.val():null===BB.Data.User.get("overallGoal")?"":BB.Data.User.get("overallGoal");g(a(this),{maingoal:k,overallgoal:n})?(BB.API.send("profile/goals/set",{maingoal:k,overallgoal:n},{success:function(){BB.Data.User.set("overallGoal",n);BB.Data.User.set("mainGoal",k);" "===n||""===n?a(".profileUserInfo .overAllGoal p").html("YOU HAVE NOT SET<br/> AN OVERALL GOAL.").addClass("empty"):
a(".profileUserInfo .overAllGoal p").html('"'+n+'"').removeClass("empty");a(".profileUserInfo .overAllGoal h3 span:last-child").html(l)},error:function(){}}),"function"===typeof b&&b(d)):d.stopPropagation()};this.setup=function(){return{title:"Overall Goal",plugableContainers:[{nsTemplate:new BB.UI.Update.BaseFooter("UPDATE"),targetContainer:"footer"}]}};this.create=function(g,m,l){var n=""!==BB.Data.Env.get("pageOwner").overallGoal&&" "!==BB.Data.Env.get("pageOwner").overallGoal?BB.Data.Env.get("pageOwner").overallGoal:
"Enter a one or two sentence summary of your overall body goals. This will go at the top of your BodySpace page!",r=BB.Data.Env.get("pageOwner").mainGoal.code;null===BB.Data.User.get("mainGoal")?BB.Data.User.set("mainGoal",r):n=" "!==BB.Data.User.get("overallGoal")?BB.Data.User.get("overallGoal"):"Enter a one or two sentence summary of your overall body goals. This will go at the top of your BodySpace page!";n=a('<div class="overAllGoalUpdate"><div><span>Main Goal</span><div><select class="bbBinder bbLarge" data-action="dropdown"><option value="muscle">Gain Muscle</option><option value="fat">Lose Fat</option><option value="transform">Transform My Body</option><option value="compete">Compete</option><option value="sport">Improve For A Sport</option> <option value="healthy">Live Healthier</option><option value="other">Other</option></select></div></div><div><span>Goal</span><div class="bbBinder" data-action="caption" data-placeholder="'+
n+'" data-max-height="250" data-max-character-count="250" data-max-string-id="true"></div></div>');null!==r&&n.find('[value="'+BB.Data.User.get("mainGoal")+'"]').attr("selected","selected");n.appendTo(g);d=m.wireUpdate;"function"===typeof l&&(b=l());BB.Action.Binder.wire(g.find(".bbBinder"),void 0,!0);g.find(".bbCaption").data("controller").refreshWidth();e=g.find("select");f=g.find("textarea");d(k)};this.finish=function(){}}})(jQuery);BB.createNamespace("BB.UI.Video");
BB.UI.Video.Modal=function(a){var b;return{setup:function(b){var e={title:"Video"};void 0!==b&&a(b).data("videoparams")&&(e=a.extend(e,a(b).data("videoparams")));return e},create:function(d,e,f){var g=e.key;BB.Data.Env.get("isMobile")?(e="http://videocdn.bodybuilding.com/video/mp4/"+e.id+"m.mp4",e=a('<video controls="true" preload="metadata"><source src="'+e+'" /></video>'),b&&(b.pause(),b.src="",a(b).remove()),(b=e[0])&&b.play(),a(b).css("width","100%")):e=a('<div class="BBCOMVideoEmbed" background-image: url(\'http://www.bodybuilding.com/fun/images/2010/videoloading.gif\');" data-video-key="'+
g+'" data-autoplay="true" data-thumbnail-url="http://assets.bodybuilding.com/bodyspace/images/sections/landing/bodyspace-splash.jpg" data-dimensions="640x360"><script type="text/javascript" src="http://assets.bodybuilding.com/videos/javascript/min/external-video-embed.js">\x3c/script></div>');e.appendTo(d);f()},finish:function(){b&&(b.pause(),b.src="")}}}(jQuery);
(function(a){BB.UI.Calendar=function(){var b,d,e="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),f,g,k="SMTWTFS".split(""),h,m,l;this.setup=function(a,b){return b};this.create=function(n,r,q){var p=a("<div/>",{"class":"bbCalendarContainer"}).appendTo(n),t=r.dateStamp?BB.Core.Util.toDate(r.dateStamp):new Date,w=r.dateStamp,u=new Date,v,x=function(){t<b&&(t=new Date(b));t>d&&(t=new Date(d));t.setDate(1);var n=t.getFullYear(),q=t.getMonth(),C,z=new Date(n,q+1,0),H,E,I=new Date(n,q+1,0),
z='<select class="bbBinder '+(r.justMonth?"":"bbSmall")+'" data-action="dropdown" data-cape-max-height="150"/>',F=a('<div class="monthCellContainer"/>'),A=a("<div/>",{"class":"calendarHeader"}).appendTo(p),G=a("<div/>",{"class":"calendarSide calendarSideLeft"}).appendTo(A);E=a("<div/>",{"class":"calendarMiddle"}).appendTo(A);var A=a("<div/>",{"class":"calendarSide"}).addClass("calendarSideRight").appendTo(A),A=a("<div/>",{"class":"calendarSideMoveRightContainer bbButton bbSmall softAction"}).appendTo(A),
D=a("<div/>",{"class":"calendarSideMoveLeftContainer bbButton bbSmall softAction"}).appendTo(G),G=function(){t=new Date(m.val(),h.val(),1);p.html("");x()};A.bind("click",null,function(){t.setDate(32);p.html("");x()});D.bind("click",null,function(){t.setDate(-1);p.html("");x()});a("<div/>",{"class":"calendarSideMoveRight bbButtonIcon"}).appendTo(A);a("<div/>",{"class":"calendarSideMoveLeft bbButtonIcon"}).appendTo(D);h=a(z).appendTo(E);D=e.length;for(A=0;A<D;A++)C={value:A,html:e[A]},A===q&&(C.selected=
!0),a("<option/>",C).appendTo(h);m=a(z).appendTo(E);for(A=f;A<=g;A++)C={value:A,html:A},A===n&&(C.selected=!0),a("<option/>",C).appendTo(m);h.bind("change",G);m.bind("change",G);if(l)p.addClass("bbJustMonth"),v=a('<button class="chooseMonth primaryAction bbButton">select calendar</button>').appendTo(p),v.data("value",{type:"date",value:BB.Core.Util.monthStamp(t)}),BB.Action.Binder.wire(v,r.dayDelegates[0]);else{z=a('<div class="monthCellHeaderContainer"/>').appendTo(F);A=0;for(D=k.length;A<D;A++)a("<div/>",
{html:k[A],"class":"monthCellHeader"}).appendTo(z);E=a('<div class="monthCellMatrixContainer"/>').appendTo(F);z=new Date(n,q,1);for(z.setDate(z.getDate()-z.getDay());z<=I||6>H;)n=z.getDate(),G=z.getMonth(),A=BB.Core.Util.dayStamp(z),D=a("<div/>",{"data-value":'{ "type": "date", "value": "'+A+'" }'}).appendTo(E),z>=b&&z<=d?BB.Action.Binder.wire(D,r.dayDelegates[0]):D.addClass("constrainedSelection"),H=z.getDay(),a("<div/>",{html:n}).addClass("dayCell").appendTo(D),z>u?D.addClass("monthCellFuture"):
BB.Core.Util.dayStamp(u)===A?D.addClass("monthCellToday"):D.addClass("monthCell"),G<q?D.addClass("monthCellPrev"):G>q?D.addClass("monthCellNext"):D.addClass("monthCellCurrent"),w===A&&D.addClass("monthCellSelected"),z.setDate(n+1);a('<div class="bbCalendarClear"/>').appendTo(F);F.appendTo(p)}BB.Action.Binder.wire(p.find(".bbBinder"))};b=new Date(BB.Core.Util.dayStamp(r.constraints.min));d=new Date(BB.Core.Util.dayStamp(r.constraints.max));f=b.getFullYear();g=d.getFullYear();l=r.justMonth;x();"function"===
typeof q&&q()};this.finish=function(){}}})(jQuery);BB.App=BB.App||{};
BB.App.NextSteps=function(a){function b(a,b){this.progress=b;this.currentStep=null;this.nextSteps=[];var d=BB.App.NextSteps.urls.asArray(),k,h,m=a.length,l=d.length;for(k=0;k<m;k++)for(h=0;h<l;h++)a[k].id===d[h].id&&this.nextSteps.push(d[h])}var d;b.prototype.getNextStep=function(){if(null===this.currentStep)return this.currentStep=this.nextSteps[0];for(var a=0;a<this.nextSteps.length;a++)if(this.nextSteps[a]===this.currentStep)return this.currentStep=a+1>=this.nextSteps.length?this.nextSteps[0]:
this.nextSteps[a+1]};return{setup:function(a,b){return!0},create:function(e,f,g){var k=a('<div id="next-steps-spinner" style="position: relative; left: 50%; top: 50%;"></div>'),h=BB.UI.Spinner.create(k,BB.UI.Spinner.BUTTON);f=BB.Core.Util.cookie.get(BB.Data.User.get("slug")+"nswvisibility");var m=!0;null!==f&&"hidden"===f.value&&(m=!1);(function(){dust.render("nextStepsTemplate",{},function(f,n){var r,q;a(n).appendTo(a("body"));r=a("#bb-next-steps");q=BB.UI.ProgressBar.create(r.find(".bbNextStepsProgressBar"));
BB.Data.NextSteps.registerForUpdates(function(f){d=new b(f.nextSteps,f.progress);f=r.find(".bbNextStepPercent");var n=function(){var a=d.getNextStep(),b=a.name,f=r.find(".bbNextStepUrl"),g=r.find(".bbNextStepsImg .next-steps-icon"),n=e.find(".bbDrawerContent");BB.UI.Spinner.Instance(k,h).stop();g.attr("class","next-steps-icon");g.addClass(a.imgCss);f.attr("href",a.url);f.html(b.toUpperCase());n.html(r)};0<d.nextSteps.length?(n(),q.setPercent(d.progress/100),f.html(d.progress+"%  complete"),a("body").on("click.skip",
".bbNextStepSkip",n),a("#next-steps-nav-container").css("display",""),1>=d.nextSteps.length&&a(".bbNextStepSkip").css("display","none"),m&&(g.open(null,e,this.onOpen),a("#bb-next-steps").css("display",""))):(a("#next-steps-nav-container").css("display","none"),a("#bb-next-steps").css("display","none"))})})})();e.find(".bbDrawerContent").html(k);return!0},finish:function(){return!0},onOpen:function(b,d){var g=BB.Data.User.get("slug")+"nswvisibility";a("#bb-next-steps").css("display","");BB.Core.Util.cookie.set({name:g,
value:"shown",expires:"30",path:"/",domain:"bodybuilding.com"});return!0},onClose:function(a,b){var d=BB.Data.User.get("slug")+"nswvisibility";BB.Core.Util.cookie.set({name:d,value:"hidden",expires:"30",path:"/",domain:"bodybuilding.com"});return!0}}}(jQuery);
(function(a){a.createNamespace("BB.App.NextSteps");a.App.NextSteps.urls={goal:{id:1,url:"http://my.bodybuilding.com/community/goal",imgCss:"goal",name:"Set a Goal"},plan:{id:2,url:"http://my.bodybuilding.com/community/plan",imgCss:"plan",name:"Select a Plan"},track:{id:3,url:"http://my.bodybuilding.com/community/track",imgCss:"track",name:"Start Tracking"},motivate:{id:4,url:"http://my.bodybuilding.com/community/motivation",imgCss:"motivate",name:"Get Motivated"},asArray:function(){return[this.goal,
this.plan,this.track,this.motivate]}}})(BB);
(function(){dust.loadSource(dust.compile('<div style="display: none;" id="bb-next-steps"><span class="bbNextStepsImg"><span class="next-steps-icon"></span></span><span class="bbNextStepsTextContent"><div class="progress"><span class="bbNextStepsProgressBar"></span><span class="bbNextStepPercent">complete</span></div><div class="next-step-title"><span class="bbNextStepText">NEXT STEP: </span><a href="javascript:void(0)" class="bbNextStepUrl">[NEXT STEPS]</a><a href="javascript:void(0)" class="bbNextStepSkip">Skip</a></div></span><span class="bbDrawerClose"></span></div>',"nextStepsTemplate"))})();
BB.Data=BB.Data||{};BB.Data.NextSteps=function(){var a=new BB.Core.MessageController({name:"nextStepsObjectNotification"}),b;return{load:function(){var d=BB.Data.User.get("id");null!==d&&BB.API.send("educationengine/getnextstep",{userid:d},{success:function(d){200===d.ret_code&&(b=d.data,a.sendMessage("nextStepsObjectNotification",d.data))}})},get:function(){return b},registerForUpdates:function(b){a.registerListener("nextStepsObjectNotification",BB.Core.Util.createRandomId(),b)}}}();
BB.UI=BB.UI||{};
BB.UI.ProgressBar=function(a){var b=function(b,e){var f,g=!1,k=a('<span class="bbProgressBar"></span>'),h=a('<span class="percentage-bar"><span class="eye-candy"></span></span>').appendTo(k),m=a('<span class="bbProgressBarText">0%</span>');e=a.extend({percent:0},e);e.visibleLabel&&(m.appendTo(b),g=!0);k.appendTo(b);this.setPercent=function(a){f=Math.min(Math.max(a,0),1);a=Math.round(100*f)+"%";h.css("width",a);g&&m.text(a)};this.getPercent=function(){return f};this.setPercent(e.percent)};return{create:function(d,
e){return new b(a(d),e)}}}(jQuery);BB.createNamespace("BB.UI.Toaster");
(function(a){var b=function(b,e){var f=a.extend({},{el:this,type:"success",msg:"No Data Passed",position:"after",persist:!1},e),g=function(b){setTimeout(function(){a(b).addClass("bbToast__fade-out");setTimeout(function(){a(b).remove()},300)},4600)},k=function(b){a(b).addClass("bbToast__fade-out");setTimeout(function(){a(b).remove()},300)},h=function(a,b){dust.loadSource(dust.compile('<div class="bbToast bbToast--{type}"> <div class="bbToast__text">{msg|s}</div><div class="bbToast__icon bbToast__icon--close bbToast__icon--close-{type} js-event-closeToast"></div></div>',"BBUIToasterTemplate"));
dust.render("BBUIToasterTemplate",a,function(a,d){a?console.error(a):b(d)})};(function(b){h({type:f.type.toLowerCase(),msg:f.msg},function(d){var e="before"===f.position.toLowerCase()?a(b).before(d).prev(".bbToast"):a(b).after(d).next(".bbToast");e.find(".js-event-closeToast").on("click",function(){k(e)});e="before"===f.position.toLowerCase()?a(b).prev(".bbToast"):a(b).next(".bbToast");e.children(".js-event-closeToast").on("click",function(){k(e)});!1===f.persist&&g(e)})})(b)};BB.UI.Toaster=function(d,
e){if(d)return a.each(d,function(){new b(d,e)})}})(window.jQuery);
BB.UI.TemplateCatalog.set("Report",'<div class="reportBodyContainer"><div class="container-fluid"><div class="row row--report-modal"><div class="reportInstructions col-xs-12">'+BB.Loc.get("ALL_FIELDS_ARE_REQUIRED")+'</div></div><div class="row row--report-modal reportId"><div class="col-xs-12 col-sm-5 reportIdField"><div class="reportLabel">'+BB.Loc.get("YOUR_NAME")+'</div><div class="reportIdInput"><input name="userName" type="text" class="bbTextBox"></div></div><div class="col-xs-12 col-sm-5 reportIdField"><div class="reportLabel">'+BB.Loc.get("YOUR_EMAIL")+
'</div><div class="reportIdInput"><input name="email" type="text" class="bbTextBox"></div>'+BB.Loc.get("YOUR_EMAIL_ADDRESS_WONT_BE_PUBLISHED")+'</div></div><div class="row row--report-modal reportDetails"><div class="col-xs-12 reportLabel reportReason">'+BB.Loc.get("REASON_FOR_REPORTING")+'</div><div class="col-xs-12 checkboxesContainer">{#reasons}<div class="checkboxItem"><input type="checkbox" value="{key}">{value}</div>{/reasons}</div><div class="reportedItem">{reportedItem}</div></div><div class="row row--report-modal reportDetails"><div class="col-xs-12"><div class="reportLabel">'+
BB.Loc.get("PLEASE_PROVIDE_MORE_DETAILS_FOR_REPORTING")+'</div><textarea class="bbTextArea" data-action=\'{"ns":"BB.UI.Input.Base","method":"create"}\' data-max-length="500"></textarea><div class="reportBottomLegend">'+BB.Loc.get("CHARACTERS_LIMITS_DIRECTIONS",{MIN:5,MAX:500})+'</div></div></div><div class="row row--report-modal"><div class="col-xs-12 reportSubmit"><div class="bbButton primaryAction bb-ui bb-btn--primary" id="reportSubmit" disabled="disabled">'+BB.Loc.get("SUBMIT")+'</div></div></div><div class="row row--report-modal"><div class="col-xs-12 reportNote">'+
BB.Loc.get("NOTE")+":"+BB.Loc.get("PLEASE_USE_THIS_FORM_ONLY_TO_REPORT")+"</div></div></div></div>");
BB.UI.Report=function(a){var b="report",d=!1,e,f,g,k,h,m=function(b){var n=!0,l=!1;a(".bbTooltip.feedbackError").remove();0===f.val().length&&(d&&BB.Action.Tooltip.triggerError(f,"Please enter your name in order to submit.",!0),n=!1);0===g.val().length&&(d&&BB.Action.Tooltip.triggerError(g,"Please enter your email address in order to submit.",!0),n=!1);5>h.val().length&&(d&&BB.Action.Tooltip.triggerError(h,"Please provide details as to why you are reporting this user.",!0),n=!1);k.each(function(){void 0!==
a(this).attr("checked")&&(l=!0)});l||(d&&BB.Action.Tooltip.triggerError(a(k[0]),"Please select a reason for reporting this user.",!0),n=!1);d=!1;n?e.removeAttr("disabled"):(e.attr("disabled","disabled"),b.stopPropagation());return n},l=function(a){BB.API.send("report/reportcontent",a,{success:function(){BB.UI.Modal.Base.finish()},error:function(){BB.Action.Tooltip.triggerError(e,"Unexpected error trying to submit, please try again.",!0)}})},n=function(a){BB.API.send("comments-api/"+(void 0===a.userId?
"report/anonymous":"report"),a,{success:function(){BB.UI.Modal.Base.finish()},error:function(){BB.Action.Tooltip.triggerError(e,"Unexpected error trying to submit, please try again.",!0)}})};return{setTitle:function(a){b=a},setup:function(a,d){var e;d=d||{};a&&(e=a.data("target"))&&(d.type=e.reportType,d.url=e.url||d.url,d.ownerId=e.ownerId,d.entityId=e.entityId,d.commentId=e.commentId,d.apiP=d.apiP||e.apiP);d.title=b;d.description="";e="COMMENT"===d.type?[{key:"OFFENSIVE",value:"Offensive (Porn, Sexual Remarks, etc.)"},
{key:"INAPPROPRIATE",value:"Inappropriate (Abuse, Threats, etc.)"},{key:"SUSPICIOUS",value:"Suspicious (Phishing, Scams, etc.)"},{key:"SPAM",value:"Spam (Advertising, Competitor Links, etc.)"},{key:"OTHER",value:"Other"}]:[{key:"INAPPROPRIATE",value:"Inappropriate (Abuse, Threats, etc.)"},{key:"SPAM",value:"Spam (Advertising, Competitor Links, etc.)"}];d.reasons=e;d.url&&(d.reportedItem="URL: "+d.url);return d},create:function(b,q,p){BB.UI.TemplateCatalog.render("Report",q,function(t,w){a(w).appendTo(b);
f=a(".reportBodyContainer input[name=userName]");g=a(".reportBodyContainer input[name=email]");h=a(".reportBodyContainer .reportDetails textarea.bbTextArea");e=a(".reportBodyContainer #reportSubmit");k=a(".checkboxesContainer .checkboxItem input");a(".reportBodyContainer input").bind("keyup",m);a(".reportBodyContainer textarea").bind("keyup",m);BB.Action.Binder.wire(h);e.bind("click",function(b){d=!0;if(m(b)){q.apiP=q.apiP||{};q.apiP.realname=f.val();q.apiP.email=g.val();b=h.val();var e=function(){var b=
[];k.each(function(){a(this).is(":checked")&&b.push(a(this).val())});return b.join(",")}();"COMMENT"===q.type?(q.apiP.detail=b,q.apiP.reasons=e,q.apiP.userId=BB.Data.User.get("id"),q.apiP.entityId=q.entityId,q.apiP.commentId=q.commentId,n(q.apiP)):(q.apiP.reportDetails=b,q.apiP.reportReasons=e,q.apiP.reportType=q.type,q.apiP.userid=BB.Data.User.get("id"),q.apiP.userName=BB.Data.User.get("userName"),q.apiP.reportedURL=q.url,q.apiP.ownerId=q.ownerId,l(q.apiP))}});"function"===typeof p&&p()})},finish:function(){}}}(jQuery);
(function(){BB.UI.TemplateCatalog.keys.Comment_List="Comment_List";BB.UI.TemplateCatalog.set("Comment_List",'<div class=async-commenting-container><div class=arrow-up></div><div class=multiple-like></div>{#parameters.showTopTextfield}<div class="input-container coreInputActiveSignal"><div class=post-button> <button class="bb-btn bb-btn--primary" disabled="disabled"> <span>Post</span> </button> </div><div class=bbBinder data-action=caption data-placeholder="Add a comment" data-max-height=200 data-max-character-count=2500 data-max-string-id=true data-counter-displays-at=200></div></div>{/parameters.showTopTextfield}{@gt key=commentsLeft value=0}<div class=show-more-container><div class=show-more><div class=comment-icon></div><a href=#>View {commentsLeft} more comment{@gt key=commentsLeft value=1}s{/gt} </a>(<span class="total-comment-count">{commentsCount}</span> comment{@select key="{commentsCount}"}{@eq value="1"}){/eq}{@gt value="1"}s){/gt}{/select}<div class=indicator-container></div></div></div>{/gt}<ul class=comment-list>{#comments}<li class=comment-list__item data-comment="{id}"><div class=comment-item><div class=comment><div class=comment-gear-menu {?canReport}data-can-report=true data-report-type=COMMENT data-entity-id="{entityId}" data-comment-id="{id}" {/canReport}{?canRemove} data-can-remove=true {/canRemove}><div class=comment-gear-menu__icon></div> </div><div class=avatar><a href=http://bodyspace.bodybuilding.com/{slug}><img src="{thumbPath}" class=bbBinder data-action=bbc data-slug="{slug}" /></a></div><div class=comment-container><div class=user-name><a href=http://bodyspace.bodybuilding.com/{slug} class=bbBinder data-action=bbc data-slug="{slug}">{userName}</a>{?realName} ({realName}){/realName}</div><div class="comment-text comment-text--truncated bbBinder bbAtMention" data-action=lineTruncation2 data-enable-show-more=true data-lines=3>{text|s}</div><div class=time-stamp-like><span class=time-stamp>{fuzzyDate}</span><span class=separator> | </span><span class="like-count-container bbBinder" data-action="{&quot;ns&quot;:&quot;BB.UI.LikeWithCount&quot;,&quot;method&quot;:&quot;create&quot;,&quot;p&quot;:{&quot;likeType&quot;:118,&quot;entityId&quot;:&quot;{id}&quot;,&quot;ownerId&quot;:{userId}{#loggedInUser},&quot;loggedInUserId&quot;:{loggedInUser}{/loggedInUser}}}"><span class="like-count-container"><a class="like-link bbBinder" data-action="activeRequired" href="#">Like</a><span class="like-count-link"><div class="like-icon"></div> 0</span></span></span></div></div></div></div></li>{/comments}</ul>{#showBottomTextfield}<div class="input-container coreInputActiveSignal"><div class=post-button> <button class="bbButton primaryAction" disabled=disabled> <span>Post</span> </button> </div><div class=bbBinder data-action=caption data-placeholder="Add a comment" data-max-height=200 data-max-character-count=2500 data-max-string-id=true data-add-mention=true data-counter-displays-at=200> </div></div>{/showBottomTextfield}</div>')})();
BB.createNamespace("BB.UI.Comment");BB.UI.Comment.CommentAndLike=function(a){return{create:function(b,d){var e=a("<span/>",{"class":"bbLike"}).appendTo(b);BB.UI.LikeWithCount.create(e,d);BB.Core.Util.getNamespace("BB.UI.Comment.CommentCount")&&(a("<span/>",{"class":"separator",html:"|"}).appendTo(b),BB.UI.Comment.CommentCount.create(a("<span/>",{"class":"bbComments"}).appendTo(b),d))}}}(jQuery);BB.createNamespace("BB.UI.Modal.Workflow");
BB.UI.Modal.Workflow.SubHeader=function(a){return{setup:function(a,d){return d},create:function(b,d,e){var f=a("<div class='workflowSubHeaderControl'/>").appendTo(b);b=a("<div class='workflowNavigation'/>").appendTo(f);var f=a("<div class='workflowStatements'></div>").appendTo(f),g=a('<div class="labelWorkflowProgress"/>').appendTo(f);d.prevButton=a("<div class='primaryAction bbButton bbSmall bbBack'>Back</div>").appendTo(b);d.nextButton=a("<div class='primaryAction bbButton bbSmall bbNext'>Next</div>").appendTo(b);
d.prevButton.hide();d.nextButton.hide();d.progressLabel=d.progressLabel.replace(/<script/g,"").replace(/javascript:/g,"");a("<span/>",{html:d.progressLabel,"class":"progressLabel"}).appendTo(f);d.progressManager=BB.UI.ProgressBar.create(g,{percent:0,visibleLabel:!0});d.nextButton.bind("click",d.next);d.prevButton.bind("click",d.prev);"function"===typeof e&&e()},finish:function(){}}}(jQuery);BB.createNamespace("BB.UI.Tooltip");
BB.UI.Tooltip.Base=function(a){var b=function(b,d){if(b.data("trigger")){var e;e=b.data("trigger");var h=b.data("parameters"),m=b.find(".bbTooltipArrow > span"),l=b.data("trigger-position"),n=e.outerWidth(),r=e.outerHeight(),q=b.offset(),p=b.outerWidth(),t=b.height(),w=l.top-t-16,u=l.left+n+11,v,x=0,y=0,B=b.data("container"),C=a(window).width();"ns"===h.orientation&&0>w-B.scrollTop()?(w=l.top+r+16,u=l.left+(n-p)/2,v="bbBottom",x=Math.ceil(m.height())/2,y=p/2-6):"ew"===h.orientation?(w=l.top+(r-t)/
2,v="bbRight",x=t/2,y=m.width(),0>=w&&(w=5,x=l.top-q.top+e.height()/2),u+p+11>C&&(u=l.left-p-11,y=0,v="bbLeft")):"ns"===h.orientation&&(u=l.left+(n-p)/2-4,x=-Math.ceil(m.height()/2)-2,y=p/2,v="");0>u?(y-=10-u,u=10):(e=u+p,e>C&&(y+=e-C,u-=10+e-C));d?b.stop(!0,!0).animate({top:w,left:u}).removeClass("bbTop bbBottom bbLeft bbRight".replace(v,"")).addClass(v):b.css({top:w,left:u}).removeClass("bbTop bbBottom bbLeft bbRight".replace(v,"")).addClass(v);b.find(".bbTooltipArrow > span").css({top:x,left:y})}else b.data("warned")||
(console.warn("BB.UI.Tooltip.Base: data-trigger is not available. Cannot position tooltip."),b.data("warned",!0))},d=function(b,d,e){e=a.extend({orientation:"ns",additionalClass:""},e);var h,m;b.addClass(e.additionalClass);b.hasClass("onModal")?(e.container=a(".bbExclusiveModalMask .modalContainerGlobal .bbModalContainer"),1<e.container.length&&(e.container=d.parents(".bbModalContainer")),h=e.container.offset(),m=d.offset(),h={top:m.top-h.top,left:m.left-h.left}):h=d.offset();if(void 0===e.container||
0===e.container.length)e.container=a(document.body);b.appendTo(e.container).data({container:e.container,"trigger-position":h,trigger:d,parameters:e})},e=function(a){a&&a.fadeOut(function(){var b=a.data("contentInstance");b&&"function"===typeof b.finish&&b.finish();a.remove()})};a(window).bind("resize.tooltips",function(){window.clearTimeout(void 0);window.setTimeout(function(){a(".bbTooltip").each(function(){b(a(this))})},150)});return{create:function(f,g){var k,h,m,l=a(f)[0];m=g.disableArrow&&!0===
g.disableArrow?a('<div class="bbTooltip"><div class="bbTooltipContainer"><div class="bbTooltipInner"><div class="tooltipCloseIcon hide"></div><div class="bbTooltipContent"></div></div></span></div></div></div>'):a('<div class="bbTooltip"><div class="bbTooltipContainer"><div class="bbTooltipInner"><div class="tooltipCloseIcon hide"></div><div class="bbTooltipContent"></div></div><div class="bbTooltipArrow"><span></span></div></div></div>');k=BB.Core.Util.getNamespace(g.nsTemplate);BB.Core.Util.validateInterface(k,
"nsTemplate")&&(h=k.setup(f,g),d(m,f,g),k.create(m.find(".bbTooltipContent"),h,function(){b(m);g.customWiring&&BB.Action.Binder.wire(m,g.customWiring);g.closeIcon&&m.find(".tooltipCloseIcon").removeClass("hide").bind("click",function(a){a.stopPropagation();e(m)});g.closeOnBodyClick&&a("body").bind("click.tooltip",function(b){b.target!==l&&(a(b.target).hasClass("cape-item")||e(m))});m.data("contentInstance",k)}));return m},close:e,reposition:b}}(jQuery);
BB.UI.Workflow=function(a){var b=0,d,e,f,g,k=null,h=0,m=function(e,h,l){var m,t;e&&(k=h.progressManager)&&k.setPercent(0);0===b?h.prevButton.fadeOut():h.prevButton.fadeIn();f=f||e;d=BB.Core.Util.getNamespace(h.nsTemplates[b]);if(null!==d&&void 0!==d&&BB.Core.Util.validateInterface(d,"nsTemplate")){for(m=h.plugableContainers.length;m--;)h.plugableContainers[m].stepPlug&&h.containerContext.updatePlugs(h.plugableContainers[m].targetContainer);e=d.setup(f,{});if(e.plugableContainers&&0<e.plugableContainers.length)for(m=
e.plugableContainers.length;m--;)if(t=BB.Core.Util.getNamespace(e.plugableContainers[m].nsTemplate))e.plugableContainers[m].stepPlug=!0,h.containerContext.updatePlugs(e.plugableContainers[m].targetContainer,t.create);"string"===typeof e.title&&h.containerContext.updatePlugs("title",e.title);h=a.extend(h,e);d.create(f,h,function(){"function"===typeof l&&l();g=!1})}},l=function(a){f.css("overflow","hidden");f.slideUp(function(){var d;f.html("");f.slideDown(function(){m(void 0,a);f.css("overflow","visible")});
d=parseInt(100*b/h,10);k.setPercent((d-d%5)/100)})};return{setup:function(a,d){return d&&d.p&&d.p.nsTemplates&&0<d.p.nsTemplates.length?(b=d.p.defaultStep,e=d.p.nsTemplates.length,h=d.p.totalSteps||e,d.p.prev=function(a){return function(){g||(g=!0,0<b&&(b--,l(a)))}}(d.p),d.p.next=function(a){return function(){g||(g=!0,b<e-1&&(b++,l(a)))}}(d.p),d.p.plugableContainers=[{nsTemplate:"BB.UI.{container}.Workflow.SubHeader",targetContainer:"subHeader"}],d.p.containerContext=d.containerContext,d.p):f=void 0},
create:m,finish:function(){f=void 0}}}(jQuery);
(function(a){a.set("Feeds_container",'<div class="user-activity"><h5>{lang.BODYSPACE_ACTIVITY}</h5><div id="rs-feed-list">{@gt key=feedEntityList.length value=0}{#feedEntityList}{>Feeds_basicFeed /}{/feedEntityList}{:else}<div class="no-updates"><div class="no-updates-inner">{lang.NO_UPDATES}</div></div>{/gt}</div></div>');a.set("Feeds_basicFeed",'<div class="rs-feed"><div class="rs-feed-image"><a href="http://bodyspace.bodybuilding.com/{slug}"><img class="bbBinder" data-action="bbc" data-slug="{slug}" src="{profilePicUrl}" /></a></div><div class="rs-feed-text bbAtMention"><a href="http://bodyspace.bodybuilding.com/{slug}" class="username bbBinder" data-action="bbc" data-user="{userid}">{userName}</a> {>"Feeds_{eventType}" /}</div></div>');a.set("Feeds_MOTIVATION_LEVEL",
'updated {gender} motivation level from {oldLevel}/10 to <a href="{linkURL}">{newLevel}/10</a>.');a.set("Feeds_FITSTATUS",'{newStatus} <a href="{permalink}">...</a>');a.set("Feeds_BODYFAT",'updated {gender} body fat {@gt key=oldBodyFat value=0}from {oldBodyFat}% {/gt}to <a href="{linkURL}">{newBodyFat}%</a>{@gt key=oldBodyFat value=0}, {deltaVerb} in {deltaDays}{/gt}.');a.set("Feeds_WEIGHT_CHANGED",'updated {gender} weight {@gt key=oldWeight value=0}from {oldWeight} {unit} {/gt}to <a href="{linkURL}">{newWeight} {unit}</a>{@gt key=oldWeight value=0}, {deltaVerb} in {deltaDays}{/gt}.');
a.set("Feeds_PROGRESS_PHOTO",'added {@eq key=plural value="false" type="boolean"}<a href="{linkURL}">{amount} new photos</a> to {gender} <a href="{linkURL}">progress photos</a>{:else}a new <a href="{linkURL}">progress photo</a>{/eq}.');a.set("Feeds_PROFILE_PHOTO",'added a new <a href="http://bodyspace.bodybuilding.com/{slug}" class="noBBC">profile photo</a>.');a.set("Feeds_FRIEND",'is now friends with {#spellout}{>Feeds_FRIEND_SPELLOUT /}{/spellout}{@gt key=amount value=0} and <a href="http://bodyspace.bodybuilding.com/friends/{slug}">{amount} other{plural}</a>{/gt}.');
a.set("Feeds_FRIEND_SPELLOUT",'<a class="bbBinder" data-action="bbc" data-user="{userid}" href="http://bodyspace.bodybuilding.com/{slug}">{userName}</a>{separator}');a.set("Feeds_BLOG",'created a new blog entry "<a href="{postUrl}">{postTitle}</a>"');a.set("Feeds_MOTIVATION_PROGRAM",'updated {gender} <a href="http://bodyspace.bodybuilding.com/programs/my-motivation/{slug}">motivation program</a>.');a.set("Feeds_NUTRITION_PROGRAM",'updated {gender} <a href="http://bodyspace.bodybuilding.com/programs/my-nutrition/{slug}">nutrition program</a>.');
a.set("Feeds_SUPPLEMENTS_PROGRAM",'updated {gender} <a href="http://bodyspace.bodybuilding.com/programs/my-supplements/{slug}">supplements program</a>.');a.set("Feeds_WORKOUT_PROGRAM",'updated {gender} <a href="http://bodyspace.bodybuilding.com/programs/my-workout/{slug}">workout program</a>.');a.set("Feeds_PROGRAM_UPDATED",'updated {gender} <a href="http://bodyspace.bodybuilding.com/programs/my-motivation/{slug}">program</a>.');a.set("Feeds_BODYSTAT",'measured {gender} {#spellout}{>Feeds_MEASURE_UPDATE /}{/spellout}{@gt key=amount value=0} and measured <a href="http://bodyspace.bodybuilding.com/{slug}/more.php?section=progress">{amount} other body part{plural}</a>{/gt}.');
a.set("Feeds_MEASURE_UPDATE",'<span class="body-part">{statType}</span> at <a href="{linkURL}">{value} {unit}</a>{deltaVerb}');a.set("Feeds_GROUP_JOIN",'joined the <a href="{groupUrl}">{groupName}</a> BodyGroup.');a.set("Feeds_GALLERY_PHOTO",'added <a href="{photosAddedLink}">{amount} new photo{plural}</a> to {gender} <a href="http://bodyspace.bodybuilding.com/photos/view-user-photos/s/{slug}">photo gallery</a>.');a.set("Feeds_FITBOARD_POST",'added <a href="{permalinkUrl}">{amount} new post{plural}</a> to {gender} <a href="http://bodyspace.bodybuilding.com/fitboard/board/user/{slug}">FitBoard</a>.');
a.set("Feeds_GYM_JOIN",'joined the <a href="{linkURL}">{gymName}</a>.');a.set("Feeds_GOAL_CHANGED",'updated {gender} <a href="{linkURL}" class="noBBC">overall goal</a>.');a.set("Feeds_GOAL_SET",'set {gender} <a href="{permalink}" class="noBBC">Weight and Body Fat Goal</a>.');a.set("Feeds_ACHIEVED_GOAL",'achieved {gender} <a href="{permalink}" class="noBBC">Weight and Body Fat Goal</a>.');a.set("Feeds_CURRENT_SUPPLEMENT",'is taking {#spellout}{>Feeds_SUPPLEMENT /}{/spellout}{@gt key=amount value=0} and <a href="http://bodyspace.bodybuilding.com/{slug}/more.php?section=currentsupplements">{amount} other product{plural}</a>{/gt} as part of {gender} current supplements.');
a.set("Feeds_SUPPLEMENT",' <a href="{productUrl}">{productName}</a>');a.set("Feeds_REVIEWED_SUPPLEMENT",'rated{#spellout}{>Feeds_SUPPLEMENT_R /}{/spellout}{@gt key=amount value=0} and <a href="http://bodyspace.bodybuilding.com/{slug}/more.php?section=supplement_review">{amount} other product{plural}</a>{/gt}.');a.set("Feeds_SUPPLEMENT_R",' <a href="{reviewUrl}">{productName}</a> as a {rating}/10');a.set("Feeds_INSPIREDBY",'is inspired by <a href="{userInspiredUrl}">{userInspiredName}</a>.');a.set("Feeds_PERSONAL_VIDEO",
'added the video <a href="{videoUrlBodySpace}">{videoTitle}</a>.');a.set("Feeds_BODYGROUP",'created the <a href="{groupUrl}">{groupName}</a> BodyGroup.');a.set("Feeds_FOOD_JOURNAL_TRACK",'{@gt key=amount value=1} added {amount} entries to {:else}posted to{/gt} {gender} <a href="{permalink}" class="noBBC">Food Journal</a>.');a.set("Feeds_WORKOUT_TRACKED",'tracked the workout: <a href="{permalink}">{workoutName}</a>.');a.set("Feeds_TEMPLATE_CREATED",'created the workout template: <a href="{permalink}">{name}</a>.');
a.set("Feeds_PROGRAM_BUILT",'created the program: <a href="{permalink}">{programName}</a>.');a.set("Feeds_PROGRAM_APPLIED",'added a new program to {gender} calendar: <a href="{linkURL}">{userProgram.programName}</a>.');a.set("Feeds_RATED_PROGRAM",'rated the program: <a href="{permalink}">{ratedEntity.programName}</a> a{?is8}n{/is8} {ratingValue}/10.');a.set("Feeds_RATED_TEMPLATE",'rated the workout template: <a href="{permalink}">{ratedEntity.name}</a> a{?is8}n{/is8} {ratingValue}/10.');a.set("Feeds_DEFAULT",
'has new <a href="{profileUrl}" class="noBBC">Bodyspace activity</a>.')})(BB.UI.TemplateCatalog);BB.UI=BB.UI||{};
BB.UI.Feed=function(a){var b=BB.UI.TemplateCatalog;b.load("Feeds_container");b.load("Feeds_ACHIEVED_GOAL");b.load("Feeds_BLOG");b.load("Feeds_BODYFAT");b.load("Feeds_BODYGROUP");b.load("Feeds_BODYSTAT");b.load("Feeds_CURRENT_SUPPLEMENT");b.load("Feeds_DEFAULT");b.load("Feeds_FITBOARD_POST");b.load("Feeds_FITSTATUS");b.load("Feeds_FRIEND");b.load("Feeds_FRIEND_SPELLOUT");b.load("Feeds_GALLERY_PHOTO");b.load("Feeds_GOAL_CHANGED");b.load("Feeds_GOAL_SET");b.load("Feeds_GROUP_JOIN");b.load("Feeds_GYM_JOIN");
b.load("Feeds_INSPIREDBY");b.load("Feeds_MEASURE_UPDATE");b.load("Feeds_MOTIVATION_LEVEL");b.load("Feeds_MOTIVATION_PROGRAM");b.load("Feeds_NUTRITION_PROGRAM");b.load("Feeds_PERSONAL_VIDEO");b.load("Feeds_PROFILE_PHOTO");b.load("Feeds_PROGRAM_UPDATED");b.load("Feeds_PROGRESS_PHOTO");b.load("Feeds_REVIEWED_SUPPLEMENT");b.load("Feeds_SUPPLEMENT");b.load("Feeds_SUPPLEMENTS_PROGRAM");b.load("Feeds_SUPPLEMENT_R");b.load("Feeds_WEIGHT_CHANGED");b.load("Feeds_WORKOUT_PROGRAM");b.load("Feeds_WORKOUT_TRACKED");
b.load("Feeds_TEMPLATE_CREATED");b.load("Feeds_PROGRAM_BUILT");b.load("Feeds_PROGRAM_APPLIED");b.load("Feeds_RATED_PROGRAM");b.load("Feeds_RATED_TEMPLATE");b.load("Feeds_FOOD_JOURNAL_TRACK");b.load("Feeds_basicFeed");return{create:function(a,e,f){for(var g in a.feedEntityList)"FITSTATUS"===a.feedEntityList[g].eventType&&(e=a.feedEntityList[g].newStatus.slice(0,90).replace(/\s+$/,""),a.feedEntityList[g].newStatus=e);a.lang=BB.Loc.keys;b.render("Feeds_container",a,f)}}}(jQuery);
(function(a,b){function d(a){var d=a.commentOwnerId,g=a.profileOwnerId,k=b.get("id"),h=b.get("isLoggedIn")&&BB.Data.User.get("isActive"),m=b.get("isAdministrator"),l=b.get("isModerator");return{canReport:function(){return g==k?!1:h&&d!=k?!0:!1},canRemove:function(){return d==k||g==k||m||l?!0:!1},canDoAnything:function(a){return this.canRemove(a)||this.canReport(a)}}}BB.UI.FeedCardGearMenu=function(){var e,f,g,k=!1,h,m={baseClickHandler:function(b){b.preventDefault();a(".menu-dropdown").not(e.find(".menu-dropdown")).slideUp("fast")},
onReportCommentClicked:function(a){m.baseClickHandler(a)},onRemoveCommentClicked:function(b){m.baseClickHandler(b);b.stopPropagation();BB.Action.Tooltip.trigger.call(a(this),{data:{nsTemplate:"BB.UI.Prompt.Confirm",closeIcon:!0,closeOnBodyClick:!0,additionalClass:"promptConfirm",message:BB.Loc.get("PROFILE_COMMENT_REMOVE_CONFIRM"),onConfirm:l}})}},l=function(){a.ajax(e.data("removeCommentUrl"),{type:"POST",data:{entityId:e.data("entityId"),externalRef:e.data("externalRef"),userId:b.get("id"),groupId:b.get("userGroup")},
success:function(){f.slideUp(function(){a(this).remove()})},error:function(){BB.UI.Toaster(f,{msg:"The comment could not be deleted.",type:"warning",persist:!0,position:"after"})}})};return{create:function(a){BB.Data.User.isReady()?(e=a,f=e.parents(".feedCard"),g=new d(e.data()),g.canDoAnything()?e.show():e.remove(),e.on("click",this.onClick)):h=BB.Data.User.registerForUpdates(function(b){"userLoaded"===b.key&&(BB.Data.User.unregisterUpdates(h),BB.UI.FeedCardGearMenu().create(a))})},onClick:function(){if(!k){var b=
g.canReport(),d=g.canRemove(),f=[];b&&f.push({title:"Report",rowClass:"gear-menu__item--report",callback:m.onReportCommentClicked});d&&f.push({title:"Remove",rowClass:"gear-menu__item--remove",callback:m.onRemoveCommentClicked});b||d?BB.UI.GearMenu.create(e,{items:f}):console.warn("Can neither report or remove. This should not happen when not faking data.");b&&(d=e,b=JSON.stringify({reportType:"COMMENT",entityId:d.data("entityId"),commentId:d.data("commentId")}),d=d.find(".gear-menu__item--report"),
d.attr({"data-target":b,"data-action":"report"}),BB.Action.Binder.wire(d,"report"));k=!0;a(this).click()}}}}})(jQuery,BB.Data.User);
(function(a){var b=function(){var b=a(this).data("user-id"),d=a(this).data("entity-type");require(["//common.bbcomcdn.com/BB/UI/Social/ShareModal/src/ShareModal.js"],function(a){(new a({userId:b,entityType:d})).init()})},d=function(d){d.preventDefault();var f=this;d=a(this).attr("href");BB.Action.SocialMedia.shareLink(d,"facebook",function(a){a&&!a.error_code&&b.call(f)})};a(function(){if(a.fn.on)a("body").on("click.FeedCardShare","a.facebook-feed-share",d);else a(document).delegate("click.FeedCardShare",
"a.facebook-feed-share",d)})})(jQuery);
(function(){BB.UI.TemplateCatalog.keys.LikeButton_std="LikeButton_std";BB.UI.TemplateCatalog.keys.LikePanel_std="LikePanel_std";BB.UI.TemplateCatalog.keys.LikeButtonCount_std="LikeButtonCount_std";BB.UI.TemplateCatalog.set("LikeButton_std","{?isLiked}Unlike{:else}Like{/isLiked}");BB.UI.TemplateCatalog.set("LikePanel_std",'<div class="multiple-like"><div class="arrow-up"></div><div class="multiple-like-container"><div class="like-icon"></div><span>{?isLiked}You{@select key="{recentsLength}"}{@eq value="1"} and {/eq}{@gt value="1"}, {/gt}{/select}{/isLiked} {#likeList}{?user}<a href="//bodyspace.bodybuilding.com/{slug}">{user}</a>{/user}{?amount}<span class="other-users-button">{amount} other{@gt key="{amount}" value="1"}s{/gt}</span>{/amount}{sep}{/likeList} {verb} this.</span><div style="display:none"></div></div></div>');BB.UI.TemplateCatalog.set("LikeButtonCount_std",
'<span class="like-count-container"><a class="like-link bbBinder" data-action="activeRequired" href="#">{?isLiked}Unlike{:else}Like{/isLiked}</a>{@select key=total}{@eq value=0}<span class="like-count-link"><div class="like-icon"></div>{total}</span>{/eq}{@none}<a class="like-count-link" href="#"><div class="like-icon"></div>{total}</a>{/none}{/select}</span>')})();BB.UI=BB.UI||{};
BB.UI.LikeButton=function(a){var b,d,e,f={},g=function(b){var d,e,g,k,q,p,t,w=function(a){return function(d,e,f){d.data&&1===d.data.length?(e=d.data[0],BB.UI.LikeStatusPanel.recreate(a,e.type,e.entityId,b,d.data[0])):BB.Tool.Debug.log("Stats not returned or not in expected format.",d.data)}};for(d in f)f.hasOwnProperty(d)&&(e=a("[data-id="+d+"]"),k=e.data("userid"),q=e.data("ownerid"),p=e.data("id"),t=e.data("liketype"),g=f[d],delete f[d],e.data("liked",g),BB.Action.Like.call(g,k,q,p,t,{success:w(g)}))},
k=function(a,d){BB.UI.TemplateCatalog.render(b,a,function(a,b){d.html(b)})};BB.UI.TemplateCatalog.load(BB.UI.TemplateCatalog.keys.LikeButton_std,!0);return{callbacks:{likeChange:a.noop},create:function(h,m,l){var n,r=this,q,p;"undefined"===typeof l&&(l="body");l=a(l);n=l.find("[data-type=like]");b="LikeButton_"+(m||"std");"undefined"===typeof h&&(h=BB.UI.LikeStatusPanel.data());"undefined"===typeof d&&(d={});if(h&&"undefined"!==typeof h){q=h.length;for(m=0;m<q;m++)p=h[m],d[p.type+"-"+p.entityId]=
p;n.each(function(){var b=a(this),d,n,m,p;n=h.length;for(d=0;d<n;d++)if(m=h[d],p=m.entityId,p===b.data("id")){b.data("liked",m.isLiked);b.data("like-requested-value",m.isLiked);k(m,b);break}b.unbind("click.like-button");BB.Action.Binder.wire(b);b.bind("click.like-button",function(d){var h=a(this),n=h.data("liked"),m=h.data("id"),p=h.data("liketype"),q=BB.Data.User.get;if(q("isLoggedIn")){if(!q("isActive"))return}else if("activeRequired"===h.data("action"))return d.data={nsTemplate:"BB.UI.Login"},
BB.Action.Modal.trigger.call(h,d),!1;d.preventDefault();d.stopPropagation();d=!h.data("like-requested-value");b.data("like-requested-value",d);d===n?delete f[m]:f[m]=d;k({isLiked:d},b);BB.UI.LikeStatusPanel.recreate(d,p,m,l);r.callbacks.likeChange({isLiked:d,likeType:p,likeId:m,scope:l});clearInterval(e);e=setTimeout(g,1E3,l)})})}},repaint:function(b,e,f,g){var r;"undefined"===typeof g&&(g="body");g=a(g);"undefined"!==typeof d&&(r=d[e+"-"+f],e=g.find('[data-id="'+f+'"][data-liketype="'+e+'"]'),r&&
(r.isLiked=b,e.data("like-requested-value",b),k(r,e)))}}}(jQuery);BB.UI=BB.UI||{};
BB.UI.LikeStatusPanel=function(a){var b,d,e,f=function(a,d){1>a.total?d.html(""):BB.UI.TemplateCatalog.render(b,a,function(b,e){d.html(e);d.find(".other-users-button").bind("click.other-users",function(b){b.stopPropagation();b.preventDefault();b.data=a;b.data.nsTemplate="BB.UI.LikePanel.UserList";b.data.additionalClass="Modal-like-count";BB.Action.Modal.trigger.call(this,b)});BB.Action.Binder.wire(d)})};return{data:function(){return d},getStatusId:function(a,b){return"bblikestatus-{type}-{id}".replace("{type}",
a).replace("{id}",b)},create:function(g,k,h){var m,l,n,r,q,p,t=BB.Data.User.get("slug");"undefined"===typeof h&&(h="body");h=a(h);if(g&&"undefined"!==typeof g)for(b="LikePanel_"+(k||"std"),a.isArray(g)||(g=[g]),"undefined"===typeof d?(d=g,e={}):d=d.concat(g),m=g.length,k=0;k<m;k++){l=g[k];e[l.type+"-"+l.entityId]=l;p=l.recentsLength=l.total;r=l.recentLikeUsers.length;for(n=0;n<r;n++)if((q=l.recentLikeUsers[n])&&q&&q.userName===t){l.isLiked=!0;l.recentLikeUsers.splice(n,1);--l.recentsLength;break}l.likeList=
[];r=Math.min(2,p);for(n=0;n<r;n++)(q=l.recentLikeUsers[n])&&"undefined"!==typeof q&&(q={user:q.userName,slug:q.slug,sep:", "},l.likeList.push(q));l.verb=1<l.total||l.isLiked?"like":"likes";2<p&&(n=p-2,l.isLiked&&n--,0<n&&l.likeList.push({user:"",amount:n}));r=l.likeList.length;for(n=0;n<r;n++)q=l.likeList[n],n===r-2&&(q.sep=" and "),n===r-1&&(q.sep="");n=this.getStatusId(l.type,l.entityId);n=h.find("#"+n);f(l,n)}},recreate:function(b,d,h,m,l){"undefined"!==typeof e&&(m=this.getStatusId(d,h),(d=e[d+
"-"+h])&&l?d.total=l.total:(d||(d={recentLikeUsers:[],total:b?1:0,verb:"like"}),d.total+=b?1:-1),d.isLiked=b,d.verb=1<d.total||d.isLiked?"like":"likes",f(d,a("[id="+m+"]")))}}}(jQuery);
BB.UI.LikeButtonCount=function(a){var b,d=function(b){b.data={nsTemplate:"BB.UI.Login"};BB.Action.Modal.trigger.call(a(this),b)};return{callbacks:{likeChange:a.noop},create:function(e,f,g,k,h){void 0===e||"object"!==typeof e||void 0===e.ownerId||isNaN(e.ownerId)||void 0===e.entityId||"string"!==typeof e.entityId&&isNaN(e.entityId)||void 0===e.type||isNaN(e.type)||(b="LikeButtonCount_"+(k||"std"),h=a.extend({onLoggedOut:d},h),e=a.extend({total:0,isLiked:!1},e),e.isLiked=f||!1,BB.UI.TemplateCatalog.render(b,
e,function(a,b){var d;g.html(b);g.data("is-liked",f);(d=g.find("a.like-count-link"))&&0<d.length&&(d.attr("href","http://bodyspace.bodybuilding.com/likes/"+e.type.toString()+"/"+e.entityId.toString()+"/"),d.bind("click.LikePanel",e,BB.UI.LikeButtonCount.likeCountTrigger));BB.Data.User.get("isActive")?g.find("a.like-link").bind("click.LikePanel",function(a){var b=BB.Data.User.get("id");a.preventDefault();if(b){(a=g.data("is-liked"))?(--e.total,e.isLiked=!1):(e.total+=1,e.isLiked=!0);g.data("is-liked",
a?!1:!0);BB.UI.LikeButtonCount.create(e,e.isLiked,g,k,h);if(void 0!==h.onClick&&"function"===typeof h.onClick)h.onClick(g,e);void 0!==BB.Action.Like&&BB.Action.Like.call(!a,b,e.ownerId,e.entityId,e.type,{success:function(a){},error:function(a){}})}else h.onLoggedOut.call(this,a)}):BB.Action.Binder.wire(g.find("a.like-link"))}))}}}(jQuery);
(function(a){a.extend(BB.UI.LikeButtonCount,{likeCountTrigger:function(a){a.preventDefault();a.data.nsTemplate="BB.UI.LikePanel.UserList";a.data.additionalClass="Modal-like-count";BB.Action.Modal.trigger.call(this,a)}})})(jQuery);BB.createNamespace("BB.UI.LikeWithCount");
BB.UI.LikeWithCount=function(a){function b(){var b,d,k,h,m,l;for(h in e)if(e.hasOwnProperty(h))for(b=e[h],d=b.stats?b.stats.isLiked:!1,k=a.extend({entityId:b.entityId,type:b.type},b.stats),b.ownerId&&(k.ownerId=b.ownerId),l=b.containers.length,m=0;m<l;m++)BB.UI.LikeButtonCount.create(k,d,b.containers[m],void 0,{onClick:function(b,d){var f=d.entityId+d.type;e[f]?a.extend(e[f].stats,d):e[d.entityId]?a.extend(e[d.entityId].stats,d):console.warn("Could not update "+f)}})}var d=new BB.Data.LikeData,e=
{};d.onStatsSuccess=function(d){setTimeout(function(){var g,k;for(k in d)d.hasOwnProperty(k)&&(g=d[k].entityId+d[k].type,!a.isEmptyObject(d[k])&&e[g]&&(e[g].stats=d[k]));b()},500)};return{create:function(a,b){d.addToQueue(b);var k=b.entityId.toString()+b.likeType.toString();void 0!==e[k]?e[k].containers.push(a):e[k]={containers:[a],ownerId:b.ownerId,type:b.likeType,entityId:b.entityId}}}}(jQuery);
(function(a){BB.UI.TemplateCatalog.keys.Rate_Input="Rate_Input";BB.UI.TemplateCatalog.set("Rate_Input",'<div class="bbRate {addClass}"><div class="edgeLabel bottomLabel">{bottom}</div><div class="bbRateItem" data-value="1">1</div><div class="bbRateItem"  data-value="2">2</div><div class="bbRateItem"  data-value="3">3</div><div class="bbRateItem"  data-value="4">4</div><div class="bbRateItem" data-value="5">5</div><div class="bbRateItem" data-value="6">6</div><div class="bbRateItem" data-value="7">7</div><div class="bbRateItem" data-value="8">8</div><div class="bbRateItem" data-value="9">9</div><div class="bbRateItem" data-value="10">10</div><div class="edgeLabel topLabel">{top}</div><input type="text" class="hide rateField" name="{fieldName}"></div>')})(jQuery);
BB.createNamespace("BB.UI.Rate.Input");
BB.UI.Rate.Input=function(a){var b=function(b){var e=a(this);b=e.parent();var f=e.data("value"),e=b.find(".bbRateItem");b.find("input").val(f);e.each(function(){var b=a(this);b.data("value")>f?b.removeClass("active"):b.addClass("active")})};return{create:function(d,e){BB.UI.TemplateCatalog.render(BB.UI.TemplateCatalog.keys.Rate_Input,e,function(f,g){var k=a(g).appendTo(d),h=0;"object"===typeof e&&null!==e&&(0<e.selected&&11>e.selected&&(h=e.selected,b.call(k.find("[data-value="+h+"]"))),k.find(".bbRateItem").bind("click",
b),"function"===typeof e.callback&&e.callback(k))})}}}(jQuery);
BB.UI.MuscleMap=function(a){return{create:function(b){var d=b.data("target").replace(/ /g,"").toLowerCase().split(","),e,f=d.length;for(e=0;e<f;e++){var g;a:switch(d[e]){case "abductors":case "abdominals":case "adductors":case "biceps":case "calves":case "chest":case "forearms":case "glutes":case "hamstrings":case "lats":case "lowerback":case "middleback":case "neck":case "quadriceps":case "shoulders":case "traps":case "triceps":g=!0;break a;default:g=!1}g&&a("<div/>",{"class":d[e]}).addClass("bbMuscle").appendTo(b)}}}}(jQuery);
BB.createNamespace("BB.UI.Module");
(function(a){BB.UI.Module.Base=function(b){var d,e=BB.Data.Env.get("pageOwner"),f=function(b,f){var h;d=BB.Core.Util.getNamespace(f.nsTemplate);if(null!==d&&void 0!==d)if(BB.Core.Util.validateInterface(d,"nsTemplate"))h=d.setup(b,f),h.additionalClass=h.additionalClass||"",h.pageOwner=e,a('<div class="bbModuleContainer '+h.additionalClass+'"><div class="moduleTitle"><div class="title"></div><div class="moduleActionContainer '+(BB.Data.Env.get("isOwnPage")?"":"hide")+'"><div><div class="settingsGear bbBinder"></div></div></div><div class="moduleViewContainer '+
(BB.Data.Env.get("isOwnPage")?"hide":"")+'"><div class="viewModuleAction"></div></div></div><div class="content"></div></div>').appendTo(b),h.gear=b.find(".settingsGear.bbBinder"),b.find(".title").html(h.title),d.create(b.find(".content"),h,function(){});else throw console.warn("Invalid interface %o",d),Error("Invalid interface .. nsTemplate:"+f.nsTemplate);else throw Error("Missing template "+f.nsTemplate);};this.create=f;this.metaCreate=function(a,b){b=b||{};b.nsTemplate="BB.UI.Module."+a.data("target");
f(a,b)}}})(jQuery);
(function(a){BB.createNamespace("BB.UI.Menu");a.extend(BB.UI.Menu,function(){var b=[],d,e,f=!1,g,k={onOpen:a.noop,onClose:a.noop},h=function(){a(this).bind("click.Menu",function(b){b.preventDefault();var d=a(this).offset();b=d.top-1;d=d.left-e.width()+a(this).width()+1;e.css({top:b,left:d}).slideDown("fast",function(){f=!0;k.onOpen.call(e)})})},m=function(){k.onClose.call(e);e.slideUp("fast",function(){f=!1})},l=function(){e=a(document.createElement("div")).appendTo("body");e.addClass("menu-dropdown").html(function(){var d,f=
b.length,g=a(document.createElement("div")),h=a(document.createElement("ul")),k,l,u;for(d=0;d<f;d++)k=b[d],l=k.title,u=k.rowClass,k=a(document.createElement("li")),k.addClass(u),u=a(document.createElement("a")),u.attr("href","#").data("item",d).html('<div class="icon"></div>'+l).bind("click.MenuDropdown",function(d){d.preventDefault();d.stopPropagation();b[a(this).data("item")].onClick.call(e)}),k.append(u),h.append(k);d=a(document.createElement("a")).attr("href","#").addClass("close-icon");f=a(document.createElement("div")).addClass("close-icon-container");
l=a(document.createElement("div")).addClass("icon-image");d.append(l);f.append(d);d.bind("click.MenuDropdown",function(a){a.preventDefault();a.stopPropagation();m()});g.append(f);g.append(h);g.addClass("menu-content");return g});a("body").bind("click.MenuDropdown",function(b){f&&g.autoClose&&(a(b.target).parents().is(e)||-1!==a.inArray(b.target,d)||m())})};return{create:function(e,f,m,p,t){b=f;d=e;k=a.extend(k,p);g=a.extend({autoClose:!0},t);l();h.call(e)},hide:function(){m()}}}())})(jQuery);
BB.UI.GearMenu=function(a){var b,d=function(b,d){var g=d.items,k=a.noop,h=a.noop,m=a("<div/>",{"class":"menu-dropdown"}).appendTo(b);m.html(function(){var b,d=0,e=g.length,f=a("<div/>"),k=a("<ul/>"),t,w,u,v,x,y,B,C;for(b=0;b<e;b++){t=g[b];w=t.title;u=t.rowClass;v=t.url;x=t.callback;y=t.secondaryActions;C=a("<li/>");C.addClass(u);u=a("<a/>");if(y&&0<y.length){for(d=0;d<y.length;)"activeRequired"===y[d]&&u.attr("data-action",y[d]),d++;BB.Action.Binder.wire(u)}if(v)u.attr("href",v).html('<div class="icon"></div>'+
w);else if(x)u.attr("href","#").html('<div class="icon"></div>'+w).on("click",x);else t.actionModel&&(v=t.actionModel,B=v.method.split("."),v.on="click",v.p=t.actionModel.p,v.method=B[0],BB.Action.Binder.wire(u.attr("href","#").html('<div class="icon"></div>'+w).bind("click",{secondaryAction:y},function(a){a.preventDefault();a.stopPropagation();var b=!1,e=!1;if(a.data.secondaryAction&&0<a.data.secondaryAction.length)for(d=0;d<a.data.secondaryAction.length;)"activeRequired"===a.data.secondaryAction[d]&&
(b=!0),"disableAutoClose"===a.data.secondaryAction[d]&&(e=!0),d++;e||1<B.length&&"tooltip"===B[1]||(BB.Action.ActiveRequired.trigger.call(this,a)&&b?m.slideUp("fast"):b||m.slideUp("fast"))}),v));C.append(u);k.append(C)}b=a(document.createElement("a")).attr("href","#").addClass("close-icon");e=a(document.createElement("div")).addClass("close-icon-container");t=a(document.createElement("div")).addClass("icon-image");b.append(t);e.append(b);b.bind("click.MenuDropdown",function(a){a.preventDefault();
a.stopPropagation();m.slideUp("fast");h.call(m)});f.append(e).append(k).addClass("menu-content");return f});b.click(function(){m.slideDown("fast");k.call(m)});a(document.body).bind("click.MenuDropdown",function(d){a(d.target).parents().is(m)||-1!==a.inArray(d.target,b)||(m.slideUp("fast"),h.call(m))})};return{create:function(e,f,g){b=a.extend(b,g);return new d(e,f)}}}(jQuery);BB.createNamespace("BB.UI.Input.Base");
BB.UI.Input.Base=function(a){var b=function(b,d){var g="paddingTop paddingLeft paddingRight paddingBottom fontSize fontFamily lineHeight width fontWeight borderTop borderLeft borderBottom borderRight".split(" "),k=a('<div class="reference" />').appendTo(b.parent()),h=a.extend({minHeight:0},d),m,l=function(){var a,d=g.length;for(a=0;a<d;a++)k.css(g[a],b.css(g[a]));k.css({position:"absolute",display:"none","word-wrap":"break-word","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"})};
m=b.height();l();b.bind("keyup.AutoHeight keydown.AutoHeight paste.AutoHeight",function(b){var d;d=a(this).val().replace(/&/g,"&amp;").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />");k.html(d+"&nbsp;");13===b.keyCode&&k.html(k.html()+"<br />");b=""!==a(this).val()&&k.height()>m?k.height()+"px":m+"px";parseFloat(a(this).innerHeight())<=parseFloat(h.minHeight)&&0!==h.minHeight&&(b=h.minHeight+"px");5<Math.abs(a(this).height()-parseFloat(b))&&a(this).height(b)});b.bind("focus.AutoHeight",
function(a){setTimeout(l,500)})},d=function(a,b){var d=!1,k=!1,h=function(){try{return void 0!==document.selection?"Text"===document.selection.type:a.get(0).selectionStart!==a.get(0).selectionEnd}catch(b){return!1}};a.bind("keypress.Input",function(m){return d||k||h?!0:a.val().length<b});a.bind("keyup.Input paste.Input",function(d){a.val().length>b&&a.val(a.val().substring(0,b))});a.bind("keydown.Input",function(a){var b=a.charCode||a.keyCode;d=8===b||46===b;k=a.ctrlKey})};return{create:function(e,
f){var g=e.data("placeholder"),k=e.data("enable-auto-height"),h=e.data("max-length"),m,l,n,r=function(){m.hide();e.focus()};"string"===typeof g&&0<g.length&&("function"===typeof e.val&&e.val(),l=parseInt(e.css("marginTop"),10)+17,n=parseInt(e.css("marginLeft"),10)+10,m=a("<div/>",{html:g,"class":"bbInputWaterMark",style:"margin: "+l+"px 0 0 "+n+"px;"}),e.before(m),e.bind("blur",function(){0<e.val().length?m.hide():m.show()}),e.bind("keypress",function(){m.hide()}),m.bind("keypress",r));void 0!==k&&
b(e,f);void 0!==h&&(g=parseInt(h,10),d(e,g))}}}(jQuery);BB.createNamespace("BB.UI.Input");
(function(a){BB.UI.Input.DatePicker=function(){var b=this,d="enabled",e,f,g,k,h={},m=function(a){a=a?a instanceof Date?a:BB.Core.Util.toDate(a):new Date;e.data("date-stamp",BB.Core.Util.dayStamp(a));e.val(BB.Core.Util.formatDate(a,!0))};this.create=function(l){var n=new BB.UI.Calendar,r=l.data("constraints"),q={nsTemplate:n,additionalClass:l.data("additional-class"),closeOnBodyClick:!0},p=n.finish;r?(h.max=BB.Core.Util.toDate(r.max,r.min),h.min=BB.Core.Util.toDate(r.min,r.max)):(h.max=BB.Core.Util.toDate("today+10.years"),
h.min=BB.Core.Util.toDate("today-10.years"));k=l;l.data("datePickerController",b);g=l.hasClass("bbJustMonth");e=l.find("input");e.attr("placeholder",l.data("placeholder"));l.addClass("bbDatePicker").addClass("enabled");r=a('<div class="rightIcon"/>').appendTo(l);e.addClass("bbTextBox");l.hasClass("bbMedium")&&e.addClass("bbBlueBoldy");l.hasClass("bbLarge")&&e.addClass("bbBlueBoldy").addClass("bbLarge");l.hasClass("bbSmall")&&e.addClass("bbSmall");e.data("date-stamp")&&0<e.data("date-stamp").length&&
m(e.data("date-stamp"));r.bind("click",function(a){a.stopPropagation();e.trigger("click")});n.finish=function(){e.removeData("datepicker-tooltip-on");p()};e.bind("keypress",function(a){a.preventDefault();switch(a.which){case 32:case 13:e.trigger("click")}return!1});e.bind("click",q,function(e){var k=a(this),l=k.data("date-stamp");"NaN/NaN/NaN"===l&&(l=void 0);k.blur();"enabled"===d&&(e.stopPropagation(),e.preventDefault(),void 0===k.data("datepicker-tooltip-on")&&(a(".bbTooltip").each(function(){var b=
a(this);b.data("datepicker-controller")&&BB.UI.Tooltip.Base.close(b)}),e.data.dateStamp=l,e.data.constraints=h,e.data.justMonth=g,e.data.dayDelegates=[{ns:b,method:"daySelected",on:"click"}],f=BB.Action.Tooltip.trigger.call(k.parent().find(".rightIcon"),e),f.bind("click",function(b){a(b.target).hasClass("cape-item")||b.stopPropagation()}),f.data("datepicker-controller",b),k.data("datepicker-tooltip-on",f)))})};this.daySelected=function(d){d=a(this).data("value").value;var h=BB.Core.Util.toDate(d);
e.data("date-stamp",d);g?e.val(BB.Core.Util.formatMonth(h)):e.val(BB.Core.Util.formatDate(h,!0));BB.UI.Tooltip.Base.close(f);e.trigger("change");b.onDaySelected(h)};this.setDate=m;this.onDaySelected=function(a){};this.setState=function(a){d=a;k.removeClass("enabled").removeClass("disabled").removeClass("userReadOnly").removeClass("readOnly").addClass(a)}}})(jQuery);BB.createNamespace("BB.UI.Input");
(function(a){BB.UI.Input.CoreInput=function(){var b=this,d,e,f,g,k;this.create=function(h){var m=h.data("placeholder"),l=parseFloat(h.data("max-height"))-26,n=parseFloat(h.data("max-character-count")),r=parseFloat(h.data("counter-displays-at")),q=h.data("max-string-id"),p=void 0===h.data("add-mention")?!1:!0,t=h.data("counter-selector"),w=function(a){h.trigger("BB:UI:Input:CoreInput:remainingChars",[a]);a<n&&!r||a<=r?k.show():k.hide();k.html(BB.Loc.get(q,{VALUE:a}))},u=function(a){a.stopPropagation()},
v=function(){1>g.val().length&&(d&&0<d.length&&d.removeClass("bbActiveCoreInput"),f.html(m).addClass("bbCoreInputWaterMark"),g.css("height",20))};if(!0===q)q="CHARACTERS_REMAINING";else if("string"!==typeof q||1>q.length)q=!1;q&&(t=t?a(t):h.parent(),k=a('<div class="bbCoreInputCounter" style="display:none" />').appendTo(t),w(n));g=h.find("textarea");e=h;d=h.parents(".coreInputActiveSignal");h.data("controller",b);g&&0<g.length?g.addClass("bbCoreInputInputLayer"):g=a("<textarea class=bbCoreInputInputLayer></textarea>").appendTo(h);
p&&(g.attr("data-action","bbMention"),g.addClass("bbBinder"),BB.Action.Binder.wire(g));p={width:h.width()};l&&15<l&&h.css("max-height",l);f=a('<div class="bbCoreInputHighlightLayer"/>').appendTo(h);g.height(f.height()+20);h.addClass("bbCoreInput").bind("click",u);f.bind("click",u).css(p);g.bind("focus",function(e){function k(){h.trigger("BB:UI:Input:CoreInput:focus");h.addClass("is-focused");1>g.val().length&&(f.html(""),f.removeClass("bbCoreInputWaterMark"));d&&0<d.length&&d.addClass("bbActiveCoreInput");
b.refreshWidth()}-1!==location.hostname.indexOf("clientside")?(k(),h.trigger("BB:UI:Input:CoreInput:focus")):BB.Action.ActiveRequired.trigger.call(a(this).parent(),e)?k():a(this).blur()}).bind("blur",function(){h.removeClass("is-focused");v();h.trigger("BB:UI:Input:CoreInput:blur")}).css(p).bind("keyup",function(){var a=g.val(),b=a.length;b>n&&(a=a.substr(0,n),b=n,g.val(a));a=BB.Core.Util.escapeHTML(a.replace(/\n$/,"\n "));f.html(a.replace(/chang[a-z]+ lives/g,function(a){return"<span>"+a+"</span>"}));
g.height(f.height()+20);q&&w(n-b)}).bind("keydown",function(a){var b=g.val(),d=a.which;b.length>=n&&!(36<d&&41>d||8===d||9===d||15<d&&19>d)&&a.preventDefault()});v()};this.refreshWidth=function(){var a=e.width();e&&(f.width(a),g.width(a))}}})(jQuery);BB.UI.Input=BB.UI.Input||{};
(function(a){BB.UI.Input.Caption=function(){var b=this;this.create=function(d){d.data("controller",b).append(function(){if(BB.Data.User.get("isLoggedIn")){var a=document.createElement("div");a.className="bbThumbnail bbTiny";var b=document.createElement("img");b.src=BB.Core.Util.formatImageURLProfile(BB.Data.User.get("avatarURL"),"35x35");a.appendChild(b);return a}return""}()).append(function(){var b={};"placeholder max-height max-character-count max-string-id counter-displays-at add-mention counter-selector".split(" ").map(function(a){d.data(a)&&
(b[a]=d.data(a))});var f=a.extend({},{placeholder:"Add a comment",action:"coreInput"},b),g=document.createElement("div");g.className="bbBinder bbTextArea bbCaptionCoreInput";for(var k in f)g.setAttribute("data-"+k,f[k]);return g}()).addClass("bbCaption");BB.Action.Binder.wire(d.find(".bbBinder"));b.caption=d.find(".bbCaptionCoreInput")};this.refreshWidth=function(){b.caption.data("controller").refreshWidth()}}})(jQuery);BB.createNamespace("BB.UI.Input");
(function(a){BB.UI.Input.Height=function(){var b=BB.Data.User.get,d=this,e,f,g,k,h=function(a,b){"function"===typeof a.stopPropagation&&a.stopPropagation();k=BB.Action.Tooltip.triggerError(e,b,!0);return!1};this.create=function(b,h){var k=BB.Data.User.get("unitsOfLengthSequence"),r=b.hasClass("bbXLarge")?"bbXLarge":"";e=b;b.addClass("bbTextBoxWithMultipleFields").addClass("bbTextBox");a('<input name="heightBig" type="text" class="bbTextBox '+r+' bbBlueBoldy"><input name="heightSmall" type="text" class="bbTextBox '+
r+' bbBlueBoldy"><span class="unitOfMeasure"><span>'+BB.Loc.get(k[1])+"</span><span> "+BB.Loc.get(k[0])+"</span></span>").appendTo(b);g=b.find("input[name=heightBig]");f=b.find("input[name=heightSmall]");b.data("controller",d)};this.validate=function(a){var b=f.val(),d=g.val(),e,q=BB.Core.Valid.positiveFloat;k&&BB.UI.Tooltip.Base.close(k);e=q(d,"Height");if("string"===typeof e)return h(a,e);e=q(b,"Height");if("string"===typeof e)return h(a,e);e=BB.Core.Valid.height(BB.Core.Util.toHeightValue([parseInt(b,
10),parseInt(d,10)],BB.Data.User.get("isMetric")));return"string"===typeof e?h(a,e):!0};this.set=function(d){var e=d&&0<d?BB.Core.Util.toHeightSequence(d,b("isMetric")):[null,null];d=BB.Core.Util.formatInt(e[1],"--");var e=BB.Core.Util.formatInt(e[0],"--"),h=a("span[data-target*='height']").html(),h=h?h.split("'"):["--","--"];"0"===d&&(d=h[0]);"0"===e&&(e=h[1].replace(/\D/g,""));g.val(d);f.val(e)};this.get=function(){var a=f.val(),d=g.val();return BB.Core.Util.toHeightValue([parseInt(a,10),parseInt(d,
10)],b("isMetric"))}}})(jQuery);(function(a){BB.createNamespace("BB.UI.Feedback");BB.UI.Feedback.Base=function(b){this.setup=function(a,b){return b};this.create=function(d,e,f){var g=a(b);g.find(".feedbackHtml").html(e.message);g.appendTo(d);"function"===typeof f&&f()};this.finish=function(){}}})(jQuery);BB.createNamespace("BB.UI.Feedback");
(function(a){a=function(){this.setup=function(a,d){d.additionalClass=(d.additionalClass||"")+" feedbackSuccess";return d}};a.prototype=new BB.UI.Feedback.Base('<div class="feedbackContainer feedbackSuccessContainer"><div class="feedbackIconContainer"><div class="feedbackIcon"></div></div><div class="feedbackHtml"></div></div>');BB.UI.Feedback.Success=new a})(jQuery);BB.createNamespace("BB.UI.Feedback");
(function(a){a=function(){this.setup=function(a,d){d.additionalClass=(d.additionalClass||"")+" feedbackMessage";return d}};a.prototype=new BB.UI.Feedback.Base('<div class="feedbackContainer feedbackMessageContainer"><div class="feedbackHtml"></div></div>');BB.UI.Feedback.Message=new a})(jQuery);BB.createNamespace("BB.UI.Feedback");
(function(a){a=function(){this.setup=function(a,d){d.additionalClass=(d.additionalClass||"")+" feedbackError";return d}};a.prototype=new BB.UI.Feedback.Base('<div class="feedbackContainer feedbackErrorContainer"><div class="feedbackIconContainer"><div class="feedbackIcon"></div></div><div class="feedbackHtml"></div></div>');BB.UI.Feedback.Error=new a})(jQuery);BB.UI.TemplateCatalog.set("Prompt_Confirm",'<div class="tooltip-confirm-content"><a href="#" id="confirm-tooltip-close" class="close-icon"></a><div class="tooltip-confirm-text">{message|s}</div><hr /><div class="tooltip-confirm-buttons"><div class="bb-btn bb-btn--small confirmTooltipConfirm"><span>{confirm}</span></div><div class="bb-btn bb-btn--small confirmTooltipDecline bbRight"><span>{decline}</span></div></div></div>');
BB.createNamespace("BB.UI.Prompt");
BB.UI.Prompt.Confirm=function(a,b){return{setup:function(a,b){b.confirm=BB.Loc.get("YES");b.decline=BB.Loc.get("NO");b.additionalClass=(b.additionalClass||"")+" bbConfirm";return b},create:function(d,e,f){BB.UI.TemplateCatalog.render("Prompt_Confirm",e,function(g,k){var h=a(k).appendTo(d);h.find(".confirmTooltipConfirm").bind("click.ConfirmationTooltip",function(a){a.preventDefault();b.isFunction(e.onConfirm)&&e.onConfirm.call(this,a)});h.find(".confirmTooltipDecline").bind("click.ConfirmationTooltip",function(a){a.preventDefault();
b.isFunction(e.onDecline)&&e.onDecline.call(this,a)});b.isFunction(f)&&f()})},finish:function(){}}}(jQuery,BB.Core.Util);(function(){BB.UI.TemplateCatalog.keys.FTCDisclaimer="FTCDisclaimer";BB.UI.TemplateCatalog.set("FTCDisclaimer",'<div class="ftc-disclaimer-modal">{message}</div>')})();
BB.UI.FTCDisclaimer=function(a){var b=BB.Loc.get(BB.Loc.keys.PRODUCT_DISCLAIMER_TITLE),d=BB.Loc.get(BB.Loc.keys.PRODUCT_DISCLAIMER_MESSAGE);return{setTitle:function(a){b=a},setup:function(a,f){f=f||{};f.title=b;f.message=d;f.description="";return f},create:function(b,d,g){BB.UI.TemplateCatalog.render(BB.UI.TemplateCatalog.keys.FTCDisclaimer,d,function(d,f){a(f).appendTo(b);g()})},finish:function(){}}}(jQuery);BB.createNamespace("BB.UI.LikePanel");
BB.UI.LikePanel.UserList=function(a){var b=0,d=25,e=0,f=[],g=!0,k,h,m,l=!1,n,r=function(){l=!0;BB.Action.Like.getUsers(k.type,k.entityId,b,d,{success:function(k){if(void 0===k.data||void 0===k.data.cards)n.remove();else{l=!1;f=f.concat(k.data.cards);b+=d;h.empty();var p=f.length,t=a("<div/>",{"class":"bbcListContainer"}).appendTo(h);e+=k.data.cards.length;g=b>=e;e<d&&(g=!1);m.stop();if(0<p){for(k=0;k<p;k++)BB.Action.BBC.adaptBBC(f[k]),BB.UI.BBC.create(t,f[k]);g?(0===a("div#user-list-loader").length&&
(n=a('<div id="user-list-loader" />'),n.appendTo(t),m=(new Spinner({lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2E9,top:"24px",left:"auto"})).spin(n[0])),a(".bbBody").unbind("scroll.UserList").bind("scroll.UserList",function(){a(this)[0].scrollHeight-a(this).scrollTop()<=a(this).outerHeight()+n.height()&&!l&&(a(".bbBody").unbind("scroll.UserList"),r())})):m&&m.stop();BB.UI.Animation.Fade.centerModal(!0)}else t.html("unexpected failure, please try later")}},
error:function(){}})};return{setup:function(a,b){var d=b.total;b.title=BB.Loc.get(1===d?"USER_LIST_TITLE":"USERS_LIST_TITLE",{AMOUNT:d,LIST_TARGET:1===d?"LIKES":"LIKE"});b.lang=BB.Loc.keys;return b},create:function(l,n,t){var w=a('<div id="user-list-loader" />');k=n;h=l;w.appendTo(l);b=0;d=25;e=0;f=[];g=!0;m=(new Spinner({lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2E9,top:"24px",left:"auto"})).spin(w[0]);a(m.el).css("left",
"50%");"function"===typeof t&&t();r()},finish:function(){}}}(jQuery);BB.UI=BB.UI||{};
(function(a){BB.UI.DropDownBase={createContainer:function(b,d,e){return a('<div class="bbDropDown '+b+d+e+'"><span class="icon"></span></div>')},createHead:function(){return a('<div class="head"></div>')},getSubclassFromOpts:function(a){return a&&"string"===typeof a.subclass&&0<a.subclass.length?a.subclass:""},getSkinClass:function(a){return a?" bbDark":""},getSizeClassFromSelect:function(a){return a.hasClass("bbSmall")?" bbSmall":a.hasClass("bbLarge")?" bbLarge":""}}})(jQuery);
BB.UI.DropDownMessenger=new BB.Core.MessageController({name:"dropDownMessenger"});
BB.UI.DropDown=function(a){var b=function(b,e){var f=BB.Core.Util.createRandomId(),g=a(b),k=this,h=BB.UI.DropDownBase.getSubclassFromOpts(e),m=0,l=-1,n=!1,r=[],q=[],p=g.parent(),t=g.hasClass("bbDark"),t=BB.UI.DropDownBase.getSkinClass(t),w=BB.UI.DropDownBase.getSizeClassFromSelect(g),u=BB.UI.DropDownBase.createContainer(h,t,w).appendTo(p),v=BB.UI.DropDownBase.createHead(),x=a('<div class="cape closed"></div>'),y={},B=a('<ul class="cape-content"></ul>'),C=g.data("binderData"),z,H=g.data("cape-max-height")||
300,E,I=null,F="",A,G=!1,D=!1,J=function(a){var b;D=!1;if("string"===typeof a)v.text(a);else if(!(0>a||a>=r.length)){b=r[a];v.text(b.text());g.val(b.val());z&&z.sendMessage("",{id:C.target,filter:r[a].val()});null!==I&&I.removeClass("hover");I=q[a];I.addClass("hover");B.find(".selected").removeClass("selected");a=q[a];b=a.position();var d=B.position(),e=x.height(),f=b.top+d.top;0>f?B.css("top",d.top-f):f+a.height()>e&&B.css("top",e-a.height()-b.top)}},L=function(a){J(a);g.change()},M=function(b){var d=
g.val();a(B).find("li").each(function(b,e){a(this).data("optionValue")===d?a(this).addClass("selected"):a(this).removeClass("selected")});J(b)},K=function(){n?(x.removeClass("open").addClass("closed"),B.css("top",-x.height())):(x.removeClass("open").addClass("closed"),B.css("top",-m));n=!1},N=function(){m=B.outerHeight()+2;m>H&&(m=H);x.css({height:m})},P=function(b){n||(b&&(b.stopPropagation(),b.preventDefault()),N(),B.css("visibility",""),a(".bbDropDown .cape").removeClass("open").addClass("closed"),
x.addClass("open").removeClass("closed"),B.css("top","-1px"),n=!0,a("body").bind("click.dropdown",O))},O=function(b){var d,e,f,g;if(b&&(b=a(b.target),b.hasClass("cape-item"))){e=-1;f=B.find("li");g=f.length;for(d=0;d<g;d++)f[d]===b[0]?(e=d,a(f[d]).addClass("selected")):a(f[d]).removeClass("selected");L(e)}K();a("body").unbind("click.dropdown",O)},Q=function(a){isNaN(E)&&(E=0<=a?-1:r.length);E+=a;0>E?E=0:E>=r.length&&(E=r.length-1);G=!0;J(E)},R=function(b){z=BB.Core.Util.getNamespace(b,!1);k.msgCtrl=
!1;z?(z.registerListener("",f,a.proxy(k._actionListener,k)),BB.Core.Messenger.unregisterListener("messageControllerCreated",f)):z||!1!==k.msgCtrl||(k.msgCtrl=!0,BB.Core.Messenger.registerListener("messageControllerCreated",f,function(){R(b);BB.Core.Messenger.unregisterListener("messageControllerCreated",f)}))},h=g.attr("class"),h="string"===typeof h?h.split("/s+/"):[],t=h.length;"absolute"!==p.css("position")&&p.css({position:"relative"});for(p=0;p<t;p++)switch(h[p]){case "bbLarge":case "bbSmall":case "bbDark":break;
default:u.addClass(h[p])}this._actionListener=function(b){var d,e,h,l,n=!1,m,p;if(b&&b.id&&(b.filter||""===b.filter)){if(g.attr("id")===b.id||g.data("binderId")===b.id)for(d in y)if(y.hasOwnProperty(d))for(e=y[d],m=e.length,h=0;h<m;h++)l=d!==b.filter&&b.filter?"none":"list-item",p=a(e[h]),p.css("display",l),"list-item"!==l||n||(n=!0,M(h))}else b&&b.action&&("set"===b.action?k.setByValue(b.val):"clearListeners"===b.action&&z.unregisterListener("",f));for(h=b=0;h<q.length;h++)p=q[h],"list-item"===p.css("display")&&
(0===b%2?p.addClass("even"):p.removeClass("even"),b++)};this.setByValue=function(a){var b,d=r.length;for(b=0;b<d;b++)if(r[b].val()===a){L(b);break}};this.setByIndex=function(a){L(a)};this.val=function(){return D?null:g.val()};this.getElem=function(){return u};this.getPid=function(){return f};(function(){var b,d;g.css({opacity:0,height:1});b=g.outerWidth();g.css("display","none");g.unbind("wicketchange").bind("wicketchange",function(){M(this.selectedIndex)});u.data("selectElement",g);u.data("bbDropDown",
this);d=g.attr("tabindex");"undefined"!==typeof d&&(g.attr("tabindex",""),u.attr("tabindex",d));C&&C.messenger&&R(C.messenger);g.find("option").each(function(b,d){var e=a(d),f=a('<li class="cape-item" data-option-value="'+e.val()+'">'+e.text()+"</li>");r.push(e);q.push(f);a(this).data("filter")&&(e=y[a(this).data("filter")]||(y[a(this).data("filter")]=[]),e.push(f));0===b%2&&f.addClass("even");B.append(f);f.bind("mouseenter.dropdown",function(a){E=b;f.removeClass("hover");I&&I.removeClass("hover")})});
d=0<=g[0].outerHTML.search(/selected=/i);l=g[0].selectedIndex;u.append('<span class="decoration"></span>').append(v).append(x);x.append(B);v.css({height:u.height()});u.css({width:b});N();x.css({width:b+2});B.css({visibility:"hidden",width:b+2});u.bind("click",P);K();(b=g.attr("placeholder"))&&!d?(J(b),D=!0):(-1===l&&(l=0),J(l));g.data("gui",this);u.bind("focus",function(a){u.bind("keyup.dropdown",function(a){var b,d;switch(a.which){case 32:n?(K(),g.change()):P();break;case 40:Q(1);break;case 38:Q(-1);
break;case 13:K();default:if(a=String.fromCharCode(a.which),a.match(/[a-z0-9]/i)){F+=a.toLowerCase();a=r.length;for(b=0;b<a;b++)if(d=r[b],0===d.text().toLowerCase().indexOf(F)){L(b);break}r.forEach(function(a,b){});clearInterval(A);A=setTimeout(function(){F=""},1E3)}}})});u.bind("blur",function(){u.unbind("keyup.dropdown");K();G&&g.change();G=!1})}).call(this)};return{create:function(d,e){a(d).each(function(d,g){return new b(a(g),e)})},set:function(a,b){"function"===typeof a.data&&a.data("gui")&&
a.data("gui").setByValue(b)},setByIndex:function(a,b){"function"===typeof a.data&&a.data("gui")&&a.data("gui").setByIndex(b)}}}(jQuery);
BB.UI.Spinner=function(a){return{BUTTON:{length:3,width:2,radius:5,color:"#fff",trail:60},BUTTON_SMALL:{length:3,width:2,radius:3,color:"#fff",trail:60},STANDARD:{},SMALL:{length:3,width:2,radius:3,color:"#BCBDBC"},LARGE:{length:20,width:8,radius:20,color:"#bcbdbc"},create:function(b,d){var e=a(b),f;if(d===BB.UI.Spinner.BUTTON_SMALL||d===BB.UI.Spinner.BUTTON)f=e.children(),f.length||(f=a("<span/>").html(e.html()),e.html(""),f.appendTo(e)),f.css("visibility","hidden");f=e.get(0);f=(new Spinner(d)).spin(f);
f=new BB.UI.Spinner.Instance(e,f);e.data("spinner",f);return f}}}(jQuery);BB.UI.Spinner.Instance=function(a,b){return{stop:function(){b.stop();b.opts!==BB.UI.Spinner.BUTTON&&b.opts!==BB.UI.Spinner.BUTTON_SMALL||a.children().css("visibility","")},spin:function(){b.spin()}}};
BB.Action.SocialMedia=function(a){var b=["email","user_birthday"],d=["email","user_birthday","publish_actions"],e="id first_name last_name email birthday gender name".split(" "),f=function(a){window.fbAsyncInit=function(){FB.init({appId:"197335844169",status:!0,cookie:!0,xfbml:!0,version:"v2.2"});a&&"function"===typeof a&&FB.getLoginStatus(a)};window.FB?(FB.init({appId:"197335844169",status:!0,cookie:!0,xfbml:!0,version:"v2.2"}),a&&"function"===typeof a&&FB.getLoginStatus(a)):function(a){var b=a.getElementsByTagName("script")[0];
a.getElementById("facebook-jssdk")||(a=a.createElement("script"),a.id="facebook-jssdk",a.async=!0,a.src="https://connect.facebook.net/en_US/all.js",b.parentNode.insertBefore(a,b))}(document)},g=function(){return FB.getAccessToken()},k=function(a){f();FB.getLoginStatus(function(b){FB.api("/me",{fields:e.join(",")},a)})},h=function(a){f();FB.getLoginStatus(function(b){FB.api("/me/permissions",a)})},m=function(a,d){f();d=d||b;FB.login(function(b){b.authResponse?k(a):a(b)},{scope:d.join(",")})},l=function(b){b||
(b={});b.error||(b.error=a.noop);b.success||(b.success=a.noop);g()?k(function(a){var d;a&&a.id?(d=g(),a=a.id,BB.API.send("index/loginwithfacebook",{socialuserid:a,accesstoken:d},{success:function(a){"string"===typeof a&&(a=jQuery.parseJSON(a));a?a.data.token?b.success(a):b.error({err_msg:"No user found for that Facebook user",data:null}):b.error({err_msg:"There was an error logging the user into Facebook",data:null})},error:b.error})):b.error({err_msg:"There was an error logging the user into Facebook",
data:null})}):m(function(a){a.id?l(b):b.success({err_msg:"The user cancelled the login process",data:null})})};return{facebookAppId:"197335844169",getFacebookAccessToken:g,getFacebookLoginStatus:function(a){f();FB.getLoginStatus(a)},getFacebookLoggedInUser:k,authenticateFacebookUser:m,authenticateFacebookUserExtended:function(a){m(a,d)},loginWithFacebook:l,saveFacebookAccessToken:function(a,b,d){a={userid:BB.Data.User.get("id"),accesstoken:a,socialuserid:b,network:"facebook"};BB.API.send("socialmedia/saveaccesstoken",
a,d)},deleteFacebookAccessToken:function(a){var b={userid:BB.Data.User.get("id"),network:"facebook"};BB.API.send("socialmedia/deleteaccesstoken",b,a)},getFacebookFriends:function(a,b,d,e,f,g){"object"===typeof f&&(g=f,f=!1);a={userid:a,network:"facebook",offset:d,limit:e,random:f};b?BB.API.send("socialmedia/getfriendsonbodyspace",a,g):BB.API.send("socialmedia/getfriendstoinvite",a,g)},addAllFacebookFriends:function(a){var b={userid:BB.Data.User.get("id"),network:"facebook"};BB.API.send("socialmedia/addfriends",
b,a)},isPublishPermissionSet:function(a){h(function(b){a(1===b.data[0].publish_actions)})},addInvited:function(a,b,d){a={userid:BB.Data.User.get("id"),network:b,socialuserid:a};BB.API.send("socialmedia/addinvited",a,d)},shareLink:function(a,b,d){FB.ui({method:"share",href:a},d)},savePreference:function(a,b,d,e){a={userid:BB.Data.User.get("id"),network:b,preference:a,enabled:d};BB.API.send("socialmedia/savepreference",a,e)}}}(jQuery);
(function(a){BB.createNamespace("BB.UI.Social");var b=function(a,b){var f=BB.Action.SocialMedia.getFacebookAccessToken(),g=a.id;BB.Data.Cache.set("Facebook","account-connected",!0,"session");BB.Action.SocialMedia.saveFacebookAccessToken(f,g,b)};BB.UI.Social.FacebookButton=function(b){b||(b={});this.text=b.text||BB.Loc.get("CONNECT_TO_FACEBOOK");this.size=b.size||"medium";this.click=b.click||a.noop;this.disclaimerText=b.disclaimerText||null;this.renderTo=function(b){var d=this;BB.UI.TemplateCatalog.render("FacebookButton",
{text:d.text,size:d.size},function(g,k){!b instanceof jQuery&&(b=a(b));b.html(k);b.find("a.social-button").bind("click.FacebookButton",function(a){a.preventDefault();d.click.call(this)});d.disclaimerText&&"string"===typeof d.disclaimerText&&b.find("div.social-button-container").append('<span class="social-disclaimer-text">'+d.disclaimerText+"</span>")})}};BB.UI.Social.FacebookButton.LoginAction=function(b){var e=this,f;this.loading=this.loading||!1;this.loading||(f=BB.UI.Spinner.create(a(e),BB.UI.Spinner.BUTTON_SMALL),
this.loading=!0,BB.Action.SocialMedia.loginWithFacebook({success:function(g){if(g&&g.data){var k="rightSideBarFacebookButton";a(".login-with-facebook-button")[0]&&(k="topNavBarFacebookButton");BB.Data.Cache.set("signup","userIsInFacebookLogin",k,"local",864E5);b?(b(g.data.userId,g.data.token),BB.UI.Modal.Base.finish()):location.reload(!0)}else f.stop(),e.loading=!1},error:function(b){e.loading=!1;b&&506===b.ret_code?(f.stop(),BB.UI.Signup.BootStrap.create.call(a(e),null,{headerMessage:BB.Loc.get("NO_FB_BS_USER"),
facebookData:!0})):console.error("BB.Action.SocialMedia.loginWithFacebook error. Is the server configured to support Facebook login?",b)}}))};BB.UI.Social.FacebookButton.ConnectAccount=function(){var d=this,e,f={success:function(a){window.location=window.location},error:function(a){e&&e.stop();d.loading=!1;BB.Action.Tooltip.triggerError(d,"There was an error connecting your account to Facebook.")}};this.loading=this.loading||!1;this.loading||(e=BB.UI.Spinner.create(a(d),BB.UI.Spinner.BUTTON_SMALL),
this.loading=!0,BB.Action.SocialMedia.getFacebookAccessToken()?BB.Action.SocialMedia.getFacebookLoggedInUser(function(a){b(a,f)}):BB.Action.SocialMedia.authenticateFacebookUser(function(a){a.id?b(a,f):(e.stop(),d.loading=!1)}))}})(jQuery);(function(){BB.UI.TemplateCatalog.set("FacebookButton","<div class='social-button-container'><a href='#' class='social-button facebook-button {size}'><div class='social-button-content'><div class='icon'></div><span>{text}</span></div></a></div>")})();
BB.Action.Helpful=function(a){var b=function(a,b,f){BB.API.send("helpful/"+a,b,f)};return{call:function(a,e,f,g,k){b(a?"add":"remove",{ownerid:e,entityid:f,type:g},k)},add:function(a,e,f,g,k){a={userid:a,ownerid:e,entityid:f,helpful:g,ts:(new Date).getTime()};b("add",a,k)},remove:function(a,e,f,g){a={userid:a,ownerid:e,entityid:f,ts:(new Date).getTime()};b("remove",a,g)},getByUser:function(d,e,f){d={userid:d,entityids:a.isArray(e)?e.join(","):e};b("getbyuser",d,f)},getByEntity:function(d,e,f){d={userids:a.isArray(d)?
d.join(","):d,entityid:e};b("getbyentity",d,f)},getCounts:function(d,e){var f={ids:a.isArray(d)?d.join(","):d};b("getcounts",f,e)}}}(jQuery);(function(){BB.UI.TemplateCatalog.keys.Comment_Input="Comment_Input";BB.UI.TemplateCatalog.set("Comment_Input",'<div class="comment-modal-container"><textarea class="bbTextArea" data-placeholder="{watermarkText}" data-action=\'{"ns":"BB.UI.Input.Base","method":"create"}\' data-max-length="2500"></textarea></div>')})();BB.createNamespace("BB.UI.Comment");
BB.UI.Comment.Input=function(a){var b,d,e,f,g,k,h={onCommentPost:a.noop},m=function(a){BB.Action.Tooltip.triggerError(d,a||BB.Loc.get("ERROR_ADDING_COMMENT"),!0)},l=function(){a(".bbTooltip.onModal").remove()},n=function(){BB.UI.Modal.Base.setPreConditionToClose(null);l();BB.UI.Modal.Base.finish()},r=function(a){f.val("").trigger("keyup").trigger("blur");a&&n()},q=function(a,b,e,f){k=BB.UI.Spinner.create(d,BB.UI.Spinner.BUTTON);BB.Action.Comment.addComment(a,b,e,f,g.ownerId,{success:function(a){BB.UI.Spinner.Instance(d,
k).stop();switch(a.ret_code){case 200:r(!0);h.onCommentPost(a);break;case 900:m(BB.Loc.get("COMMENT_THROTTLED"));break;case 702:r(!1);m(BB.Loc.get("COMMENT_MARKED_AS_SPAM"));break;default:m()}},error:function(a,b,e){BB.UI.Spinner.Instance(d,k).stop();m()}})};return{setup:function(b,d){d.p=d.p||{};d.p.plugableContainers=[{nsTemplate:BB.UI.Comment.Input.footer,targetContainer:"footer"}];h=a.extend(h,d.p);return a.extend({title:BB.Loc.get("COMMENT"),watermarkText:BB.Loc.get("LEAVE_COMMENT"),cancelText:BB.Loc.get("CANCEL"),
addText:BB.Loc.get("ADD")},d.p)},create:function(e,h,k){g=h;BB.UI.TemplateCatalog.render(BB.UI.TemplateCatalog.keys.Comment_Input,h,function(g,h){e.html(h);"function"===typeof a.clearwatermarks&&(a.clearwatermarks(),a.addwatermarks());b=a(".comment-modal-container");f=b.find("textarea");BB.Action.Binder.wire(f);BB.App.Mentions.initialize(f);f.autogrow();f.bind("keyup.CommentModal keydown.CommentModal paste.CommentModal",function(b){1>a.trim(a(this).val()).length?d.attr("disabled","disabled"):d.removeAttr("disabled");
l()});BB.UI.Modal.Base.setPreConditionToClose(function(a,b){return f.val()?(l(),BB.Action.Tooltip.trigger.call(b,{data:{nsTemplate:"BB.UI.Prompt.Confirm",closeIcon:!0,closeOnBodyClick:!0,additionalClass:"promptConfirm onModal",message:BB.Loc.get("CANCEL_COMMENT"),onConfirm:n}}),!1):!0});"function"===typeof k&&k()})},finish:function(){l()},footer:{setup:function(a,b){return b},create:function(b,h){a('<div class="comment-modal-footer"><div disabled="disabled" class="bbButton primaryAction bb-btn bb-btn--primary add-comment-button"><span>ADD</span></div><span class="cancel-comment-button bb-btn">Cancel</span></div>').appendTo(b);
d=b.find(".add-comment-button");e=b.find(".cancel-comment-button");e.bind("click.CommentModal",BB.UI.Modal.Base.finish);d.bind("click.CommentModal",function(b){var d=a.trim(f.parent().find(".mentionMessage").val());b.preventDefault();l();1<d.length&&BB.Action.Comment.bindEntity(g.type,g.entityId,{success:function(a){q(d,a.data,g.entityId,g.type)},error:function(a){m()}})})},finish:function(){}}}}(jQuery);
(function(){BB.UI.TemplateCatalog.keys.HelpfulCountsPanel_std="HelpfulCountsPanel_std";BB.UI.TemplateCatalog.keys.HelpfulVotePanel_std="HelpfulVotePanel_std";BB.UI.TemplateCatalog.set("HelpfulCountsPanel_std",'<div class="helpful-statement">{helpful} of {totalStr} {@select key=totalStr}{@eq value="1"}person{/eq}{@none}people{/none}{/select} found this {title} helpful.</div>');BB.UI.TemplateCatalog.set("HelpfulVotePanel_std",'<div class="helpful-vote">{@select key=isHelpful}{@eq value="true"}You found this {title} helpful. <a class="helpful-undo-button bbBinder" data-action="activeRequired" href="#">Undo</a>{/eq}{@eq value="false"}You did not find this {title} helpful. <a class="helpful-undo-button bbBinder" data-action="activeRequired" href="#">Undo</a>{/eq}{@none}Was this {title} helpful to you? <a class="helpful-yes-button bbBinder" data-action="activeRequired" href="#">Yes</a> | <a class="helpful-no-button bbBinder" data-action="activeRequired" href="#">No</a>{/none}{/select}</div>')})();
BB.UI.HelpfulCountPanel=function(a){var b;return{callbacks:{likeChange:a.noop},create:function(a,e,f,g){void 0!==a&&"object"===typeof a&&(b="HelpfulCountsPanel_"+(g||"std"),a.title=e,a.totalStr=a.total.toString(),BB.UI.TemplateCatalog.render(b,a,function(a,b){f.html(b)}))}}}(jQuery);
BB.UI.HelpfulVotePanel=function(a){var b;return{callbacks:{undoHelpfulAction:a.noop,yesHelpfulAction:a.noop,noHelpfulAction:a.noop},create:function(d,e,f,g,k){void 0!==d&&"object"===typeof d&&(b="HelpfulVotePanel_"+(g||"std"),d.title=e,void 0!==d.isHelpful&&(d.isHelpful=d.isHelpful.toString()),BB.UI.TemplateCatalog.render(b,d,function(b,e){f.html(e);BB.Data.User.get("id")?BB.Data.User.get("isActive")?(f.find("a.helpful-undo-button").bind("click.HelpfulService",function(a){a.preventDefault();"undefined"!==
k.undoHelpfulAction&&k.undoHelpfulAction(d);BB.Action.Helpful.remove(d.userId,d.ownerId,d.entityId)}),f.find("a.helpful-yes-button").bind("click.HelpfulService",function(a){a.preventDefault();"undefined"!==k.yesHelpfulAction&&k.yesHelpfulAction(d);BB.Action.Helpful.add(d.userId,d.ownerId,d.entityId,!0)}),f.find("a.helpful-no-button").bind("click.HelpfulService",function(a){a.preventDefault();"undefined"!==k.noHelpfulAction&&k.noHelpfulAction(d);BB.Action.Helpful.add(d.userId,d.ownerId,d.entityId,
!1)})):BB.Action.Binder.wire(f.find(".bbBinder")):f.find("a").bind("click.HelpfulService",function(b){b.preventDefault();b.data={nsTemplate:"BB.UI.Login"};BB.Action.Modal.trigger.call(a(this),b)})}))}}}(jQuery);(function(){BB.UI.TemplateCatalog.keys.CommentCountsPanel_std="CommentCountsPanel_std";BB.UI.TemplateCatalog.set("CommentCountsPanel_std",'<span class="comment-count-container"><a href="#" class="comment-text-link">{commentText}</a> <a href="#" class="comment-count-link"><div class="icon"></div><span class="count">{count}</span></a></span>')})();
BB.UI=BB.UI||{};
BB.UI.CommentCountPanel=function(){var a;return{callbacks:{},create:function(b,d,e,f,g){b={count:d||0,commentText:BB.Loc.get("COMMENT")};a="CommentCountsPanel_"+(g||"std");BB.UI.TemplateCatalog.render(a,b,function(a,b){e.html(b);e.find(".comment-text-link").bind("click.CommentLink",function(a){a.preventDefault();if(BB.Action.ActiveRequired.trigger.call(this,a)&&f.onTextClick&&"function"===typeof f.onTextClick)f.onTextClick()});e.find(".comment-count-link").bind("click.CommentLink",function(a){a.preventDefault();
if(f.onCountClick&&"function"===typeof f.onCountClick)f.onCountClick()})})}}}();BB.createNamespace("BB.UI.Comment");
BB.UI.Comment.CommentCount=function(a){var b=new BB.Data.CommentData,d={},e=function(a){var b="";a.entityId&&(b+=a.entityId);a.commentType&&(b+=a.commentType);return b};b.dataRetrieved=function(a){var b,k=0,h;for(b in a)if(a.hasOwnProperty(b))try{for(h=d[e(a[b].parameters)].elements.length,k=0;k<h;k++){var m=d[e(a[b].parameters)].elements[k];a[b].parameters.permalink&&0<a[b].commentsCount?m.find(".count").html('<a href="'+a[b].parameters.permalink+'">'+a[b].commentsCount+"</a> "):m.find(".count").text(a[b].commentsCount)}}catch(l){}};
return{create:function(f,g){a.extend(g,{initialNumberOfComments:1});d[e(g)]&&d[e(g)].elements&&-1!==d[e(g)].elements.indexOf(f)||b.addToQueue(g);d[e(g)]||(d[e(g)]={elements:[]});d[e(g)].elements.push(f);"string"===typeof g.commentType&&0<g.commentType.length&&(f.html('<span class="comment-count-container"><a href="#" class="comment-text-link">Comment</a> <span class="comment-count-link"><div class="icon"></div><span class="count">0</span></span> </span>'),f.find(".comment-text-link").unbind("click.CommentLink").bind("click.CommentLink",
function(b){b.preventDefault();BB.Action.ActiveRequired.trigger.call(this,b)&&BB.Action.Modal.trigger({data:{nsTemplate:"BB.UI.Comment.Input",p:{type:g.commentType,entityId:g.entityId,externalRef:g.entityId,ownerId:g.ownerId,onCommentPost:function(b){b=f.find(".count");var d=parseInt(b.text(),10);b.html(a('<a href="'+g.permalink+'">'+(d+1)+"</a>"))}}}})}))}}}(jQuery);BB.createNamespace("BB.UI.Social");
BB.UI.Social.MiniFacebookFriends=function(a){var b=[],d=function(a){a||(a={});var d=this,e=a.userId||BB.Data.User.get("id"),f="boolean"===typeof a.isMember?a.isMember:!1,g=a.offset||0,h=a.limit||2,k=a.buttonText||"Add Friend",l=a.panelTitle||"Add Friends";BB.UI.TemplateCatalog.set("SingleUserTemplate",'         <div class="friend-item">             <a href="#" class="facebook-friend-panel" data-user={userId}>                 <div class="avatar-container">                     {@eq key=isMobile value=false}                         <img src="{largeAvatar}" alt="{realName}" />                     {:else}                         <img src="{largeAvatar}" alt="{realName}" />                     {/eq}                 </div>                 <div class="friend-info-container">                     <div class="user-name-container">                         {@gt key=username.length value=0}                             <span class="first-container trunc">{realName}</span>                             <span class="second-container trunc">{username}</span>                         {:else}                             <span class="first-container">{realName}</span>                         {/gt}                     </div>                     <div class="button-container">                         {@eq key=isMobile value=false}                             {buttonText}                         {:else}                             <div class="bbButton primaryAction"><span>{buttonText}</span></div>                         {/eq}                     </div>                 </div>             </a>         </div>');
BB.UI.TemplateCatalog.set("UserTemplate",'<div class="social-friends-container">     <h5 class="Mini-feed__heading">{panelTitle|s}</h5>     {#users}          <div class="friend-item">             <a href="#" class="facebook-friend-panel" data-user={userId}>                 <div class="avatar-container">                     {@eq key=isMobile value=false}                         <img src="{largeAvatar}" alt="{realName}" />                     {:else}                         <img src="{largeAvatar}" alt="{realName}" />                     {/eq}                 </div>                 <div class="friend-info-container">                     <div class="user-name-container">                         {@gt key=username.length value=0}                             <span class="first-container trunc">{realName}</span>                             <span class="second-container trunc">{username}</span>                         {:else}                             <span class="first-container">{realName}</span>                         {/gt}                     </div>                     <div class="button-container">                         {@eq key=isMobile value=false}                             {buttonText}                         {:else}                             <div class="bbButton primaryAction"><span>{buttonText}</span></div>                         {/eq}                     </div>                 </div>             </a>         </div>{/users}</div>');
var m=function(a,b){b="boolean"===typeof b?b:!1;p&&BB.Action.SocialMedia.getFacebookFriends(e,f,g,h+2,!0,{success:function(e){if(!(e&&0!==e.data.users.length||b))return a(e.data),d.isEmpty=!0,d.onEmpty.call(n);g+=h+2;var f=e.data.users.length-1;for(f;0<=f;f--)f>=h&&(q.push(e.data.users[f]),e.data.users.splice(f,1));"function"===typeof a&&a(e.data);g>e.data.total&&(p=!1)},error:function(){d.isEmpty=!0;d.onError.call(n)}})},n,p=!0,q=[];this.onClick="function"===typeof a.onClick?a.onClick:$.noop;this.isFullyRendered=
!1;this.onRender="function"===typeof a.onRender?a.onRender:$.noop;this.onEmpty="function"===typeof a.onEmpty?a.onEmpty:$.noop;this.isEmpty=!1;this.onError="function"===typeof a.onError?a.onError:$.noop;this.swapUser=function(a){b.push(a);var e=$("<div />"),f=n.find("a.facebook-friend-panel").filter(function(b){return $(this).data("user").toString()===a.toString()?!0:!1}).parents("div.friend-item");if(f&&0!==f.length){var g=f.outerHeight();n.css("height",n.height());f.before(e);f.fadeOut("fast",function(){if(0===
n.find("div.friend-item:visible").length)d.isEmpty=!0,d.onEmpty.call(n);else if(0===q.length)n.animate({height:"-="+g},"fast");else{var a=q.pop(),a=$.extend({},a,{buttonText:k,panelTitle:l,userId:a.bodySpaceUserId||a.userId,isMobile:0<$("div#mobile-right-frame").length});BB.UI.TemplateCatalog.render("SingleUserTemplate",a,function(a,b){e.css("opacity","0").html(b).animate({opacity:1},"fast");n.removeAttr("style")});m()}})}};this.renderTo=function(a){n=a;var b;b=e?!0:!1;if(!b)return d.isEmpty=!0,d.onError.call(n);
m(function(b){b=$.extend({},b,{buttonText:k,panelTitle:l,isMobile:0<$("div#mobile-right-frame").length});var e,f;if(b.users)for(f=b.users.length,e=0;e<f;e++)b.users[e].bodySpaceUserId&&(b.users[e].userId=b.users[e].bodySpaceUserId);BB.UI.TemplateCatalog.render("UserTemplate",b,function(b,e){a.html(e);a.on("click.FacebookFriends","a.facebook-friend-panel",d.onClick);d.isFullyRendered=!0;d.onRender()})})}};a||(a={});var e=this,f=0<$("div#mobile-right-frame").length,g=f?" <span class='separator'>|</span> <a href=\"//bodyspace.bodybuilding.com/community/facebook-friends\">View All</a>":
"",k=new d($.extend({isMember:!0,buttonText:"Add Friend",panelTitle:"Add Friends"+g},a)),h=new d($.extend({isMember:!1,buttonText:f?"Invite":"Invite to BodySpace",panelTitle:"Invite Friends"+g},a)),m,l,n=function(){if(f||k.isFullyRendered&&h.isFullyRendered)m&&m.stop(),l.find("div.mini-social-feed").slideDown("fast")},r=$.extend({},BB.UI.Spinner.BUTTON,{color:"#000",radius:6,width:3,length:5}),q=function(a,b){a.find("a.facebook-friend-panel").animate({opacity:"0.2"},"fast",function(){var d=BB.UI.Spinner.create(a,
r);b&&"function"===typeof b&&b(d)})},p=!1,t=function(){k.isEmpty&&h.isEmpty&&!p&&(p=!0,e.onEmpty.call(l))};k.onClick=function(a){a.preventDefault();a.stopPropagation();var b=$(this).data("user"),d=$(this),e=d.parents("div.friend-item");q(e,function(a){d.friendSpinner=a});BB.Action.Follow.addFriendWithReference(b,void 0,2,{success:function(a){k.swapUser(b)},error:function(a){d.friendSpinner.stop();BB.Action.Tooltip.triggerError(e,"There was an error sending friend request. Please try again.",!1,!1)}})};
k.onEmpty=function(){var a=$(this);$(this).slideUp("fast",function(){t();a.css("display","none")})};k.onError=function(){$(this).slideUp("fast",function(){t()})};k.onRender=function(){n()};h.onClick=function(a){a.preventDefault();var b=$(this).data("user"),d=$(this).parents("div.friend-item");FB.ui({to:b,method:"send",link:"http://bodyspace.bodybuilding.com?mcid=bsfriendinvite&bbuserid="+BB.Data.User.get("id")},function(a){a&&a.success&&(q(d),BB.Action.SocialMedia.addInvited(b,"facebook",{success:function(a){BB.Action.Omniture&&
BB.Action.Omniture.post("fbinvite");h.swapUser(b)},error:function(a){h.swapUser(b)}}))})};h.onEmpty=function(){var a=$(this);$(this).slideUp("fast",function(){t();a.css("display","none")})};h.onError=function(){$(this).slideUp("fast",function(){t()})};h.onRender=function(){n()};this.onEmpty="function"===typeof a.onEmpty?a.onEmpty:$.noop;this.renderTo=function(a){var b=$('<div class="mini-social-feed-container"><div class="mini-social-feed"></div></div>').appendTo(a),d=b.find("div.mini-social-feed"),
e=BB.UI.Spinner.STANDARD;l=a;f&&(e.color="#FFF");m=BB.UI.Spinner.create(b,e);k.renderTo($('<div class="add-friends-panel" />').appendTo(d));f||(h.renderTo($('<div class="invite-friends-panel" />').appendTo(d)),d.append($("<div />",{"class":"user-actions social-user-actions",html:function(){return'<div class="Mini-feed__entry clearfix"><a class="Mini-feed__link" href="http://bodyspace.bodybuilding.com/community/facebook-friends">View All</a></div>'}})))}};
